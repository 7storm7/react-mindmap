(window["webpackJsonpreact-mindmap"]=window["webpackJsonpreact-mindmap"]||[]).push([[0],{197:function(e,t,n){e.exports=n(659)},202:function(e,t,n){},64:function(e,t,n){window,e.exports=function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t){e.exports=n(0)},function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t}(n(0).Component);t.BaseWidget=i},function(e,t){e.exports=n(204)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n(11),i=n(9),a=n(27),s=n(8),c=n(28),u=n(29);!function(e){e[e.UNDO=0]="UNDO",e[e.REDO=1]="REDO",e[e.TOGGLE_COLLAPSE=2]="TOGGLE_COLLAPSE",e[e.SET_ITEM_CONTENT=3]="SET_ITEM_CONTENT",e[e.FOCUS_ITEM=4]="FOCUS_ITEM",e[e.SET_EDIT_ITEM_KEY=5]="SET_EDIT_ITEM_KEY",e[e.SET_FOCUS_ITEM_MODE=6]="SET_FOCUS_ITEM_MODE",e[e.SET_POPUP_MENU_ITEM_KEY=7]="SET_POPUP_MENU_ITEM_KEY",e[e.ADD_CHILD=8]="ADD_CHILD",e[e.ADD_SIBLING=9]="ADD_SIBLING",e[e.DELETE_NODE=10]="DELETE_NODE",e[e.DRAG_AND_DROP=11]="DRAG_AND_DROP"}(o=t.OpType||(t.OpType={}));var p=function(){function e(){}return e.op=function(t,n,r,i){if(n===o.DELETE_NODE&&console.log(n),e.opMap.has(n)){var a=e.opMap.get(n)(t,r,i);return n!==o.UNDO&&n!==o.REDO&&n!==o.FOCUS_ITEM&&n!==o.SET_ITEM_CONTENT&&(e.undoStack=e.undoStack.push(a)),a}return t},e.undo=function(t){return e.undoStack.size>1&&(t=e.popUndoStack(),e.pushRedoStack(t),t=e.undoStack.peek()),t},e.redo=function(t){return e.redoStack.size>0&&(t=e.popRedoStack(),e.pushUndoStack(t)),t},e.pushUndoStack=function(t){e.undoStack=e.undoStack.push(t)},e.popUndoStack=function(){var t=e.undoStack.peek();return e.undoStack=e.undoStack.pop(),t},e.pushRedoStack=function(t){e.redoStack=e.redoStack.push(t)},e.popRedoStack=function(){var t=e.redoStack.peek();return e.redoStack=e.redoStack.pop(),t},e.toggleCollapse=function(t,n){var o=t.getItem(n);return 0!==o.getSubItemKeys().size&&(o=o.merge({collapse:!o.getCollapse()}),t=e.setItem(t,o)),t},e.setItem=function(e,t){return e.update("itemMap",function(e){return e.set(t.getKey(),t)})},e.focusItem=function(e,t){return t!==e.getFocusItemKey()&&(e=e.set("focusItemKey",t)),e},e.setFocusItemMode=function(e,t,n){return n!==e.getFocusItemMode()&&(e=e.set("focusItemMode",n)),e},e.setEditingItemKey=function(e,t){return console.log("set editing item key "+t),t!==e.getEditingItemKey()&&(t!==e.getFocusItemKey()&&(e=e.set("focusItemKey",t)),e.get("focusItemMode")!==i.FocusItemMode.Editing&&(e=e.set("focusItemMode",i.FocusItemMode.Editing))),e},e.setPopupMenuItemKey=function(e,t){return console.log("set popup menu item key "+t),t!==e.getPopupMenuItemKey()&&(t!==e.getFocusItemKey()&&(e=e.set("focusItemKey",t)),e.get("focusItemMode")!==i.FocusItemMode.PopupMenu&&(e=e.set("focusItemMode",i.FocusItemMode.PopupMenu))),e},e.setItemContent=function(t,n,o){var r=t.getItem(n),i=!1;return r&&(0===e.undoStack.size&&e.pushUndoStack(t),r.getContent()instanceof c.Value&&(i=r.getContent().document!==o.document),r=r.merge({content:o}),t=e.setItem(t,r)),t=t.set("focusItemKey",n),i&&e.pushUndoStack(t),t},e.addChild=function(t,n){var o=t.getItem(n);if(o){var i=r.MindNodeModel.create(a.uuidv4());i=i.set("parentKey",o.getKey()),o=o.set("collapse",!1).update("subItemKeys",function(e){return e.push(i.getKey())}),t=t.update("itemMap",function(e){return e.set(o.getKey(),o).set(i.getKey(),i)}),t=e.setEditingItemKey(t,i.getKey())}return t},e.addSibling=function(t,n){var o=t.getItem(n);if(n===t.getRootItemKey())return t;if(o){var i=r.MindNodeModel.create(a.uuidv4());i=i.set("parentKey",o.getParentKey());var s=t.getParentItem(n);s=s.update("subItemKeys",function(e){return e.insert(e.indexOf(n)+1,i.getKey())}),t=t.update("itemMap",function(e){return e.set(s.getKey(),s).set(i.getKey(),i)}),t=e.setEditingItemKey(t,i.getKey())}return t},e.deleteNode=function(t,n){if(console.log("deleteItem "+n),n===t.getRootItemKey())return t;var o=t.getItem(n),r=t.getItem(o.getParentKey()),i=r.getSubItemKeys().indexOf(n);return r=r.update("subItemKeys",function(e){return e.delete(i)}),t=t.set("focusItemKey",o.getParentKey()).update("itemMap",function(o){var i=e.getAllSubItemKeys(t,n);return(o=o.set(r.key,r)).withMutations(function(e){e=e.delete(n);for(var t=0,o=i;t<o.length;t++){var r=o[t];e=e.delete(r)}return e})})},e.getAllSubItemKeys=function(t,n){var o=t.getItem(n),r=[];if(o.getSubItemKeys().size>0){var i=o.getSubItemKeys().toArray();r.push(i);for(var a=0,s=i;a<s.length;a++){var c=s[a];r.push(e.getAllSubItemKeys(t,c))}}return r},e.getRelation=function(e,t,n){var o=e.getItem(t),r=e.getItem(n);if(o&&r){if(o.getParentKey()==r.getParentKey())return u.NodeRelationship.Sibling;for(var i=o;i.getParentKey();){if(i.getParentKey()===r.getKey())return u.NodeRelationship.Descendant;i=e.getParentItem(i.getKey())}for(i=r;i.getParentKey();){if(i.getParentKey()===o.getKey())return u.NodeRelationship.Ancestor;i=e.getParentItem(i.getKey())}}return u.NodeRelationship.None},e.dragAndDrop=function(t,n,o){if(n===t.getEditorRootItemKey()||n===o||e.getRelation(t,n,o)===u.NodeRelationship.Ancestor)return t;var r=t.getItem(n),i=t.getItem(o);if(r.getParentKey()===o)return t;var a=r.getParentKey(),s=t.getItem(a).getSubItemKeys(),c=s.indexOf(n);s=s.delete(c);var p=i.getSubItemKeys();return p=p.push(n),t.withMutations(function(e){e.setIn(["itemMap",a,"subItemKeys"],s).setIn(["itemMap",n,"parentKey"],o).setIn(["itemMap",o,"subItemKeys"],p).setIn(["itemMap",o,"collapse"],!1)})},e.undoStack=s.Stack(),e.redoStack=s.Stack(),e.opMap=new Map([[o.UNDO,e.undo],[o.REDO,e.redo],[o.TOGGLE_COLLAPSE,e.toggleCollapse],[o.SET_ITEM_CONTENT,e.setItemContent],[o.FOCUS_ITEM,e.focusItem],[o.SET_FOCUS_ITEM_MODE,e.setFocusItemMode],[o.SET_EDIT_ITEM_KEY,e.setEditingItemKey],[o.SET_POPUP_MENU_ITEM_KEY,e.setPopupMenuItemKey],[o.ADD_CHILD,e.addChild],[o.ADD_SIBLING,e.addSibling],[o.DELETE_NODE,e.deleteNode],[o.DRAG_AND_DROP,e.dragAndDrop]]),e}();t.MindMapModelModifier=p},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n,o=e[1]||"",r=e[3];if(!r)return o;if(t&&"function"==typeof btoa){var i=(n=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),a=r.sources.map(function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"});return[o].concat(a).concat([i]).join("\n")}return[o].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var o={},r=0;r<this.length;r++){var i=this[r][0];"number"==typeof i&&(o[i]=!0)}for(r=0;r<e.length;r++){var a=e[r];"number"==typeof a[0]&&o[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(e,t,n){var o,r,i={},a=(o=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===r&&(r=o.apply(this,arguments)),r}),s=function(e){var t={};return function(e){if("function"==typeof e)return e();if(void 0===t[e]){var n=function(e){return document.querySelector(e)}.call(this,e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}}(),c=null,u=0,p=[],l=n(21);function d(e,t){for(var n=0;n<e.length;n++){var o=e[n],r=i[o.id];if(r){r.refs++;for(var a=0;a<r.parts.length;a++)r.parts[a](o.parts[a]);for(;a<o.parts.length;a++)r.parts.push(v(o.parts[a],t))}else{var s=[];for(a=0;a<o.parts.length;a++)s.push(v(o.parts[a],t));i[o.id]={id:o.id,refs:1,parts:s}}}}function f(e,t){for(var n=[],o={},r=0;r<e.length;r++){var i=e[r],a=t.base?i[0]+t.base:i[0],s={css:i[1],media:i[2],sourceMap:i[3]};o[a]?o[a].parts.push(s):n.push(o[a]={id:a,parts:[s]})}return n}function g(e,t){var n=s(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var o=p[p.length-1];if("top"===e.insertAt)o?o.nextSibling?n.insertBefore(t,o.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),p.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var r=s(e.insertInto+" "+e.insertAt.before);n.insertBefore(t,r)}}function m(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=p.indexOf(e);t>=0&&p.splice(t,1)}function y(e){var t=document.createElement("style");return void 0===e.attrs.type&&(e.attrs.type="text/css"),h(t,e.attrs),g(e,t),t}function h(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function v(e,t){var n,o,r,i;if(t.transform&&e.css){if(!(i=t.transform(e.css)))return function(){};e.css=i}if(t.singleton){var a=u++;n=c||(c=y(t)),o=M.bind(null,n,a,!1),r=M.bind(null,n,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",h(t,e.attrs),g(e,t),t}(t),o=function(e,t,n){var o=n.css,r=n.sourceMap,i=void 0===t.convertToAbsoluteUrls&&r;(t.convertToAbsoluteUrls||i)&&(o=l(o)),r&&(o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var a=new Blob([o],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,n,t),r=function(){m(n),n.href&&URL.revokeObjectURL(n.href)}):(n=y(t),o=function(e,t){var n=t.css,o=t.media;if(o&&e.setAttribute("media",o),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),r=function(){m(n)});return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else r()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=a()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=f(e,t);return d(n,t),function(e){for(var o=[],r=0;r<n.length;r++){var a=n[r];(s=i[a.id]).refs--,o.push(s)}for(e&&d(f(e,t),t),r=0;r<o.length;r++){var s;if(0===(s=o[r]).refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete i[s.id]}}}};var _,b=(_=[],function(e,t){return _[e]=t,_.filter(Boolean).join("\n")});function M(e,t,n,o){var r=n?"":o.css;if(e.styleSheet)e.styleSheet.cssText=b(t,r);else{var i=document.createTextNode(r),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n(0),i=n(25),a=n(33);!function(e){e[e.LEFT_TO_RIGHT=0]="LEFT_TO_RIGHT",e[e.RIGHT_TO_LEFT=1]="RIGHT_TO_LEFT",e[e.LEFT_AND_RIGHT=2]="LEFT_AND_RIGHT"}(o=t.DiagramLayoutDirection||(t.DiagramLayoutDirection={})),t.defaultDiagramConfig={direction:o.LEFT_AND_RIGHT,hMargin:10,vMargin:10,focusBorderPadding:5,theme:"theme-orange",rootItemStyle:{fontSize:"24px",borderRadius:"10px",padding:"10px 25px"},primaryItemStyle:{fontSize:"16px",borderRadius:"6px",padding:"0"},editorRendererFn:function(e,t,n){return r.createElement(i.DefaultNodeContentEditor,{diagramState:e,nodeKey:t,saveRef:n})},focusItemsBorderRenderFn:function(e,t,n){return r.createElement(a.DefaultFocusItemBorderSvg,{diagramState:e,saveRef:t,getRef:n,ref:t("focusItemBorderSvg")})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT",e[e.ROOT=2]="ROOT"}(t.NodeWidgetDirection||(t.NodeWidgetDirection={}))},function(e,t){e.exports=n(1)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Normal=0]="Normal",e[e.PopupMenu=1]="PopupMenu",e[e.Editing=2]="Editing"}(t.FocusItemMode||(t.FocusItemMode={}))},function(e,t,n){var o=n(24);"string"==typeof o&&(o=[[e.i,o,""]]),n(5)(o,{hmr:!0,transform:void 0,insertInto:void 0}),o.locals&&(e.exports=o.locals)},function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(8),a={key:null,parentKey:null,content:null,subItemKeys:i.List(),collapse:!1},s=function(e){function t(){return e.call(this)||this}return r(t,e),t.prototype.getKey=function(){return this.get("key")},t.prototype.getParentKey=function(){return this.get("parentKey")},t.prototype.getContent=function(){return this.get("content")},t.prototype.getSubItemKeys=function(){return this.get("subItemKeys")},t.prototype.getCollapse=function(){return this.get("collapse")},t.create=function(e,n,o,r,a){return void 0===n&&(n=null),void 0===o&&(o="new node"),void 0===r&&(r=i.List([])),void 0===a&&(a=!1),t.createWith({key:e,parentKey:n,content:o,subItemKeys:r,collapse:a})},t.createWith=function(e){return(new t).merge({key:e.key,parentKey:e.parentKey,content:e.content,subItemKeys:i.List(e.subItemKeys),collapse:e.collapse})},t}(i.Record(a));t.MindNodeModel=s},function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(1),c=n(7),u=function(e){function t(t){var n=e.call(this,t)||this;return n.generatePathString=function(){return n.props.isRoot?n.generatePathStringRoot():n.generatePathStringNormal()},n.generatePathStringNormal=function(){var e=n.props,t=e.fromNodeKey,o=e.toNodeKey,r=e.getRef,i=e.dir,a=e.diagramState.mindMapModel,s=r("topic-"+t),u=r("topic-"+o);if(!s||!u)return"";var p=r("line-"+t),l=r("children-"+t),d=u.getBoundingClientRect(),f=p.getBoundingClientRect(),g=l.getBoundingClientRect(),m=a.getItem(t);if(i===c.NodeWidgetDirection.RIGHT){var y=0,h=Math.round(f.top-g.top+1),v=Math.round(d.left-g.left-10),_=Math.round(d.bottom-g.top),b=Math.round(d.right-g.left-12);return 1===m.getSubItemKeys().size&&a.getItemVisualLevel(t)>1?"M"+y+","+_+"H"+(d.right-g.left):h>_?"M"+y+","+h+" H"+v+" V"+(_+10)+" Q"+v+","+_+" "+(v+10)+","+_+" H"+b:"M"+y+","+h+" H"+v+" V"+(_-10)+" Q"+v+","+_+" "+(v+10)+","+_+" H"+b}return y=Math.round(f.left-g.left),h=Math.round(f.top-g.top+1),v=Math.round(d.right-g.left+10),_=Math.round(d.bottom-g.top),b=Math.round(d.left-g.left+12),1===m.getSubItemKeys().size&&a.getItemVisualLevel(t)>1?"M"+y+","+_+"H"+(f.left-d.right):h>_?"M"+y+","+h+" H"+v+" V"+(_+10)+" Q"+v+","+_+" "+(v-10)+","+_+" H"+b:"M"+y+","+h+" H"+v+" V"+(_-10)+" Q"+v+","+_+" "+(v-10)+","+_+" H"+b},n.generatePathStringRoot=function(){var e=n.props,t=e.fromNodeKey,o=e.toNodeKey,r=e.getRef,i=e.dir,a=e.diagramState,s=r("root-topic"),u=r("topic-"+o);if(!s||!u)return"";a.mindMapModel.getItem(t);var p,l,d,f,g=u.getBoundingClientRect(),m=s.getBoundingClientRect();if(i===c.NodeWidgetDirection.RIGHT){var y=r("bm-node-layer-right").getBoundingClientRect();p=0,l=Math.round(m.top-y.top+m.height/2),d=g.left-m.right,f=Math.round(g.top-y.top+g.height/2)}else p=(y=r("bm-node-layer-left").getBoundingClientRect()).right-y.left,l=Math.round(m.top-y.top+m.height/2),d=Math.round(g.right-y.left),f=Math.round(g.top-y.top+g.height/2);if(l===f)return"M"+p+","+l+"L"+d+","+f;var h=(p+d)/2,v=(l+f)/2;return i===c.NodeWidgetDirection.RIGHT?"M"+p+","+l+"C"+p+","+v+","+h+","+f+","+d+","+f:"M"+d+","+f+"C"+h+","+f+","+p+","+v+","+p+","+l},n}return r(t,e),t.prototype.layout=function(){this.props.isRoot?this.layoutRoot():this.layoutNormal()},t.prototype.layoutRoot=function(){var e=this.props,t=e.dir,n=(0,e.getRef)("bm-node-layer-"+(t===c.NodeWidgetDirection.LEFT?"left":"right"));if(n){var o=n.getBoundingClientRect();this.setState({width:o.width,height:o.height})}},t.prototype.layoutNormal=function(){var e=(0,this.props.getRef)("children-"+this.props.fromNodeKey);if(e){var t=e.getBoundingClientRect();this.setState({width:t.width,height:t.height})}},t.prototype.render=function(){return this.state&&this.state.width?a.createElement("div",{className:"bm-link"},a.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",version:"1.1",strokeWidth:"2px",stroke:"orange",fill:"none"},this.state),a.createElement("g",null,a.createElement("path",{d:this.generatePathString()})))):null},t.defaultProps={isRoot:!1},t}(s.BaseWidget);t.LinkWidget=u},function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(2),s=n(1),c=n(9),u=n(3),p=n(7),l=n(35),d=null,f=function(e){function t(t){var n=e.call(this,t)||this;return n.onDragStart=function(e){console.log("onDragStart"),d=n.props.nodeKey,e.stopPropagation()},n.onDragOver=function(e){e.preventDefault()},n.onDragEnter=function(){n.setState({dragEnter:!0})},n.onDragLeave=function(e){var t=n.props,o=t.getRef,r=t.nodeKey,i=e.nativeEvent.relatedTarget,a=o("content-"+r);a==i||a.contains(i)||n.setState({dragEnter:!1})},n.onDrop=function(e){console.log("onDrop");var t=n.props,o=t.diagramState,r=t.nodeKey;o.op(u.OpType.DRAG_AND_DROP,d,r),n.setState({dragEnter:!1})},n.onClick=function(){console.log("TopicContentWidget onClick");var e=n.props,t=e.diagramState,o=e.nodeKey;t.mindMapModel.getEditingItemKey()!==o&&(t.op(u.OpType.SET_POPUP_MENU_ITEM_KEY,o),n.setState({showPopMenu:!0}))},n.handlePopMenuVisibleChange=function(e){n.setState({showPopMenu:e})},n._handleClick=function(e){var t=n.props,o=t.getRef,r=t.nodeKey,i=t.diagramState;o("content-"+r).contains(e.target)||i.op(u.OpType.SET_FOCUS_ITEM_MODE,r,c.FocusItemMode.Normal)},n.state={dragEnter:!1,showPopMenu:!1},n}return r(t,e),t.prototype.componentDidUpdate=function(e,t,n){var o=this.props,r=o.diagramState,i=o.nodeKey;r.mindMapModel.getEditingItemKey()===i?document.addEventListener("click",this._handleClick):document.removeEventListener("click",this._handleClick)},t.prototype.render=function(){var e,t,n=this.props,o=n.diagramState,r=n.nodeKey,s=n.dir,c=n.draggable,u=n.saveRef,d=n.getRef,f=o.mindMapModel,g=o.config,m=f.getItemVisualLevel(r);switch(m){case 0:t=g.rootItemStyle;break;case 1:t=g.primaryItemStyle;break;default:t=g.normalItemStyle}var y=this.state.showPopMenu;return i.createElement("div",{draggable:c,className:a("content",(e={},e["content-dir-"+s]=s!==p.NodeWidgetDirection.ROOT,e["root-topic"]=0===m,e["primary-topic"]=1===m,e["normal-topic"]=m>1,e["content-drag-enter"]=this.state.dragEnter,e)),style:t,ref:u("content-"+r),onDragStart:this.onDragStart,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDragOver:this.onDragOver,onDrop:this.onDrop,onClick:this.onClick},g.editorRendererFn(o,r,u),y?i.createElement(l.NodePopupMenu,{diagramState:o,nodeKey:r,visible:!0,handleVisibleChange:this.handlePopMenuVisibleChange,getRef:d}):null)},t}(s.BaseWidget);t.TopicContentWidget=f},function(e,t,n){"use strict";function o(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),o(n(15)),o(n(44)),o(n(45)),o(n(6))},function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(2),s=n(16),c=n(1);n(37);var u=n(39),p=n(40),l=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.prototype.render=function(){var e=this;return i.createElement(u.default,null,function(t,n){var o;return i.createElement("div",{className:a("bm-diagram",(o={},o[""+e.props.diagramModel.config.theme]=!0,o))},i.createElement(p.Toolbar,{getRef:n}),i.createElement(s.MindDragScrollWidget,{diagramModel:e.props.diagramModel,saveRef:t,getRef:n}))})},t}(c.BaseWidget);t.DiagramWidget=l},function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),s=n(1),c=n(17),u=n(22),p=function(e){function t(t){var n=e.call(this,t)||this;return n.canDragFunc=function(){var e=document.getSelection();return null===e.anchorNode||e.anchorNode.nodeType!==Node.TEXT_NODE},n}return r(t,e),t.prototype.componentDidMount=function(){var e=this.props.getRef,t=e("root-topic"),n=e("node-layer"),o=t.getBoundingClientRect(),r=n.getBoundingClientRect();this.dragScrollWidget.setViewBoxScrollDelta(0,o.top-r.top-this.dragScrollWidget.viewBox.getBoundingClientRect().height/2+o.height)},Object.defineProperty(t.prototype,"dragScrollWidget",{get:function(){return this.props.getRef("DragScrollWidget")},enumerable:!0,configurable:!0}),t.prototype.render=function(){var e=this,t=this.props.saveRef;return console.log("MindDragScrollWidget render"),a.createElement(c.DragScrollWidget,i({},this.state,{ref:t("DragScrollWidget")}),function(n,o){return a.createElement(u.NodeLayerWidget,i({},e.props,{setViewBoxScroll:n,setViewBoxScrollDelta:o,ref:t("MindNodeLayerWidget")}))})},t}(s.BaseWidget);t.MindDragScrollWidget=p},function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(1),s=n(18);n(19);var c=function(e){function t(t){var n=e.call(this,t)||this;return n.contentResizeCallback=function(e,t){if(n.oldContentRect){var o={width:n.content.clientWidth+2*n.viewBox.clientWidth,height:n.content.clientHeight+2*n.viewBox.clientHeight};n.bigView.style.width=o.width+"px",n.bigView.style.height=o.height+"px"}n.oldContentRect=e[0].contentRect},n.contentResizeObserver=new s.default(n.contentResizeCallback),n.contentRef=function(e){e&&(n.content=e,n.contentResizeObserver.observe(n.content))},n.viewBoxRef=function(e){e&&(n.viewBox=e,n.setViewBoxScroll(n.viewBox.clientWidth,n.viewBox.clientHeight))},n.bigViewRef=function(e){e&&(n.bigView=e)},n.setWidgetStyle=function(){n.content&&n.viewBox&&n.bigView&&(n.bigView.style.width=2*(n.content.clientWidth+n.viewBox.clientWidth)+"px",n.bigView.style.height=2*(n.content.clientHeight+n.viewBox.clientHeight)+"px",n.content.style.left=n.viewBox.clientWidth+"px",n.content.style.top=n.viewBox.clientHeight+"px")},n.setViewBoxScroll=function(e,t){n.viewBox&&(n.viewBox.scrollLeft=e,n.viewBox.scrollTop=t)},n.setViewBoxScrollDelta=function(e,t){n.viewBox&&(n.viewBox.scrollLeft+=e,n.viewBox.scrollTop+=t)},n.onMouseDown=function(e){var t=n.props,o=t.mouseKey,r=t.needKeyPressed,i=t.canDragFunc;if((!i||i())&&(0===e.button&&"left"===o||2===e.button&&"right"===o)){if(r&&!e.ctrlKey)return;n._lastCoordX=n.viewBox.scrollLeft+e.nativeEvent.clientX,n._lastCoordY=n.viewBox.scrollTop+e.nativeEvent.clientY,window.addEventListener("mousemove",n.onMouseMove),window.addEventListener("mouseup",n.onMouseUp)}},n.onMouseUp=function(e){window.removeEventListener("mousemove",n.onMouseMove),window.removeEventListener("mouseup",n.onMouseUp)},n.onMouseMove=function(e){n.viewBox.scrollLeft=n._lastCoordX-e.clientX,n.viewBox.scrollTop=n._lastCoordY-e.clientY},n.handleContextMenu=function(e){e.preventDefault()},n.state={widgetStyle:{width:"10000px",height:"10000px"}},n}return r(t,e),t.prototype.componentDidMount=function(){this.setWidgetStyle(),document.addEventListener("contextmenu",this.handleContextMenu)},t.prototype.componentWillUnmount=function(){document.removeEventListener("contextmenu",this.handleContextMenu)},t.prototype.render=function(){return i.createElement("div",{ref:this.viewBoxRef,onMouseDown:this.onMouseDown,className:"drag-scroll-view"},i.createElement("div",{style:this.state.widgetStyle,ref:this.bigViewRef},i.createElement("div",{className:"drag-scroll-content",ref:this.contentRef,style:this.state.contentStyle},this.props.children(this.setViewBoxScroll,this.setViewBoxScrollDelta))))},t.defaultProps={mouseKey:"left",needKeyPressed:!1},t}(a.BaseWidget);t.DragScrollWidget=c},function(e,t){e.exports=n(205)},function(e,t,n){var o=n(20);"string"==typeof o&&(o=[[e.i,o,""]]),n(5)(o,{hmr:!0,transform:void 0,insertInto:void 0}),o.locals&&(e.exports=o.locals)},function(e,t,n){(e.exports=n(4)(!1)).push([e.i,".drag-scroll-view {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  overflow: scroll; }\n\n.drag-scroll-content {\n  position: relative;\n  width: max-content; }\n",""])},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,o=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var r,i=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?e:(r=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:o+i.replace(/^\.\//,""),"url("+JSON.stringify(r)+")")})}},function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(1),s=n(23),c=n(6),u=n(3),p=function(e){function t(t){var n=e.call(this,t)||this;return n.op=function(e,t,o){console.error("op:"+u.OpType[e]),t||e===u.OpType.FOCUS_ITEM||(t=n.state.mindMapModel.getFocusItemKey()),console.log(n.state.mindMapModel);var r=u.MindMapModelModifier.op(n.state.mindMapModel,e,t,o);console.log(r),n.setState({mindMapModel:r})},n.state={mindMapModel:t.diagramModel.mindMapModel,zoom:t.diagramModel.zoom,config:Object.assign(c.defaultDiagramConfig,t.diagramModel.config),setMindMapModel:function(e){this.setState({mindMapModel:e})},setZoom:function(e){this.setState({zoom:e})},op:n.op},n}return r(t,e),t.prototype.render=function(){var e=this.props,t=e.setViewBoxScroll,n=e.setViewBoxScrollDelta,o=e.saveRef;return i.createElement("div",{className:"bm-node-layer",ref:o("node-layer")},this.renderItems(t,n))},t.prototype.renderItems=function(e,t){var n=this.state.mindMapModel.getEditorRootItemKey();return i.createElement(s.RootNodeWidget,{diagramState:this.state,nodeKey:n,saveRef:this.props.saveRef,getRef:this.props.getRef,setViewBoxScroll:e,setViewBoxScrollDelta:t})},t}(a.BaseWidget);t.NodeLayerWidget=p},function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(1);n(10);var s=n(2),c=n(6),u=n(34),p=n(12),l=n(13),d=n(7),f=function(e){function t(t){var n=e.call(this,t)||this;return n.needRelocation=!1,n.layoutSubLinks=function(){var e=n.props,t=e.diagramState,o=e.nodeKey,r=e.getRef,i=t.mindMapModel.getItem(o);i.getSubItemKeys().size>0&&!i.getCollapse()&&i.getSubItemKeys().forEach(function(e){r("link-"+o+"-"+e).layout()})},n}return r(t,e),t.prototype.getNodeModel=function(){var e=this.props,t=e.diagramState,n=e.nodeKey;return t.mindMapModel.getItem(n)},t.prototype.getPartItems=function(e){var t=this.getNodeModel(),n=t.getSubItemKeys().size,o=t.getSubItemKeys().toArray();switch(e){case c.DiagramLayoutDirection.LEFT_TO_RIGHT:return[[],o];case c.DiagramLayoutDirection.RIGHT_TO_LEFT:return[o,[]];case c.DiagramLayoutDirection.LEFT_AND_RIGHT:return[o.slice(Math.ceil(n/2),n),o.slice(0,Math.ceil(n/2))]}},t.prototype.componentDidUpdate=function(e,t,n){if(this.needRelocation){var o=this.collapseIcon.getBoundingClientRect();this.props.setViewBoxScrollDelta(o.left-this.oldCollapseIconRect.left,o.top-this.oldCollapseIconRect.top),this.needRelocation=!1}this.layoutSubLinks()},t.prototype.componentDidMount=function(){this.layoutSubLinks()},t.prototype.renderPartItems=function(e,t){var n=this,o=this.props,r=o.diagramState,a=o.setViewBoxScroll,s=o.setViewBoxScrollDelta,c=o.saveRef,l=o.getRef;if(0===e.length)return null;var f=[],g=[];e.forEach(function(e){var o="link-"+n.props.nodeKey+"-"+e;f.push(i.createElement(u.NodeWidget,{key:e,nodeKey:e,dir:t,diagramState:r,setViewBoxScroll:a,setViewBoxScrollDelta:s,saveRef:c,getRef:l})),g.push(i.createElement(p.LinkWidget,{diagramState:r,key:o,ref:c(o),fromNodeKey:n.props.nodeKey,toNodeKey:e,dir:t,saveRef:c,getRef:l,isRoot:!0}))});var m="bm-node-layer-"+(t===d.NodeWidgetDirection.LEFT?"left":"right");return i.createElement("div",{className:m,ref:c(m)},f,g)},t.prototype.render=function(){var e=this.props,t=e.diagramState,n=e.nodeKey,o=e.saveRef,r=e.getRef,a=t.mindMapModel,c=t.config,u=this.getPartItems(c.direction),p=u[0],f=u[1];return i.createElement(i.Fragment,null,this.renderPartItems(p,d.NodeWidgetDirection.LEFT),i.createElement("div",{className:s("topic"),ref:n===a.getEditorRootItemKey()?o("root-topic"):null},i.createElement(l.TopicContentWidget,{diagramState:t,nodeKey:n,dir:d.NodeWidgetDirection.ROOT,draggable:!1,saveRef:o,getRef:r})),this.renderPartItems(f,d.NodeWidgetDirection.RIGHT))},t}(a.BaseWidget);t.RootNodeWidget=f},function(e,t,n){(e.exports=n(4)(!1)).push([e.i,"",""])},function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(2),s=n(26),c=n(3),u=n(30);n(31);var p=function(e){function t(t){var n=e.call(this,t)||this;return n.onChange=function(e){var t=n.props,o=t.nodeKey;t.diagramState.op(c.OpType.SET_ITEM_CONTENT,o,e)},n.onMouseDown=function(e){e.stopPropagation()},n.onMouseMove=function(e){e.stopPropagation()},n}return r(t,e),t.prototype.shouldComponentUpdate=function(e,t,n){var o=e.nodeKey,r=e.diagramState,i=this.props,a=i.nodeKey,s=i.diagramState;if(o!==a)return console.log("nextNodeKey !== nodeKey"),!0;var c=s.mindMapModel.getEditingItemKey(),u=r.mindMapModel.getEditingItemKey();return c!==u&&(c===a||u===a)||s.mindMapModel.getItem(a)!==r.mindMapModel.getItem(o)&&(console.log("ds.mindMapModel.getItem(nodeKey) !== nextDS.mindMapModel.getItem(nextNodeKey)"),!0)},t.prototype.render=function(){var e=this.props,t=e.nodeKey,n=e.diagramState,o=e.saveRef,r=n.mindMapModel,c=r.getItem(t).getContent();console.log("DefaultNodeContentEditor render"),console.log("getEditingItemKey "+r.getEditingItemKey());var p=!(t===r.getEditingItemKey());return i.createElement("div",{className:a("bm-node-content",{"content-editing":!p,"bm-node-content-cursor":!p}),ref:o("editor-"+t),onMouseDown:this.onMouseDown,onMouseMove:this.onMouseMove},i.createElement(s.default,{editorValue:c,onChange:u.debounce(this.onChange),readOnly:p}))},t}(i.Component);t.DefaultNodeContentEditor=p},function(e,t){e.exports=n(206)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uuidv4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}},function(e,t){e.exports=n(2)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Ancestor=0]="Ancestor",e[e.Descendant=1]="Descendant",e[e.Sibling=2]="Sibling",e[e.None=3]="None"}(t.NodeRelationship||(t.NodeRelationship={}))},function(e,t){e.exports=n(657)},function(e,t,n){var o=n(32);"string"==typeof o&&(o=[[e.i,o,""]]),n(5)(o,{hmr:!0,transform:void 0,insertInto:void 0}),o.locals&&(e.exports=o.locals)},function(e,t,n){(e.exports=n(4)(!1)).push([e.i,".bm-node-content {\n  padding: 6px 6px; }\n\n.bm-node-content-cursor {\n  cursor: text; }\n",""])},function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return this.renderFocusItemBorder()},t.prototype.reLayout=function(){this.forceUpdate()},t.prototype.renderFocusItemBorder=function(){var e=this.props,t=e.getRef,n=e.diagramState,o=n.mindMapModel,r=n.config.focusBorderPadding,a=o.getFocusItemKey();if(a){var s=t(1===o.getItemVisualLevel(a)?"content-"+a:"editor-"+a),c=t("node-layer");if(s&&c){var u=s.getBoundingClientRect(),p=c.getBoundingClientRect();return i.createElement("div",{className:"bm-focus-svg"},i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",strokeWidth:"2px",stroke:"red",fill:"none",width:"3000px",height:"3000px"},i.createElement("rect",{x:""+(u.left-p.left-r),y:""+(u.top-p.top-r),rx:"10",ry:"10",width:""+(u.width+2*r),height:""+(u.height+2*r)})))}}return null},t}(i.Component);t.DefaultFocusItemBorderSvg=a},function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(1),s=n(12),c=n(13);n(10);var u=n(3),p=n(2),l=n(7),d=function(e){function t(n){var o=e.call(this,n)||this;return o.onClickCollapse=function(e){console.log("onClickCollapse"),e.stopPropagation(),o.needRelocation=!0,o.oldCollapseIconRect=o.collapseIcon.getBoundingClientRect(),o.props.diagramState.op(u.OpType.TOGGLE_COLLAPSE,o.props.nodeKey)},o.onMouseEnter=function(){o.props.diagramState.op(u.OpType.FOCUS_ITEM,o.props.nodeKey)},o.onMouseLeave=function(){o.props.diagramState.op(u.OpType.FOCUS_ITEM,void 0)},o.onDragStart=function(e){console.log("onDragStart"),t.dragSrcItemKey=o.props.nodeKey,e.stopPropagation()},o.onDragEnd=function(){},o.onDragEnter=function(){console.log("onDragEnter"),o.setState({dragEnter:!0})},o.onDragLeave=function(e){var t=o.props,n=t.getRef,r=t.nodeKey,i=e.nativeEvent.relatedTarget,a=n("content-"+r);a==i||a.contains(i)||o.setState({dragEnter:!1})},o.onDrop=function(e){console.log("onDrop");var n=o.props,r=n.diagramState,i=n.nodeKey;r.op(u.OpType.DRAG_AND_DROP,t.dragSrcItemKey,i),o.setState({dragEnter:!1})},o.needRelocation=!1,o.layoutSubLinks=function(){var e=o.props,t=e.diagramState,n=e.nodeKey,r=e.getRef,i=t.mindMapModel.getItem(n);i.getSubItemKeys().size>0&&!i.getCollapse()&&i.getSubItemKeys().forEach(function(e){r("link-"+n+"-"+e).layout()})},o.collapseIconRef=function(e){e&&(o.collapseIcon=e)},o.state={dragEnter:!1},o}return r(t,e),t.prototype.componentDidUpdate=function(e,t,n){if(this.needRelocation){var o=this.collapseIcon.getBoundingClientRect();this.props.setViewBoxScrollDelta(o.left-this.oldCollapseIconRect.left,o.top-this.oldCollapseIconRect.top),this.needRelocation=!1}this.layoutSubLinks()},t.prototype.componentDidMount=function(){this.layoutSubLinks()},t.prototype.shouldComponentUpdate=function(e,t,n){return!0},t.prototype.renderSubItems=function(){var e=this.props,n=e.diagramState,o=e.nodeKey,r=e.dir,a=e.setViewBoxScroll,c=e.setViewBoxScrollDelta,u=e.saveRef,d=e.getRef,f=n.mindMapModel.getItem(o);if(0===f.getSubItemKeys().size||f.getCollapse())return null;var g=[],m=[];f.getSubItemKeys().forEach(function(e){g.push(i.createElement(t,{key:e,nodeKey:e,dir:r,diagramState:n,setViewBoxScroll:a,setViewBoxScrollDelta:c,saveRef:u,getRef:d}));var p="link-"+o+"-"+e;m.push(i.createElement(s.LinkWidget,{diagramState:n,key:p,fromNodeKey:o,toNodeKey:e,dir:r,getRef:d,ref:u(p)}))});var y=n.config,h=r===l.NodeWidgetDirection.LEFT?{paddingTop:y.vMargin,paddingBottom:y.vMargin,paddingRight:y.hMargin}:{paddingTop:y.vMargin,paddingBottom:y.vMargin,paddingLeft:y.hMargin};return i.createElement("div",{className:p("bm-children"),style:h,ref:u("children-"+o)},g,m)},t.prototype.render=function(){var e,t,n=this.props,o=n.diagramState,r=n.nodeKey,a=n.dir,s=n.saveRef,u=n.getRef,l=o.mindMapModel,d=l.getItem(r),f=l.getItemVisualLevel(r);return i.createElement("div",{className:p("bm-node","bm-dir-"+a)},i.createElement("div",{className:p("topic","bm-dir-"+a),ref:s("topic-"+r)},i.createElement(c.TopicContentWidget,{diagramState:o,nodeKey:r,dir:a,draggable:!0,saveRef:s,getRef:u}),d.getSubItemKeys().size>0?i.createElement("div",{className:p("collapse-line",(e={"collapse-line-hide":d.getCollapse()},e["normal-collapse-line-"+a]=f>1,e)),ref:s("line-"+r)},i.createElement("div",{ref:this.collapseIconRef,className:p("collapse-icon",(t={iconfont:d.getSubItemKeys().size>0},t["bm-"+(d.getCollapse()?"plus":"minus")]=d.getSubItemKeys().size>0,t)),onClick:this.onClickCollapse})):null),this.renderSubItems())},t}(a.BaseWidget);t.NodeWidget=d},function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(36),s=n(3),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._handleClick=function(e){console.log("_handleClick");var n=t.props.visible,o=!(e.target.contains===t.root);console.log("wasOutside "+o),o&&n&&t.props.handleVisibleChange&&t.props.handleVisibleChange(!1)},t.rootRef=function(e){t.root=e},t}return r(t,e),t.prototype.componentDidMount=function(){document.addEventListener("click",this._handleClick)},t.prototype.componentWillUnmount=function(){document.removeEventListener("click",this._handleClick)},t.prototype.render=function(){console.log("NodePopupMenu render:"+this.props.visible);var e=this.props,t=e.visible,n=e.nodeKey,o=e.items,r=e.diagramState,s=r.mindMapModel.getEditorRootItemKey(),c=o.map(function(e){return n!==s||e.rootCanUse?i.createElement(a.NodePopupMenuItem,{config:e,key:n+"-"+e.label,nodeKey:n,diagramState:r}):null});return t&&i.createElement("div",{className:"bm-node-popup-menu",ref:this.rootRef},c)},t.defaultProps={items:[{icon:"edit",label:"edit",rootCanUse:!0,opType:s.OpType.SET_EDIT_ITEM_KEY},{icon:"add-sibling",label:"add sibling",opType:s.OpType.ADD_SIBLING},{icon:"add-child",label:"add child",rootCanUse:!0,opType:s.OpType.ADD_CHILD},{icon:"delete-node",label:"delete node",opType:s.OpType.DELETE_NODE}]},t}(i.Component);t.NodePopupMenu=c},function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(2),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClick=function(e){e.stopPropagation();var n=t.props,o=n.diagramState,r=n.nodeKey,i=n.config;o.op(i.opType,r)},t}return r(t,e),t.prototype.render=function(){var e=this.props.config;return i.createElement("div",{className:"popup-menu-item",onClick:this.onClick},i.createElement("div",{className:a("icon","iconfont","bm-"+e.icon),onClick:this.onClick}),i.createElement("div",{className:"label"},e.label))},t}(i.Component);t.NodePopupMenuItem=s},function(e,t,n){var o=n(38);"string"==typeof o&&(o=[[e.i,o,""]]),n(5)(o,{hmr:!0,transform:void 0,insertInto:void 0}),o.locals&&(e.exports=o.locals)},function(e,t,n){(t=e.exports=n(4)(!1)).push([e.i,"@import url(//at.alicdn.com/t/font_1280682_sxtwmg72af.css);",""]),t.push([e.i,".theme-orange .root-topic {\n  background: orange; }\n\n.theme-orange .primary-topic {\n  border: 2px solid orange; }\n\n.bm-diagram {\n  width: 100%;\n  height: 100%; }\n\n.iconfont {\n  vertical-align: middle; }\n\n.none-pointer-events {\n  pointer-events: none; }\n\n.bm-node-layer {\n  position: relative;\n  display: flex;\n  align-items: center; }\n  .bm-node-layer .bm-node {\n    display: flex;\n    align-items: center;\n    padding: 10px; }\n    .bm-node-layer .bm-node div {\n      flex-shrink: 0; }\n    .bm-node-layer .bm-node .bm-children {\n      position: relative; }\n  .bm-node-layer .topic {\n    display: flex;\n    position: relative;\n    align-items: center; }\n    .bm-node-layer .topic .content-editing {\n      background-color: #E0E0E0; }\n    .bm-node-layer .topic .content {\n      word-wrap: break-word;\n      white-space: pre-line;\n      cursor: pointer; }\n    .bm-node-layer .topic .content-drag-enter {\n      background-color: brown; }\n    .bm-node-layer .topic .content-dir-0 {\n      padding: 6px 0 6px 20px; }\n    .bm-node-layer .topic .content-dir-1 {\n      padding: 6px 20px 6px 0; }\n    .bm-node-layer .topic .collapse-line {\n      height: 2px;\n      width: 30px;\n      background: orange; }\n    .bm-node-layer .topic .collapse-line-hide {\n      background: transparent; }\n    .bm-node-layer .topic .normal-collapse-line-1 {\n      position: absolute;\n      bottom: -1px;\n      right: 0; }\n    .bm-node-layer .topic .normal-collapse-line-0 {\n      position: absolute;\n      bottom: -1px;\n      left: 0; }\n    .bm-node-layer .topic .collapse-icon {\n      position: relative;\n      top: -8px;\n      left: 5px;\n      border-radius: 50%;\n      width: 20px;\n      height: 20px;\n      text-align: center;\n      background-color: orange;\n      cursor: pointer;\n      padding: 0;\n      font-size: 14px;\n      line-height: 20px;\n      border: 0; }\n\n.bm-node-layer-left {\n  display: flex;\n  position: relative;\n  align-items: flex-end;\n  flex-direction: column;\n  padding-right: 60px; }\n\n.bm-node-layer-right {\n  display: flex;\n  position: relative;\n  flex-direction: column;\n  padding-left: 60px; }\n\n.bm-dir-0 {\n  flex-direction: row-reverse; }\n\n.bm-dir-1 {\n  flex-direction: row; }\n\n.bm-link {\n  z-index: -1;\n  position: absolute;\n  left: 0;\n  top: 0; }\n\n.bm-focus-svg {\n  z-index: -1;\n  position: absolute;\n  left: 0;\n  top: 0; }\n\n.bm-node-popup-menu {\n  position: absolute;\n  bottom: calc(100% + 5px);\n  left: 0;\n  padding: 0 8px;\n  border-radius: 10px;\n  background-color: white;\n  box-shadow: #aaaaaa 5px 5px 10px;\n  cursor: pointer;\n  z-index: 1;\n  width: max-content;\n  height: 50px; }\n  .bm-node-popup-menu .popup-menu-item {\n    display: inline-block;\n    margin: 10px; }\n    .bm-node-popup-menu .popup-menu-item:hover {\n      color: orange; }\n    .bm-node-popup-menu .popup-menu-item .icon {\n      text-align: center; }\n    .bm-node-popup-menu .popup-menu-item .label {\n      font-size: 20%; }\n\n.fXedfB {\n  background: inherit; }\n",""])},function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getRef=function(e){return t[e]},t.saveRef=function(e){return function(n){n&&(t[e]=n,t.fireListener(e,n))}},t.observers=new Map,t.fireListener=function(e,n){if(t.observers.has(e))for(var o=0,r=t.observers.get(e);o<r.length;o++)(0,r[o])(e,n)},t.registerRefListener=function(e,n){t.observers.has(e)?t.observers.get(e).push(n):t.observers.set(e,[n])},t}return r(t,e),t.prototype.render=function(){return this.props.children(this.saveRef,this.getRef,this.registerRefListener.bind(this))},t}(n(0).Component);t.default=i},function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(41);n(42);var s=n(3),c=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.prototype.render=function(){var e=this.props,t=e.getRef,n=e.items.map(function(e){return i.createElement(a.ToolbarItem,{config:e,key:e.label,getRef:t})});return i.createElement("div",{className:"bm-toolbar"},n)},t.defaultProps={items:[{icon:"undo",label:"undo",opType:s.OpType.UNDO},{icon:"redo",label:"redo",opType:s.OpType.REDO},{icon:"add-sibling",label:"add sibling",opType:s.OpType.ADD_SIBLING},{icon:"add-child",label:"add child",opType:s.OpType.ADD_CHILD},{icon:"delete-node",label:"delete node",opType:s.OpType.DELETE_NODE}]},t}(i.Component);t.Toolbar=c},function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(2),s=function(e){function t(t){var n=e.call(this,t)||this;return n.onClick=function(){n.props.getRef("MindNodeLayerWidget").op(n.props.config.opType)},n}return r(t,e),t.prototype.render=function(){var e=this.props.config;return i.createElement("span",{className:a("bm-toolbar-item","iconfont","bm-"+e.icon),onClick:this.onClick})},t}(i.Component);t.ToolbarItem=s},function(e,t,n){var o=n(43);"string"==typeof o&&(o=[[e.i,o,""]]),n(5)(o,{hmr:!0,transform:void 0,insertInto:void 0}),o.locals&&(e.exports=o.locals)},function(e,t,n){(e.exports=n(4)(!1)).push([e.i,".bm-toolbar {\n  padding: 5px 0;\n  box-shadow: #aaaaaa 0 0 2px; }\n\n.bm-toolbar-item {\n  padding: 10px;\n  cursor: pointer;\n  font-size: 24px; }\n  .bm-toolbar-item:hover {\n    color: #2cb892; }\n",""])},function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(9),a=n(8),s=n(11),c={rootItemKey:null,editorRootItemKey:null,itemMap:a.Map(),focusItemKey:null,focusItemMode:i.FocusItemMode.Normal},u=function(e){function t(){return e.call(this)||this}return r(t,e),t.prototype.getRootItemKey=function(){return this.get("rootItemKey")},t.prototype.getEditorRootItemKey=function(){return this.get("editorRootItemKey")},t.prototype.getEditorRootItem=function(){return this.getItemMap().get(this.getEditorRootItemKey())},t.prototype.getItemMap=function(){return this.get("itemMap")},t.prototype.getFocusItemKey=function(){return this.get("focusItemKey")},t.prototype.getFocusItemMode=function(){return this.get("focusItemMode")},t.prototype.getEditingItemKey=function(){return this.get("focusItemMode")!==i.FocusItemMode.Editing?null:this.getFocusItemKey()},t.prototype.getPopupMenuItemKey=function(){return this.get("focusItemMode")!==i.FocusItemMode.PopupMenu?null:this.getFocusItemKey()},t.prototype.getItem=function(e){return this.getItemMap().get(e)},t.prototype.getParentItem=function(e){var t=this.getItem(e);return t.getParentKey()?this.getItem(t.getParentKey()):null},t.prototype.getItemVisualLevel=function(e){for(var t=this.getItem(e),n=0;t&&t.getKey()!==this.getEditorRootItemKey();)n++,t=this.getParentItem(t.getKey());return n},t.createWith=function(e){var n=new t;return(n=n.merge({rootItemKey:e.rootItemKey,editorRootItemKey:e.editorRootItemKey})).withMutations(function(t){e.items.forEach(function(e){t.update("itemMap",function(t){return t.set(e.key,s.MindNodeModel.createWith(e))})})})},t}(a.Record(c));t.MindMapModel=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(6);t.MindDiagramModel=function(e,t){void 0===t&&(t={}),this.mindMapModel=e,this.config=Object.assign(o.defaultDiagramConfig,t),this.zoom=1}}])},658:function(e,t,n){},659:function(e,t,n){"use strict";n.r(t);var o=n(19),r=n.n(o),i=n(184),a=n.n(i),s=(n(202),n(64));var c=function(){var e=s.MindMapModel.createWith({rootItemKey:"root",editorRootItemKey:"root",items:[{key:"root",content:"MainTopic",subItemKeys:["sub1","sub2"]},{key:"sub1",parentKey:"root",content:"SubTopic",subItemKeys:[],collapse:!0},{key:"sub2",parentKey:"root",content:"SubTopic",subItemKeys:[]}]}),t=new s.MindDiagramModel(e,{hMargin:10});return r.a.createElement(s.DiagramWidget,{diagramModel:t})};n(658);var u=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"container"},r.a.createElement(c,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(r.a.createElement(u,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[197,1,2]]]);
//# sourceMappingURL=main.340ebf44.chunk.js.map