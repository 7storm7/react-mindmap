(window["webpackJsonpreact-mindmap"]=window["webpackJsonpreact-mindmap"]||[]).push([[0],{170:function(e,t,n){e.exports=n(523)},175:function(e,t,n){},509:function(e,t,n){},510:function(e,t,n){},521:function(e,t,n){},522:function(e,t,n){},523:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(10),r=n.n(c),i=(n(175),n(47)),l=n(48),p=n(50),u=n(49),s=n(51),m=n(85),d=n.n(m),g=n(6),h=n(84),f=n.n(h),b=function(e){var t=e.diagramState,n=e.onChange,a=e.config,c=e.op;return o.a.createElement("i",{className:f()("bm-toolbar-item","iconfont","bm-".concat(a.icon)),onClick:function(){a.opType?c(a.opType,null):a.clickHandler&&a.clickHandler(t,n)},title:a.label})},y=(n(509),n(166)),v=(n(510),function(e,t){var n=document.createElement("a");n.href=e,n.download=t,n.click()}),E=n(21),O=n.n(E);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function w(e){return o.a.createElement("div",{className:"popup-content"},o.a.createElement("ul",{className:"popup-content-list"},o.a.createElement("li",{className:"popup-content-list-item",onClick:function(){var t=e.diagramState.getModel(),n=Object(g.convertMindMapModelToRaw)(t),a=JSON.stringify(n),o="data:text/plain,".concat(encodeURIComponent(a));v(o,"".concat(n.title,".json")),O.a.close()}},"JSON (.json)")))}function k(e){var t=e.diagramState,n=e.onChange;return o.a.createElement("div",{className:"popup-content"},o.a.createElement("div",null,"Support for opening files in the following format"),o.a.createElement("ul",{className:"popup-content-list"},o.a.createElement("li",{className:"popup-content-list-item"},"JSON (.json)")),o.a.createElement("div",null,o.a.createElement("button",{className:"popup-btn",onClick:function(){var e=document.createElement("input");e.type="file",e.accept=".json",console.log("add onchange"),e.addEventListener("change",(function(e){var a=e.target.files[0],o=new FileReader;console.log("add fr onload"),o.onload=function(e){var a=e.target.result,o=JSON.parse(a);console.log(o);var c=Object(g.convertRawToMindMapModel)(o),r=g.DiagramState.setModel(t,c);n(r)},o.readAsText(a)})),e.click(),O.a.close()}},"Open File"),o.a.createElement("button",{className:"popup-btn"},"Cancel")))}function C(e){var t=function(t){var n=e.diagramState,a=e.onChange,o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(n,!0).forEach((function(t){Object(y.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.getConfig(),{theme:t});a(g.DiagramState.setConfig(n,o))},n=e.diagramState.getConfig().themeConfigs;return console.log(n),o.a.createElement("div",{className:"popup-content"},o.a.createElement("ul",{className:"popup-content-list"},function(e){var n=[];return Object.keys(e).forEach((function(a){var c=e[a];n.push(o.a.createElement("li",{className:"popup-content-list-item",key:a,onClick:function(){return t(a)}},o.a.createElement("span",null,c.name),o.a.createElement("div",{className:"theme-color",style:{background:c.color.primary}})))})),n}(n)))}var D=n(167),M=(n.n(D)()("app"),function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(n=Object(p.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).showPopupExport=function(e){O.a.create({title:"Please select export file format",content:o.a.createElement(w,{diagramState:e})})},n.showPopupOpenFile=function(e,t){O.a.create({title:"Open File",content:o.a.createElement(k,{diagramState:e,onChange:t})})},n.showPopupChangeTheme=function(e,t){O.a.create({title:"Change Theme",content:o.a.createElement(C,{diagramState:e,onChange:t})})},n.handleUndo=function(e){n.props.onChange(g.DiagramState.undo(e))},n.handleRedo=function(e){n.props.onChange(g.DiagramState.redo(e))},n.items=[{icon:"openfile",label:"open file",clickHandler:n.showPopupOpenFile},{icon:"export",label:"export file",clickHandler:n.showPopupExport},{icon:"theme",label:"change theme",clickHandler:n.showPopupChangeTheme},{icon:"add-sibling",label:"add sibling",opType:g.OpType.ADD_SIBLING},{icon:"add-child",label:"add child",opType:g.OpType.ADD_CHILD},{icon:"delete-node",label:"delete node",opType:g.OpType.DELETE_NODE},{icon:"undo",label:"undo",clickHandler:n.handleUndo},{icon:"redo",label:"redo",clickHandler:n.handleRedo}],n}return Object(s.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.diagramState,n=e.onChange,a=e.op,c=this.items.map((function(e){return o.a.createElement(b,{config:e,key:e.label,diagramState:t,onChange:n,op:a})}));return o.a.createElement("div",null,o.a.createElement("div",{className:"bm-toolbar"},c))}}]),t}(o.a.Component)),j=function(e){function t(e){var n;Object(i.a)(this,t),(n=Object(p.a)(this,Object(u.a)(t).call(this,e))).onChange=function(e){n.setState({diagramState:e})},n.onKeyDown=function(e){var t=n.getFocusItemMode();t!==g.FocusItemMode.Normal&&t!==g.FocusItemMode.PopupMenu||e.preventDefault()},n.onKeyUp=function(e){console.log(e);var t=n.getFocusItemMode();switch(e.which){case d.a.TAB:t!==g.FocusItemMode.Normal&&t!==g.FocusItemMode.PopupMenu||n.op(g.OpType.ADD_CHILD);break;case d.a.RETURN:t!==g.FocusItemMode.Normal&&t!==g.FocusItemMode.PopupMenu||n.op(g.OpType.ADD_SIBLING),t===g.FocusItemMode.Editing&&e.ctrlKey&&n.op(g.OpType.ADD_SIBLING)}},n.op=function(e,t,a){var o=n.state.diagramState,c=g.DiagramState.op(o,e,t,a);n.onChange(c)};var a=g.MindMapModel.createWith({rootItemKey:"root",editorRootItemKey:"root",items:[{key:"root",content:"MainTopic",subItemKeys:["sub1","sub2"]},{key:"sub1",parentKey:"root",content:"SubTopic",subItemKeys:[],collapse:!0},{key:"sub2",parentKey:"root",content:"SubTopic",subItemKeys:[]}]}),o=g.DiagramState.createWith(a,{hMargin:10});return n.state={diagramState:o},n}return Object(s.a)(t,e),Object(l.a)(t,[{key:"getFocusItemMode",value:function(){return this.state.diagramState.getModel().getFocusItemMode()}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.onKeyUp)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp)}},{key:"render",value:function(){return o.a.createElement("div",{className:"mindmap"},o.a.createElement(M,{diagramState:this.state.diagramState,onChange:this.onChange,op:this.op}),o.a.createElement(g.DiagramWidget,{diagramState:this.state.diagramState,onChange:this.onChange}))}}]),t}(o.a.Component);n(521),n(522);var I=function(){return o.a.createElement(j,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));localStorage.debug=["app","model:*"].join(","),r.a.render(o.a.createElement(I,null),document.getElementById("root")),r.a.render(o.a.createElement(O.a,null),document.getElementById("popup")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[170,1,2]]]);
//# sourceMappingURL=main.6724d16c.chunk.js.map