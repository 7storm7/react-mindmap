(window["webpackJsonpreact-mindmap"]=window["webpackJsonpreact-mindmap"]||[]).push([[0],{165:function(e,t,n){e.exports=n(500)},170:function(e,t,n){},488:function(e,t,n){},489:function(e,t,n){},498:function(e,t,n){},499:function(e,t,n){},500:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),i=n(10),c=n.n(i),r=(n(170),n(30)),l=n(31),p=n(33),u=n(32),s=n(34),m=n(83),d=n.n(m),g=n(6),h=n(82),f=n.n(h),b=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(p.a)(this,Object(u.a)(t).call(this,e))).onClick=function(){console.log("toolbar item click");var e=n.props,t=e.config,o=e.diagramState,a=e.onChange;t.opType?n.props.op(t.opType,null):t.clickHandler&&t.clickHandler(o,a)},n}return Object(s.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.config;return a.a.createElement("span",{className:f()("bm-toolbar-item","iconfont","bm-".concat(e.icon)),onClick:this.onClick})}}]),t}(a.a.Component),y=(n(488),n(489),function(e,t){var n=document.createElement("a");n.href=e,n.download=t,n.click()}),v=n(19),E=n.n(v);function O(e){return a.a.createElement("div",{className:"popup-content"},a.a.createElement("ul",{className:"popup-content-list"},a.a.createElement("li",{className:"popup-content-list-item",onClick:function(){var t=e.diagramState.mindMapModel,n=Object(g.convertMindMapModelToRaw)(t),o=JSON.stringify(n),a="data:text/plain,".concat(encodeURIComponent(o));y(a,"".concat(n.title,".json")),E.a.close()}},"JSON (.json)")))}function M(e){var t=e.diagramState,n=e.onChange;return a.a.createElement("div",{className:"popup-content"},a.a.createElement("div",null,"Support for opening files in the following format"),a.a.createElement("ul",{className:"popup-content-list"},a.a.createElement("li",{className:"popup-content-list-item"},"JSON (.json)")),a.a.createElement("div",null,a.a.createElement("button",{onClick:function(){var e=document.createElement("input");e.type="file",e.accept=".json",e.addEventListener("change",function(e){var o=e.target.files[0],a=new FileReader;a.onload=function(e){var o=e.target.result,a=JSON.parse(o);console.log(a);var i=Object(g.convertRawToMindMapModel)(a),c=g.DiagramState.setMindMapModel(t,i);n(c)},a.readAsText(o)}),e.click(),E.a.close()}},"Open File"),a.a.createElement("button",null,"Cancel")))}var k=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(p.a)(this,Object(u.a)(t).call(this,e))).showPopupExport=function(e){console.log("showPopupExport"),E.a.registerPlugin("popupExport",function(){this.create({title:"Please select export file format",content:a.a.createElement(O,{diagramState:e})})}),E.a.plugins().popupExport()},n.showPopupOpenFile=function(e,t){E.a.registerPlugin("popupOpenFile",function(){this.create({title:"Open File",content:a.a.createElement(M,{diagramState:e,onChange:t})})}),E.a.plugins().popupOpenFile()},n.items=[{icon:"newfile",label:"new file"},{icon:"openfile",label:"open file",clickHandler:n.showPopupOpenFile},{icon:"export",label:"export file",clickHandler:n.showPopupExport},{icon:"undo",label:"undo",opType:g.OpType.UNDO},{icon:"redo",label:"redo",opType:g.OpType.REDO},{icon:"add-sibling",label:"add sibling",opType:g.OpType.ADD_SIBLING},{icon:"add-child",label:"add child",opType:g.OpType.ADD_CHILD},{icon:"delete-node",label:"delete node",opType:g.OpType.DELETE_NODE}],n}return Object(s.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.diagramState,n=e.onChange,o=e.op,i=this.items.map(function(e){return a.a.createElement(b,{config:e,key:e.label,diagramState:t,onChange:n,op:o})});return a.a.createElement("div",null,a.a.createElement("div",{className:"bm-toolbar"},i))}}]),t}(a.a.Component),w=function(e){function t(e){var n;Object(r.a)(this,t),(n=Object(p.a)(this,Object(u.a)(t).call(this,e))).onChange=function(e){console.log("onChange"),console.log(e.mindMapModel),n.setState({diagramState:e})},n.onKeyDown=function(e){var t=n.getFocusItemMode();t!==g.FocusItemMode.Normal&&t!==g.FocusItemMode.PopupMenu||e.preventDefault()},n.onKeyUp=function(e){console.log(e);var t=n.getFocusItemMode();switch(e.which){case d.a.TAB:t!==g.FocusItemMode.Normal&&t!==g.FocusItemMode.PopupMenu||n.op(g.OpType.ADD_CHILD);break;case d.a.RETURN:t!==g.FocusItemMode.Normal&&t!==g.FocusItemMode.PopupMenu||n.op(g.OpType.ADD_SIBLING),t===g.FocusItemMode.Editing&&e.ctrlKey&&n.op(g.OpType.ADD_SIBLING)}},n.op=function(e,t,o){var a=n.state.diagramState,i=g.DiagramState.op(a,e,t,o);n.onChange(i)};var o=g.MindMapModel.createWith({rootItemKey:"root",editorRootItemKey:"root",items:[{key:"root",content:"MainTopic",subItemKeys:["sub1","sub2"]},{key:"sub1",parentKey:"root",content:"SubTopic",subItemKeys:[],collapse:!0},{key:"sub2",parentKey:"root",content:"SubTopic",subItemKeys:[]}]}),a=g.DiagramState.createWith(o,{hMargin:10});return n.state={diagramState:a},n}return Object(s.a)(t,e),Object(l.a)(t,[{key:"getFocusItemMode",value:function(){return this.state.diagramState.mindMapModel.getFocusItemMode()}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.onKeyUp)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp)}},{key:"render",value:function(){return a.a.createElement("div",{className:"mindmap"},a.a.createElement(k,{diagramState:this.state.diagramState,onChange:this.onChange,op:this.op}),a.a.createElement(g.DiagramWidget,{diagramState:this.state.diagramState,onChange:this.onChange}))}}]),t}(a.a.Component);n(498),n(499);var S=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(w,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(S,null),document.getElementById("root")),c.a.render(a.a.createElement(E.a,null),document.getElementById("popup")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[165,1,2]]]);
//# sourceMappingURL=main.08ed4cc9.chunk.js.map