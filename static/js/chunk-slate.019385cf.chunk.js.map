{"version":3,"sources":["../../blink-mind/node_modules/slate-plain-serializer/lib/slate-plain-serializer.es.js","../../rich-markdown-editor/node_modules/@tommoor/slate-edit-list/dist/changes/index.js","../../rich-markdown-editor/node_modules/@tommoor/slate-edit-list/dist/utils/getCurrentItem.js","../../rich-markdown-editor/node_modules/outline-icons/lib/components/Icon.js","../../blink-mind/node_modules/slate/node_modules/debug/src/browser.js","../../rich-markdown-editor/node_modules/slate/node_modules/debug/src/browser.js","../../blink-mind/node_modules/slate/lib/slate.es.js","../../rich-markdown-editor/node_modules/@wikifactory/slate-edit-code/dist/changes/index.js","../../rich-markdown-editor/node_modules/@wikifactory/slate-edit-blockquote/dist/utils/index.js","../../rich-markdown-editor/node_modules/@wikifactory/slate-edit-blockquote/dist/changes/index.js","../../rich-markdown-editor/node_modules/@tommoor/slate-edit-list/dist/options.js","../../rich-markdown-editor/node_modules/@tommoor/slate-edit-list/dist/utils/isList.js","../../rich-markdown-editor/node_modules/slate-md-serializer/lib/urls.js","../../rich-markdown-editor/node_modules/@wikifactory/slate-edit-code/dist/options.js","../../rich-markdown-editor/node_modules/@wikifactory/slate-edit-code/dist/handlers/onTab.js","../../rich-markdown-editor/node_modules/@wikifactory/slate-edit-code/dist/utils/getCurrentCode.js","../../rich-markdown-editor/node_modules/@wikifactory/slate-edit-code/dist/utils/getIndent.js","../../rich-markdown-editor/node_modules/@wikifactory/slate-edit-code/dist/changes/wrapCodeBlock.js","../../rich-markdown-editor/node_modules/@wikifactory/slate-edit-code/dist/changes/wrapCodeBlockByKey.js","../../rich-markdown-editor/node_modules/@wikifactory/slate-edit-code/dist/changes/unwrapCodeBlock.js","../../rich-markdown-editor/node_modules/@wikifactory/slate-edit-code/dist/changes/unwrapCodeBlockByKey.js","../../rich-markdown-editor/node_modules/@wikifactory/slate-edit-code/dist/handlers/onShiftTab.js","../../rich-markdown-editor/node_modules/@wikifactory/slate-edit-code/dist/handlers/onEnter.js","../../rich-markdown-editor/node_modules/@wikifactory/slate-edit-code/dist/handlers/onModEnter.js","../../rich-markdown-editor/node_modules/@wikifactory/slate-edit-code/dist/handlers/onBackspace.js","../../rich-markdown-editor/node_modules/@wikifactory/slate-edit-code/dist/handlers/onSelectAll.js","../../rich-markdown-editor/node_modules/slate-schema-violations/lib/slate-schema-violations.es.js","../../rich-markdown-editor/node_modules/@wikifactory/slate-edit-blockquote/dist/options.js","../../rich-markdown-editor/node_modules/@wikifactory/slate-edit-blockquote/dist/handlers/onBackspace.js","../../rich-markdown-editor/node_modules/@wikifactory/slate-edit-blockquote/dist/utils/getCurrentBlockquote.js","../../rich-markdown-editor/node_modules/@wikifactory/slate-edit-blockquote/dist/handlers/onEnter.js","../../rich-markdown-editor/node_modules/golery-slate-prism/dist/TOKEN_MARK.js","../../rich-markdown-editor/node_modules/@tommoor/slate-edit-list/dist/utils/getListForItem.js","../../rich-markdown-editor/node_modules/@tommoor/slate-edit-list/dist/utils/getItemsAtRange.js","../../blink-mind/node_modules/slate-md-serializer/lib/urls.js","../../rich-markdown-editor/node_modules/slate-dev-logger/lib/slate-dev-logger.es.js","../../blink-mind/node_modules/slate-md-serializer/lib/renderer.js","../../blink-mind/node_modules/slate-dev-environment/lib/slate-dev-environment.es.js","../../blink-mind/node_modules/slate-base64-serializer/lib/slate-base64-serializer.es.js","../../blink-mind/node_modules/slate-hotkeys/lib/slate-hotkeys.es.js","../../blink-mind/node_modules/slate-prop-types/lib/slate-prop-types.es.js","../../blink-mind/node_modules/slate-react-placeholder/lib/slate-react-placeholder.es.js","../../blink-mind/node_modules/slate-react/node_modules/memoize-one/dist/memoize-one.esm.js","../../blink-mind/node_modules/slate-react/lib/slate-react.es.js","../../blink-mind/node_modules/slate/node_modules/debug/src/common.js","../../rich-markdown-editor/node_modules/slate/lib/slate.es.js","../../rich-markdown-editor/node_modules/slate-dev-environment/lib/slate-dev-environment.es.js","../../rich-markdown-editor/node_modules/slate-base64-serializer/lib/slate-base64-serializer.es.js","../../rich-markdown-editor/node_modules/slate-plain-serializer/lib/slate-plain-serializer.es.js","../../rich-markdown-editor/node_modules/slate-hotkeys/lib/slate-hotkeys.es.js","../../rich-markdown-editor/node_modules/slate-prop-types/lib/slate-prop-types.es.js","../../rich-markdown-editor/node_modules/slate-react-placeholder/lib/slate-react-placeholder.es.js","../../rich-markdown-editor/node_modules/slate-react/lib/slate-react.es.js","../../blink-mind/node_modules/slate-react/node_modules/debug/src/common.js","../../rich-markdown-editor/node_modules/@wikifactory/slate-edit-code/dist/utils/index.js","../../blink-mind/node_modules/slate-react/node_modules/debug/src/browser.js","../../rich-markdown-editor/node_modules/slate-react/node_modules/debug/src/browser.js","../../rich-markdown-editor/node_modules/slate/node_modules/debug/src/common.js","../../rich-markdown-editor/node_modules/slate/node_modules/ms/index.js","../../rich-markdown-editor/node_modules/@tommoor/slate-edit-list/dist/utils/index.js","../../rich-markdown-editor/node_modules/slate-react/node_modules/debug/src/common.js","../../rich-markdown-editor/node_modules/slate-react/node_modules/ms/index.js","../../rich-markdown-editor/node_modules/slate-md-serializer/lib/renderer.js","../../rich-markdown-editor/node_modules/slate-md-serializer/lib/parser.js","../../rich-markdown-editor/node_modules/slate-md-serializer/lib/utils.js","../../rich-markdown-editor/node_modules/@wikifactory/slate-trailing-block/dist/index.js","../../rich-markdown-editor/node_modules/@wikifactory/slate-trailing-block/dist/focusAtEnd.js","../../rich-markdown-editor/node_modules/@wikifactory/slate-edit-code/dist/index.js","../../rich-markdown-editor/node_modules/@wikifactory/slate-edit-code/dist/handlers/index.js","../../rich-markdown-editor/node_modules/@wikifactory/slate-edit-code/dist/utils/deserializeCode.js","../../rich-markdown-editor/node_modules/@wikifactory/slate-edit-code/dist/utils/getCurrentIndent.js","../../rich-markdown-editor/node_modules/@wikifactory/slate-edit-code/dist/utils/isInCodeBlock.js","../../rich-markdown-editor/node_modules/@wikifactory/slate-edit-code/dist/changes/dedentLines.js","../../rich-markdown-editor/node_modules/@wikifactory/slate-edit-code/dist/changes/indentLines.js","../../rich-markdown-editor/node_modules/@wikifactory/slate-edit-code/dist/changes/toggleCodeBlock.js","../../rich-markdown-editor/node_modules/@wikifactory/slate-edit-code/dist/handlers/onPaste.js","../../rich-markdown-editor/node_modules/@wikifactory/slate-edit-code/dist/handlers/onKeyDown.js","../../rich-markdown-editor/node_modules/@wikifactory/slate-edit-code/dist/core.js","../../rich-markdown-editor/node_modules/@wikifactory/slate-edit-code/dist/validation/index.js","../../rich-markdown-editor/node_modules/@wikifactory/slate-edit-code/dist/validation/schema.js","../../rich-markdown-editor/node_modules/@wikifactory/slate-edit-blockquote/dist/index.js","../../rich-markdown-editor/node_modules/@wikifactory/slate-edit-blockquote/dist/handlers/index.js","../../rich-markdown-editor/node_modules/@wikifactory/slate-edit-blockquote/dist/utils/isSelectionInBlockquote.js","../../rich-markdown-editor/node_modules/@wikifactory/slate-edit-blockquote/dist/changes/unwrapBlockquote.js","../../rich-markdown-editor/node_modules/@wikifactory/slate-edit-blockquote/dist/changes/wrapInBlockquote.js","../../rich-markdown-editor/node_modules/@wikifactory/slate-edit-blockquote/dist/handlers/onKeyDown.js","../../rich-markdown-editor/node_modules/@wikifactory/slate-edit-blockquote/dist/core.js","../../rich-markdown-editor/node_modules/@wikifactory/slate-edit-blockquote/dist/validation/index.js","../../rich-markdown-editor/node_modules/@wikifactory/slate-edit-blockquote/dist/validation/schema.js","../../rich-markdown-editor/node_modules/@domoinc/slate-edit-table/lib/index.es.js","../../rich-markdown-editor/node_modules/slate-drop-or-paste-images/lib/slate-drop-or-paste-images.es.js","../../rich-markdown-editor/node_modules/slate-paste-linkify/lib/slate-paste-linkify.es.js","../../rich-markdown-editor/node_modules/slate-collapse-on-escape/lib/slate-collapse-on-escape.es.js","../../rich-markdown-editor/node_modules/golery-slate-prism/dist/index.js","../../rich-markdown-editor/node_modules/golery-slate-prism/dist/options.js","../../rich-markdown-editor/node_modules/@tommoor/slate-edit-list/dist/index.js","../../rich-markdown-editor/node_modules/@tommoor/slate-edit-list/dist/handlers/index.js","../../rich-markdown-editor/node_modules/@tommoor/slate-edit-list/dist/handlers/onEnter.js","../../rich-markdown-editor/node_modules/@tommoor/slate-edit-list/dist/changes/wrapInList.js","../../rich-markdown-editor/node_modules/@tommoor/slate-edit-list/dist/utils/getCurrentList.js","../../rich-markdown-editor/node_modules/@tommoor/slate-edit-list/dist/utils/getDeepestItemDepth.js","../../rich-markdown-editor/node_modules/@tommoor/slate-edit-list/dist/utils/getItemDepth.js","../../rich-markdown-editor/node_modules/@tommoor/slate-edit-list/dist/utils/getPreviousItem.js","../../rich-markdown-editor/node_modules/@tommoor/slate-edit-list/dist/utils/isItem.js","../../rich-markdown-editor/node_modules/@tommoor/slate-edit-list/dist/utils/isSelectionInList.js","../../rich-markdown-editor/node_modules/@tommoor/slate-edit-list/dist/changes/unwrapList.js","../../rich-markdown-editor/node_modules/@tommoor/slate-edit-list/dist/changes/splitListItem.js","../../rich-markdown-editor/node_modules/@tommoor/slate-edit-list/dist/changes/increaseItemDepth.js","../../rich-markdown-editor/node_modules/@tommoor/slate-edit-list/dist/changes/decreaseItemDepth.js","../../rich-markdown-editor/node_modules/@tommoor/slate-edit-list/dist/changes/toggleList.js","../../rich-markdown-editor/node_modules/@tommoor/slate-edit-list/dist/handlers/onTab.js","../../rich-markdown-editor/node_modules/@tommoor/slate-edit-list/dist/handlers/onBackspace.js","../../rich-markdown-editor/node_modules/@tommoor/slate-edit-list/dist/core.js","../../rich-markdown-editor/node_modules/@tommoor/slate-edit-list/dist/validation/index.js","../../rich-markdown-editor/node_modules/@tommoor/slate-edit-list/dist/validation/schema.js","../../rich-markdown-editor/node_modules/@tommoor/slate-edit-list/dist/validation/normalizeNode.js","../../rich-markdown-editor/node_modules/outline-icons/lib/components/AlignCenterIcon.js","../../rich-markdown-editor/node_modules/outline-icons/lib/components/AlignLeftIcon.js","../../rich-markdown-editor/node_modules/outline-icons/lib/components/AlignRightIcon.js","../../rich-markdown-editor/node_modules/outline-icons/lib/components/ArchiveIcon.js","../../rich-markdown-editor/node_modules/outline-icons/lib/components/BackIcon.js","../../rich-markdown-editor/node_modules/outline-icons/lib/components/BillingIcon.js","../../rich-markdown-editor/node_modules/outline-icons/lib/components/BlockQuoteIcon.js","../../rich-markdown-editor/node_modules/outline-icons/lib/components/BoldIcon.js","../../rich-markdown-editor/node_modules/outline-icons/lib/components/BulletedListIcon.js","../../rich-markdown-editor/node_modules/outline-icons/lib/components/CheckboxIcon.js","../../rich-markdown-editor/node_modules/outline-icons/lib/components/CheckmarkIcon.js","../../rich-markdown-editor/node_modules/outline-icons/lib/components/CloseIcon.js","../../rich-markdown-editor/node_modules/outline-icons/lib/components/CodeIcon.js","../../rich-markdown-editor/node_modules/outline-icons/lib/components/CollapsedIcon.js","../../rich-markdown-editor/node_modules/outline-icons/lib/components/CollectionIcon.js","../../rich-markdown-editor/node_modules/outline-icons/lib/components/DocumentIcon.js","../../rich-markdown-editor/node_modules/outline-icons/lib/components/EditIcon.js","../../rich-markdown-editor/node_modules/outline-icons/lib/components/EmailIcon.js","../../rich-markdown-editor/node_modules/outline-icons/lib/components/ExpandedIcon.js","../../rich-markdown-editor/node_modules/outline-icons/lib/components/GoToIcon.js","../../rich-markdown-editor/node_modules/outline-icons/lib/components/HashtagIcon.js","../../rich-markdown-editor/node_modules/outline-icons/lib/components/Heading1Icon.js","../../rich-markdown-editor/node_modules/outline-icons/lib/components/Heading2Icon.js","../../rich-markdown-editor/node_modules/outline-icons/lib/components/HomeIcon.js","../../rich-markdown-editor/node_modules/outline-icons/lib/components/HorizontalRuleIcon.js","../../rich-markdown-editor/node_modules/outline-icons/lib/components/ImageIcon.js","../../rich-markdown-editor/node_modules/outline-icons/lib/components/InsertAboveIcon.js","../../rich-markdown-editor/node_modules/outline-icons/lib/components/InsertBelowIcon.js","../../rich-markdown-editor/node_modules/outline-icons/lib/components/InsertLeftIcon.js","../../rich-markdown-editor/node_modules/outline-icons/lib/components/InsertRightIcon.js","../../rich-markdown-editor/node_modules/outline-icons/lib/components/ItalicIcon.js","../../rich-markdown-editor/node_modules/outline-icons/lib/components/KeyboardIcon.js","../../rich-markdown-editor/node_modules/outline-icons/lib/components/LinkIcon.js","../../rich-markdown-editor/node_modules/outline-icons/lib/components/MenuIcon.js","../../rich-markdown-editor/node_modules/outline-icons/lib/components/MoonIcon.js","../../rich-markdown-editor/node_modules/outline-icons/lib/components/MoreIcon.js","../../rich-markdown-editor/node_modules/outline-icons/lib/components/NewDocumentIcon.js","../../rich-markdown-editor/node_modules/outline-icons/lib/components/NextIcon.js","../../rich-markdown-editor/node_modules/outline-icons/lib/components/OpenIcon.js","../../rich-markdown-editor/node_modules/outline-icons/lib/components/OrderedListIcon.js","../../rich-markdown-editor/node_modules/outline-icons/lib/components/PadlockIcon.js","../../rich-markdown-editor/node_modules/outline-icons/lib/components/PinIcon.js","../../rich-markdown-editor/node_modules/outline-icons/lib/components/PlusIcon.js","../../rich-markdown-editor/node_modules/outline-icons/lib/components/PrivateCollectionIcon.js","../../rich-markdown-editor/node_modules/outline-icons/lib/components/ProfileIcon.js","../../rich-markdown-editor/node_modules/outline-icons/lib/components/SearchIcon.js","../../rich-markdown-editor/node_modules/outline-icons/lib/components/SettingsIcon.js","../../rich-markdown-editor/node_modules/outline-icons/lib/components/StarredIcon.js","../../rich-markdown-editor/node_modules/outline-icons/lib/components/StrikethroughIcon.js","../../rich-markdown-editor/node_modules/outline-icons/lib/components/TableIcon.js","../../rich-markdown-editor/node_modules/outline-icons/lib/components/TeamIcon.js","../../rich-markdown-editor/node_modules/outline-icons/lib/components/TodoListIcon.js","../../rich-markdown-editor/node_modules/outline-icons/lib/components/TrashIcon.js","../../rich-markdown-editor/node_modules/outline-icons/lib/components/UserIcon.js","../../rich-markdown-editor/node_modules/outline-icons/lib/index.js","../../blink-mind/node_modules/slate-md-serializer/lib/parser.js","../../blink-mind/node_modules/slate-md-serializer/lib/utils.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","serializeNode","node","_options$delimiter2","undefined","delimiter","object","isBlockList","nodes","map","join","text","index","deserialize","string","options","_options$defaultBlock","defaultBlock","_options$defaultMarks","defaultMarks","_options$delimiter","_options$toJSON","toJSON","isSet","toArray","createProperties","json","document","data","split","line","marks","fromJSON","serialize","value","defineProperty","exports","decreaseItemDepth","increaseItemDepth","splitListItem","unwrapList","wrapInList","toggleList","_wrapInList2","_interopRequireDefault","_unwrapList2","_splitListItem2","_increaseItemDepth2","_decreaseItemDepth2","_toggleList2","obj","__esModule","default","opts","block","selection","start","startBlock","parent","getParent","type","typeItem","React","newObj","_interopRequireWildcard","_ref","children","className","onClick","rest","theme","keys","indexOf","_objectWithoutProperties","size","fill","color","light","black","createElement","width","height","viewBox","xmlns","_typeof","Symbol","iterator","constructor","log","_console","console","apply","formatArgs","args","this","useColors","namespace","module","humanize","diff","c","splice","lastC","replace","match","save","namespaces","storage","setItem","removeItem","error","load","r","getItem","process","DEBUG","window","__nwjs","navigator","userAgent","toLowerCase","documentElement","style","WebkitAppearance","firebug","exception","table","parseInt","RegExp","$1","localStorage","localstorage","colors","formatters","j","v","JSON","stringify","message","n","generate","resetGenerator","KeyUtils","create","Error","setGenerator","func","classCallCheck","instance","Constructor","TypeError","createClass","defineProperties","props","descriptor","enumerable","configurable","writable","protoProps","staticProps","inherits","subClass","superClass","setPrototypeOf","__proto__","objectWithoutProperties","possibleConstructorReturn","self","ReferenceError","slicedToArray","arr","Array","isArray","_arr","_n","_d","_e","_s","_i","next","done","push","err","sliceIterator","toConsumableArray","arr2","from","Data","attrs","isMap","fromJS","DEFAULTS","Document","_Record","getPrototypeOf","preserveKeys","isDocument","isList","_object$data","_object$key","_object$nodes","Node","createList","DEFAULTS$1","Inline","isInline","elements","list","any","every","item","DEFAULTS$2","Mark","isMark","DEFAULTS$3","Leaf","mark","newMark","equals","has","newMarks","withMutations","collection","remove","add","set","set$$1","union","offset","slice","m","isLeaf","leaves","invalid","result","cache","findLast","leaf","firstLeaf","first","unshift","endOffset","left","right","find","startOffset","of","take","skip","_object$text","_object$marks","ENABLED","LEAF","STORE_KEY","UNDEFINED","NULL","UNSET","memoizeStore","WeakMap","memoize","properties","_loop","property","original","_len","_key","noArgs","hasArgs","_memoizeStore$get","get","takesArguments","cachedValue","getIn","concat","setIn","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","return","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","child","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","newChild","resetMemoization","useMemoization","enabled","DEFAULTS$4","Text","l","addMarks","newFirst","_Leaf$splitLeaves","splitLeaves","_Leaf$splitLeaves2","before","bundle","_Leaf$splitLeaves3","_Leaf$splitLeaves4","middle","after","x","setLeaves","decorations","d","_marks","_leaf","forEach","dec","end","hasStart","hasEnd","_Leaf$splitLeaves5","_Leaf$splitLeaves6","_Leaf$splitLeaves7","_Leaf$splitLeaves8","addMark","createLeaves","getActiveMarks","leafEnd","leafStart","intersect","_this2","toOrderedSet","getMarks","array","getMarksAsArray","searchLeafAtOffset","_searchLeafAtOffset2","delta","beforeText","afterText","nextLeaves","removeMark","_Leaf$splitLeaves9","_Leaf$splitLeaves10","_Leaf$splitLeaves11","_Leaf$splitLeaves12","_searchLeafAtOffset3","_leaves2","_Leaf$splitLeaves13","_Leaf$splitLeaves14","getLeaves","newProperties","merge","updateMark","_Leaf$splitLeaves15","_Leaf$splitLeaves16","_Leaf$splitLeaves17","_Leaf$splitLeaves18","splitted","regenerateKey","isText","_attrs","ranges","isNode","kind","Block","isBlock","DEFAULTS$5","compare","path","min","pv","tv","create$1","crop","a","b","decrement","increment","newValue","isAbove","_crop","_crop2","p","t","isEqual","isYounger","_crop9","_crop10","pl","tl","Math","PathUtils","getAncestors","isAfter","_crop3","_crop4","isBefore","_crop5","_crop6","isOlder","_crop7","_crop8","isSibling","butLast","lift","drop","max","relate","av","transform","operation","position","pIndex","pEqual","pYounger","pAbove","np","newPath","paths","DEFAULTS$6","Point","point","isUnset","range","isAfterPoint","isBeforePoint","last","getLastText","getFirstText","hasNode","moveForward","setOffset","moveBackward","moveTo","getNode","getPath","_text","getTextAtOffset","getOffset","isPoint","_object$offset","_object$path","DEFAULTS$7","anchor","focus","Decoration","_properties","isDecoration","Range","isRange","TYPES","change","decoration","editor","inline","isObject","DEFAULTS$8","Selection","isSelection","DEFAULTS$9","isFocused","createSet","_object$isFocused","DEFAULTS$10","Value","insertNode","mapRanges","updatePoints","setPath","assertNode","insertText","newDocument","mergeNode","resolvePath","withPath","one","two","moveAnchorTo","moveFocusTo","newIndex","_value5","moveNode","prev","getPreviousText","getNextText","removeNode","_range","moveStartTo","unset","moveEndTo","removeText","setNode","setMark","resolveDecoration","_value12","setProperties","resolveSelection","splitNode","_range2","_value14","sel","createSelection","decs","createDecoration","filter","preserveData","preserveDecorations","preserveSelection","getClosestBlock","getClosestInline","getDescendant","getNextBlock","getPreviousBlock","getNextInline","getPreviousInline","getMarksAtRange","getActiveMarksAtRange","getLeafBlocksAtRange","getFragmentAtRange","getLeafInlinesAtRange","getTextsAtRange","isValue","_object$decorations","_object$document","_object$selection","moveToStartOfNode","debug","applyOperation","op","Operation","_op2","_op3","_path","_op4","_path2","_offset","_path3","_op6","_path4","_op7","_path5","_offset2","_length","_mark","_path6","_op9","_path7","_offset3","_op10","_path8","_offset4","_length2","_op11","_path9","_newProperties","_newProperties2","setSelection","_newProperties3","_op14","_path10","debug$1","invertOperation","inversePath","transformedSibling","_inversePath","_inversePath2","_op5","OPERATION_ATTRIBUTES","add_mark","insert_node","insert_text","merge_node","move_node","remove_mark","remove_node","remove_text","set_mark","set_node","set_selection","set_value","split_node","DEFAULTS$11","ATTRIBUTES","toJS","_v","_v2","_v3","_v4","_v5","isOperation","DEFAULTS$12","operations","Change","o","isChange","_object$operations","CommandsPlugin","commands","onCommand","command","fn","onConstruct","registerCommand","SURROGATE_START","SURROGATE_END","SPACE","CHAMELEON","PUNCTUATION","isSurrogate","code","isWord","char","remaining","test","charAt","getCharLength","charCodeAt","getCharOffset","getWordOffset","started","TextUtils","getCharOffsetBackward","getCharOffsetForward","getWordOffsetBackward","getWordOffsetForward","deleteExpandedAtRange","isExpanded","deleteAtRange","hasDescendant","moveToStart","normalize","Commands$1","isCollapsed","texts","withoutNormalizing","addMarkByKey","addMarkAtRange","snapshotSelection","startKey","endKey","isStartVoid","hasVoidParent","isEndVoid","endBlock","isHanging","prevText","startVoid","getClosestVoid","nextText","removeNodeByKey","endVoid","_prevText","startText","endText","startLength","endLength","ancestor","getCommonAncestor","startChild","getFurthestAncestor","endChild","startParent","startParentIndex","endParentIndex","_index","reverse","startChildIndex","endChildIndex","_parent","_index2","removeTextByKey","lonely","getFurthestOnlyChildAncestor","moveNodeByKey","mergeNodeByKey","voidParent","isAtStartOfNode","prevBlock","prevVoid","moveFocusBackward","traversed","deleteBackwardAtRange","deleteForwardAtRange","_range3","isVoid","nextBlock","isAtEndOfNode","_nextBlock","nextVoid","moveFocusForward","_next","wordOffset","startInline","extra","insertNodeByKey","atEnd","siblingText","splitRange","moveToEndOfNode","splitDescendantsByKey","fragment","mapDescendants","isAtStart","blocks","getBlocks","firstChild","lastChild","firstBlock","lastBlock","insertionNode","findInsertionNode","insertBlockAtRange","hasBlockChildren","lonelyChild","getFurthest","startIndex","nextChild","getNextSibling","nextNodes","skipUntil","lastIndex","findDescendant","inlineChild","inlineIndex","hasSingleNode","firstNode","fragmentInner","documentInner","documentNode","insertInlineAtRange","assertDescendant","splitNodeByKey","insertTextAtRange","insertTextByKey","removeMarkAtRange","removeMarkByKey","setBlocksAtRange","sets","setNodeByKey","setInlinesAtRange","inlines","splitBlockAtRange","_range8","_value","h","isBackward","flip","moveAnchorToStartOfNode","setFocus","resolveRange","splitInlineAtRange","Infinity","_range9","toggleMarkAtRange","some","unwrapBlockAtRange","wrappers","getClosest","isSuperset","exists","toList","firstMatch","lastMatch","takeUntil","firstText","unwrapInlineAtRange","wrapBlockAtRange","clear","firstblock","lastblock","siblings","p1","p2","indexes","reduce","ind","wrapInlineAtRange","inlineParent","wrapInlineByKey","endInline","endIndex","splitText","inlinekey","rng","select","startInner","startInnerIndex","endInner","startInlines","endInlines","startNode","endNode","wrapTextAtRange","prefix","suffix","startRange","endRange","moveToEnd","Commands$2","bx","by","ax","ay","insertNodeByPath","getMarksAtIndex","updated","isAtomic","setDecorations","previous","getPreviousSibling","newParentPath","state","getTextsAsArray","to","removals","newNode","parentPath","removeNodeByPath","createRange","activeMarks","removeTextByPath","activeMark","insertTextByPath","prevProperties","replaceTextByPath","_options$target","textPath","textOffset","splitNodeByPath","prevIndex","moveToRangeOfNode","parentIndex","grandPath","isFirst","isLast","moveNodeByPath","updatedPath","childIndex","childPath","wrapBlockByPath","wrapInlineByPath","method","_len3","_key3","assertPath","newKey","textKey","_len2","_key2","splitDescendantsByPath","Commands$3","_editor$tmp","tmp","undos","lastBatch","lastOperation","batch","pop","_batch","takeLast","withoutSaving","redos","newData","setData","redo","_op","undo","invert","inverse","_inverse","withoutMerging","Commands$4","proxy","_editor$value$selecti","_len41","_key41","pointEdgeObject","edge","toUpperCase","Edge","pointEdgeSideObject","side","Side","getDirectionNode","pointBackward","pointForward","isInBlock","isPreviousInVoid","isNextInVoid","pointWordBackward","pointName","pointWordForward","blur","deselect","moveAnchorBackward","moveAnchorWordBackward","moveAnchorForward","moveAnchorWordForward","_len4","_key4","_len5","_key5","moveAnchorToEndOfBlock","moveAnchorToEndOfInline","moveAnchorToEndOfDocument","moveAnchorToEndOfNode","moveToAnchor","moveAnchorToEndOfNextBlock","moveAnchorToEndOfNextInline","moveAnchorToEndOfNextText","_len6","_key6","moveAnchorToEndOfPreviousBlock","moveAnchorToEndOfPreviousInline","moveAnchorToEndOfPreviousText","moveAnchorToEndOfText","moveAnchorToStartOfBlock","moveAnchorToStartOfDocument","moveAnchorToStartOfInline","moveAnchorToStartOfNextBlock","moveAnchorToStartOfNextInline","moveAnchorToStartOfNextText","_len7","_key7","moveAnchorToStartOfPreviousBlock","moveAnchorToStartOfPreviousInline","moveAnchorToStartOfPreviousText","moveAnchorToStartOfText","_editor$moveAnchorBac","_len8","_key8","moveWordBackward","_len9","_key9","moveFocusWordBackward","moveToFocus","moveEndBackward","_len10","_key10","moveEndWordBackward","_len11","_key11","moveEndForward","_len12","_key12","moveEndWordForward","_len13","_key13","_len14","_key14","moveEndToEndOfBlock","moveEndToEndOfDocument","moveEndToEndOfNode","moveEndToEndOfInline","moveEndToEndOfNextBlock","moveEndToEndOfNextInline","moveEndToEndOfNextText","_len15","_key15","moveEndToEndOfPreviousBlock","moveEndToEndOfPreviousInline","moveEndToEndOfPreviousText","moveEndToEndOfText","moveEndToStartOfBlock","moveEndToStartOfDocument","moveEndToStartOfNode","moveEndToStartOfInline","moveEndToStartOfNextBlock","moveEndToStartOfNextInline","moveEndToStartOfNextText","_len16","_key16","moveEndToStartOfPreviousBlock","moveEndToStartOfPreviousInline","moveEndToStartOfPreviousText","moveEndToStartOfText","_len17","_key17","_len18","_key18","_len19","_key19","moveFocusWordForward","_len20","_key20","_len21","_key21","moveFocusToEndOfBlock","moveFocusToEndOfDocument","moveFocusToEndOfNode","moveFocusToEndOfInline","moveFocusToEndOfNextBlock","moveFocusToEndOfNextInline","moveFocusToEndOfNextText","_len22","_key22","moveFocusToEndOfPreviousBlock","moveFocusToEndOfPreviousInline","moveFocusToEndOfPreviousText","moveFocusToEndOfText","moveFocusToStartOfBlock","moveFocusToStartOfDocument","moveFocusToStartOfNode","moveFocusToStartOfInline","moveFocusToStartOfNextBlock","moveFocusToStartOfNextInline","moveFocusToStartOfNextText","_len23","_key23","moveFocusToStartOfPreviousBlock","moveFocusToStartOfPreviousInline","moveFocusToStartOfPreviousText","moveFocusToStartOfText","_editor$moveAnchorFor","_len24","_key24","moveWordForward","_editor$moveFocusWord","_len25","_key25","moveStartBackward","_len26","_key26","moveStartWordBackward","_len27","_key27","moveStartForward","_len28","_key28","moveStartWordForward","_len29","_key29","_len30","_key30","moveStartToEndOfBlock","moveStartToEndOfDocument","moveStartToEndOfNode","moveStartToEndOfInline","moveStartToEndOfNextBlock","moveStartToEndOfNextInline","moveStartToEndOfNextText","_len31","_key31","moveStartToEndOfPreviousBlock","moveStartToEndOfPreviousInline","moveStartToEndOfPreviousText","moveStartToEndOfText","moveStartToStartOfBlock","moveStartToStartOfDocument","moveStartToStartOfNode","moveStartToStartOfInline","moveStartToStartOfNextBlock","moveStartToStartOfNextInline","moveStartToStartOfNextText","_len32","_key32","moveStartToStartOfPreviousBlock","moveStartToStartOfPreviousInline","moveStartToStartOfPreviousText","moveStartToStartOfText","_len33","_key33","moveToEndOfBlock","moveToEndOfDocument","moveToEndOfInline","moveToEndOfNextBlock","moveToEndOfNextInline","moveToEndOfNextText","_len34","_key34","moveToEndOfPreviousBlock","moveToEndOfPreviousInline","moveToEndOfPreviousText","moveToEndOfText","moveToRangeOfDocument","_len35","_key35","moveToStartOfBlock","moveToStartOfDocument","moveToStartOfInline","moveToStartOfNextBlock","moveToStartOfNextInline","moveToStartOfNextText","_len36","_key36","moveToStartOfPreviousBlock","moveToStartOfPreviousInline","moveToStartOfPreviousText","moveToStartOfText","_options$snapshot","snapshot","k","setAnchor","_len37","_key37","setEnd","_len38","_key38","_len39","_key39","setStart","_len40","_key40","Commands$5","QueriesPlugin","queries","query","registerQuery","onQuery","ret","SlateError","_Error","_this","captureStackTrace","stack","SchemaPlugin","schema","rules","schemaRules","validateNode","matches","testRules","failure","validateRules","normalizeNode","rule","delete","getTexts","defaultNormalize","_options$every","_error","fail","validateObject","validateType","validateData","def","_ret","validateMarks","validateText","validateFirst","validateLast","defs","count","lastCount","nextDef","shift","rewind","validateParent","validatePrevious","validateNext","limit","lastMin","validateNodes","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","deleteExpanded","Commands$6","_sel","deleteBackward","deleteCharBackward","deleteCharBackwardAtRange","deleteLineBackward","deleteLineBackwardAtRange","deleteWordBackward","deleteWordBackwardAtRange","deleteForward","deleteCharForward","deleteCharForwardAtRange","deleteLineForward","deleteLineForwardAtRange","deleteWordForward","deleteWordForwardAtRange","insertBlock","insertFragment","_value2","lastText","lastInline","isAppending","isInserting","insertFragmentAtRange","newTexts","includes","newText","insertInline","getInsertMarksAtRange","_marks2","_sel2","replaceMark","oldMark","setBlocks","setInlines","splitBlock","depth","splitInline","toggleMark","unwrapBlock","unwrapInline","wrapBlock","wrapInline","wrapText","isForward","debug$2","Editor","_options$controller","controller","_options$construct","construct","_attrs$onChange","onChange","_attrs$plugins","plugins","_attrs$readOnly","readOnly","_attrs$value","middleware","dirty","flushing","registerPlugin","plugin","commandsPlugin","queriesPlugin","schemaPlugin","_options$plugins","isEmpty","CorePlugin","run","setReadOnly","setValue","newDirtyPaths","ancestors","getKeysToPathsTable","values","_ancestors","_ancestors2","nextPath","_ancestors3","previousPath","oldAncestors","newAncestors","_ancestors4","getDirtyPaths","memo","transformed","Promise","resolve","then","flush","normalizeDirtyPaths","__command","__query","_this3","fns","overrides","_options$normalize","_this4","normalizeNodeByPath","iterations","found","mixin","Interface","Classes","Class","getOwnPropertyNames","name","desc","getOwnPropertyDescriptor","_name","entries","_ref2","camel","TYPE","is$$1","ObjectInterface","bind","create$2","ModelInterface","NodeInterface","descendant","nested","getText","ElementInterface","replaceNode","resolvePoint","forEachDescendant","pathToThisNode","foundPath","forEachDescendantWithPath","findDescendantAndPath","_start","getMarksAtPosition","toSet","startPath","endPath","_getPreviousTextAndPa","getPreviousTextAndPath","_getPreviousTextAndPa2","_getNextTextAndPath","getNextTextAndPath","_getNextTextAndPath2","getActiveMarksBetweenOffsets","startMarks","endMarks","_getNextTextAndPath3","_getNextTextAndPath4","_getNextTextAndPath5","_getNextTextAndPath6","current","getBlocksAsArray","isLeafBlock","getLeafBlocksAtRangeAsArray","getBlocksByTypeAsArray","startAt","targetPath","targetPosition","mode","getInlinesAsArray","isLeafInline","getLeafInlinesAtRangeAsArray","getInlinesByTypeAsArray","_range5","getLeafBlocksBetweenPathPositionsAsArray","childStartPath","childEndPath","getTextsAtRangeAsArray","currentMarks","closestBlock","_previous","previousText","getOrderedMarksAtRange","getMarksByTypeAsArray","getNextDeepMatchingNodeAndPath","nextNode","getNextMatchingNodeAndPath","_match","childMatch","findFirstDescendantAndPath","_childMatch","_childMatch2","getNextNode","_range6","onStartEdge","onEndEdge","relativeStartPath","relativeEndPath","_stack$peek","peek","pushAll","getOrderedMarksBetweenPositions","getMarksBetweenOffsets","getTextsBetweenPathPositionsAsArray","getPreviousDeepMatchingNodeAndPath","getRootInlinesAtRangeAsArray","_this5","getFurthestInline","previousNode","getPreviousMatchingNodeAndPath","_match2","findLastDescendantAndPath","_childMatch3","_childMatch4","getPreviousNode","isSelected","dir","_range10","getChild","toStart","toEnd","_this6","_this7","mergeText","deep","flatMap","deleteIn","_child$splitText","_child$splitText2","befores","afters","_loop2","_iteratorNormalCompletion$1","_didIteratorError$1","_iteratorError$1","_step$1","_iterator$1","RangeInterface","setPoints","_values","updater","wrapCodeBlockByKey","wrapCodeBlock","unwrapCodeBlockByKey","unwrapCodeBlock","toggleCodeBlock","indentLines","dedentLines","_dedentLines2","_indentLines2","_toggleCodeBlock2","_unwrapCodeBlock2","_unwrapCodeBlockByKey2","_wrapCodeBlock2","_wrapCodeBlockByKey2","isSelectionInBlockquote","getCurrentBlockquote","_getCurrentBlockquote2","_isSelectionInBlockquote2","wrapInBlockquote","unwrapBlockquote","_unwrapBlockquote2","_wrapInBlockquote2","Options","_classCallCheck","_possibleConstructorReturn","_inherits","Record","maxDepth","types","typeDefault","canMerge","decodeSafe","uri","component","decodeURIComponent","e","encode","href","trim","decode","decodeURI","_createClass","_slate","onExit","exitBlock","exitBlockType","unwrapNodeByKey","containerType","lineType","selectAll","allowMarks","getIndent","_utils","_changes","event","preventDefault","stopPropagation","indent","getCurrentIndent","currentBlock","_detectIndent","_detectIndent2","DEFAULT_INDENTATION","defaultValue","_wrapCodeBlockByKey","toInsert","deserializeCode","_unwrapCodeBlockByKey","codeBlock","getCurrentCode","currentLineText","resolvedOnExit","_endsWith","_endsWith2","currentLine","beforeSelection","currentCode","isStartOfCode","CHILD_OBJECT_INVALID","CHILD_REQUIRED","CHILD_TYPE_INVALID","CHILD_UNKNOWN","FIRST_CHILD_OBJECT_INVALID","FIRST_CHILD_TYPE_INVALID","LAST_CHILD_OBJECT_INVALID","LAST_CHILD_TYPE_INVALID","NEXT_SIBLING_OBJECT_INVALID","NEXT_SIBLING_TYPE_INVALID","NODE_DATA_INVALID","NODE_IS_VOID_INVALID","NODE_MARK_INVALID","NODE_OBJECT_INVALID","NODE_TEXT_INVALID","NODE_TYPE_INVALID","PARENT_OBJECT_INVALID","PARENT_TYPE_INVALID","PREVIOUS_SIBLING_OBJECT_INVALID","PREVIOUS_SIBLING_TYPE_INVALID","_isList","_isList2","_immutable","_getCurrentItem2","List","defaultSetTimout","defaultClearTimeout","cachedSetTimeout","cachedClearTimeout","runTimeout","fun","setTimeout","global$1","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","timeout","len","marker","runClearTimeout","Item","noop","on","addListener","once","off","removeListener","removeAllListeners","emit","performance","performanceNow","now","mozNow","msNow","oNow","webkitNow","Date","getTime","startTime","nextTick","title","browser","env","argv","version","versions","binding","cwd","chdir","umask","hrtime","previousTimestamp","clocktime","seconds","floor","nanoseconds","platform","release","config","uptime","FORBID_DEPRECATE","FORBID_DEPRECATIONS","FORBID_WARNING","FORBID_WARNINGS","IS_DEV","HAS_CONSOLE","warn","level","forbidden","deprecate","version$$1","logger","_console2","_parser","_parser2","_urls","String","tableHeader","firstRow","RULES","output","Markdown","_toConsumableArray","serializeLeaves","serializeString","inCodeBlock","leave","inCodeMark","childNode","serialized","escape","leavesText","escapeMarkdownChars","markdown","parse","os","_ref3","_ref4","features","InputEvent","element","contentEditable","_ref5","_ref6","_name2","ANDROID_API_VERSIONS","IS_FIREFOX","IS_SAFARI","IS_IE","IS_EDGE","IS_ANDROID","IS_IOS","IS_MAC","ANDROID_API_VERSION","matchData","versionString","_ref7","_ref8","regex","getAndroidApiVersion","HAS_INPUT_EVENTS_LEVEL_2","encodeURIComponent","decoded","raw","deserializeNode","HOTKEYS","bold","compose","extendBackward","extendForward","italic","APPLE_HOTKEYS","moveLineBackward","moveLineForward","extendLineBackward","extendLineForward","transposeCharacter","WINDOWS_HOTKEYS","Hotkeys","IS_APPLE","generic","apple","windows","isGeneric","isApple","isWindows","validate","check","isRequired","propName","componentName","location","propType","isData","isInlineList","isLeafList","isMarkSet","isNodeList","isRangeList","isTextList","condition","instanceCounter","instanceId","placeholderMark","placeholder","when","_options$style","decorateNode","others","renderMark","placeHolderStyle","pointerEvents","display","maxWidth","whiteSpace","opacity","simpleIsEqual","resultFn","lastThis","lastResult","lastArgs","calledOnce","isNewArgEqualToLast","newArg","newArgs","EVENT_HANDLERS","PARSER","OffsetKey","exec","_matches","ZERO_WIDTH_ATTRIBUTE","ZERO_WIDTH_SELECTOR","OFFSET_KEY_ATTRIBUTE","RANGE_SELECTOR","TEXT_SELECTOR","VOID_SELECTOR","findPoint","nativeNode","nativeOffset","_normalizeNodeAndOffs","nodeType","childNodes","direction","getEditableChild","textContent","normalizeNodeAndOffset","nearestNode","nearestOffset","parentNode","rangeNode","closest","textNode","cloneContents","voidNode","querySelector","hasAttribute","offsetKey","getAttribute","createPoint","triedForward","triedBackward","findRange","native","el","anchorNode","startContainer","StaticRange","anchorOffset","focusNode","endContainer","focusOffset","_native","getSelectionFromDOM","domSelection","rangeCount","anchorText","focusText","anchorInline","focusInline","focusBlock","anchorBlock","_nextText","setIsFocused","setSelectionFromDOM","setTextFromDomNode","domNode","lastLeaf","isLastText","isLastLeaf","lastChar","entire","isTextNode","TEXT_NODE","getSnapshot","lastElement","getElementSnapshot","parentElement","nextElementSibling","applySnapshot","applyElementSnapshot","childSnapshot","appendChild","snapLength","removeChild","dataset","dups","Set","querySelectorAll","dup","insertBefore","prevElement","ElementSnapshot","selector","win","DomSnapshot","_ref$before","getSelection","subrootEl","previousElementSibling","Executor","__call__","preventFurtherCalls","resume","ms","cancel","timeoutId","callbackId","requestAnimationFrame","cancelAnimationFrame","onCancel","__setTimeout__","reconcile","NONE","COMPOSING","AndroidPlugin","status","compositionEndSnapshot","reconciler","keyDownSnapshot","deleter","preventNextBeforeInput","compositionEndAction","onBeforeInput","isNative","nativeEvent","inputType","chars","isInputDataLastChar","onCompositionEnd","onCompositionStart","onCompositionUpdate","onInput","_window","_anchorNode","_anchorNode2","onKeyDown","onSelect","slateZeroWidth","removeAllRanges","addRange","fixSelectionInZeroWidthBlock","TRANSFER_TYPES","FRAGMENT","HTML","NODE","RICH","TEXT","findDOMNode","doc","body","createTextRange","collapse","cloneFragment","callback","encoded","getRangeAt","contents","attach","cloneRange","setEndAfter","zw","isNewline","span","setAttribute","valFromSelection","plainText","div","clipboardData","innerHTML","editorEl","selectAllChildren","findNode","getEventRange","_event","clientX","y","clientY","rect","getBoundingClientRect","isPrevious","top","caretRangeFromPoint","caretPositionFromPoint","offsetNode","moveToPoint","FRAGMENT$1","HTML$1","TEXT$1","FRAGMENT_MATCHER","getEventTransfer","transfer","dataTransfer","getType","html","rich","files","embeddedTypes","substring","getEmbeddedTypes","items","getAsFile","getTransferType","getData","TEXT$2","setEventTransfer","content","mime","DOMPlugin","beforeBeforePlugins","beforePlugin","activeElement","compositionCount","isComposing","isCopying","isDragging","isSynthetic","onBlur","relatedTarget","contains","onCopy","onCut","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","dropEffect","onDragStart","onDrop","onFocus","isBlurred","isCompose","isBold","isDeleteBackward","isDeleteForward","isDeleteLineBackward","isDeleteLineForward","isDeleteWordBackward","isDeleteWordForward","isItalic","isRedo","isSplitBlock","isTransposeCharacter","isUndo","onPaste","BeforePlugin","afterPlugin","isDraggingInternally","isMouseDown","_event$getTargetRange","getTargetRanges","targetRange","isVoidBlock","isVoidInline","selectionIncludesNode","dispatchEvent","MouseEvent","view","bubbles","cancelable","isMoveLineBackward","isMoveLineForward","isExtendLineBackward","isExtendLineForward","isMoveBackward","isMoveForward","isMoveWordBackward","isMoveWordForward","isExtendBackward","isExtendForward","_startText","onMouseDown","onMouseUp","frag","AfterPlugin","debug$3","_React$Component","_temp","_props","renderMarks","_props2","renderText","attributes","_props3","Component","propTypes","number","debug$4","_initialiseProps$1","renderLeaf","defaultProps","shouldComponentUpdate","nextProps","pLast","nLast","debug$5","Void","_initialiseProps$2","Tag","spacer","outline","bool","id","getChildrenDecorations","activeDecorations","asMutable","childrenDecorations","keyOrders","globalOrder","endPoints","order","startKeyOrder","containingChildOrder","nextChildIndex","findIndex","containingChild","getContainingChildOrder","isRangeStart","endKeyOrder","isRangeEnd","sort","orderChildDecorations","debug$6","Node$1","Node$$1","_initialiseProps$3","shouldUpdate","getSelectionIndexes","getDecorations","isChildSelected","renderNode","getTextDirection","findDOMPoint","domLength","slateLength","findDOMRange","isBackward$$1","domAnchor","domFocus","OVERFLOWS","IS_IOS_11","scrollToSelection","scroller","overflowY","getComputedStyle","findScrollContainer","isWindow","backward","cursorRect","collapsed","getClientRects","yOffset","xOffset","scrollerTop","scrollerLeft","scrollerBordersY","scrollerBordersX","scrollerPaddingTop","scrollerPaddingBottom","scrollerPaddingLeft","scrollerPaddingRight","innerWidth","innerHeight","pageYOffset","pageXOffset","offsetWidth","offsetHeight","scrollTop","scrollLeft","_window$getComputedSt","borderTopWidth","borderBottomWidth","borderLeftWidth","borderRightWidth","paddingTop","paddingBottom","paddingLeft","paddingRight","scrollerRect","cursorTop","cursorLeft","scrollTo","FIREFOX_NODE_TYPE_ACCESS_ERROR","debug$7","update","Content","isUpdatingSelection","handlers","handler","onEvent","updateSelection","isInEditor","preventScroll","setBaseAndExtent","ref","isContentEditable","onNativeSelectionChange","_this$props","addEventListener","removeEventListener","toRange","tabIndex","role","tagName","spellCheck","Container","wordWrap","WebkitUserModify","suppressContentEditableWarning","autoCorrect","PROPS","ReactPlugin","editorPlugin","prop","renderEditor","debug$8","Editor$1","Editor$$1","mounted","resolves","updates","resolveController","react","handleChange","autoFocus","valueFromProps","valueFromState","setState","_controller","_controller2","_controller3","hasCommand","_controller4","hasQuery","_controller5","_controller6","_controller7","_controller8","_controller9","_controller10","_controller11","_controller12","_controller13","_controller14","applyOperations","_controller15","setOperationFlag","_controller16","getFlag","_controller17","unsetOperationFlag","_controller18","withoutNormalization","selectColor","hash","createDebug","abs","prevTime","curr","Number","coerce","format","formatter","val","destroy","extend","init","instances","disable","enable","names","skips","substr","isInCodeBlock","_deserializeCode2","_getCurrentCode2","_getCurrentIndent2","_getIndent2","_isInCodeBlock2","s","w","plural","msAbs","isPlural","round","str","parseFloat","isFinite","long","fmtLong","fmtShort","isSelectionInList","isItem","getPreviousItem","getListForItem","getItemsAtRange","getItemDepth","getDeepestItemDepth","getCurrentList","getCurrentItem","_getCurrentList2","_getDeepestItemDepth2","_getItemDepth2","_getItemsAtRange2","_getListForItem2","_getPreviousItem2","_isItem2","_isSelectionInList2","_hashtagRegex","_hashtagRegex2","hashtag","EMPTY_PARAGRAPH_NODES","defaults","gfm","tables","breaks","pedantic","smartLists","silent","renderer","Renderer","newline","fences","hr","heading","nptable","blockquote","paragraph","Lexer","tokens","links","normal","bullet","src","token","bq","loose","cap","bull","space","newlines","lang","header","splitCells","align","cells","ordered","todo","checked","endsWithNewline","link","reflink","nolink","strong","underlined","em","br","del","ins","InlineLexer","Parser","_inside","_href","out","outputLink","codespan","image","groupTextInLeaves","ary","acc","accLast","lastIsText","language","listitem","flags","tablerow","tablecell","alt","tok","parseText","row","_cells","_body","_body2","_body3","_flags","MarkdownParser","tableRow","Slate","focusAtEnd","lastNode","changes","_options2","_handlers","_core2","optsParam","corePlugin","onSelectAll","onBackspace","onModEnter","onEnter","onShiftTab","onTab","_onTab2","_onShiftTab2","_onEnter2","_onModEnter2","_onBackspace2","_onSelectAll2","_onPaste2","_onKeyDown2","_detectNewline","_detectNewline2","DEFAULT_NEWLINE","sep","lines","Boolean","lengthToRemove","firstDifferentCharacter","_slateReact","_isHotkey","isModA","isKeyHotkey","isShiftTab","isTab","isModEnter","isEnter","isBackspace","_options","_validation","utils","_schema","_schema2","_slateSchemaViolations","_defineProperty","getSuccessiveNodes","nonLines","afterNonLines","firstGroup","takeWhile","restOfNodes","_blocks","baseSchema","CHILD_INVALID","isNotLine","group","nonLineGroup","codeLines","invalidNodeIndex","codeLine","onlyLine","PARENT_INVALID","container","firstLineIndex","noOrphanLine","onlyTextInCode","_getCurrentBlockquote","KEY_ENTER","KEY_BACKSPACE","bindAndScopeChange","toWrap","wrapper","containBlocks","_defineProperties","_setPrototypeOf","_getPrototypeOf","_assertThisInitialized","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","_arrayWithoutHoles","iter","toString","_iterableToArray","_nonIterableSpread","_getPrototypeOf2","isCell","typeCell","typeTable","typeRow","typeContent","insertRowOnEnter","edgeRowExitOnDirection","createCell","createEmptyContent","createRow","columns","getCellContent","cellNodes","createTable","rows","rowNodes","TablePosition","containerNode","tableBlock","rowBlock","cellBlock","contentBlock","cell","isFirstRow","isFirstColumn","isLastRow","isLastColumn","getRowIndex","getHeight","getColumnIndex","getWidth","getPosition","getPositionByKey","isSelectionInTable","startPosition","endPosition","isInTable","isRangeInTable","isSelectionOutOfTable","forEachCells","rowIndex","columnIndex","getCellsAtRow","getCellsAtColumn","getCopiedFragment","baseFragment","copiedCell","insertTable","insertRow","at","getRow","pos","newRow","moveSelection","isInCell","insertColumn","getCell","newCell","insertTableFragmentAtRange","insertedTable","fragmentRows","fragmentHeight","missingWidth","missingHeight","existingTable","fragmentRow","fragmentRowIndex","fragmentColumnIndex","existingCell","replaceNodeByKey","lastPastedCell","clearCell","newBlock","removeRowByKey","removeRow","removeColumnByKey","colIndex","removeColumn","removeTableByKey","nextFocusBlock","shouldCollapseToEnd","tableParent","insertionIndex","removeTable","moveSelectionBy","_normPos2","normPos","absX","absY","isGoingUp","moveSelectionOutOfTable","onlyCellsInRow","wrapBlockByKey","rowOnlyInTable","onlyBlocksInCell","cellOnlyInRow","isRow","countNodes","maxColumns","rowsMissingColumns","numberOfCellsToAdd","_editor$value","isAtEdgeOfCell","shiftKey","isFirstCell","isLastCell","selectAllText","startCell","endCell","ignoreFirstCell","ignoreLastCell","cellsToClear","updatedStartCell","onUpDown","isTopOfCell","isBottomOfCell","onUpDown$1","KEY_TAB","KEY_DOWN","KEY_UP","metaKey","tempEditor","optionsParam","ownKeys","getOwnPropertySymbols","sym","_objectSpread","core","dataUriToBlob","bytes","atob","buffer","ArrayBuffer","Uint8Array","Blob","blob","webkitSlice","loadImageFile","url","file","canvas","img","getContext","onload","ctx","drawImage","dataUri","toDataURL","ononerror","srcToDataUri","splitPathRe","splitPath","filename","insertImage","extensions","applyTransform","matchExt","accepted","ext","asyncApplyChange","onInsert","_type$split","onInsertFiles","DOMParser","parseFromString","nodeName","onInsertHtml","onInsertText","_options$isActiveQuer","isActiveQuery","_options$wrapCommand","wrapCommand","_options$unwrapComman","unwrapCommand","toEdge","_prismjs2","_TOKEN_MARK2","textStart","textEnd","onlyIn","grammarName","getSyntax","grammar","languages","blockText","tokenize","processToken","accu","alias","_decoration","_decorateNode","TOKEN_MARK","_TOKEN_MARK","currentItem","listItem","isEmptyListItem","itemType","selectedBlocks","getHighestSelectedBlocks","filterDescendants","maxLevel","getDepth","_getCurrentItem","previousSibling","_getItemsAtRange","firstItem","splitOffset","previousItem","destKey","destination","existingList","currentList","tmpBlock","newSublist","moveAsSubItem","parentItem","parentList","followingItems","willEmptyCurrentList","sublist","_","isListOrItem","sortListDescendants","unwrapMappedNodes","mappedNode","unwrapBlockByKey","_change$value2","commonAncestor","sortedMappedNodes","_change$value","flag","isListItem","mapListDescendants","params","findAncestorList","isSameLevel","newChange","_normalizeNode2","reasons","reasonFn","constructedSchema","parent_type_invalid","context","child_object_invalid","wrapChildrenInDefaultBlock","child_type_invalid","invalids","pair","_pair","second","secondNode","joinAdjacentLists","_react2","_Icon2","expanded","_AlignCenterIcon2","_AlignLeftIcon2","_AlignRightIcon2","_ArchiveIcon2","_BackIcon2","_BillingIcon2","_BlockQuoteIcon2","_BoldIcon2","_BulletedListIcon2","_CheckboxIcon2","_CheckmarkIcon2","_CloseIcon2","_CodeIcon2","_CollapsedIcon2","_CollectionIcon2","_DocumentIcon2","_EditIcon2","_EmailIcon2","_ExpandedIcon2","_GoToIcon2","_HashtagIcon2","_Heading1Icon2","_Heading2Icon2","_HomeIcon2","_HorizontalRuleIcon2","_ImageIcon2","_InsertAboveIcon2","_InsertBelowIcon2","_InsertLeftIcon2","_InsertRightIcon2","_ItalicIcon2","_KeyboardIcon2","_LinkIcon2","_MenuIcon2","_MoonIcon2","_MoreIcon2","_NewDocumentIcon2","_NextIcon2","_OpenIcon2","_OrderedListIcon2","_PadlockIcon2","_PinIcon2","_PlusIcon2","_PrivateCollectionIcon2","_ProfileIcon2","_SearchIcon2","_SettingsIcon2","_StarredIcon2","_StrikethroughIcon2","_TableIcon2","_TeamIcon2","_TodoListIcon2","_TrashIcon2","_UserIcon2","AlignCenterIcon","AlignLeftIcon","AlignRightIcon","ArchiveIcon","BackIcon","BillingIcon","BlockQuoteIcon","BoldIcon","BulletedListIcon","CheckboxIcon","CheckmarkIcon","CloseIcon","CodeIcon","CollapsedIcon","CollectionIcon","DocumentIcon","EditIcon","EmailIcon","ExpandedIcon","GoToIcon","HashtagIcon","Heading1Icon","Heading2Icon","HomeIcon","HorizontalRuleIcon","Icon","ImageIcon","InsertAboveIcon","InsertBelowIcon","InsertLeftIcon","InsertRightIcon","ItalicIcon","KeyboardIcon","LinkIcon","MenuIcon","MoonIcon","MoreIcon","NewDocumentIcon","NextIcon","OpenIcon","OrderedListIcon","PadlockIcon","PinIcon","PlusIcon","PrivateCollectionIcon","ProfileIcon","SearchIcon","SettingsIcon","StarredIcon","StrikethroughIcon","TableIcon","TeamIcon","TodoListIcon","TrashIcon","UserIcon","applyMark"],"mappings":"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","file":"static/js/chunk-slate.019385cf.chunk.js","sourcesContent":["import { Block, Mark, Node, Value } from 'slate';\nimport { Set } from 'immutable';\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n/**\n * Deserialize a plain text `string` to a Slate value.\n *\n * @param {String} string\n * @param {Object} options\n *   @property {Boolean} toJSON\n *   @property {String|Object|Block} defaultBlock\n *   @property {Array|Set} defaultMarks\n * @return {Value}\n */\n\n\nfunction deserialize(string) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var _options$defaultBlock = options.defaultBlock,\n      defaultBlock = _options$defaultBlock === undefined ? 'line' : _options$defaultBlock,\n      _options$defaultMarks = options.defaultMarks,\n      defaultMarks = _options$defaultMarks === undefined ? [] : _options$defaultMarks,\n      _options$delimiter = options.delimiter,\n      delimiter = _options$delimiter === undefined ? '\\n' : _options$delimiter,\n      _options$toJSON = options.toJSON,\n      toJSON = _options$toJSON === undefined ? false : _options$toJSON;\n\n  if (Set.isSet(defaultMarks)) {\n    defaultMarks = defaultMarks.toArray();\n  }\n\n  defaultBlock = Node.createProperties(defaultBlock);\n  defaultMarks = defaultMarks.map(Mark.createProperties);\n  var json = {\n    object: 'value',\n    document: {\n      object: 'document',\n      data: {},\n      nodes: string.split(delimiter).map(function (line) {\n        return _extends({}, defaultBlock, {\n          object: 'block',\n          data: {},\n          nodes: [{\n            object: 'text',\n            text: line,\n            marks: defaultMarks\n          }]\n        });\n      })\n    }\n  };\n  var ret = toJSON ? json : Value.fromJSON(json);\n  return ret;\n}\n/**\n * Serialize a Slate `value` to a plain text string.\n *\n * @param {Value} value\n * @return {String}\n */\n\n\nfunction serialize(value) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return serializeNode(value.document, options);\n}\n/**\n * Serialize a `node` to plain text.\n *\n * @param {Node} node\n * @return {String}\n */\n\n\nfunction serializeNode(node) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var _options$delimiter2 = options.delimiter,\n      delimiter = _options$delimiter2 === undefined ? '\\n' : _options$delimiter2;\n\n  if (node.object === 'document' || node.object === 'block' && Block.isBlockList(node.nodes)) {\n    return node.nodes.map(serializeNode).join(delimiter);\n  } else {\n    return node.text;\n  }\n}\n/**\n * Export.\n *\n * @type {Object}\n */\n\n\nvar index = {\n  deserialize: deserialize,\n  serialize: serialize\n};\nexport default index;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.decreaseItemDepth = exports.increaseItemDepth = exports.splitListItem = exports.unwrapList = exports.wrapInList = exports.toggleList = undefined;\n\nvar _wrapInList = require('./wrapInList');\n\nvar _wrapInList2 = _interopRequireDefault(_wrapInList);\n\nvar _unwrapList = require('./unwrapList');\n\nvar _unwrapList2 = _interopRequireDefault(_unwrapList);\n\nvar _splitListItem = require('./splitListItem');\n\nvar _splitListItem2 = _interopRequireDefault(_splitListItem);\n\nvar _increaseItemDepth = require('./increaseItemDepth');\n\nvar _increaseItemDepth2 = _interopRequireDefault(_increaseItemDepth);\n\nvar _decreaseItemDepth = require('./decreaseItemDepth');\n\nvar _decreaseItemDepth2 = _interopRequireDefault(_decreaseItemDepth);\n\nvar _toggleList = require('./toggleList');\n\nvar _toggleList2 = _interopRequireDefault(_toggleList);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nexports.toggleList = _toggleList2.default;\nexports.wrapInList = _wrapInList2.default;\nexports.unwrapList = _unwrapList2.default;\nexports.splitListItem = _splitListItem2.default;\nexports.increaseItemDepth = _increaseItemDepth2.default;\nexports.decreaseItemDepth = _decreaseItemDepth2.default;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nrequire('slate');\n/**\n * Return the current list item, from current selection or from a node.\n */\n\n\nfunction getCurrentItem(opts, value, block) {\n  var document = value.document;\n\n  if (!block) {\n    if (!value.selection.start.key) return null;\n    block = value.startBlock;\n  }\n\n  var parent = document.getParent(block.key);\n  return parent && parent.type === opts.typeItem ? parent : null;\n}\n\nexports.default = getCurrentItem;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = require(\"react\");\n\nvar React = _interopRequireWildcard(_react);\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nfunction Icon(_ref) {\n  var children = _ref.children,\n      className = _ref.className,\n      onClick = _ref.onClick,\n      theme = _ref.theme,\n      rest = _objectWithoutProperties(_ref, [\"children\", \"className\", \"onClick\", \"theme\"]);\n\n  var size = rest.size ? rest.size + \"px\" : \"24px\";\n  var fill = \"#4E5C6E\";\n  if (rest.color) fill = rest.color;\n  if (rest.light) fill = \"#FFF\";\n  if (rest.black) fill = \"#000\";\n  return React.createElement(\"svg\", {\n    fill: fill,\n    width: size,\n    height: size,\n    viewBox: \"0 0 24 24\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    className: className,\n    onClick: onClick\n  }, children);\n}\n\nexports.default = Icon;","\"use strict\";\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\n\n\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\n/**\n * Colors.\n */\n\nexports.colors = ['#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC', '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF', '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC', '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF', '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC', '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033', '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366', '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933', '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC', '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF', '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'];\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n// eslint-disable-next-line complexity\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n    return true;\n  } // Internet Explorer and Edge do not support colors.\n\n\n  if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n    return false;\n  } // Is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\n\n  return typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance || // Is firebug? http://stackoverflow.com/a/398120/376773\n  typeof window !== 'undefined' && window.console && (window.console.firebug || window.console.exception && window.console.table) || // Is firefox >= v31?\n  // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n  typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31 || // Double check webkit in userAgent just in case we are in a worker\n  typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/);\n}\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\n\nfunction formatArgs(args) {\n  args[0] = (this.useColors ? '%c' : '') + this.namespace + (this.useColors ? ' %c' : ' ') + args[0] + (this.useColors ? '%c ' : ' ') + '+' + module.exports.humanize(this.diff);\n\n  if (!this.useColors) {\n    return;\n  }\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit'); // The final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function (match) {\n    if (match === '%%') {\n      return;\n    }\n\n    index++;\n\n    if (match === '%c') {\n      // We only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n  args.splice(lastC, 0, c);\n}\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\n\nfunction log() {\n  var _console; // This hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n\n\n  return (typeof console === \"undefined\" ? \"undefined\" : _typeof(console)) === 'object' && console.log && (_console = console).log.apply(_console, arguments);\n}\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\n\nfunction save(namespaces) {\n  try {\n    if (namespaces) {\n      exports.storage.setItem('debug', namespaces);\n    } else {\n      exports.storage.removeItem('debug');\n    }\n  } catch (error) {// Swallow\n    // XXX (@Qix-) should we be logging these?\n  }\n}\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\n\nfunction load() {\n  var r;\n\n  try {\n    r = exports.storage.getItem('debug');\n  } catch (error) {} // Swallow\n  // XXX (@Qix-) should we be logging these?\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\n\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\n\nfunction localstorage() {\n  try {\n    // TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n    // The Browser also has localStorage in the global context.\n    return localStorage;\n  } catch (error) {// Swallow\n    // XXX (@Qix-) should we be logging these?\n  }\n}\n\nmodule.exports = require('./common')(exports);\nvar formatters = module.exports.formatters;\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n  try {\n    return JSON.stringify(v);\n  } catch (error) {\n    return '[UnexpectedJSONParseError]: ' + error.message;\n  }\n};","\"use strict\";\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\n\n\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\n/**\n * Colors.\n */\n\nexports.colors = ['#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC', '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF', '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC', '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF', '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC', '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033', '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366', '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933', '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC', '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF', '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'];\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n// eslint-disable-next-line complexity\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n    return true;\n  } // Internet Explorer and Edge do not support colors.\n\n\n  if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n    return false;\n  } // Is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\n\n  return typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance || // Is firebug? http://stackoverflow.com/a/398120/376773\n  typeof window !== 'undefined' && window.console && (window.console.firebug || window.console.exception && window.console.table) || // Is firefox >= v31?\n  // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n  typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31 || // Double check webkit in userAgent just in case we are in a worker\n  typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/);\n}\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\n\nfunction formatArgs(args) {\n  args[0] = (this.useColors ? '%c' : '') + this.namespace + (this.useColors ? ' %c' : ' ') + args[0] + (this.useColors ? '%c ' : ' ') + '+' + module.exports.humanize(this.diff);\n\n  if (!this.useColors) {\n    return;\n  }\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit'); // The final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function (match) {\n    if (match === '%%') {\n      return;\n    }\n\n    index++;\n\n    if (match === '%c') {\n      // We only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n  args.splice(lastC, 0, c);\n}\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\n\nfunction log() {\n  var _console; // This hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n\n\n  return (typeof console === \"undefined\" ? \"undefined\" : _typeof(console)) === 'object' && console.log && (_console = console).log.apply(_console, arguments);\n}\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\n\nfunction save(namespaces) {\n  try {\n    if (namespaces) {\n      exports.storage.setItem('debug', namespaces);\n    } else {\n      exports.storage.removeItem('debug');\n    }\n  } catch (error) {// Swallow\n    // XXX (@Qix-) should we be logging these?\n  }\n}\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\n\nfunction load() {\n  var r;\n\n  try {\n    r = exports.storage.getItem('debug');\n  } catch (error) {} // Swallow\n  // XXX (@Qix-) should we be logging these?\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\n\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\n\nfunction localstorage() {\n  try {\n    // TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n    // The Browser also has localStorage in the global context.\n    return localStorage;\n  } catch (error) {// Swallow\n    // XXX (@Qix-) should we be logging these?\n  }\n}\n\nmodule.exports = require('./common')(exports);\nvar formatters = module.exports.formatters;\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n  try {\n    return JSON.stringify(v);\n  } catch (error) {\n    return '[UnexpectedJSONParseError]: ' + error.message;\n  }\n};","import isPlainObject from 'is-plain-object';\nimport { Map, List, Record, Set, OrderedSet, is, Stack } from 'immutable';\nimport warning from 'tiny-warning';\nimport invariant from 'tiny-invariant';\nimport Debug from 'debug';\nimport { reverse } from 'esrever';\nimport pick from 'lodash/pick';\nimport omit from 'lodash/omit';\nimport direction from 'direction';\n/**\n * An auto-incrementing index for generating keys.\n *\n * @type {Number}\n */\n\nvar n = void 0;\n/**\n * The global key generating function.\n *\n * @type {Function}\n */\n\nvar generate = void 0;\n/**\n * Create a key, using a provided key if available.\n *\n * @param {String|Void} key\n * @return {String}\n */\n\nfunction create(key) {\n  if (key == null) {\n    return generate();\n  }\n\n  if (typeof key === 'string') {\n    return key;\n  }\n\n  throw new Error('Keys must be strings, but you passed: ' + key);\n}\n/**\n * Set a different unique ID generating `function`.\n *\n * @param {Function} func\n */\n\n\nfunction setGenerator(func) {\n  generate = func;\n}\n/**\n * Reset the key generating function to its initial state.\n */\n\n\nfunction resetGenerator() {\n  n = 0;\n\n  generate = function generate() {\n    return '' + n++;\n  };\n}\n/**\n * Set the initial state.\n */\n\n\nresetGenerator();\n/**\n * Export.\n *\n * @type {Object}\n */\n\nvar KeyUtils = {\n  create: create,\n  setGenerator: setGenerator,\n  resetGenerator: resetGenerator\n};\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar classCallCheck = function classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar defineProperty = function defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n};\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar inherits = function inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\nvar objectWithoutProperties = function objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n};\n\nvar possibleConstructorReturn = function possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\nvar slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\nvar toConsumableArray = function toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n};\n\nvar Data = function () {\n  function Data() {\n    classCallCheck(this, Data);\n  }\n\n  createClass(Data, null, [{\n    key: 'create',\n\n    /**\n     * Create a new `Data` with `attrs`.\n     *\n     * @param {Object|Data|Map} attrs\n     * @return {Data} data\n     */\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Map.isMap(attrs)) {\n        return attrs;\n      }\n\n      if (isPlainObject(attrs)) {\n        return Data.fromJSON(attrs);\n      }\n\n      throw new Error('`Data.create` only accepts objects or maps, but you passed it: ' + attrs);\n    }\n    /**\n     * Create a `Data` from a JSON `object`.\n     *\n     * @param {Object} object\n     * @return {Data}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(object) {\n      return new Map(object);\n    }\n    /**\n     * Alias `fromJS`.\n     */\n\n  }]);\n  return Data;\n}();\n/**\n * Export.\n *\n * @type {Object}\n */\n\n\nData.fromJS = Data.fromJSON;\nvar DEFAULTS = {\n  data: undefined,\n  key: undefined,\n  nodes: undefined\n  /**\n   * Document.\n   *\n   * @type {Document}\n   */\n\n};\n\nvar Document = function (_Record) {\n  inherits(Document, _Record);\n\n  function Document() {\n    classCallCheck(this, Document);\n    return possibleConstructorReturn(this, (Document.__proto__ || Object.getPrototypeOf(Document)).apply(this, arguments));\n  }\n\n  createClass(Document, [{\n    key: 'toJSON',\n\n    /**\n     * Return a JSON representation of the document.\n     *\n     * @param {Object} options\n     * @return {Object}\n     */\n    value: function toJSON() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var object = {\n        object: this.object,\n        data: this.data.toJSON(),\n        nodes: this.nodes.toArray().map(function (n) {\n          return n.toJSON(options);\n        })\n      };\n\n      if (options.preserveKeys) {\n        object.key = this.key;\n      }\n\n      return object;\n    }\n  }], [{\n    key: 'create',\n\n    /**\n     * Create a new `Document` with `attrs`.\n     *\n     * @param {Object|Array|List|Text} attrs\n     * @return {Document}\n     */\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Document.isDocument(attrs)) {\n        return attrs;\n      }\n\n      if (List.isList(attrs) || Array.isArray(attrs)) {\n        attrs = {\n          nodes: attrs\n        };\n      }\n\n      if (isPlainObject(attrs)) {\n        return Document.fromJSON(attrs);\n      }\n\n      throw new Error('`Document.create` only accepts objects, arrays, lists or documents, but you passed it: ' + attrs);\n    }\n    /**\n     * Create a `Document` from a JSON `object`.\n     *\n     * @param {Object|Document} object\n     * @return {Document}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(object) {\n      if (Document.isDocument(object)) {\n        return object;\n      }\n\n      var _object$data = object.data,\n          data = _object$data === undefined ? {} : _object$data,\n          _object$key = object.key,\n          key = _object$key === undefined ? KeyUtils.create() : _object$key,\n          _object$nodes = object.nodes,\n          nodes = _object$nodes === undefined ? [] : _object$nodes;\n      var document = new Document({\n        key: key,\n        data: new Map(data),\n        nodes: Node.createList(nodes)\n      });\n      return document;\n    }\n  }]);\n  return Document;\n}(Record(DEFAULTS));\n/**\n * Export.\n *\n * @type {Document}\n */\n\n\nvar DEFAULTS$1 = {\n  data: undefined,\n  key: undefined,\n  nodes: undefined,\n  type: undefined\n  /**\n   * Inline.\n   *\n   * @type {Inline}\n   */\n\n};\n\nvar Inline = function (_Record) {\n  inherits(Inline, _Record);\n\n  function Inline() {\n    classCallCheck(this, Inline);\n    return possibleConstructorReturn(this, (Inline.__proto__ || Object.getPrototypeOf(Inline)).apply(this, arguments));\n  }\n\n  createClass(Inline, [{\n    key: 'toJSON',\n\n    /**\n     * Return a JSON representation of the inline.\n     *\n     * @param {Object} options\n     * @return {Object}\n     */\n    value: function toJSON() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var object = {\n        object: this.object,\n        type: this.type,\n        data: this.data.toJSON(),\n        nodes: this.nodes.toArray().map(function (n) {\n          return n.toJSON(options);\n        })\n      };\n\n      if (options.preserveKeys) {\n        object.key = this.key;\n      }\n\n      return object;\n    }\n  }], [{\n    key: 'create',\n\n    /**\n     * Create a new `Inline` with `attrs`.\n     *\n     * @param {Object|String|Inline} attrs\n     * @return {Inline}\n     */\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Inline.isInline(attrs)) {\n        return attrs;\n      }\n\n      if (typeof attrs === 'string') {\n        attrs = {\n          type: attrs\n        };\n      }\n\n      if (isPlainObject(attrs)) {\n        return Inline.fromJSON(attrs);\n      }\n\n      throw new Error('`Inline.create` only accepts objects, strings or inlines, but you passed it: ' + attrs);\n    }\n    /**\n     * Create a list of `Inlines` from an array.\n     *\n     * @param {Array<Inline|Object>|List<Inline|Object>} elements\n     * @return {List<Inline>}\n     */\n\n  }, {\n    key: 'createList',\n    value: function createList() {\n      var elements = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      if (List.isList(elements) || Array.isArray(elements)) {\n        var list = new List(elements.map(Inline.create));\n        return list;\n      }\n\n      throw new Error('`Inline.createList` only accepts arrays or lists, but you passed it: ' + elements);\n    }\n    /**\n     * Create a `Inline` from a JSON `object`.\n     *\n     * @param {Object|Inline} object\n     * @return {Inline}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(object) {\n      if (Inline.isInline(object)) {\n        return object;\n      }\n\n      var _object$data = object.data,\n          data = _object$data === undefined ? {} : _object$data,\n          _object$key = object.key,\n          key = _object$key === undefined ? KeyUtils.create() : _object$key,\n          _object$nodes = object.nodes,\n          nodes = _object$nodes === undefined ? [] : _object$nodes,\n          type = object.type;\n\n      if (typeof type !== 'string') {\n        throw new Error('`Inline.fromJS` requires a `type` string.');\n      }\n\n      var inline = new Inline({\n        key: key,\n        type: type,\n        data: new Map(data),\n        nodes: Node.createList(nodes)\n      });\n      return inline;\n    }\n    /**\n     * Check if `any` is a list of inlines.\n     *\n     * @param {Any} any\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isInlineList',\n    value: function isInlineList(any) {\n      return List.isList(any) && any.every(function (item) {\n        return Inline.isInline(item);\n      });\n    }\n  }]);\n  return Inline;\n}(Record(DEFAULTS$1));\n/**\n * Export.\n *\n * @type {Inline}\n */\n\n\nvar DEFAULTS$2 = {\n  data: undefined,\n  type: undefined\n  /**\n   * Mark.\n   *\n   * @type {Mark}\n   */\n\n};\n\nvar Mark = function (_Record) {\n  inherits(Mark, _Record);\n\n  function Mark() {\n    classCallCheck(this, Mark);\n    return possibleConstructorReturn(this, (Mark.__proto__ || Object.getPrototypeOf(Mark)).apply(this, arguments));\n  }\n\n  createClass(Mark, [{\n    key: 'toJSON',\n\n    /**\n     * Return a JSON representation of the mark.\n     *\n     * @return {Object}\n     */\n    value: function toJSON() {\n      var object = {\n        object: this.object,\n        type: this.type,\n        data: this.data.toJSON()\n      };\n      return object;\n    }\n  }], [{\n    key: 'create',\n\n    /**\n     * Create a new `Mark` with `attrs`.\n     *\n     * @param {Object|Mark} attrs\n     * @return {Mark}\n     */\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Mark.isMark(attrs)) {\n        return attrs;\n      }\n\n      if (typeof attrs === 'string') {\n        attrs = {\n          type: attrs\n        };\n      }\n\n      if (isPlainObject(attrs)) {\n        return Mark.fromJSON(attrs);\n      }\n\n      throw new Error('`Mark.create` only accepts objects, strings or marks, but you passed it: ' + attrs);\n    }\n    /**\n     * Create a set of marks.\n     *\n     * @param {Array<Object|Mark>} elements\n     * @return {Set<Mark>}\n     */\n\n  }, {\n    key: 'createSet',\n    value: function createSet(elements) {\n      if (Set.isSet(elements) || Array.isArray(elements)) {\n        var marks = new Set(elements.map(Mark.create));\n        return marks;\n      }\n\n      if (elements == null) {\n        return Set();\n      }\n\n      throw new Error('`Mark.createSet` only accepts sets, arrays or null, but you passed it: ' + elements);\n    }\n    /**\n     * Create a dictionary of settable mark properties from `attrs`.\n     *\n     * @param {Object|String|Mark} attrs\n     * @return {Object}\n     */\n\n  }, {\n    key: 'createProperties',\n    value: function createProperties() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Mark.isMark(attrs)) {\n        return {\n          data: attrs.data,\n          type: attrs.type\n        };\n      }\n\n      if (typeof attrs === 'string') {\n        return {\n          type: attrs\n        };\n      }\n\n      if (isPlainObject(attrs)) {\n        var props = {};\n        if ('type' in attrs) props.type = attrs.type;\n        if ('data' in attrs) props.data = Data.create(attrs.data);\n        return props;\n      }\n\n      throw new Error('`Mark.createProperties` only accepts objects, strings or marks, but you passed it: ' + attrs);\n    }\n    /**\n     * Create a `Mark` from a JSON `object`.\n     *\n     * @param {Object} object\n     * @return {Mark}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(object) {\n      var _object$data = object.data,\n          data = _object$data === undefined ? {} : _object$data,\n          type = object.type;\n\n      if (typeof type !== 'string') {\n        throw new Error('`Mark.fromJS` requires a `type` string.');\n      }\n\n      var mark = new Mark({\n        type: type,\n        data: new Map(data)\n      });\n      return mark;\n    }\n    /**\n     * Check if `any` is a set of marks.\n     *\n     * @param {Any} any\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isMarkSet',\n    value: function isMarkSet(any) {\n      return Set.isSet(any) && any.every(function (item) {\n        return Mark.isMark(item);\n      });\n    }\n  }]);\n  return Mark;\n}(Record(DEFAULTS$2));\n/**\n * Export.\n *\n * @type {Mark}\n */\n\n\nvar DEFAULTS$3 = {\n  marks: undefined,\n  text: undefined\n  /**\n   * Leaf.\n   *\n   * @type {Leaf}\n   */\n\n};\n\nvar Leaf = function (_Record) {\n  inherits(Leaf, _Record);\n\n  function Leaf() {\n    classCallCheck(this, Leaf);\n    return possibleConstructorReturn(this, (Leaf.__proto__ || Object.getPrototypeOf(Leaf)).apply(this, arguments));\n  }\n\n  createClass(Leaf, [{\n    key: 'updateMark',\n\n    /**\n     * Update a `mark` at leaf, replace with newMark\n     *\n     * @param {Mark} mark\n     * @param {Mark} newMark\n     * @returns {Leaf}\n     */\n    value: function updateMark(mark, newMark) {\n      var marks = this.marks;\n      if (newMark.equals(mark)) return this;\n      if (!marks.has(mark)) return this;\n      var newMarks = marks.withMutations(function (collection) {\n        collection.remove(mark).add(newMark);\n      });\n      return this.set('marks', newMarks);\n    }\n    /**\n     * Add a `mark` to the leaf.\n     *\n     * @param {Mark} mark\n     * @returns {Text}\n     */\n\n  }, {\n    key: 'addMark',\n    value: function addMark(mark) {\n      var marks = this.marks;\n      return this.set('marks', marks.add(mark));\n    }\n    /**\n     * Add a `set` of marks to the leaf.\n     *\n     * @param {Set<Mark>} set\n     * @returns {Text}\n     */\n\n  }, {\n    key: 'addMarks',\n    value: function addMarks(set$$1) {\n      var marks = this.marks;\n      return this.set('marks', marks.union(set$$1));\n    }\n    /**\n     * Insert a text `string` into the leaf at `offset`.\n     *\n     * @param {Number} offset\n     * @param {String} string\n     * @return {Leaf}\n     */\n\n  }, {\n    key: 'insertText',\n    value: function insertText(offset, string) {\n      var text = this.text;\n      var next = text.slice(0, offset) + string + text.slice(offset);\n      return this.set('text', next);\n    }\n    /**\n     * Remove a `mark` from the leaf.\n     *\n     * @param {Mark} mark\n     * @returns {Text}\n     */\n\n  }, {\n    key: 'removeMark',\n    value: function removeMark(mark) {\n      var marks = this.marks;\n      return this.set('marks', marks.remove(mark));\n    }\n    /**\n     * Return a JSON representation of the leaf.\n     *\n     * @return {Object}\n     */\n\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      var object = {\n        object: this.object,\n        text: this.text,\n        marks: this.marks.toArray().map(function (m) {\n          return m.toJSON();\n        })\n      };\n      return object;\n    }\n  }], [{\n    key: 'create',\n\n    /**\n     * Create a new `Leaf` with `attrs`.\n     *\n     * @param {Object|Leaf} attrs\n     * @return {Leaf}\n     */\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Leaf.isLeaf(attrs)) {\n        return attrs;\n      }\n\n      if (typeof attrs === 'string') {\n        attrs = {\n          text: attrs\n        };\n      }\n\n      if (isPlainObject(attrs)) {\n        return Leaf.fromJSON(attrs);\n      }\n\n      throw new Error('`Leaf.create` only accepts objects, strings or leaves, but you passed it: ' + attrs);\n    }\n    /**\n     * Create a valid List of `Leaf` from `leaves`\n     *\n     * @param {List<Leaf>} leaves\n     * @return {List<Leaf>}\n     */\n\n  }, {\n    key: 'createLeaves',\n    value: function createLeaves(leaves) {\n      if (leaves.size <= 1) return leaves;\n      var invalid = false; // TODO: we can make this faster with [List] and then flatten\n\n      var result = List().withMutations(function (cache) {\n        // Search from the leaves left end to find invalid node;\n        leaves.findLast(function (leaf, index) {\n          var firstLeaf = cache.first(); // If the first leaf of cache exist, check whether the first leaf is connectable with the current leaf\n\n          if (firstLeaf) {\n            // If marks equals, then the two leaves can be connected\n            if (firstLeaf.marks.equals(leaf.marks)) {\n              invalid = true;\n              cache.set(0, firstLeaf.set('text', '' + leaf.text + firstLeaf.text));\n              return;\n            } // If the cached leaf is empty, drop the empty leaf with the upcoming leaf\n\n\n            if (firstLeaf.text === '') {\n              invalid = true;\n              cache.set(0, leaf);\n              return;\n            } // If the current leaf is empty, drop the leaf\n\n\n            if (leaf.text === '') {\n              invalid = true;\n              return;\n            }\n          }\n\n          cache.unshift(leaf);\n        });\n      });\n      if (!invalid) return leaves;\n      return result;\n    }\n    /**\n     * Split a list of leaves to two lists; if the leaves are valid leaves, the returned leaves are also valid\n     * Corner Cases:\n     *   1. if offset is smaller than 0, then return [List(), leaves]\n     *   2. if offset is bigger than the text length, then return [leaves, List()]\n     *\n     * @param {List<Leaf> leaves\n     * @return {Array<List<Leaf>>}\n     */\n\n  }, {\n    key: 'splitLeaves',\n    value: function splitLeaves(leaves, offset) {\n      if (offset < 0) return [List(), leaves];\n\n      if (leaves.size === 0) {\n        return [List(), List()];\n      }\n\n      var endOffset = 0;\n      var index = -1;\n      var left = void 0,\n          right = void 0;\n      leaves.find(function (leaf) {\n        index++;\n        var startOffset = endOffset;\n        var text = leaf.text;\n        endOffset += text.length;\n        if (endOffset < offset) return false;\n        if (startOffset > offset) return false;\n        var length = offset - startOffset;\n        left = leaf.set('text', text.slice(0, length));\n        right = leaf.set('text', text.slice(length));\n        return true;\n      });\n      if (!left) return [leaves, List()];\n\n      if (left.text === '') {\n        if (index === 0) {\n          return [List.of(left), leaves];\n        }\n\n        return [leaves.take(index), leaves.skip(index)];\n      }\n\n      if (right.text === '') {\n        if (index === leaves.size - 1) {\n          return [leaves, List.of(right)];\n        }\n\n        return [leaves.take(index + 1), leaves.skip(index + 1)];\n      }\n\n      return [leaves.take(index).push(left), leaves.skip(index + 1).unshift(right)];\n    }\n    /**\n     * Create a `Leaf` list from `attrs`.\n     *\n     * @param {Array<Leaf|Object>|List<Leaf|Object>} attrs\n     * @return {List<Leaf>}\n     */\n\n  }, {\n    key: 'createList',\n    value: function createList() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      if (List.isList(attrs) || Array.isArray(attrs)) {\n        var list = new List(attrs.map(Leaf.create));\n        return list;\n      }\n\n      throw new Error('`Leaf.createList` only accepts arrays or lists, but you passed it: ' + attrs);\n    }\n    /**\n     * Create a `Leaf` from a JSON `object`.\n     *\n     * @param {Object} object\n     * @return {Leaf}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(object) {\n      var _object$text = object.text,\n          text = _object$text === undefined ? '' : _object$text,\n          _object$marks = object.marks,\n          marks = _object$marks === undefined ? [] : _object$marks;\n      var leaf = new Leaf({\n        text: text,\n        marks: Set(marks.map(Mark.fromJSON))\n      });\n      return leaf;\n    }\n    /**\n     * Check if `any` is a list of leaves.\n     *\n     * @param {Any} any\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isLeafList',\n    value: function isLeafList(any) {\n      return List.isList(any) && any.every(function (item) {\n        return Leaf.isLeaf(item);\n      });\n    }\n  }]);\n  return Leaf;\n}(Record(DEFAULTS$3));\n/**\n * Export.\n *\n * @type {Leaf}\n */\n\n/* global WeakMap, Map, Symbol */\n\n/**\n * GLOBAL: True if memoization should is enabled.\n *\n * @type {Boolean}\n */\n\n\nvar ENABLED = true;\n/**\n * The leaf node of a cache tree. Used to support variable argument length. A\n * unique object, so that native Maps will key it by reference.\n *\n * @type {Symbol}\n */\n\nvar LEAF = Symbol('LEAF');\n/**\n * The node of a cache tree for a WeakMap to store cache visited by objects\n *\n * @type {Symbol}\n */\n\nvar STORE_KEY = Symbol('STORE_KEY');\n/**\n * Values to represent a memoized undefined and null value. Allows efficient value\n * retrieval using Map.get only.\n *\n * @type {Symbol}\n */\n\nvar UNDEFINED = Symbol('undefined');\nvar NULL = Symbol('null');\n/**\n * Default value for unset keys in native Maps\n *\n * @type {Undefined}\n */\n\nvar UNSET = undefined;\n/**\n * Global Store for all cached values\n *\n * @type {WeakMap}\n */\n\nvar memoizeStore = new WeakMap();\n/**\n * Memoize all of the `properties` on a `object`.\n *\n * @param {Object} object\n * @param {Array} properties\n * @return {Record}\n */\n\nfunction memoize(object, properties) {\n  var _loop = function _loop(property) {\n    var original = object[property];\n\n    if (!original) {\n      throw new Error('Object does not have a property named \"' + property + '\".');\n    }\n\n    object[property] = function () {\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      } // If memoization is disabled, call into the original method.\n\n\n      if (!ENABLED) return original.apply(this, args);\n\n      if (!memoizeStore.has(this)) {\n        memoizeStore.set(this, {\n          noArgs: {},\n          hasArgs: {}\n        });\n      }\n\n      var _memoizeStore$get = memoizeStore.get(this),\n          noArgs = _memoizeStore$get.noArgs,\n          hasArgs = _memoizeStore$get.hasArgs;\n\n      var takesArguments = args.length !== 0;\n      var cachedValue = void 0;\n      var keys = void 0;\n\n      if (takesArguments) {\n        keys = [property].concat(args);\n        cachedValue = getIn(hasArgs, keys);\n      } else {\n        cachedValue = noArgs[property];\n      } // If we've got a result already, return it.\n\n\n      if (cachedValue !== UNSET) {\n        return cachedValue === UNDEFINED ? undefined : cachedValue;\n      } // Otherwise calculate what it should be once and cache it.\n\n\n      var value = original.apply(this, args);\n      var v = value === undefined ? UNDEFINED : value;\n\n      if (takesArguments) {\n        setIn(hasArgs, keys, v);\n      } else {\n        noArgs[property] = v;\n      }\n\n      return value;\n    };\n  };\n\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = properties[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var property = _step.value;\n\n      _loop(property);\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n}\n/**\n * Get a value at a key path in a tree of Map.\n *\n * If not set, returns UNSET.\n * If the set value is undefined, returns UNDEFINED.\n *\n * @param {Map} map\n * @param {Array} keys\n * @return {Any|UNSET|UNDEFINED}\n */\n\n\nfunction getIn(map, keys) {\n  var _iteratorNormalCompletion2 = true;\n  var _didIteratorError2 = false;\n  var _iteratorError2 = undefined;\n\n  try {\n    for (var _iterator2 = keys[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n      var key = _step2.value;\n\n      if (key === undefined) {\n        key = UNDEFINED;\n      } else if (key == null) {\n        key = NULL;\n      }\n\n      if ((typeof key === 'undefined' ? 'undefined' : _typeof(key)) === 'object') {\n        map = map[STORE_KEY] && map[STORE_KEY].get(key);\n      } else {\n        map = map[key];\n      }\n\n      if (map === UNSET) return UNSET;\n    }\n  } catch (err) {\n    _didIteratorError2 = true;\n    _iteratorError2 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion2 && _iterator2.return) {\n        _iterator2.return();\n      }\n    } finally {\n      if (_didIteratorError2) {\n        throw _iteratorError2;\n      }\n    }\n  }\n\n  return map[LEAF];\n}\n/**\n * Set a value at a key path in a tree of Map, creating Maps on the go.\n *\n * @param {Map} map\n * @param {Array} keys\n * @param {Any} value\n * @return {Map}\n */\n\n\nfunction setIn(map, keys, value) {\n  var child = map;\n  var _iteratorNormalCompletion3 = true;\n  var _didIteratorError3 = false;\n  var _iteratorError3 = undefined;\n\n  try {\n    for (var _iterator3 = keys[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n      var key = _step3.value;\n\n      if (key === undefined) {\n        key = UNDEFINED;\n      } else if (key == null) {\n        key = NULL;\n      }\n\n      if ((typeof key === 'undefined' ? 'undefined' : _typeof(key)) !== 'object') {\n        if (!child[key]) {\n          child[key] = {};\n        }\n\n        child = child[key];\n        continue;\n      }\n\n      if (!child[STORE_KEY]) {\n        child[STORE_KEY] = new WeakMap();\n      }\n\n      if (!child[STORE_KEY].has(key)) {\n        var newChild = {};\n        child[STORE_KEY].set(key, newChild);\n        child = newChild;\n        continue;\n      }\n\n      child = child[STORE_KEY].get(key);\n    } // The whole path has been created, so set the value to the bottom most map.\n\n  } catch (err) {\n    _didIteratorError3 = true;\n    _iteratorError3 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion3 && _iterator3.return) {\n        _iterator3.return();\n      }\n    } finally {\n      if (_didIteratorError3) {\n        throw _iteratorError3;\n      }\n    }\n  }\n\n  child[LEAF] = value;\n  return map;\n}\n/**\n * In DEV mode, clears the previously memoized values, globally.\n *\n * @return {Void}\n */\n\n\nfunction resetMemoization() {\n  memoizeStore = new WeakMap();\n}\n/**\n * In DEV mode, enable or disable the use of memoize values, globally.\n *\n * @param {Boolean} enabled\n * @return {Void}\n */\n\n\nfunction useMemoization(enabled) {\n  ENABLED = enabled;\n}\n/**\n * Export.\n *\n * @type {Object}\n */\n\n\nvar DEFAULTS$4 = {\n  leaves: undefined,\n  key: undefined\n  /**\n   * Text.\n   *\n   * @type {Text}\n   */\n\n};\n\nvar Text = function (_Record) {\n  inherits(Text, _Record);\n\n  function Text() {\n    classCallCheck(this, Text);\n    return possibleConstructorReturn(this, (Text.__proto__ || Object.getPrototypeOf(Text)).apply(this, arguments));\n  }\n\n  createClass(Text, [{\n    key: 'searchLeafAtOffset',\n\n    /**\n     * Find the 'first' leaf at offset; By 'first' the alorighthm prefers `endOffset === offset` than `startOffset === offset`\n     * Corner Cases:\n     *   1. if offset is negative, return the first leaf;\n     *   2. if offset is larger than text length, the leaf is null, startOffset, endOffset and index is of the last leaf\n     *\n     * @param {number}\n     * @returns {Object}\n     *   @property {number} startOffset\n     *   @property {number} endOffset\n     *   @property {number} index\n     *   @property {Leaf} leaf\n     */\n    value: function searchLeafAtOffset(offset) {\n      var endOffset = 0;\n      var startOffset = 0;\n      var index = -1;\n      var leaf = this.leaves.find(function (l) {\n        index++;\n        startOffset = endOffset;\n        endOffset = startOffset + l.text.length;\n        return endOffset >= offset;\n      });\n      return {\n        leaf: leaf,\n        endOffset: endOffset,\n        index: index,\n        startOffset: startOffset\n      };\n    }\n    /**\n     * Add a `mark` at `index` and `length`.\n     *\n     * @param {Number} index\n     * @param {Number} length\n     * @param {Mark} mark\n     * @return {Text}\n     */\n\n  }, {\n    key: 'addMark',\n    value: function addMark(index, length, mark) {\n      var marks = Set.of(mark);\n      return this.addMarks(index, length, marks);\n    }\n    /**\n     * Add a `set` of marks at `index` and `length`.\n     * Corner Cases:\n     *   1. If empty text, and if length === 0 and index === 0, will make sure the text contain an empty leaf with the given mark.\n     *\n     * @param {Number} index\n     * @param {Number} length\n     * @param {Set<Mark>} set\n     * @return {Text}\n     */\n\n  }, {\n    key: 'addMarks',\n    value: function addMarks(index, length, set$$1) {\n      if (this.text === '' && length === 0 && index === 0) {\n        var _leaves = this.leaves;\n\n        var first = _leaves.first();\n\n        if (!first) {\n          return this.set('leaves', List.of(Leaf.fromJSON({\n            text: '',\n            marks: set$$1\n          })));\n        }\n\n        var newFirst = first.addMarks(set$$1);\n        if (newFirst === first) return this;\n        return this.set('leaves', List.of(newFirst));\n      }\n\n      if (this.text === '') return this;\n      if (length === 0) return this;\n      if (index >= this.text.length) return this;\n\n      var _Leaf$splitLeaves = Leaf.splitLeaves(this.leaves, index),\n          _Leaf$splitLeaves2 = slicedToArray(_Leaf$splitLeaves, 2),\n          before = _Leaf$splitLeaves2[0],\n          bundle = _Leaf$splitLeaves2[1];\n\n      var _Leaf$splitLeaves3 = Leaf.splitLeaves(bundle, length),\n          _Leaf$splitLeaves4 = slicedToArray(_Leaf$splitLeaves3, 2),\n          middle = _Leaf$splitLeaves4[0],\n          after = _Leaf$splitLeaves4[1];\n\n      var leaves = before.concat(middle.map(function (x) {\n        return x.addMarks(set$$1);\n      }), after);\n      return this.setLeaves(leaves);\n    }\n    /**\n     * Derive the leaves for a list of `decorations`.\n     *\n     * @param {List} decorations (optional)\n     * @return {List<Leaf>}\n     */\n\n  }, {\n    key: 'getLeaves',\n    value: function getLeaves(decorations) {\n      var leaves = this.leaves; // PERF: We can exit early without decorations.\n\n      if (!decorations || decorations.size === 0) return leaves; // HACK: We shouldn't need this, because text nodes should never be in a\n      // position of not having any leaves...\n\n      if (leaves.size === 0) {\n        var marks = decorations.map(function (d) {\n          return d.mark;\n        });\n        var leaf = Leaf.create({\n          marks: marks\n        });\n        return List([leaf]);\n      } // HACK: this shouldn't be necessary, because the loop below should handle\n      // the `0` case without failures. It may already even, not sure.\n\n\n      if (this.text.length === 0) {\n        var _marks = decorations.map(function (d) {\n          return d.mark;\n        });\n\n        var _leaf = Leaf.create({\n          marks: _marks\n        });\n\n        return List([_leaf]);\n      }\n\n      var key = this.key,\n          text = this.text;\n      decorations.forEach(function (dec) {\n        var start = dec.start,\n            end = dec.end,\n            mark = dec.mark;\n        var hasStart = start.key === key;\n        var hasEnd = end.key === key;\n\n        if (hasStart && hasEnd) {\n          var index = hasStart ? start.offset : 0;\n          var length = hasEnd ? end.offset - index : text.length - index;\n          if (length < 1) return;\n          if (index >= text.length) return;\n\n          if (index !== 0 || length < text.length) {\n            var _Leaf$splitLeaves5 = Leaf.splitLeaves(leaves, index),\n                _Leaf$splitLeaves6 = slicedToArray(_Leaf$splitLeaves5, 2),\n                before = _Leaf$splitLeaves6[0],\n                bundle = _Leaf$splitLeaves6[1];\n\n            var _Leaf$splitLeaves7 = Leaf.splitLeaves(bundle, length),\n                _Leaf$splitLeaves8 = slicedToArray(_Leaf$splitLeaves7, 2),\n                middle = _Leaf$splitLeaves8[0],\n                after = _Leaf$splitLeaves8[1];\n\n            leaves = before.concat(middle.map(function (x) {\n              return x.addMark(mark);\n            }), after);\n            return;\n          }\n        }\n\n        leaves = leaves.map(function (x) {\n          return x.addMark(mark);\n        });\n      });\n      if (leaves === this.leaves) return leaves;\n      return Leaf.createLeaves(leaves);\n    }\n    /**\n     * Get all of the active marks on between two offsets\n     * Corner Cases:\n     *   1. if startOffset is equal or bigger than endOffset, then return Set();\n     *   2. If no text is selected between start and end, then return Set()\n     *\n     * @return {Set<Mark>}\n     */\n\n  }, {\n    key: 'getActiveMarksBetweenOffsets',\n    value: function getActiveMarksBetweenOffsets(startOffset, endOffset) {\n      if (startOffset <= 0 && endOffset >= this.text.length) {\n        return this.getActiveMarks();\n      }\n\n      if (startOffset >= endOffset) return Set(); // For empty text in a paragraph, use getActiveMarks;\n\n      if (this.text === '') return this.getActiveMarks();\n      var result = null;\n      var leafEnd = 0;\n      this.leaves.forEach(function (leaf) {\n        var leafStart = leafEnd;\n        leafEnd = leafStart + leaf.text.length;\n        if (leafEnd <= startOffset) return;\n        if (leafStart >= endOffset) return false;\n\n        if (!result) {\n          result = leaf.marks;\n          return;\n        }\n\n        result = result.intersect(leaf.marks);\n        if (result && result.size === 0) return false;\n        return false;\n      });\n      return result || Set();\n    }\n    /**\n     * Get all of the active marks on the text\n     *\n     * @return {Set<Mark>}\n     */\n\n  }, {\n    key: 'getActiveMarks',\n    value: function getActiveMarks() {\n      var _this2 = this;\n\n      if (this.leaves.size === 0) return Set();\n      var result = this.leaves.first().marks;\n      if (result.size === 0) return result;\n      return result.toOrderedSet().withMutations(function (x) {\n        _this2.leaves.forEach(function (c) {\n          x.intersect(c.marks);\n          if (x.size === 0) return false;\n        });\n      });\n    }\n    /**\n     * Get all of the marks on between two offsets\n     * Corner Cases:\n     *   1. if startOffset is equal or bigger than endOffset, then return Set();\n     *   2. If no text is selected between start and end, then return Set()\n     *\n     * @return {OrderedSet<Mark>}\n     */\n\n  }, {\n    key: 'getMarksBetweenOffsets',\n    value: function getMarksBetweenOffsets(startOffset, endOffset) {\n      if (startOffset <= 0 && endOffset >= this.text.length) {\n        return this.getMarks();\n      }\n\n      if (startOffset >= endOffset) return Set(); // For empty text in a paragraph, use getActiveMarks;\n\n      if (this.text === '') return this.getActiveMarks();\n      var result = null;\n      var leafEnd = 0;\n      this.leaves.forEach(function (leaf) {\n        var leafStart = leafEnd;\n        leafEnd = leafStart + leaf.text.length;\n        if (leafEnd <= startOffset) return;\n        if (leafStart >= endOffset) return false;\n\n        if (!result) {\n          result = leaf.marks;\n          return;\n        }\n\n        result = result.union(leaf.marks);\n      });\n      return result || Set();\n    }\n    /**\n     * Get all of the marks on the text.\n     *\n     * @return {OrderedSet<Mark>}\n     */\n\n  }, {\n    key: 'getMarks',\n    value: function getMarks() {\n      var array = this.getMarksAsArray();\n      return new OrderedSet(array);\n    }\n    /**\n     * Get all of the marks on the text as an array\n     *\n     * @return {Array}\n     */\n\n  }, {\n    key: 'getMarksAsArray',\n    value: function getMarksAsArray() {\n      if (this.leaves.size === 0) return [];\n      var first = this.leaves.first().marks;\n      if (this.leaves.size === 1) return first.toArray();\n      var result = [];\n      this.leaves.forEach(function (leaf) {\n        result.push(leaf.marks.toArray());\n      });\n      return Array.prototype.concat.apply(first.toArray(), result);\n    }\n    /**\n     * Get the marks on the text at `index`.\n     * Corner Cases:\n     *   1. if no text is before the index, and index !== 0, then return Set()\n     *   2. (for insert after split node or mark at range) if index === 0, and text === '', then return the leaf.marks\n     *   3. if index === 0, text !== '', return Set()\n     *\n     *\n     * @param {Number} index\n     * @return {Set<Mark>}\n     */\n\n  }, {\n    key: 'getMarksAtIndex',\n    value: function getMarksAtIndex(index) {\n      var _searchLeafAtOffset = this.searchLeafAtOffset(index),\n          leaf = _searchLeafAtOffset.leaf;\n\n      if (!leaf) return Set();\n      return leaf.marks;\n    }\n    /**\n     * Insert `text` at `index`.\n     *\n     * @param {Numbder} offset\n     * @param {String} text\n     * @param {Set} marks (optional)\n     * @return {Text}\n     */\n\n  }, {\n    key: 'insertText',\n    value: function insertText(offset, text, marks) {\n      if (this.text === '') {\n        return this.set('leaves', List.of(Leaf.create({\n          text: text,\n          marks: marks\n        })));\n      }\n\n      if (text.length === 0) return this;\n      if (!marks) marks = Set();\n\n      var _searchLeafAtOffset2 = this.searchLeafAtOffset(offset),\n          startOffset = _searchLeafAtOffset2.startOffset,\n          leaf = _searchLeafAtOffset2.leaf,\n          index = _searchLeafAtOffset2.index;\n\n      var delta = offset - startOffset;\n      var beforeText = leaf.text.slice(0, delta);\n      var afterText = leaf.text.slice(delta);\n      var leaves = this.leaves;\n\n      if (leaf.marks.equals(marks)) {\n        return this.set('leaves', leaves.set(index, leaf.set('text', beforeText + text + afterText)));\n      }\n\n      var nextLeaves = leaves.splice(index, 1, leaf.set('text', beforeText), Leaf.create({\n        text: text,\n        marks: marks\n      }), leaf.set('text', afterText));\n      return this.setLeaves(nextLeaves);\n    }\n    /**\n     * Remove a `mark` at `index` and `length`.\n     *\n     * @param {Number} index\n     * @param {Number} length\n     * @param {Mark} mark\n     * @return {Text}\n     */\n\n  }, {\n    key: 'removeMark',\n    value: function removeMark(index, length, mark) {\n      if (this.text === '' && index === 0 && length === 0) {\n        var first = this.leaves.first();\n        if (!first) return this;\n        var newFirst = first.removeMark(mark);\n        if (newFirst === first) return this;\n        return this.set('leaves', List.of(newFirst));\n      }\n\n      if (length <= 0) return this;\n      if (index >= this.text.length) return this;\n\n      var _Leaf$splitLeaves9 = Leaf.splitLeaves(this.leaves, index),\n          _Leaf$splitLeaves10 = slicedToArray(_Leaf$splitLeaves9, 2),\n          before = _Leaf$splitLeaves10[0],\n          bundle = _Leaf$splitLeaves10[1];\n\n      var _Leaf$splitLeaves11 = Leaf.splitLeaves(bundle, length),\n          _Leaf$splitLeaves12 = slicedToArray(_Leaf$splitLeaves11, 2),\n          middle = _Leaf$splitLeaves12[0],\n          after = _Leaf$splitLeaves12[1];\n\n      var leaves = before.concat(middle.map(function (x) {\n        return x.removeMark(mark);\n      }), after);\n      return this.setLeaves(leaves);\n    }\n    /**\n     * Remove text from the text node at `start` for `length`.\n     *\n     * @param {Number} start\n     * @param {Number} length\n     * @return {Text}\n     */\n\n  }, {\n    key: 'removeText',\n    value: function removeText(start, length) {\n      if (length <= 0) return this;\n      if (start >= this.text.length) return this; // PERF: For simple backspace, we can operate directly on the leaf\n\n      if (length === 1) {\n        var _searchLeafAtOffset3 = this.searchLeafAtOffset(start + 1),\n            leaf = _searchLeafAtOffset3.leaf,\n            index = _searchLeafAtOffset3.index,\n            startOffset = _searchLeafAtOffset3.startOffset;\n\n        var offset = start - startOffset;\n\n        if (leaf) {\n          if (leaf.text.length === 1) {\n            var _leaves2 = this.leaves.remove(index);\n\n            return this.setLeaves(_leaves2);\n          }\n\n          var beforeText = leaf.text.slice(0, offset);\n          var afterText = leaf.text.slice(offset + length);\n          var text = beforeText + afterText;\n\n          if (text.length > 0) {\n            return this.set('leaves', this.leaves.set(index, leaf.set('text', text)));\n          }\n        }\n      }\n\n      var _Leaf$splitLeaves13 = Leaf.splitLeaves(this.leaves, start),\n          _Leaf$splitLeaves14 = slicedToArray(_Leaf$splitLeaves13, 2),\n          before = _Leaf$splitLeaves14[0],\n          bundle = _Leaf$splitLeaves14[1];\n\n      var after = Leaf.splitLeaves(bundle, length)[1];\n      var leaves = Leaf.createLeaves(before.concat(after));\n\n      if (leaves.size === 1) {\n        var first = leaves.first();\n\n        if (first.text === '') {\n          return this.set('leaves', List.of(first.set('marks', this.getActiveMarks())));\n        }\n      }\n\n      return this.set('leaves', leaves);\n    }\n    /**\n     * Return a JSON representation of the text.\n     *\n     * @param {Object} options\n     * @return {Object}\n     */\n\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var object = {\n        object: this.object,\n        leaves: this.getLeaves().toArray().map(function (r) {\n          return r.toJSON();\n        })\n      };\n\n      if (options.preserveKeys) {\n        object.key = this.key;\n      }\n\n      return object;\n    }\n    /**\n     * Update a `mark` at `index` and `length` with `properties`.\n     *\n     * @param {Number} index\n     * @param {Number} length\n     * @param {Object} properties\n     * @param {Object} newProperties\n     * @return {Text}\n     */\n\n  }, {\n    key: 'updateMark',\n    value: function updateMark(index, length, properties, newProperties) {\n      var mark = Mark.create(properties);\n      var newMark = mark.merge(newProperties);\n\n      if (this.text === '' && length === 0 && index === 0) {\n        var _leaves3 = this.leaves;\n\n        var first = _leaves3.first();\n\n        if (!first) return this;\n        var newFirst = first.updateMark(mark, newMark);\n        if (newFirst === first) return this;\n        return this.set('leaves', List.of(newFirst));\n      }\n\n      if (length <= 0) return this;\n      if (index >= this.text.length) return this;\n\n      var _Leaf$splitLeaves15 = Leaf.splitLeaves(this.leaves, index),\n          _Leaf$splitLeaves16 = slicedToArray(_Leaf$splitLeaves15, 2),\n          before = _Leaf$splitLeaves16[0],\n          bundle = _Leaf$splitLeaves16[1];\n\n      var _Leaf$splitLeaves17 = Leaf.splitLeaves(bundle, length),\n          _Leaf$splitLeaves18 = slicedToArray(_Leaf$splitLeaves17, 2),\n          middle = _Leaf$splitLeaves18[0],\n          after = _Leaf$splitLeaves18[1];\n\n      var leaves = before.concat(middle.map(function (x) {\n        return x.updateMark(mark, newMark);\n      }), after);\n      return this.setLeaves(leaves);\n    }\n    /**\n     * Split this text and return two different texts\n     * @param {Number} position\n     * @returns {Array<Text>}\n     */\n\n  }, {\n    key: 'splitText',\n    value: function splitText(offset) {\n      var splitted = Leaf.splitLeaves(this.leaves, offset);\n      var one = this.set('leaves', splitted[0]);\n      var two = this.set('leaves', splitted[1]).regenerateKey();\n      return [one, two];\n    }\n    /**\n     * merge this text and another text at the end\n     * @param {Text} text\n     * @returns {Text}\n     */\n\n  }, {\n    key: 'mergeText',\n    value: function mergeText(text) {\n      var leaves = this.leaves.concat(text.leaves);\n      return this.setLeaves(leaves);\n    }\n    /**\n     * Set leaves with normalized `leaves`\n     *\n     * @param {List} leaves\n     * @returns {Text}\n     */\n\n  }, {\n    key: 'setLeaves',\n    value: function setLeaves(leaves) {\n      leaves = Leaf.createLeaves(leaves);\n\n      if (leaves.size === 1) {\n        var first = leaves.first();\n\n        if (!first.marks || first.marks.size === 0) {\n          if (first.text === '') {\n            return this.set('leaves', List([Leaf.create()]));\n          }\n        }\n      }\n\n      if (leaves.size === 0) {\n        leaves = leaves.push(Leaf.create());\n      }\n\n      return this.set('leaves', leaves);\n    }\n  }], [{\n    key: 'create',\n\n    /**\n     * Create a new `Text` with `attrs`.\n     *\n     * @param {Object|Array|List|String|Text} attrs\n     * @return {Text}\n     */\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n\n      if (Text.isText(attrs)) {\n        return attrs;\n      }\n\n      if (typeof attrs === 'string') {\n        attrs = {\n          leaves: [{\n            text: attrs\n          }]\n        };\n      }\n\n      if (isPlainObject(attrs)) {\n        if (attrs.text) {\n          var _attrs = attrs,\n              text = _attrs.text,\n              marks = _attrs.marks,\n              key = _attrs.key;\n          attrs = {\n            key: key,\n            leaves: [{\n              text: text,\n              marks: marks\n            }]\n          };\n        }\n\n        return Text.fromJSON(attrs);\n      }\n\n      throw new Error('`Text.create` only accepts objects, arrays, strings or texts, but you passed it: ' + attrs);\n    }\n    /**\n     * Create a list of `Texts` from `elements`.\n     *\n     * @param {Array<Text|Object>|List<Text|Object>} elements\n     * @return {List<Text>}\n     */\n\n  }, {\n    key: 'createList',\n    value: function createList() {\n      var elements = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      if (List.isList(elements) || Array.isArray(elements)) {\n        var list = new List(elements.map(Text.create));\n        return list;\n      }\n\n      throw new Error('`Text.createList` only accepts arrays or lists, but you passed it: ' + elements);\n    }\n    /**\n     * Create a `Text` from a JSON `object`.\n     *\n     * @param {Object|Text} object\n     * @return {Text}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(object) {\n      if (Text.isText(object)) {\n        return object;\n      }\n\n      var _object$key = object.key,\n          key = _object$key === undefined ? KeyUtils.create() : _object$key;\n      var leaves = object.leaves;\n\n      if (!leaves) {\n        if (object.ranges) {\n          warning(false, 'As of slate@0.27.0, the `ranges` property of Slate objects has been renamed to `leaves`.');\n          leaves = object.ranges;\n        } else {\n          leaves = List();\n        }\n      }\n\n      if (Array.isArray(leaves)) {\n        leaves = List(leaves.map(function (x) {\n          return Leaf.create(x);\n        }));\n      } else if (List.isList(leaves)) {\n        leaves = leaves.map(function (x) {\n          return Leaf.create(x);\n        });\n      } else {\n        throw new Error('leaves must be either Array or Immutable.List');\n      }\n\n      if (leaves.size === 0) {\n        leaves = leaves.push(Leaf.create());\n      }\n\n      var node = new Text({\n        leaves: Leaf.createLeaves(leaves),\n        key: key\n      });\n      return node;\n    }\n    /**\n     * Check if `any` is a list of texts.\n     *\n     * @param {Any} any\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isTextList',\n    value: function isTextList(any) {\n      return List.isList(any) && any.every(function (item) {\n        return Text.isText(item);\n      });\n    }\n  }]);\n  return Text;\n}(Record(DEFAULTS$4));\n/**\n * Memoize read methods.\n */\n\n\nmemoize(Text.prototype, ['getActiveMarks', 'getMarks', 'getMarksAsArray']);\n/**\n * Export.\n *\n * @type {Text}\n */\n\nvar Node = function () {\n  function Node() {\n    classCallCheck(this, Node);\n  }\n\n  createClass(Node, null, [{\n    key: 'create',\n\n    /**\n     * Create a new `Node` with `attrs`.\n     *\n     * @param {Object|Node} attrs\n     * @return {Node}\n     */\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Node.isNode(attrs)) {\n        return attrs;\n      }\n\n      if (isPlainObject(attrs)) {\n        var object = attrs.object;\n\n        if (!object && attrs.kind) {\n          warning(false, 'As of slate@0.32.0, the `kind` property of Slate objects has been renamed to `object`.');\n          object = attrs.kind;\n        }\n\n        switch (object) {\n          case 'block':\n            return Block.create(attrs);\n\n          case 'document':\n            return Document.create(attrs);\n\n          case 'inline':\n            return Inline.create(attrs);\n\n          case 'text':\n            return Text.create(attrs);\n\n          default:\n            {\n              throw new Error('`Node.create` requires a `object` string.');\n            }\n        }\n      }\n\n      throw new Error('`Node.create` only accepts objects or nodes but you passed it: ' + attrs);\n    }\n    /**\n     * Create a list of `Nodes` from an array.\n     *\n     * @param {Array<Object|Node>} elements\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'createList',\n    value: function createList() {\n      var elements = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      if (List.isList(elements) || Array.isArray(elements)) {\n        var list = List(elements.map(Node.create));\n        return list;\n      }\n\n      throw new Error('`Node.createList` only accepts lists or arrays, but you passed it: ' + elements);\n    }\n    /**\n     * Create a dictionary of settable node properties from `attrs`.\n     *\n     * @param {Object|String|Node} attrs\n     * @return {Object}\n     */\n\n  }, {\n    key: 'createProperties',\n    value: function createProperties() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Block.isBlock(attrs) || Inline.isInline(attrs)) {\n        return {\n          data: attrs.data,\n          type: attrs.type\n        };\n      }\n\n      if (typeof attrs === 'string') {\n        return {\n          type: attrs\n        };\n      }\n\n      if (isPlainObject(attrs)) {\n        var props = {};\n        if ('type' in attrs) props.type = attrs.type;\n        if ('data' in attrs) props.data = Data.create(attrs.data);\n        return props;\n      }\n\n      throw new Error('`Node.createProperties` only accepts objects, strings, blocks or inlines, but you passed it: ' + attrs);\n    }\n    /**\n     * Create a `Node` from a JSON `value`.\n     *\n     * @param {Object} value\n     * @return {Node}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(value) {\n      var object = value.object;\n\n      if (!object && value.kind) {\n        warning(false, 'As of slate@0.32.0, the `kind` property of Slate objects has been renamed to `object`.');\n        object = value.kind;\n      }\n\n      switch (object) {\n        case 'block':\n          return Block.fromJSON(value);\n\n        case 'document':\n          return Document.fromJSON(value);\n\n        case 'inline':\n          return Inline.fromJSON(value);\n\n        case 'text':\n          return Text.fromJSON(value);\n\n        default:\n          {\n            throw new Error('`Node.fromJSON` requires an `object` of either \\'block\\', \\'document\\', \\'inline\\' or \\'text\\', but you passed: ' + value);\n          }\n      }\n    }\n    /**\n     * Check if `any` is a `Node`.\n     *\n     * @param {Any} any\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isNode',\n    value: function isNode(any) {\n      return Block.isBlock(any) || Document.isDocument(any) || Inline.isInline(any) || Text.isText(any);\n    }\n    /**\n     * Check if `any` is a list of nodes.\n     *\n     * @param {Any} any\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isNodeList',\n    value: function isNodeList(any) {\n      return List.isList(any) && any.every(function (item) {\n        return Node.isNode(item);\n      });\n    }\n  }]);\n  return Node;\n}();\n/**\n * Export.\n *\n * @type {Object}\n */\n\n\nvar DEFAULTS$5 = {\n  data: undefined,\n  key: undefined,\n  nodes: undefined,\n  type: undefined\n  /**\n   * Block.\n   *\n   * @type {Block}\n   */\n\n};\n\nvar Block = function (_Record) {\n  inherits(Block, _Record);\n\n  function Block() {\n    classCallCheck(this, Block);\n    return possibleConstructorReturn(this, (Block.__proto__ || Object.getPrototypeOf(Block)).apply(this, arguments));\n  }\n\n  createClass(Block, [{\n    key: 'toJSON',\n\n    /**\n     * Return a JSON representation of the block.\n     *\n     * @param {Object} options\n     * @return {Object}\n     */\n    value: function toJSON() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var object = {\n        object: this.object,\n        type: this.type,\n        data: this.data.toJSON(),\n        nodes: this.nodes.toArray().map(function (n) {\n          return n.toJSON(options);\n        })\n      };\n\n      if (options.preserveKeys) {\n        object.key = this.key;\n      }\n\n      return object;\n    }\n  }], [{\n    key: 'create',\n\n    /**\n     * Create a new `Block` from `attrs`.\n     *\n     * @param {Object|String|Block} attrs\n     * @return {Block}\n     */\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Block.isBlock(attrs)) {\n        return attrs;\n      }\n\n      if (typeof attrs === 'string') {\n        attrs = {\n          type: attrs\n        };\n      }\n\n      if (isPlainObject(attrs)) {\n        return Block.fromJSON(attrs);\n      }\n\n      throw new Error('`Block.create` only accepts objects, strings or blocks, but you passed it: ' + attrs);\n    }\n    /**\n     * Create a list of `Blocks` from `attrs`.\n     *\n     * @param {Array<Block|Object>|List<Block|Object>} attrs\n     * @return {List<Block>}\n     */\n\n  }, {\n    key: 'createList',\n    value: function createList() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      if (List.isList(attrs) || Array.isArray(attrs)) {\n        var list = new List(attrs.map(Block.create));\n        return list;\n      }\n\n      throw new Error('`Block.createList` only accepts arrays or lists, but you passed it: ' + attrs);\n    }\n    /**\n     * Create a `Block` from a JSON `object`.\n     *\n     * @param {Object|Block} object\n     * @return {Block}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(object) {\n      if (Block.isBlock(object)) {\n        return object;\n      }\n\n      var _object$data = object.data,\n          data = _object$data === undefined ? {} : _object$data,\n          _object$key = object.key,\n          key = _object$key === undefined ? KeyUtils.create() : _object$key,\n          _object$nodes = object.nodes,\n          nodes = _object$nodes === undefined ? [] : _object$nodes,\n          type = object.type;\n\n      if (typeof type !== 'string') {\n        throw new Error('`Block.fromJSON` requires a `type` string.');\n      }\n\n      var block = new Block({\n        key: key,\n        type: type,\n        data: Map(data),\n        nodes: Node.createList(nodes)\n      });\n      return block;\n    }\n    /**\n     * Check if `any` is a block list.\n     *\n     * @param {Any} any\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isBlockList',\n    value: function isBlockList(any) {\n      return List.isList(any) && any.every(function (item) {\n        return Block.isBlock(item);\n      });\n    }\n  }]);\n  return Block;\n}(Record(DEFAULTS$5));\n/**\n * Export.\n *\n * @type {Block}\n */\n\n\nfunction compare(path, target) {\n  var m = min(path, target);\n\n  for (var i = 0; i < m; i++) {\n    var pv = path.get(i);\n    var tv = target.get(i); // If the path's value is ever less than the target's, it's before.\n\n    if (pv < tv) return -1; // If the target's value is ever less than the path's, it's after.\n\n    if (pv > tv) return 1;\n  } // Paths should now be equal, otherwise something is wrong\n\n\n  return path.size === target.size ? 0 : null;\n}\n/**\n * Create a path from `attrs`.\n *\n * @param {Array|List} attrs\n * @return {List}\n */\n\n\nfunction create$1(attrs) {\n  if (attrs == null) {\n    return null;\n  }\n\n  if (List.isList(attrs)) {\n    return attrs;\n  }\n\n  if (Array.isArray(attrs)) {\n    return List(attrs);\n  }\n\n  throw new Error('Paths can only be created from arrays or lists, but you passed: ' + attrs);\n}\n/**\n * Crop paths `a` and `b` to an equal size, defaulting to the shortest.\n *\n * @param {List} a\n * @param {List} b\n */\n\n\nfunction crop(a, b) {\n  var size = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : min(a, b);\n  var ca = a.slice(0, size);\n  var cb = b.slice(0, size);\n  return [ca, cb];\n}\n/**\n * Decrement a `path` by `n` at `index`, defaulting to the last index.\n *\n * @param {List} path\n * @param {Number} n\n * @param {Number} index\n */\n\n\nfunction decrement(path) {\n  var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  var index = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : path.size - 1;\n  return increment(path, 0 - n, index);\n}\n/**\n * Get all ancestor paths of th given path.\n *\n * @param {List} path\n * @returns {List}\n */\n\n\nfunction getAncestors(path) {\n  var ancestors = List().withMutations(function (list) {\n    for (var i = 0; i < path.size; i++) {\n      list.push(path.slice(0, i));\n    }\n  });\n  return ancestors;\n}\n/**\n * Increment a `path` by `n` at `index`, defaulting to the last index.\n *\n * @param {List} path\n * @param {Number} n\n * @param {Number} index\n */\n\n\nfunction increment(path) {\n  var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  var index = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : path.size - 1;\n  var value = path.get(index);\n  var newValue = value + n;\n  var newPath = path.set(index, newValue);\n  return newPath;\n}\n/**\n * Is a `path` above another `target` path?\n *\n * @param {List} path\n * @param {List} target\n * @return {Boolean}\n */\n\n\nfunction isAbove(path, target) {\n  var _crop = crop(path, target),\n      _crop2 = slicedToArray(_crop, 2),\n      p = _crop2[0],\n      t = _crop2[1];\n\n  return path.size < target.size && compare(p, t) === 0;\n}\n/**\n * Is a `path` after another `target` path in a document?\n *\n * @param {List} path\n * @param {List} target\n * @return {Boolean}\n */\n\n\nfunction isAfter(path, target) {\n  var _crop3 = crop(path, target),\n      _crop4 = slicedToArray(_crop3, 2),\n      p = _crop4[0],\n      t = _crop4[1];\n\n  return compare(p, t) === 1;\n}\n/**\n * Is a `path` before another `target` path in a document?\n *\n * @param {List} path\n * @param {List} target\n * @return {Boolean}\n */\n\n\nfunction isBefore(path, target) {\n  var _crop5 = crop(path, target),\n      _crop6 = slicedToArray(_crop5, 2),\n      p = _crop6[0],\n      t = _crop6[1];\n\n  return compare(p, t) === -1;\n}\n/**\n * Is a `path` equal to another `target` path in a document?\n *\n * @param {List} path\n * @param {List} target\n * @return {Boolean}\n */\n\n\nfunction isEqual(path, target) {\n  return path.equals(target);\n}\n/**\n * Is a `path` older than a `target` path? Meaning that it ends as an older\n * sibling of one of the indexes in the target.\n *\n * @param {List} path\n * @param {List} target\n * @return {Boolean}\n */\n\n\nfunction isOlder(path, target) {\n  var index = path.size - 1;\n\n  var _crop7 = crop(path, target, index),\n      _crop8 = slicedToArray(_crop7, 2),\n      p = _crop8[0],\n      t = _crop8[1];\n\n  var pl = path.get(index);\n  var tl = target.get(index);\n  return isEqual(p, t) && pl > tl;\n}\n/**\n * Is a `path` a sibling of a `target` path?\n *\n * @param {List} path\n * @param {List} target\n * @return {Boolean}\n */\n\n\nfunction isSibling(path, target) {\n  if (path.size !== target.size) return false;\n  var p = path.butLast();\n  var t = target.butLast();\n  return p.equals(t);\n}\n/**\n * Is a `path` younger than a `target` path? Meaning that it ends as a younger\n * sibling of one of the indexes in the target.\n *\n * @param {List} path\n * @param {List} target\n * @return {Boolean}\n */\n\n\nfunction isYounger(path, target) {\n  var index = path.size - 1;\n\n  var _crop9 = crop(path, target, index),\n      _crop10 = slicedToArray(_crop9, 2),\n      p = _crop10[0],\n      t = _crop10[1];\n\n  var pl = path.get(index);\n  var tl = target.get(index);\n  return isEqual(p, t) && pl < tl;\n}\n/**\n * Lift a `path` to refer to its parent.\n *\n * @param {List} path\n * @return {List}\n */\n\n\nfunction lift(path) {\n  var parent = path.slice(0, -1);\n  return parent;\n}\n/**\n * Drop a `path`, returning the path from the first child.\n *\n * @param {List} path\n * @return {List}\n */\n\n\nfunction drop(path) {\n  var relative = path.slice(1);\n  return relative;\n}\n/**\n * Get the maximum length of paths `a` and `b`.\n *\n * @param {List} path\n * @param {List} path\n * @return {Number}\n */\n\n\nfunction max(a, b) {\n  var n = Math.max(a.size, b.size);\n  return n;\n}\n/**\n * Get the minimum length of paths `a` and `b`.\n *\n * @param {List} path\n * @param {List} path\n * @return {Number}\n */\n\n\nfunction min(a, b) {\n  var n = Math.min(a.size, b.size);\n  return n;\n}\n/**\n * Get the common ancestor path of path `a` and path `b`.\n *\n * @param {List} a\n * @param {List} b\n * @return {List}\n */\n\n\nfunction relate(a, b) {\n  var array = [];\n\n  for (var i = 0; i < a.size && i < b.size; i++) {\n    var av = a.get(i);\n    var bv = b.get(i); // If the values aren't equal, they've diverged and don't share an ancestor.\n\n    if (av !== bv) break; // Otherwise, the current value is still a common ancestor.\n\n    array.push(av);\n  }\n\n  var path = create$1(array);\n  return path;\n}\n/**\n * Transform a `path` by an `operation`, adjusting it to stay current.\n *\n * @param {List} path\n * @param {Operation} operation\n * @return {List<List>}\n */\n\n\nfunction transform(path, operation) {\n  var type = operation.type,\n      position = operation.position,\n      p = operation.path;\n\n  if (type === 'add_mark' || type === 'insert_text' || type === 'remove_mark' || type === 'remove_text' || type === 'set_mark' || type === 'set_node' || type === 'set_selection' || type === 'set_value' || path.size === 0) {\n    return List([path]);\n  }\n\n  var pIndex = p.size - 1;\n  var pEqual = isEqual(p, path);\n  var pYounger = isYounger(p, path);\n  var pAbove = isAbove(p, path);\n\n  if (type === 'insert_node') {\n    if (pEqual || pYounger || pAbove) {\n      path = increment(path, 1, pIndex);\n    }\n  }\n\n  if (type === 'remove_node') {\n    if (pYounger) {\n      path = decrement(path, 1, pIndex);\n    } else if (pEqual || pAbove) {\n      path = [];\n    }\n  }\n\n  if (type === 'merge_node') {\n    if (pEqual || pYounger) {\n      path = decrement(path, 1, pIndex);\n    } else if (pAbove) {\n      path = decrement(path, 1, pIndex);\n      path = increment(path, position, pIndex + 1);\n    }\n  }\n\n  if (type === 'split_node') {\n    if (pEqual) {\n      path = [path, increment(path)];\n    } else if (pYounger) {\n      path = increment(path, 1, pIndex);\n    } else if (pAbove) {\n      if (path.get(pIndex + 1) >= position) {\n        path = increment(path, 1, pIndex);\n        path = decrement(path, position, pIndex + 1);\n      }\n    }\n  }\n\n  if (type === 'move_node') {\n    var np = operation.newPath;\n\n    if (isEqual(p, np)) {\n      return List([path]);\n    }\n\n    if (pAbove || pEqual) {\n      // We are comparing something that was moved\n      // The new path is unaffected unless the old path was the left-sibling of an ancestor\n      if (isYounger(p, np) && p.size < np.size) {\n        path = decrement(np, 1, min(np, p) - 1).concat(path.slice(p.size));\n      } else {\n        path = np.concat(path.slice(p.size));\n      }\n    } else {\n      // This is equivalent logic to remove_node for path\n      if (pYounger) {\n        path = decrement(path, 1, pIndex);\n      } // This is the equivalent logic to insert_node for newPath\n\n\n      if (isYounger(np, path) || isEqual(np, path) || isAbove(np, path)) {\n        path = increment(path, 1, np.size - 1);\n      }\n    }\n  }\n\n  var paths = Array.isArray(path) ? path : [path];\n  return List(paths);\n}\n/**\n * Export.\n *\n * @type {Object}\n */\n\n\nvar PathUtils = {\n  compare: compare,\n  create: create$1,\n  crop: crop,\n  decrement: decrement,\n  getAncestors: getAncestors,\n  increment: increment,\n  isAbove: isAbove,\n  isAfter: isAfter,\n  isBefore: isBefore,\n  isEqual: isEqual,\n  isOlder: isOlder,\n  isSibling: isSibling,\n  isYounger: isYounger,\n  lift: lift,\n  drop: drop,\n  max: max,\n  min: min,\n  relate: relate,\n  transform: transform\n};\nvar DEFAULTS$6 = {\n  key: undefined,\n  offset: undefined,\n  path: undefined\n  /**\n   * Point.\n   *\n   * @type {Point}\n   */\n\n};\n\nvar Point = function (_Record) {\n  inherits(Point, _Record);\n\n  function Point() {\n    classCallCheck(this, Point);\n    return possibleConstructorReturn(this, (Point.__proto__ || Object.getPrototypeOf(Point)).apply(this, arguments));\n  }\n\n  createClass(Point, [{\n    key: 'isAfterPoint',\n\n    /**\n     * Check whether the point is after another `point`.\n     *\n     * @return {Boolean}\n     */\n    value: function isAfterPoint(point) {\n      if (this.isUnset) return false;\n      var is$$1 = this.key === point.key && this.offset > point.offset || PathUtils.compare(this.path, point.path) === 1;\n      return is$$1;\n    }\n    /**\n     * Check whether the point is after a `range`.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isAfterRange',\n    value: function isAfterRange(range) {\n      if (this.isUnset) return false;\n      var is$$1 = this.isAfterPoint(range.end);\n      return is$$1;\n    }\n    /**\n     * Check whether the point is at the end of a `range`.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isAtEndOfRange',\n    value: function isAtEndOfRange(range) {\n      if (this.isUnset) return false;\n      var is$$1 = this.equals(range.end);\n      return is$$1;\n    }\n    /**\n     * Check whether the point is at the start of a `range`.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isAtStartOfRange',\n    value: function isAtStartOfRange(range) {\n      if (this.isUnset) return false;\n      var is$$1 = this.equals(range.start);\n      return is$$1;\n    }\n    /**\n     * Check whether the point is before another `point`.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isBeforePoint',\n    value: function isBeforePoint(point) {\n      if (this.isUnset) return false;\n      var is$$1 = this.key === point.key && this.offset < point.offset || PathUtils.compare(this.path, point.path) === -1;\n      return is$$1;\n    }\n    /**\n     * Check whether the point is before a `range`.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isBeforeRange',\n    value: function isBeforeRange(range) {\n      if (this.isUnset) return false;\n      var is$$1 = this.isBeforePoint(range.start);\n      return is$$1;\n    }\n    /**\n     * Check whether the point is inside a `range`.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isInRange',\n    value: function isInRange(range) {\n      if (this.isUnset) return false;\n      var is$$1 = this.equals(range.start) || this.equals(range.end) || this.isAfterPoint(range.start) && this.isBeforePoint(range.end);\n      return is$$1;\n    }\n    /**\n     * Check whether the point is at the end of a `node`.\n     *\n     * @param {Node} node\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isAtEndOfNode',\n    value: function isAtEndOfNode(node) {\n      if (this.isUnset) return false;\n      var last = node.getLastText();\n      var is$$1 = this.key === last.key && this.offset === last.text.length;\n      return is$$1;\n    }\n    /**\n     * Check whether the point is at the start of a `node`.\n     *\n     * @param {Node} node\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isAtStartOfNode',\n    value: function isAtStartOfNode(node) {\n      if (this.isUnset) return false; // PERF: Do a check for a `0` offset first since it's quickest.\n\n      if (this.offset !== 0) return false;\n      var first = node.getFirstText();\n      var is$$1 = this.key === first.key;\n      return is$$1;\n    }\n    /**\n     * Check whether the point is in a `node`.\n     *\n     * @param {Node} node\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isInNode',\n    value: function isInNode(node) {\n      if (this.isUnset) return false;\n      if (node.object === 'text' && node.key === this.key) return true;\n      if (node.hasNode(this.key)) return true;\n      return false;\n    }\n    /**\n     * Move the point's offset backward `n` characters.\n     *\n     * @param {Number} n (optional)\n     * @return {Point}\n     */\n\n  }, {\n    key: 'moveBackward',\n    value: function moveBackward() {\n      var n = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n      if (n === 0) return this;\n      if (n < 0) return this.moveForward(-n);\n      var point = this.setOffset(this.offset - n);\n      return point;\n    }\n    /**\n     * Move the point's offset forward `n` characters.\n     *\n     * @param {Number} n (optional)\n     * @return {Point}\n     */\n\n  }, {\n    key: 'moveForward',\n    value: function moveForward() {\n      var n = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n      if (n === 0) return this;\n      if (n < 0) return this.moveBackward(-n);\n      var point = this.setOffset(this.offset + n);\n      return point;\n    }\n    /**\n     * Move the point's anchor point to a new `path` and `offset`.\n     *\n     * Optionally, the `path` can be a key string, or omitted entirely in which\n     * case it would be the offset number.\n     *\n     * @param {List|String|Number} path\n     * @param {Number} offset\n     * @return {Point}\n     */\n\n  }, {\n    key: 'moveTo',\n    value: function moveTo(path) {\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var key = this.key;\n\n      if (typeof path === 'number') {\n        offset = path;\n        path = this.path;\n      } else if (typeof path === 'string') {\n        key = path;\n        path = key === this.key ? this.path : null;\n      } else {\n        key = path.equals(this.path) ? this.key : null;\n      }\n\n      var point = this.merge({\n        key: key,\n        path: path,\n        offset: offset\n      });\n      return point;\n    }\n    /**\n     * Move the point's anchor point to the start of a `node`.\n     *\n     * @param {Node} node\n     * @return {Point}\n     */\n\n  }, {\n    key: 'moveToStartOfNode',\n    value: function moveToStartOfNode(node) {\n      var first = node.getFirstText();\n      var point = this.moveTo(first.key, 0);\n      return point;\n    }\n    /**\n     * Move the point's anchor point to the end of a `node`.\n     *\n     * @param {Node} node\n     * @return {Point}\n     */\n\n  }, {\n    key: 'moveToEndOfNode',\n    value: function moveToEndOfNode(node) {\n      var last = node.getLastText();\n      var point = this.moveTo(last.key, last.text.length);\n      return point;\n    }\n    /**\n     * Normalize the point relative to a `node`, ensuring that its key and path\n     * reference a text node, or that it gets unset.\n     *\n     * @param {Node} node\n     * @return {Point}\n     */\n\n  }, {\n    key: 'normalize',\n    value: function normalize(node) {\n      // If both the key and path are null, there's no reference to a node, so\n      // make sure it is entirely unset.\n      if (this.key == null && this.path == null) {\n        return this.setOffset(null);\n      }\n\n      var key = this.key,\n          offset = this.offset,\n          path = this.path; // PERF: this function gets called a lot.\n      // to avoid creating the key -> path lookup table, we attempt to look up by path first.\n\n      var target = path && node.getNode(path);\n\n      if (!target) {\n        target = node.getNode(key);\n\n        if (target) {\n          // There is a misalignment of path and key\n          var _point = this.merge({\n            path: node.getPath(key)\n          });\n\n          return _point;\n        }\n      }\n\n      if (!target) {\n        warning(false, \"A point's `path` or `key` invalid and was reset!\");\n        var text = node.getFirstText();\n        if (!text) return Point.create();\n\n        var _point2 = this.merge({\n          key: text.key,\n          offset: 0,\n          path: node.getPath(text.key)\n        });\n\n        return _point2;\n      }\n\n      if (target.object !== 'text') {\n        warning(false, 'A point should not reference a non-text node!');\n\n        var _text = target.getTextAtOffset(offset);\n\n        var before = target.getOffset(_text.key);\n\n        var _point3 = this.merge({\n          offset: offset - before,\n          key: _text.key,\n          path: node.getPath(_text.key)\n        });\n\n        return _point3;\n      }\n\n      if (target && path && key && key !== target.key) {\n        warning(false, \"A point's `key` did not match its `path`!\"); // TODO: if we look up by path above and it differs by key, do we want to reset it to looking up by key?\n      }\n\n      var point = this.merge({\n        key: target.key,\n        path: path == null ? node.getPath(target.key) : path,\n        offset: offset == null ? 0 : Math.min(offset, target.text.length)\n      });\n      return point;\n    }\n    /**\n     * Set the point's key to a new `key`.\n     *\n     * @param {String} key\n     * @return {Point}\n     */\n\n  }, {\n    key: 'setKey',\n    value: function setKey(key) {\n      if (key != null) {\n        key = KeyUtils.create(key);\n      }\n\n      var point = this.set('key', key);\n      return point;\n    }\n    /**\n     * Set the point's offset to a new `offset`.\n     *\n     * @param {Number} offset\n     * @return {Point}\n     */\n\n  }, {\n    key: 'setOffset',\n    value: function setOffset(offset) {\n      var point = this.set('offset', offset);\n      return point;\n    }\n    /**\n     * Set the point's path to a new `path`.\n     *\n     * @param {List|Array} path\n     * @return {Point}\n     */\n\n  }, {\n    key: 'setPath',\n    value: function setPath(path) {\n      if (path != null) {\n        path = PathUtils.create(path);\n      }\n\n      var point = this.set('path', path);\n      return point;\n    }\n    /**\n     * Return a JSON representation of the point.\n     *\n     * @param {Object} options\n     * @return {Object}\n     */\n\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var object = {\n        object: this.object,\n        key: this.key,\n        offset: this.offset,\n        path: this.path && this.path.toArray()\n      };\n\n      if (!options.preserveKeys) {\n        delete object.key;\n      }\n\n      return object;\n    }\n    /**\n     * Unset the point.\n     *\n     * @return {Point}\n     */\n\n  }, {\n    key: 'unset',\n    value: function unset() {\n      return this.merge({\n        key: null,\n        offset: null,\n        path: null\n      });\n    }\n  }, {\n    key: 'isSet',\n\n    /**\n     * Check whether all properties of the point are set.\n     *\n     * @return {Boolean}\n     */\n    get: function get$$1() {\n      return this.key != null && this.offset != null && this.path != null;\n    }\n    /**\n     * Check whether any property of the point is not set.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isUnset',\n    get: function get$$1() {\n      return !this.isSet;\n    }\n  }], [{\n    key: 'create',\n\n    /**\n     * Create a new `Point` with `attrs`.\n     *\n     * @param {Object|Point} attrs\n     * @return {Point}\n     */\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Point.isPoint(attrs)) {\n        return attrs;\n      }\n\n      if (isPlainObject(attrs)) {\n        return Point.fromJSON(attrs);\n      }\n\n      throw new Error('`Point.create` only accepts objects or points, but you passed it: ' + attrs);\n    }\n    /**\n     * Create a dictionary of settable point properties from `attrs`.\n     *\n     * @param {Object|Point} attrs\n     * @return {Object}\n     */\n\n  }, {\n    key: 'createProperties',\n    value: function createProperties() {\n      var a = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Point.isPoint(a)) {\n        return {\n          key: a.key,\n          offset: a.offset,\n          path: a.path\n        };\n      }\n\n      if (isPlainObject(a)) {\n        var p = {};\n        if ('key' in a) p.key = a.key;\n        if ('offset' in a) p.offset = a.offset;\n        if ('path' in a) p.path = PathUtils.create(a.path); // If only a path is set, or only a key is set, ensure that the other is\n        // set to null so that it can be normalized back to the right value.\n        // Otherwise we won't realize that the path and key don't match anymore.\n\n        if ('path' in a && !('key' in a)) p.key = null;\n        if ('key' in a && !('path' in a)) p.path = null;\n        return p;\n      }\n\n      throw new Error('`Point.createProperties` only accepts objects or points, but you passed it: ' + a);\n    }\n    /**\n     * Create a `Point` from a JSON `object`.\n     *\n     * @param {Object} object\n     * @return {Point}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(object) {\n      var _object$key = object.key,\n          key = _object$key === undefined ? null : _object$key,\n          _object$offset = object.offset,\n          offset = _object$offset === undefined ? null : _object$offset,\n          _object$path = object.path,\n          path = _object$path === undefined ? null : _object$path;\n      var point = new Point({\n        key: key,\n        offset: offset,\n        path: PathUtils.create(path)\n      });\n      return point;\n    }\n  }]);\n  return Point;\n}(Record(DEFAULTS$6));\n/**\n * Export.\n *\n * @type {Point}\n */\n\n\nvar DEFAULTS$7 = {\n  anchor: undefined,\n  focus: undefined,\n  mark: undefined\n  /**\n   * Decoration.\n   *\n   * @type {Decoration}\n   */\n\n};\n\nvar Decoration = function (_Record) {\n  inherits(Decoration, _Record);\n\n  function Decoration() {\n    classCallCheck(this, Decoration);\n    return possibleConstructorReturn(this, (Decoration.__proto__ || Object.getPrototypeOf(Decoration)).apply(this, arguments));\n  }\n\n  createClass(Decoration, [{\n    key: 'setProperties',\n\n    /**\n     * Set new `properties` on the decoration.\n     *\n     * @param {Object|Range|Selection} properties\n     * @return {Range}\n     */\n    value: function setProperties(properties) {\n      properties = Decoration.createProperties(properties);\n      var _properties = properties,\n          anchor = _properties.anchor,\n          focus = _properties.focus,\n          mark = _properties.mark;\n      var props = {};\n\n      if (anchor) {\n        props.anchor = Point.create(anchor);\n      }\n\n      if (focus) {\n        props.focus = Point.create(focus);\n      }\n\n      if (mark) {\n        props.mark = Mark.create(mark);\n      }\n\n      var decoration = this.merge(props);\n      return decoration;\n    }\n    /**\n     * Return a JSON representation of the decoration.\n     *\n     * @param {Object} options\n     * @return {Object}\n     */\n\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var object = {\n        object: this.object,\n        anchor: this.anchor.toJSON(options),\n        focus: this.focus.toJSON(options),\n        mark: this.mark.toJSON(options)\n      };\n      return object;\n    }\n  }], [{\n    key: 'create',\n\n    /**\n     * Create a new `Decoration` with `attrs`.\n     *\n     * @param {Object|Decoration} attrs\n     * @return {Decoration}\n     */\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Decoration.isDecoration(attrs)) {\n        return attrs;\n      }\n\n      if (Range.isRange(attrs)) {\n        return Decoration.fromJSON(Range.createProperties(attrs));\n      }\n\n      if (isPlainObject(attrs)) {\n        return Decoration.fromJSON(attrs);\n      }\n\n      throw new Error('`Decoration.create` only accepts objects or decorations, but you passed it: ' + attrs);\n    }\n    /**\n     * Create a list of `Ranges` from `elements`.\n     *\n     * @param {Array<Decoration|Object>|List<Decoration|Object>} elements\n     * @return {List<Decoration>}\n     */\n\n  }, {\n    key: 'createList',\n    value: function createList() {\n      var elements = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      if (List.isList(elements) || Array.isArray(elements)) {\n        var list = new List(elements.map(Decoration.create));\n        return list;\n      }\n\n      throw new Error('`Decoration.createList` only accepts arrays or lists, but you passed it: ' + elements);\n    }\n    /**\n     * Create a dictionary of settable decoration properties from `attrs`.\n     *\n     * @param {Object|String|Decoration} attrs\n     * @return {Object}\n     */\n\n  }, {\n    key: 'createProperties',\n    value: function createProperties() {\n      var a = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Decoration.isDecoration(a)) {\n        return {\n          anchor: Point.createProperties(a.anchor),\n          focus: Point.createProperties(a.focus),\n          mark: Mark.create(a.mark)\n        };\n      }\n\n      if (isPlainObject(a)) {\n        var p = {};\n        if ('anchor' in a) p.anchor = Point.create(a.anchor);\n        if ('focus' in a) p.focus = Point.create(a.focus);\n        if ('mark' in a) p.mark = Mark.create(a.mark);\n        return p;\n      }\n\n      throw new Error('`Decoration.createProperties` only accepts objects or decorations, but you passed it: ' + a);\n    }\n    /**\n     * Create a `Decoration` from a JSON `object`.\n     *\n     * @param {Object} object\n     * @return {Decoration}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(object) {\n      var anchor = object.anchor,\n          focus = object.focus,\n          mark = object.mark;\n\n      if (!mark) {\n        throw new Error('Decorations must be created with a `mark`, but you passed: ' + JSON.stringify(object));\n      }\n\n      var decoration = new Decoration({\n        anchor: Point.fromJSON(anchor || {}),\n        focus: Point.fromJSON(focus || {}),\n        mark: Mark.fromJSON(mark)\n      });\n      return decoration;\n    }\n  }]);\n  return Decoration;\n}(Record(DEFAULTS$7));\n/**\n * Export.\n *\n * @type {Decoration}\n */\n\n/**\n * Slate-specific object types.\n *\n * @type {Object}\n */\n\n\nvar TYPES = {\n  block: '@@__SLATE_BLOCK__@@',\n  change: '@@__SLATE_CHANGE__@@',\n  decoration: '@@__SLATE_DECORATION__@@',\n  document: '@@__SLATE_DOCUMENT__@@',\n  editor: '@@__SLATE_EDITOR__@@',\n  inline: '@@__SLATE_INLINE__@@',\n  mark: '@@__SLATE_MARK__@@',\n  operation: '@@__SLATE_OPERATION__@@',\n  point: '@@__SLATE_POINT__@@',\n  range: '@@__SLATE_RANGE__@@',\n  selection: '@@__SLATE_SELECTION__@@',\n  text: '@@__SLATE_TEXT__@@',\n  value: '@@__SLATE_VALUE__@@'\n  /**\n   * Determine whether a `value` is of `type`.\n   *\n   * @param {string} type\n   * @param {any} value\n   * @return {boolean}\n   */\n\n};\n\nfunction isObject(type, value) {\n  return !!(value && value[TYPES[type]]);\n}\n\nvar DEFAULTS$8 = {\n  anchor: undefined,\n  focus: undefined\n  /**\n   * Range.\n   *\n   * @type {Range}\n   */\n\n};\n\nvar Range = function (_Record) {\n  inherits(Range, _Record);\n\n  function Range() {\n    classCallCheck(this, Range);\n    return possibleConstructorReturn(this, (Range.__proto__ || Object.getPrototypeOf(Range)).apply(this, arguments));\n  }\n\n  createClass(Range, [{\n    key: 'toJSON',\n\n    /**\n     * Return a JSON representation of the range.\n     *\n     * @param {Object} options\n     * @return {Object}\n     */\n    value: function toJSON() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var object = {\n        object: this.object,\n        anchor: this.anchor.toJSON(options),\n        focus: this.focus.toJSON(options)\n      };\n      return object;\n    }\n  }], [{\n    key: 'create',\n\n    /**\n     * Create a new `Range` with `attrs`.\n     *\n     * @param {Object|Range} attrs\n     * @return {Range}\n     */\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Range.isRange(attrs)) {\n        if (attrs.object === 'range') {\n          return attrs;\n        } else {\n          return Range.fromJSON(Range.createProperties(attrs));\n        }\n      }\n\n      if (isPlainObject(attrs)) {\n        return Range.fromJSON(attrs);\n      }\n\n      throw new Error('`Range.create` only accepts objects or ranges, but you passed it: ' + attrs);\n    }\n    /**\n     * Create a list of `Ranges` from `elements`.\n     *\n     * @param {Array<Range|Object>|List<Range|Object>} elements\n     * @return {List<Range>}\n     */\n\n  }, {\n    key: 'createList',\n    value: function createList() {\n      var elements = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      if (List.isList(elements) || Array.isArray(elements)) {\n        var list = new List(elements.map(Range.create));\n        return list;\n      }\n\n      throw new Error('`Range.createList` only accepts arrays or lists, but you passed it: ' + elements);\n    }\n    /**\n     * Create a dictionary of settable range properties from `attrs`.\n     *\n     * @param {Object|String|Range} attrs\n     * @return {Object}\n     */\n\n  }, {\n    key: 'createProperties',\n    value: function createProperties() {\n      var a = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Range.isRange(a)) {\n        return {\n          anchor: Point.createProperties(a.anchor),\n          focus: Point.createProperties(a.focus)\n        };\n      }\n\n      if (isPlainObject(a)) {\n        var p = {};\n        if ('anchor' in a) p.anchor = Point.create(a.anchor);\n        if ('focus' in a) p.focus = Point.create(a.focus);\n        return p;\n      }\n\n      throw new Error('`Range.createProperties` only accepts objects, decorations, ranges or selections, but you passed it: ' + a);\n    }\n    /**\n     * Create a `Range` from a JSON `object`.\n     *\n     * @param {Object} object\n     * @return {Range}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(object) {\n      var anchor = object.anchor,\n          focus = object.focus;\n      var range = new Range({\n        anchor: Point.fromJSON(anchor || {}),\n        focus: Point.fromJSON(focus || {})\n      });\n      return range;\n    }\n    /**\n     * Check if a `value` is a `Range`, or is range-like.\n     *\n     * @param {Any} value\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isRange',\n    value: function isRange(value) {\n      return isObject('range', value) || Decoration.isDecoration(value) || Selection.isSelection(value);\n    }\n  }]);\n  return Range;\n}(Record(DEFAULTS$8));\n/**\n * Export.\n *\n * @type {Range}\n */\n\n\nvar DEFAULTS$9 = {\n  anchor: undefined,\n  focus: undefined,\n  isFocused: undefined,\n  marks: undefined\n  /**\n   * Selection.\n   *\n   * @type {Selection}\n   */\n\n};\n\nvar Selection = function (_Record) {\n  inherits(Selection, _Record);\n\n  function Selection() {\n    classCallCheck(this, Selection);\n    return possibleConstructorReturn(this, (Selection.__proto__ || Object.getPrototypeOf(Selection)).apply(this, arguments));\n  }\n\n  createClass(Selection, [{\n    key: 'setIsFocused',\n\n    /**\n     * Set the `isFocused` property to a new `value`.\n     *\n     * @param {Boolean} value\n     * @return {Selection}\n     */\n    value: function setIsFocused(value) {\n      var selection = this.set('isFocused', value);\n      return selection;\n    }\n    /**\n     * Set the `marks` property to a new set of `marks`.\n     *\n     * @param {Set} marks\n     * @return {Selection}\n     */\n\n  }, {\n    key: 'setMarks',\n    value: function setMarks(marks) {\n      var selection = this.set('marks', marks);\n      return selection;\n    }\n    /**\n     * Set new `properties` on the selection.\n     *\n     * @param {Object|Range|Selection} properties\n     * @return {Range}\n     */\n\n  }, {\n    key: 'setProperties',\n    value: function setProperties(properties) {\n      properties = Selection.createProperties(properties);\n      var _properties = properties,\n          anchor = _properties.anchor,\n          focus = _properties.focus,\n          props = objectWithoutProperties(_properties, ['anchor', 'focus']);\n\n      if (anchor) {\n        props.anchor = Point.create(anchor);\n      }\n\n      if (focus) {\n        props.focus = Point.create(focus);\n      }\n\n      var selection = this.merge(props);\n      return selection;\n    }\n    /**\n     * Return a JSON representation of the selection.\n     *\n     * @param {Object} options\n     * @return {Object}\n     */\n\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var object = {\n        object: this.object,\n        anchor: this.anchor.toJSON(options),\n        focus: this.focus.toJSON(options),\n        isFocused: this.isFocused,\n        marks: this.marks == null ? null : this.marks.toArray().map(function (m) {\n          return m.toJSON();\n        })\n      };\n      return object;\n    }\n  }, {\n    key: 'isBlurred',\n\n    /**\n     * Check whether the selection is blurred.\n     *\n     * @return {Boolean}\n     */\n    get: function get$$1() {\n      return !this.isFocused;\n    }\n  }], [{\n    key: 'create',\n\n    /**\n     * Create a new `Selection` with `attrs`.\n     *\n     * @param {Object|Selection} attrs\n     * @return {Selection}\n     */\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Selection.isSelection(attrs)) {\n        return attrs;\n      }\n\n      if (Range.isRange(attrs)) {\n        return Selection.fromJSON(Range.createProperties(attrs));\n      }\n\n      if (isPlainObject(attrs)) {\n        return Selection.fromJSON(attrs);\n      }\n\n      throw new Error('`Selection.create` only accepts objects, ranges or selections, but you passed it: ' + attrs);\n    }\n    /**\n     * Create a dictionary of settable selection properties from `attrs`.\n     *\n     * @param {Object|String|Selection} attrs\n     * @return {Object}\n     */\n\n  }, {\n    key: 'createProperties',\n    value: function createProperties() {\n      var a = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Selection.isSelection(a)) {\n        return {\n          anchor: Point.createProperties(a.anchor),\n          focus: Point.createProperties(a.focus),\n          isFocused: a.isFocused,\n          marks: a.marks\n        };\n      }\n\n      if (Range.isRange(a)) {\n        return {\n          anchor: Point.createProperties(a.anchor),\n          focus: Point.createProperties(a.focus)\n        };\n      }\n\n      if (isPlainObject(a)) {\n        var p = {};\n        if ('anchor' in a) p.anchor = Point.create(a.anchor);\n        if ('focus' in a) p.focus = Point.create(a.focus);\n        if ('isFocused' in a) p.isFocused = a.isFocused;\n        if ('marks' in a) p.marks = a.marks == null ? null : Mark.createSet(a.marks);\n        return p;\n      }\n\n      throw new Error('`Selection.createProperties` only accepts objects, ranges or selections, but you passed it: ' + a);\n    }\n    /**\n     * Create a `Selection` from a JSON `object`.\n     *\n     * @param {Object} object\n     * @return {Selection}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(object) {\n      var anchor = object.anchor,\n          focus = object.focus,\n          _object$isFocused = object.isFocused,\n          isFocused = _object$isFocused === undefined ? false : _object$isFocused,\n          _object$marks = object.marks,\n          marks = _object$marks === undefined ? null : _object$marks;\n      var selection = new Selection({\n        anchor: Point.fromJSON(anchor || {}),\n        focus: Point.fromJSON(focus || {}),\n        isFocused: isFocused,\n        marks: marks == null ? null : new Set(marks.map(Mark.fromJSON))\n      });\n      return selection;\n    }\n  }]);\n  return Selection;\n}(Record(DEFAULTS$9));\n/**\n * Export.\n *\n * @type {Selection}\n */\n\n\nvar DEFAULTS$10 = {\n  data: undefined,\n  decorations: undefined,\n  document: undefined,\n  selection: undefined\n  /**\n   * Value.\n   *\n   * @type {Value}\n   */\n\n};\n\nvar Value = function (_Record) {\n  inherits(Value, _Record);\n\n  function Value() {\n    classCallCheck(this, Value);\n    return possibleConstructorReturn(this, (Value.__proto__ || Object.getPrototypeOf(Value)).apply(this, arguments));\n  }\n\n  createClass(Value, [{\n    key: 'addMark',\n\n    /**\n     * Add mark to text at `offset` and `length` in node by `path`.\n     *\n     * @param {List|String} path\n     * @param {Number} offset\n     * @param {Number} length\n     * @param {Mark} mark\n     * @return {Value}\n     */\n    value: function addMark(path, offset, length, mark) {\n      var value = this;\n      var _value = value,\n          document = _value.document;\n      document = document.addMark(path, offset, length, mark);\n      value = this.set('document', document);\n      return value;\n    }\n    /**\n     * Insert a `node`.\n     *\n     * @param {List|String} path\n     * @param {Node} node\n     * @return {Value}\n     */\n\n  }, {\n    key: 'insertNode',\n    value: function insertNode(path, node) {\n      var value = this;\n      var _value2 = value,\n          document = _value2.document;\n      document = document.insertNode(path, node);\n      value = value.set('document', document);\n      value = value.mapRanges(function (range) {\n        return range.updatePoints(function (point) {\n          return point.setPath(null);\n        });\n      });\n      return value;\n    }\n    /**\n     * Insert `text` at `offset` in node by `path`.\n     *\n     * @param {List|String} path\n     * @param {Number} offset\n     * @param {String} text\n     * @param {Set} marks\n     * @return {Value}\n     */\n\n  }, {\n    key: 'insertText',\n    value: function insertText(path, offset, text, marks) {\n      var value = this;\n      var _value3 = value,\n          document = _value3.document;\n      var node = document.assertNode(path);\n      document = document.insertText(path, offset, text, marks);\n      value = value.set('document', document);\n      value = value.mapRanges(function (range) {\n        return range.updatePoints(function (point) {\n          return point.key === node.key && point.offset >= offset ? point.setOffset(point.offset + text.length) : point;\n        });\n      });\n      return value;\n    }\n    /**\n     * Merge a node backwards its previous sibling.\n     *\n     * @param {List|Key} path\n     * @return {Value}\n     */\n\n  }, {\n    key: 'mergeNode',\n    value: function mergeNode(path) {\n      var value = this;\n      var _value4 = value,\n          document = _value4.document;\n      var newDocument = document.mergeNode(path);\n      path = document.resolvePath(path);\n      var withPath = PathUtils.decrement(path);\n      var one = document.getNode(withPath);\n      var two = document.getNode(path);\n      value = value.set('document', newDocument);\n      value = value.mapRanges(function (range) {\n        if (two.object === 'text') {\n          var max = one.text.length;\n\n          if (range.anchor.key === two.key) {\n            range = range.moveAnchorTo(one.key, max + range.anchor.offset);\n          }\n\n          if (range.focus.key === two.key) {\n            range = range.moveFocusTo(one.key, max + range.focus.offset);\n          }\n        }\n\n        range = range.updatePoints(function (point) {\n          return point.setPath(null);\n        });\n        return range;\n      });\n      return value;\n    }\n    /**\n     * Move a node by `path` to `newPath`.\n     *\n     * A `newIndex` can be provided when move nodes by `key`, to account for not\n     * being able to have a key for a location in the tree that doesn't exist yet.\n     *\n     * @param {List|Key} path\n     * @param {List|Key} newPath\n     * @param {Number} newIndex\n     * @return {Value}\n     */\n\n  }, {\n    key: 'moveNode',\n    value: function moveNode(path, newPath) {\n      var newIndex = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var value = this;\n      var _value5 = value,\n          document = _value5.document;\n      document = document.moveNode(path, newPath, newIndex);\n      value = value.set('document', document);\n      value = value.mapRanges(function (range) {\n        return range.updatePoints(function (point) {\n          return point.setPath(null);\n        });\n      });\n      return value;\n    }\n    /**\n     * Remove mark from text at `offset` and `length` in node.\n     *\n     * @param {List|String} path\n     * @param {Number} offset\n     * @param {Number} length\n     * @param {Mark} mark\n     * @return {Value}\n     */\n\n  }, {\n    key: 'removeMark',\n    value: function removeMark(path, offset, length, mark) {\n      var value = this;\n      var _value6 = value,\n          document = _value6.document;\n      document = document.removeMark(path, offset, length, mark);\n      value = this.set('document', document);\n      return value;\n    }\n    /**\n     * Remove a node by `path`.\n     *\n     * @param {List|String} path\n     * @return {Value}\n     */\n\n  }, {\n    key: 'removeNode',\n    value: function removeNode(path) {\n      var value = this;\n      var _value7 = value,\n          document = _value7.document;\n      var node = document.assertNode(path);\n      var first = node.object === 'text' ? node : node.getFirstText() || node;\n      var last = node.object === 'text' ? node : node.getLastText() || node;\n      var prev = document.getPreviousText(first.key);\n      var next = document.getNextText(last.key);\n      document = document.removeNode(path);\n      value = value.set('document', document);\n      value = value.mapRanges(function (range) {\n        var _range = range,\n            start = _range.start,\n            end = _range.end;\n\n        if (node.hasNode(start.key)) {\n          range = prev ? range.moveStartTo(prev.key, prev.text.length) : next ? range.moveStartTo(next.key, 0) : range.unset();\n        }\n\n        if (node.hasNode(end.key)) {\n          range = prev ? range.moveEndTo(prev.key, prev.text.length) : next ? range.moveEndTo(next.key, 0) : range.unset();\n        }\n\n        range = range.updatePoints(function (point) {\n          return point.setPath(null);\n        });\n        return range;\n      });\n      return value;\n    }\n    /**\n     * Remove `text` at `offset` in node by `path`.\n     *\n     * @param {List|Key} path\n     * @param {Number} offset\n     * @param {String} text\n     * @return {Value}\n     */\n\n  }, {\n    key: 'removeText',\n    value: function removeText(path, offset, text) {\n      var value = this;\n      var _value8 = value,\n          document = _value8.document;\n      var node = document.assertNode(path);\n      document = document.removeText(path, offset, text);\n      value = value.set('document', document);\n      var length = text.length;\n      var start = offset;\n      var end = offset + length;\n      value = value.mapRanges(function (range) {\n        return range.updatePoints(function (point) {\n          if (point.key !== node.key) {\n            return point;\n          }\n\n          if (point.offset >= end) {\n            return point.setOffset(point.offset - length);\n          }\n\n          if (point.offset > start) {\n            return point.setOffset(start);\n          }\n\n          return point;\n        });\n      });\n      return value;\n    }\n    /**\n     * Set `properties` on a node.\n     *\n     * @param {List|String} path\n     * @param {Object} properties\n     * @return {Value}\n     */\n\n  }, {\n    key: 'setNode',\n    value: function setNode(path, properties) {\n      var value = this;\n      var _value9 = value,\n          document = _value9.document;\n      document = document.setNode(path, properties);\n      value = value.set('document', document);\n      return value;\n    }\n    /**\n     * Set `properties` on `mark` on text at `offset` and `length` in node.\n     *\n     * @param {List|String} path\n     * @param {Number} offset\n     * @param {Number} length\n     * @param {Mark} mark\n     * @param {Object} properties\n     * @return {Value}\n     */\n\n  }, {\n    key: 'setMark',\n    value: function setMark(path, offset, length, mark, properties) {\n      var value = this;\n      var _value10 = value,\n          document = _value10.document;\n      document = document.setMark(path, offset, length, mark, properties);\n      value = value.set('document', document);\n      return value;\n    }\n    /**\n     * Set `properties` on the value.\n     *\n     * @param {Object} properties\n     * @return {Value}\n     */\n\n  }, {\n    key: 'setProperties',\n    value: function setProperties(properties) {\n      var value = this;\n      var _value11 = value,\n          document = _value11.document;\n      var data = properties.data,\n          decorations = properties.decorations;\n      var props = {};\n\n      if (data) {\n        props.data = data;\n      }\n\n      if (decorations) {\n        props.decorations = decorations.map(function (d) {\n          return d.isSet ? d : document.resolveDecoration(d);\n        });\n      }\n\n      value = value.merge(props);\n      return value;\n    }\n    /**\n     * Set `properties` on the selection.\n     *\n     * @param {Value} value\n     * @param {Operation} operation\n     * @return {Value}\n     */\n\n  }, {\n    key: 'setSelection',\n    value: function setSelection(properties) {\n      var value = this;\n      var _value12 = value,\n          document = _value12.document,\n          selection = _value12.selection;\n      var next = selection.setProperties(properties);\n      selection = document.resolveSelection(next);\n      value = value.set('selection', selection);\n      return value;\n    }\n    /**\n     * Split a node by `path` at `position` with optional `properties` to apply\n     * to the newly split node.\n     *\n     * @param {List|String} path\n     * @param {Number} position\n     * @param {Object} properties\n     * @return {Value}\n     */\n\n  }, {\n    key: 'splitNode',\n    value: function splitNode(path, position, properties) {\n      var value = this;\n      var _value13 = value,\n          document = _value13.document;\n      var newDocument = document.splitNode(path, position, properties);\n      var node = document.assertNode(path);\n      value = value.set('document', newDocument);\n      value = value.mapRanges(function (range) {\n        var next = newDocument.getNextText(node.key);\n        var _range2 = range,\n            start = _range2.start,\n            end = _range2.end; // If the start was after the split, move it to the next node.\n\n        if (node.key === start.key && position <= start.offset) {\n          range = range.moveStartTo(next.key, start.offset - position);\n        } // If the end was after the split, move it to the next node.\n\n\n        if (node.key === end.key && position <= end.offset) {\n          range = range.moveEndTo(next.key, end.offset - position);\n        }\n\n        range = range.updatePoints(function (point) {\n          return point.setPath(null);\n        });\n        return range;\n      });\n      return value;\n    }\n    /**\n     * Map all range objects to apply adjustments with an `iterator`.\n     *\n     * @param {Function} iterator\n     * @return {Value}\n     */\n\n  }, {\n    key: 'mapRanges',\n    value: function mapRanges(iterator) {\n      var value = this;\n      var _value14 = value,\n          document = _value14.document,\n          selection = _value14.selection,\n          decorations = _value14.decorations;\n      var sel = selection.isSet ? iterator(selection) : selection;\n      if (!sel) sel = selection.unset();\n      if (sel !== selection) sel = document.createSelection(sel);\n      value = value.set('selection', sel);\n      var decs = decorations.map(function (decoration) {\n        var n = decoration.isSet ? iterator(decoration) : decoration;\n        if (n && n !== decoration) n = document.createDecoration(n);\n        return n;\n      });\n      decs = decs.filter(function (decoration) {\n        return !!decoration;\n      });\n      value = value.set('decorations', decs);\n      return value;\n    }\n    /**\n     * Return a JSON representation of the value.\n     *\n     * @param {Object} options\n     * @return {Object}\n     */\n\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var object = {\n        object: this.object,\n        document: this.document.toJSON(options)\n      };\n\n      if (options.preserveData) {\n        object.data = this.data.toJSON(options);\n      }\n\n      if (options.preserveDecorations) {\n        object.decorations = this.decorations.toArray().map(function (d) {\n          return d.toJSON(options);\n        });\n      }\n\n      if (options.preserveSelection) {\n        object.selection = this.selection.toJSON(options);\n      }\n\n      return object;\n    }\n    /**\n     * Deprecated.\n     */\n\n  }, {\n    key: 'change',\n    value: function change() {\n      invariant(false, 'As of Slate 0.42.0, value object are no longer schema-aware, and the `value.change()` method is no longer available. Use the `editor.change()` method on the new `Editor` controller instead.');\n    }\n  }, {\n    key: 'startBlock',\n\n    /**\n     * Get the current start text node's closest block parent.\n     *\n     * @return {Block}\n     */\n    get: function get$$1() {\n      return this.selection.start.key && this.document.getClosestBlock(this.selection.start.key);\n    }\n    /**\n     * Get the current end text node's closest block parent.\n     *\n     * @return {Block}\n     */\n\n  }, {\n    key: 'endBlock',\n    get: function get$$1() {\n      return this.selection.end.key && this.document.getClosestBlock(this.selection.end.key);\n    }\n    /**\n     * Get the current anchor text node's closest block parent.\n     *\n     * @return {Block}\n     */\n\n  }, {\n    key: 'anchorBlock',\n    get: function get$$1() {\n      return this.selection.anchor.key && this.document.getClosestBlock(this.selection.anchor.key);\n    }\n    /**\n     * Get the current focus text node's closest block parent.\n     *\n     * @return {Block}\n     */\n\n  }, {\n    key: 'focusBlock',\n    get: function get$$1() {\n      return this.selection.focus.key && this.document.getClosestBlock(this.selection.focus.key);\n    }\n    /**\n     * Get the current start text node's closest inline parent.\n     *\n     * @return {Inline}\n     */\n\n  }, {\n    key: 'startInline',\n    get: function get$$1() {\n      return this.selection.start.key && this.document.getClosestInline(this.selection.start.key);\n    }\n    /**\n     * Get the current end text node's closest inline parent.\n     *\n     * @return {Inline}\n     */\n\n  }, {\n    key: 'endInline',\n    get: function get$$1() {\n      return this.selection.end.key && this.document.getClosestInline(this.selection.end.key);\n    }\n    /**\n     * Get the current anchor text node's closest inline parent.\n     *\n     * @return {Inline}\n     */\n\n  }, {\n    key: 'anchorInline',\n    get: function get$$1() {\n      return this.selection.anchor.key && this.document.getClosestInline(this.selection.anchor.key);\n    }\n    /**\n     * Get the current focus text node's closest inline parent.\n     *\n     * @return {Inline}\n     */\n\n  }, {\n    key: 'focusInline',\n    get: function get$$1() {\n      return this.selection.focus.key && this.document.getClosestInline(this.selection.focus.key);\n    }\n    /**\n     * Get the current start text node.\n     *\n     * @return {Text}\n     */\n\n  }, {\n    key: 'startText',\n    get: function get$$1() {\n      return this.selection.start.key && this.document.getDescendant(this.selection.start.key);\n    }\n    /**\n     * Get the current end node.\n     *\n     * @return {Text}\n     */\n\n  }, {\n    key: 'endText',\n    get: function get$$1() {\n      return this.selection.end.key && this.document.getDescendant(this.selection.end.key);\n    }\n    /**\n     * Get the current anchor node.\n     *\n     * @return {Text}\n     */\n\n  }, {\n    key: 'anchorText',\n    get: function get$$1() {\n      return this.selection.anchor.key && this.document.getDescendant(this.selection.anchor.key);\n    }\n    /**\n     * Get the current focus node.\n     *\n     * @return {Text}\n     */\n\n  }, {\n    key: 'focusText',\n    get: function get$$1() {\n      return this.selection.focus.key && this.document.getDescendant(this.selection.focus.key);\n    }\n    /**\n     * Get the next block node.\n     *\n     * @return {Block}\n     */\n\n  }, {\n    key: 'nextBlock',\n    get: function get$$1() {\n      return this.selection.end.key && this.document.getNextBlock(this.selection.end.key);\n    }\n    /**\n     * Get the previous block node.\n     *\n     * @return {Block}\n     */\n\n  }, {\n    key: 'previousBlock',\n    get: function get$$1() {\n      return this.selection.start.key && this.document.getPreviousBlock(this.selection.start.key);\n    }\n    /**\n     * Get the next inline node.\n     *\n     * @return {Inline}\n     */\n\n  }, {\n    key: 'nextInline',\n    get: function get$$1() {\n      return this.selection.end.key && this.document.getNextInline(this.selection.end.key);\n    }\n    /**\n     * Get the previous inline node.\n     *\n     * @return {Inline}\n     */\n\n  }, {\n    key: 'previousInline',\n    get: function get$$1() {\n      return this.selection.start.key && this.document.getPreviousInline(this.selection.start.key);\n    }\n    /**\n     * Get the next text node.\n     *\n     * @return {Text}\n     */\n\n  }, {\n    key: 'nextText',\n    get: function get$$1() {\n      return this.selection.end.key && this.document.getNextText(this.selection.end.key);\n    }\n    /**\n     * Get the previous text node.\n     *\n     * @return {Text}\n     */\n\n  }, {\n    key: 'previousText',\n    get: function get$$1() {\n      return this.selection.start.key && this.document.getPreviousText(this.selection.start.key);\n    }\n    /**\n     * Get the marks of the current selection.\n     *\n     * @return {Set<Mark>}\n     */\n\n  }, {\n    key: 'marks',\n    get: function get$$1() {\n      return this.selection.isUnset ? new Set() : this.selection.marks || this.document.getMarksAtRange(this.selection);\n    }\n    /**\n     * Get the active marks of the current selection.\n     *\n     * @return {Set<Mark>}\n     */\n\n  }, {\n    key: 'activeMarks',\n    get: function get$$1() {\n      return this.selection.isUnset ? new Set() : this.selection.marks || this.document.getActiveMarksAtRange(this.selection);\n    }\n    /**\n     * Get the block nodes in the current selection.\n     *\n     * @return {List<Block>}\n     */\n\n  }, {\n    key: 'blocks',\n    get: function get$$1() {\n      return this.selection.isUnset ? new List() : this.document.getLeafBlocksAtRange(this.selection);\n    }\n    /**\n     * Get the fragment of the current selection.\n     *\n     * @return {Document}\n     */\n\n  }, {\n    key: 'fragment',\n    get: function get$$1() {\n      return this.selection.isUnset ? Document.create() : this.document.getFragmentAtRange(this.selection);\n    }\n    /**\n     * Get the bottom-most inline nodes in the current selection.\n     *\n     * @return {List<Inline>}\n     */\n\n  }, {\n    key: 'inlines',\n    get: function get$$1() {\n      return this.selection.isUnset ? new List() : this.document.getLeafInlinesAtRange(this.selection);\n    }\n    /**\n     * Get the text nodes in the current selection.\n     *\n     * @return {List<Text>}\n     */\n\n  }, {\n    key: 'texts',\n    get: function get$$1() {\n      return this.selection.isUnset ? new List() : this.document.getTextsAtRange(this.selection);\n    }\n  }, {\n    key: 'history',\n    get: function get$$1() {\n      invariant(false, 'As of Slate 0.42.0, the `value.history` model no longer exists, and the history is stored in `value.data` instead using plugins.');\n    }\n  }], [{\n    key: 'create',\n\n    /**\n     * Create a new `Value` with `attrs`.\n     *\n     * @param {Object|Value} attrs\n     * @param {Object} options\n     * @return {Value}\n     */\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      if (Value.isValue(attrs)) {\n        return attrs;\n      }\n\n      if (isPlainObject(attrs)) {\n        return Value.fromJSON(attrs, options);\n      }\n\n      throw new Error('`Value.create` only accepts objects or values, but you passed it: ' + attrs);\n    }\n    /**\n     * Create a dictionary of settable value properties from `attrs`.\n     *\n     * @param {Object|Value} attrs\n     * @return {Object}\n     */\n\n  }, {\n    key: 'createProperties',\n    value: function createProperties() {\n      var a = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Value.isValue(a)) {\n        return {\n          data: a.data,\n          decorations: a.decorations\n        };\n      }\n\n      if (isPlainObject(a)) {\n        var p = {};\n        if ('data' in a) p.data = Data.create(a.data);\n        if ('decorations' in a) p.decorations = Decoration.createList(a.decorations);\n        return p;\n      }\n\n      throw new Error('`Value.createProperties` only accepts objects or values, but you passed it: ' + a);\n    }\n    /**\n     * Create a `Value` from a JSON `object`.\n     *\n     * @param {Object} object\n     * @param {Object} options\n     *   @property {Boolean} normalize\n     *   @property {Array} plugins\n     * @return {Value}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(object) {\n      var _object$data = object.data,\n          data = _object$data === undefined ? {} : _object$data,\n          _object$decorations = object.decorations,\n          decorations = _object$decorations === undefined ? [] : _object$decorations,\n          _object$document = object.document,\n          document = _object$document === undefined ? {} : _object$document,\n          _object$selection = object.selection,\n          selection = _object$selection === undefined ? {} : _object$selection;\n      data = Data.fromJSON(data);\n      document = Document.fromJSON(document);\n      selection = document.createSelection(selection);\n      decorations = List(decorations.map(function (d) {\n        return Decoration.fromJSON(d);\n      }));\n\n      if (selection.isUnset) {\n        var text = document.getFirstText();\n        if (text) selection = selection.moveToStartOfNode(text);\n        selection = document.createSelection(selection);\n      }\n\n      var value = new Value({\n        data: data,\n        decorations: decorations,\n        document: document,\n        selection: selection\n      });\n      return value;\n    }\n  }]);\n  return Value;\n}(Record(DEFAULTS$10));\n/**\n * Export.\n */\n\n\nvar debug = Debug('slate:operation:apply');\n/**\n * Apply an `op` to a `value`.\n *\n * @param {Value} value\n * @param {Object|Operation} op\n * @return {Value} value\n */\n\nfunction applyOperation(value, op) {\n  op = Operation.create(op);\n  var _op = op,\n      type = _op.type;\n  debug(type, op);\n\n  switch (type) {\n    case 'add_mark':\n      {\n        var _op2 = op,\n            path = _op2.path,\n            offset = _op2.offset,\n            length = _op2.length,\n            mark = _op2.mark;\n        var next = value.addMark(path, offset, length, mark);\n        return next;\n      }\n\n    case 'insert_node':\n      {\n        var _op3 = op,\n            _path = _op3.path,\n            node = _op3.node;\n\n        var _next = value.insertNode(_path, node);\n\n        return _next;\n      }\n\n    case 'insert_text':\n      {\n        var _op4 = op,\n            _path2 = _op4.path,\n            _offset = _op4.offset,\n            text = _op4.text,\n            marks = _op4.marks;\n\n        var _next2 = value.insertText(_path2, _offset, text, marks);\n\n        return _next2;\n      }\n\n    case 'merge_node':\n      {\n        var _op5 = op,\n            _path3 = _op5.path;\n\n        var _next3 = value.mergeNode(_path3);\n\n        return _next3;\n      }\n\n    case 'move_node':\n      {\n        var _op6 = op,\n            _path4 = _op6.path,\n            newPath = _op6.newPath;\n\n        if (PathUtils.isEqual(_path4, newPath)) {\n          return value;\n        }\n\n        var _next4 = value.moveNode(_path4, newPath);\n\n        return _next4;\n      }\n\n    case 'remove_mark':\n      {\n        var _op7 = op,\n            _path5 = _op7.path,\n            _offset2 = _op7.offset,\n            _length = _op7.length,\n            _mark = _op7.mark;\n\n        var _next5 = value.removeMark(_path5, _offset2, _length, _mark);\n\n        return _next5;\n      }\n\n    case 'remove_node':\n      {\n        var _op8 = op,\n            _path6 = _op8.path;\n\n        var _next6 = value.removeNode(_path6);\n\n        return _next6;\n      }\n\n    case 'remove_text':\n      {\n        var _op9 = op,\n            _path7 = _op9.path,\n            _offset3 = _op9.offset,\n            _text = _op9.text;\n\n        var _next7 = value.removeText(_path7, _offset3, _text);\n\n        return _next7;\n      }\n\n    case 'set_mark':\n      {\n        var _op10 = op,\n            _path8 = _op10.path,\n            _offset4 = _op10.offset,\n            _length2 = _op10.length,\n            properties = _op10.properties,\n            newProperties = _op10.newProperties;\n\n        var _next8 = value.setMark(_path8, _offset4, _length2, properties, newProperties);\n\n        return _next8;\n      }\n\n    case 'set_node':\n      {\n        var _op11 = op,\n            _path9 = _op11.path,\n            _newProperties = _op11.newProperties;\n\n        var _next9 = value.setNode(_path9, _newProperties);\n\n        return _next9;\n      }\n\n    case 'set_selection':\n      {\n        var _op12 = op,\n            _newProperties2 = _op12.newProperties;\n\n        var _next10 = value.setSelection(_newProperties2);\n\n        return _next10;\n      }\n\n    case 'set_value':\n      {\n        var _op13 = op,\n            _newProperties3 = _op13.newProperties;\n\n        var _next11 = value.setProperties(_newProperties3);\n\n        return _next11;\n      }\n\n    case 'split_node':\n      {\n        var _op14 = op,\n            _path10 = _op14.path,\n            position = _op14.position,\n            _properties = _op14.properties;\n\n        var _next12 = value.splitNode(_path10, position, _properties);\n\n        return _next12;\n      }\n\n    default:\n      {\n        throw new Error('Unknown operation type: \"' + type + '\".');\n      }\n  }\n}\n/**\n * Export.\n *\n * @type {Function}\n */\n\n\nvar debug$1 = Debug('slate:operation:invert');\n/**\n * Invert an `op`.\n *\n * @param {Object} op\n * @return {Object}\n */\n\nfunction invertOperation(op) {\n  op = Operation.create(op);\n  var _op = op,\n      type = _op.type;\n  debug$1(type, op);\n\n  switch (type) {\n    case 'insert_node':\n      {\n        var inverse = op.set('type', 'remove_node');\n        return inverse;\n      }\n\n    case 'remove_node':\n      {\n        var _inverse = op.set('type', 'insert_node');\n\n        return _inverse;\n      }\n\n    case 'move_node':\n      {\n        var _op2 = op,\n            newPath = _op2.newPath,\n            path = _op2.path;\n\n        if (PathUtils.isEqual(newPath, path)) {\n          return op;\n        } // Get the true path that the moved node ended up at\n\n\n        var inversePath = PathUtils.transform(path, op).first(); // Get the true path we are trying to move back to\n        // We transform the right-sibling of the path\n        // This will end up at the operation.path most of the time\n        // But if the newPath is a left-sibling or left-ancestor-sibling, this will account for it\n\n        var transformedSibling = PathUtils.transform(PathUtils.increment(path), op).first();\n\n        var _inverse2 = op.set('path', inversePath).set('newPath', transformedSibling);\n\n        return _inverse2;\n      }\n\n    case 'merge_node':\n      {\n        var _op3 = op,\n            _path = _op3.path;\n\n        var _inversePath = PathUtils.decrement(_path);\n\n        var _inverse3 = op.set('type', 'split_node').set('path', _inversePath);\n\n        return _inverse3;\n      }\n\n    case 'split_node':\n      {\n        var _op4 = op,\n            _path2 = _op4.path;\n\n        var _inversePath2 = PathUtils.increment(_path2);\n\n        var _inverse4 = op.set('type', 'merge_node').set('path', _inversePath2);\n\n        return _inverse4;\n      }\n\n    case 'set_node':\n    case 'set_value':\n    case 'set_selection':\n    case 'set_mark':\n      {\n        var _op5 = op,\n            properties = _op5.properties,\n            newProperties = _op5.newProperties;\n\n        var _inverse5 = op.set('properties', newProperties).set('newProperties', properties);\n\n        return _inverse5;\n      }\n\n    case 'insert_text':\n      {\n        var _inverse6 = op.set('type', 'remove_text');\n\n        return _inverse6;\n      }\n\n    case 'remove_text':\n      {\n        var _inverse7 = op.set('type', 'insert_text');\n\n        return _inverse7;\n      }\n\n    case 'add_mark':\n      {\n        var _inverse8 = op.set('type', 'remove_mark');\n\n        return _inverse8;\n      }\n\n    case 'remove_mark':\n      {\n        var _inverse9 = op.set('type', 'add_mark');\n\n        return _inverse9;\n      }\n\n    default:\n      {\n        throw new Error('Unknown operation type: \"' + type + '\".');\n      }\n  }\n}\n/**\n * Export.\n *\n * @type {Function}\n */\n\n\nvar OPERATION_ATTRIBUTES = {\n  add_mark: ['path', 'offset', 'length', 'mark', 'data'],\n  insert_node: ['path', 'node', 'data'],\n  insert_text: ['path', 'offset', 'text', 'marks', 'data'],\n  merge_node: ['path', 'position', 'properties', 'target', 'data'],\n  move_node: ['path', 'newPath', 'data'],\n  remove_mark: ['path', 'offset', 'length', 'mark', 'data'],\n  remove_node: ['path', 'node', 'data'],\n  remove_text: ['path', 'offset', 'text', 'marks', 'data'],\n  set_mark: ['path', 'offset', 'length', 'properties', 'newProperties', 'data'],\n  set_node: ['path', 'properties', 'newProperties', 'data'],\n  set_selection: ['properties', 'newProperties', 'data'],\n  set_value: ['properties', 'newProperties', 'data'],\n  split_node: ['path', 'position', 'properties', 'target', 'data']\n  /**\n   * Default properties.\n   *\n   * @type {Object}\n   */\n\n};\nvar DEFAULTS$11 = {\n  length: undefined,\n  mark: undefined,\n  marks: undefined,\n  newPath: undefined,\n  node: undefined,\n  offset: undefined,\n  path: undefined,\n  position: undefined,\n  properties: undefined,\n  newProperties: undefined,\n  target: undefined,\n  text: undefined,\n  type: undefined,\n  data: undefined\n  /**\n   * Operation.\n   *\n   * @type {Operation}\n   */\n\n};\n\nvar Operation = function (_Record) {\n  inherits(Operation, _Record);\n\n  function Operation() {\n    classCallCheck(this, Operation);\n    return possibleConstructorReturn(this, (Operation.__proto__ || Object.getPrototypeOf(Operation)).apply(this, arguments));\n  }\n\n  createClass(Operation, [{\n    key: 'apply',\n\n    /**\n     * Apply the operation to a `value`.\n     *\n     * @param {Value} value\n     * @return {Value}\n     */\n    value: function apply(value) {\n      var next = applyOperation(value, this);\n      return next;\n    }\n    /**\n     * Invert the operation.\n     *\n     * @return {Operation}\n     */\n\n  }, {\n    key: 'invert',\n    value: function invert() {\n      var inverted = invertOperation(this);\n      return inverted;\n    }\n    /**\n     * Return a JSON representation of the operation.\n     *\n     * @param {Object} options\n     * @return {Object}\n     */\n\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      var object = this.object,\n          type = this.type;\n      var json = {\n        object: object,\n        type: type\n      };\n      var ATTRIBUTES = OPERATION_ATTRIBUTES[type];\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = ATTRIBUTES[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var key = _step.value;\n          var value = this[key];\n\n          if (key === 'mark' || key === 'marks' || key === 'node' || key === 'path' || key === 'newPath') {\n            value = value.toJSON();\n          }\n\n          if (key === 'properties' && type === 'merge_node') {\n            var v = {};\n            if ('data' in value) v.data = value.data.toJS();\n            if ('type' in value) v.type = value.type;\n            value = v;\n          }\n\n          if ((key === 'properties' || key === 'newProperties') && type === 'set_mark') {\n            var _v = {};\n            if ('data' in value) _v.data = value.data.toJS();\n            if ('type' in value) _v.type = value.type;\n            value = _v;\n          }\n\n          if ((key === 'properties' || key === 'newProperties') && type === 'set_node') {\n            var _v2 = {};\n            if ('data' in value) _v2.data = value.data.toJS();\n            if ('type' in value) _v2.type = value.type;\n            value = _v2;\n          }\n\n          if ((key === 'properties' || key === 'newProperties') && type === 'set_selection') {\n            var _v3 = {};\n            if ('anchor' in value) _v3.anchor = value.anchor.toJSON();\n            if ('focus' in value) _v3.focus = value.focus.toJSON();\n            if ('isFocused' in value) _v3.isFocused = value.isFocused;\n            if ('marks' in value) _v3.marks = value.marks && value.marks.toJSON();\n            value = _v3;\n          }\n\n          if ((key === 'properties' || key === 'newProperties') && type === 'set_value') {\n            var _v4 = {};\n            if ('data' in value) _v4.data = value.data.toJS();\n            if ('decorations' in value) _v4.decorations = value.decorations.toJS();\n            value = _v4;\n          }\n\n          if (key === 'properties' && type === 'split_node') {\n            var _v5 = {};\n            if ('data' in value) _v5.data = value.data.toJS();\n            if ('type' in value) _v5.type = value.type;\n            value = _v5;\n          }\n\n          if (key === 'data') {\n            value = value.toJSON();\n          }\n\n          json[key] = value;\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return json;\n    }\n  }], [{\n    key: 'create',\n\n    /**\n     * Create a new `Operation` with `attrs`.\n     *\n     * @param {Object|Array|List|String|Operation} attrs\n     * @return {Operation}\n     */\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Operation.isOperation(attrs)) {\n        return attrs;\n      }\n\n      if (isPlainObject(attrs)) {\n        return Operation.fromJSON(attrs);\n      }\n\n      throw new Error('`Operation.create` only accepts objects or operations, but you passed it: ' + attrs);\n    }\n    /**\n     * Create a list of `Operations` from `elements`.\n     *\n     * @param {Array<Operation|Object>|List<Operation|Object>} elements\n     * @return {List<Operation>}\n     */\n\n  }, {\n    key: 'createList',\n    value: function createList() {\n      var elements = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      if (List.isList(elements) || Array.isArray(elements)) {\n        var list = new List(elements.map(Operation.create));\n        return list;\n      }\n\n      throw new Error('`Operation.createList` only accepts arrays or lists, but you passed it: ' + elements);\n    }\n    /**\n     * Create a `Operation` from a JSON `object`.\n     *\n     * @param {Object|Operation} object\n     * @return {Operation}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(object) {\n      if (Operation.isOperation(object)) {\n        return object;\n      }\n\n      var type = object.type;\n      var ATTRIBUTES = OPERATION_ATTRIBUTES[type];\n      var attrs = {\n        type: type\n      };\n\n      if (!ATTRIBUTES) {\n        throw new Error('`Operation.fromJSON` was passed an unrecognized operation type: \"' + type + '\"');\n      }\n\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = ATTRIBUTES[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var key = _step2.value;\n          var v = object[key]; // Default `data` to an empty object.\n\n          if (key === 'data' && v === undefined) {\n            v = {};\n          }\n\n          if (v === undefined) {\n            throw new Error('`Operation.fromJSON` was passed a \"' + type + '\" operation without the required \"' + key + '\" attribute.');\n          }\n\n          if (key === 'path' || key === 'newPath') {\n            v = PathUtils.create(v);\n          }\n\n          if (key === 'mark') {\n            v = Mark.create(v);\n          }\n\n          if (key === 'marks' && v != null) {\n            v = Mark.createSet(v);\n          }\n\n          if (key === 'node') {\n            v = Node.create(v);\n          }\n\n          if (key === 'properties' && type === 'merge_node') {\n            v = Node.createProperties(v);\n          }\n\n          if ((key === 'properties' || key === 'newProperties') && type === 'set_mark') {\n            v = Mark.createProperties(v);\n          }\n\n          if ((key === 'properties' || key === 'newProperties') && type === 'set_node') {\n            v = Node.createProperties(v);\n          }\n\n          if ((key === 'properties' || key === 'newProperties') && type === 'set_selection') {\n            v = Selection.createProperties(v);\n          }\n\n          if ((key === 'properties' || key === 'newProperties') && type === 'set_value') {\n            v = Value.createProperties(v);\n          }\n\n          if (key === 'properties' && type === 'split_node') {\n            v = Node.createProperties(v);\n          }\n\n          if (key === 'data') {\n            v = Map(v);\n          }\n\n          attrs[key] = v;\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      var node = new Operation(attrs);\n      return node;\n    }\n    /**\n     * Check if `any` is a list of operations.\n     *\n     * @param {Any} any\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isOperationList',\n    value: function isOperationList(any) {\n      return List.isList(any) && any.every(function (item) {\n        return Operation.isOperation(item);\n      });\n    }\n  }]);\n  return Operation;\n}(Record(DEFAULTS$11));\n/**\n * Export.\n *\n * @type {Operation}\n */\n\n\nvar DEFAULTS$12 = {\n  operations: undefined,\n  value: undefined\n  /**\n   * Change.\n   *\n   * @type {Change}\n   */\n\n};\n\nvar Change = function (_Record) {\n  inherits(Change, _Record);\n\n  function Change() {\n    classCallCheck(this, Change);\n    return possibleConstructorReturn(this, (Change.__proto__ || Object.getPrototypeOf(Change)).apply(this, arguments));\n  }\n\n  createClass(Change, [{\n    key: 'toJSON',\n\n    /**\n     * Return a JSON representation of the change.\n     *\n     * @param {Object} options\n     * @return {Object}\n     */\n    value: function toJSON() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var object = {\n        object: this.object,\n        value: this.value.toJSON(options),\n        operations: this.operations.toArray().map(function (o) {\n          return o.toJSON(options);\n        })\n      };\n      return object;\n    }\n  }], [{\n    key: 'create',\n\n    /**\n     * Create a new `Change` with `attrs`.\n     *\n     * @param {Object|Change} attrs\n     * @return {Change}\n     */\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Change.isChange(attrs)) {\n        return attrs;\n      }\n\n      if (isPlainObject(attrs)) {\n        return Change.fromJSON(attrs);\n      }\n\n      throw new Error('`Change.create` only accepts objects or changes, but you passed it: ' + attrs);\n    }\n    /**\n     * Create a `Change` from a JSON `object`.\n     *\n     * @param {Object} object\n     * @return {Change}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(object) {\n      var value = object.value,\n          _object$operations = object.operations,\n          operations = _object$operations === undefined ? [] : _object$operations;\n      var change = new Change({\n        value: Value.create(value),\n        operations: Operation.createList(operations)\n      });\n      return change;\n    }\n  }]);\n  return Change;\n}(Record(DEFAULTS$12));\n/**\n * Export.\n *\n * @type {Change}\n */\n\n/**\n * A plugin that adds a set of commands to the editor.\n *\n * @param {Object} commands\n * @return {Object}\n */\n\n\nfunction CommandsPlugin() {\n  var commands = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  /**\n   * On command, if it exists in our list of commands, call it.\n   *\n   * @param {Object} command\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n  function onCommand(command, editor, next) {\n    var type = command.type,\n        args = command.args;\n    var fn = commands[type];\n    if (!fn) return next();\n    editor.command.apply(editor, [fn].concat(toConsumableArray(args)));\n  }\n  /**\n   * On construct, register all the commands.\n   *\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onConstruct(editor, next) {\n    for (var command in commands) {\n      editor.registerCommand(command);\n    }\n\n    return next();\n  }\n  /**\n   * Return the plugin.\n   *\n   * @type {Object}\n   */\n\n\n  return {\n    onCommand: onCommand,\n    onConstruct: onConstruct\n  };\n}\n/**\n * Export.\n *\n * @type {Object}\n */\n\n\nvar SURROGATE_START = 0xd800;\nvar SURROGATE_END = 0xdfff;\n/**\n * A regex to match space characters.\n *\n * @type {RegExp}\n */\n\nvar SPACE = /\\s/;\n/**\n * A regex to match chameleon characters, that count as word characters as long\n * as they are inside of a word.\n *\n * @type {RegExp}\n */\n\nvar CHAMELEON = /['\\u2018\\u2019]/;\n/**\n * A regex that matches punctuation.\n *\n * @type {RegExp}\n */\n\nvar PUNCTUATION = /[\\u0021-\\u0023\\u0025-\\u002A\\u002C-\\u002F\\u003A\\u003B\\u003F\\u0040\\u005B-\\u005D\\u005F\\u007B\\u007D\\u00A1\\u00A7\\u00AB\\u00B6\\u00B7\\u00BB\\u00BF\\u037E\\u0387\\u055A-\\u055F\\u0589\\u058A\\u05BE\\u05C0\\u05C3\\u05C6\\u05F3\\u05F4\\u0609\\u060A\\u060C\\u060D\\u061B\\u061E\\u061F\\u066A-\\u066D\\u06D4\\u0700-\\u070D\\u07F7-\\u07F9\\u0830-\\u083E\\u085E\\u0964\\u0965\\u0970\\u0AF0\\u0DF4\\u0E4F\\u0E5A\\u0E5B\\u0F04-\\u0F12\\u0F14\\u0F3A-\\u0F3D\\u0F85\\u0FD0-\\u0FD4\\u0FD9\\u0FDA\\u104A-\\u104F\\u10FB\\u1360-\\u1368\\u1400\\u166D\\u166E\\u169B\\u169C\\u16EB-\\u16ED\\u1735\\u1736\\u17D4-\\u17D6\\u17D8-\\u17DA\\u1800-\\u180A\\u1944\\u1945\\u1A1E\\u1A1F\\u1AA0-\\u1AA6\\u1AA8-\\u1AAD\\u1B5A-\\u1B60\\u1BFC-\\u1BFF\\u1C3B-\\u1C3F\\u1C7E\\u1C7F\\u1CC0-\\u1CC7\\u1CD3\\u2010-\\u2027\\u2030-\\u2043\\u2045-\\u2051\\u2053-\\u205E\\u207D\\u207E\\u208D\\u208E\\u2329\\u232A\\u2768-\\u2775\\u27C5\\u27C6\\u27E6-\\u27EF\\u2983-\\u2998\\u29D8-\\u29DB\\u29FC\\u29FD\\u2CF9-\\u2CFC\\u2CFE\\u2CFF\\u2D70\\u2E00-\\u2E2E\\u2E30-\\u2E3B\\u3001-\\u3003\\u3008-\\u3011\\u3014-\\u301F\\u3030\\u303D\\u30A0\\u30FB\\uA4FE\\uA4FF\\uA60D-\\uA60F\\uA673\\uA67E\\uA6F2-\\uA6F7\\uA874-\\uA877\\uA8CE\\uA8CF\\uA8F8-\\uA8FA\\uA92E\\uA92F\\uA95F\\uA9C1-\\uA9CD\\uA9DE\\uA9DF\\uAA5C-\\uAA5F\\uAADE\\uAADF\\uAAF0\\uAAF1\\uABEB\\uFD3E\\uFD3F\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE61\\uFE63\\uFE68\\uFE6A\\uFE6B\\uFF01-\\uFF03\\uFF05-\\uFF0A\\uFF0C-\\uFF0F\\uFF1A\\uFF1B\\uFF1F\\uFF20\\uFF3B-\\uFF3D\\uFF3F\\uFF5B\\uFF5D\\uFF5F-\\uFF65]/;\n/**\n * Is a character `code` in a surrogate character.\n *\n * @param {Number} code\n * @return {Boolean}\n */\n\nfunction isSurrogate(code) {\n  return SURROGATE_START <= code && code <= SURROGATE_END;\n}\n/**\n * Is a character a word character? Needs the `remaining` characters too.\n *\n * @param {String} char\n * @param {String|Void} remaining\n * @return {Boolean}\n */\n\n\nfunction isWord(char, remaining) {\n  if (SPACE.test(char)) return false; // If it's a chameleon character, recurse to see if the next one is or not.\n\n  if (CHAMELEON.test(char)) {\n    var next = remaining.charAt(0);\n    var length = getCharLength(next);\n    next = remaining.slice(0, length);\n    var rest = remaining.slice(length);\n    if (isWord(next, rest)) return true;\n  }\n\n  if (PUNCTUATION.test(char)) return false;\n  return true;\n}\n/**\n * Get the length of a `character`.\n *\n * @param {String} char\n * @return {Number}\n */\n\n\nfunction getCharLength(char) {\n  return isSurrogate(char.charCodeAt(0)) ? 2 : 1;\n}\n/**\n * Get the offset to the end of the first character in `text`.\n *\n * @param {String} text\n * @return {Number}\n */\n\n\nfunction getCharOffset(text) {\n  var char = text.charAt(0);\n  return getCharLength(char);\n}\n/**\n * Get the offset to the end of the character before an `offset` in `text`.\n *\n * @param {String} text\n * @param {Number} offset\n * @return {Number}\n */\n\n\nfunction getCharOffsetBackward(text, offset) {\n  text = text.slice(0, offset);\n  text = reverse(text);\n  return getCharOffset(text);\n}\n/**\n * Get the offset to the end of the character after an `offset` in `text`.\n *\n * @param {String} text\n * @param {Number} offset\n * @return {Number}\n */\n\n\nfunction getCharOffsetForward(text, offset) {\n  text = text.slice(offset);\n  return getCharOffset(text);\n}\n/**\n * Get the offset to the end of the first word in `text`.\n *\n * @param {String} text\n * @return {Number}\n */\n\n\nfunction getWordOffset(text) {\n  var length = 0;\n  var i = 0;\n  var started = false;\n  var char = void 0;\n\n  while (char = text.charAt(i)) {\n    var l = getCharLength(char);\n    char = text.slice(i, i + l);\n    var rest = text.slice(i + l);\n\n    if (isWord(char, rest)) {\n      started = true;\n      length += l;\n    } else if (!started) {\n      length += l;\n    } else {\n      break;\n    }\n\n    i += l;\n  }\n\n  return length;\n}\n/**\n * Get the offset to the end of the word before an `offset` in `text`.\n *\n * @param {String} text\n * @param {Number} offset\n * @return {Number}\n */\n\n\nfunction getWordOffsetBackward(text, offset) {\n  text = text.slice(0, offset);\n  text = reverse(text);\n  var o = getWordOffset(text);\n  return o;\n}\n/**\n * Get the offset to the end of the word after an `offset` in `text`.\n *\n * @param {String} text\n * @param {Number} offset\n * @return {Number}\n */\n\n\nfunction getWordOffsetForward(text, offset) {\n  text = text.slice(offset);\n  var o = getWordOffset(text);\n  return o;\n}\n/**\n * Export.\n *\n * @type {Object}\n */\n\n\nvar TextUtils = {\n  getCharLength: getCharLength,\n  getCharOffset: getCharOffset,\n  getCharOffsetBackward: getCharOffsetBackward,\n  getCharOffsetForward: getCharOffsetForward,\n  getWordOffset: getWordOffset,\n  getWordOffsetBackward: getWordOffsetBackward,\n  getWordOffsetForward: getWordOffsetForward,\n  isSurrogate: isSurrogate,\n  isWord: isWord\n};\n\nfunction deleteExpandedAtRange(editor, range) {\n  if (range.isExpanded) {\n    editor.deleteAtRange(range);\n  }\n\n  var value = editor.value;\n  var document = value.document;\n  var _range = range,\n      start = _range.start,\n      end = _range.end;\n\n  if (document.hasDescendant(start.key)) {\n    range = range.moveToStart();\n  } else {\n    range = range.moveTo(end.key, 0).normalize(document);\n  }\n\n  return range;\n}\n/**\n * Commands.\n *\n * @type {Object}\n */\n\n\nvar Commands$1 = {};\n/**\n * Add a new `mark` to the characters at `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Mixed} mark\n */\n\nCommands$1.addMarkAtRange = function (editor, range, mark) {\n  if (range.isCollapsed) return;\n  var value = editor.value;\n  var document = value.document;\n  var start = range.start,\n      end = range.end;\n  var texts = document.getTextsAtRange(range);\n  editor.withoutNormalizing(function () {\n    texts.forEach(function (node) {\n      var key = node.key;\n      var index = 0;\n      var length = node.text.length;\n      if (key === start.key) index = start.offset;\n      if (key === end.key) length = end.offset;\n      if (key === start.key && key === end.key) length = end.offset - start.offset;\n      editor.addMarkByKey(key, index, length, mark);\n    });\n  });\n};\n/**\n * Add a list of `marks` to the characters at `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Array<Mixed>} mark\n */\n\n\nCommands$1.addMarksAtRange = function (editor, range, marks) {\n  marks.forEach(function (mark) {\n    return editor.addMarkAtRange(range, mark);\n  });\n};\n/**\n * Delete everything in a `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n */\n\n\nCommands$1.deleteAtRange = function (editor, range) {\n  // Snapshot the selection, which creates an extra undo save point, so that\n  // when you undo a delete, the expanded selection will be retained.\n  editor.snapshotSelection();\n  var value = editor.value;\n  var start = range.start,\n      end = range.end;\n  var startKey = start.key;\n  var startOffset = start.offset;\n  var endKey = end.key;\n  var endOffset = end.offset;\n  var document = value.document;\n  var isStartVoid = document.hasVoidParent(startKey, editor);\n  var isEndVoid = document.hasVoidParent(endKey, editor);\n  var startBlock = document.getClosestBlock(startKey);\n  var endBlock = document.getClosestBlock(endKey); // Check if we have a \"hanging\" selection case where the even though the\n  // selection extends into the start of the end node, we actually want to\n  // ignore that for UX reasons.\n\n  var isHanging = startOffset === 0 && endOffset === 0 && isStartVoid === false && startKey === startBlock.getFirstText().key && endKey === endBlock.getFirstText().key; // If it's a hanging selection, nudge it back to end in the previous text.\n\n  if (isHanging && isEndVoid) {\n    var prevText = document.getPreviousText(endKey);\n    endKey = prevText.key;\n    endOffset = prevText.text.length;\n    isEndVoid = document.hasVoidParent(endKey, editor);\n  }\n\n  editor.withoutNormalizing(function () {\n    // If the start node is inside a void node, remove the void node and update\n    // the starting point to be right after it, continuously until the start point\n    // is not a void, or until the entire range is handled.\n    while (isStartVoid) {\n      var startVoid = document.getClosestVoid(startKey, editor);\n      var nextText = document.getNextText(startKey);\n      editor.removeNodeByKey(startVoid.key); // If the start and end keys are the same, we're done.\n\n      if (startKey === endKey) return; // If there is no next text node, we're done.\n\n      if (!nextText) return; // Continue...\n\n      document = editor.value.document;\n      startKey = nextText.key;\n      startOffset = 0;\n      isStartVoid = document.hasVoidParent(startKey, editor);\n    } // If the end node is inside a void node, do the same thing but backwards. But\n    // we don't need any aborting checks because if we've gotten this far there\n    // must be a non-void node that will exit the loop.\n\n\n    while (isEndVoid) {\n      var endVoid = document.getClosestVoid(endKey, editor);\n\n      var _prevText = document.getPreviousText(endKey);\n\n      editor.removeNodeByKey(endVoid.key); // Continue...\n\n      document = editor.value.document;\n      endKey = _prevText.key;\n      endOffset = _prevText.text.length;\n      isEndVoid = document.hasVoidParent(endKey, editor);\n    } // If the start and end key are the same, and it was a hanging selection, we\n    // can just remove the entire block.\n\n\n    if (startKey === endKey && isHanging) {\n      editor.removeNodeByKey(startBlock.key);\n      return;\n    } else if (startKey === endKey) {\n      // Otherwise, if it wasn't hanging, we're inside a single text node, so we can\n      // simply remove the text in the range.\n      var index = startOffset;\n      var length = endOffset - startOffset;\n      editor.removeTextByKey(startKey, index, length);\n      return;\n    } else {\n      // Otherwise, we need to recursively remove text and nodes inside the start\n      // block after the start offset and inside the end block before the end\n      // offset. Then remove any blocks that are in between the start and end\n      // blocks. Then finally merge the start and end nodes.\n      startBlock = document.getClosestBlock(startKey);\n      endBlock = document.getClosestBlock(endKey);\n      var startText = document.getNode(startKey);\n      var endText = document.getNode(endKey);\n      var startLength = startText.text.length - startOffset;\n      var endLength = endOffset;\n      var ancestor = document.getCommonAncestor(startKey, endKey);\n      var startChild = ancestor.getFurthestAncestor(startKey);\n      var endChild = ancestor.getFurthestAncestor(endKey);\n      var startParent = document.getParent(startBlock.key);\n      var startParentIndex = startParent.nodes.indexOf(startBlock);\n      var endParentIndex = startParent.nodes.indexOf(endBlock);\n      var child = void 0; // Iterate through all of the nodes in the tree after the start text node\n      // but inside the end child, and remove them.\n\n      child = startText;\n\n      while (child.key !== startChild.key) {\n        var parent = document.getParent(child.key);\n\n        var _index = parent.nodes.indexOf(child);\n\n        var afters = parent.nodes.slice(_index + 1);\n        afters.reverse().forEach(function (node) {\n          editor.removeNodeByKey(node.key);\n        });\n        child = parent;\n      } // Remove all of the middle children.\n\n\n      var startChildIndex = ancestor.nodes.indexOf(startChild);\n      var endChildIndex = ancestor.nodes.indexOf(endChild);\n      var middles = ancestor.nodes.slice(startChildIndex + 1, endChildIndex);\n      middles.reverse().forEach(function (node) {\n        editor.removeNodeByKey(node.key);\n      }); // Remove the nodes before the end text node in the tree.\n\n      child = endText;\n\n      while (child.key !== endChild.key) {\n        var _parent = document.getParent(child.key);\n\n        var _index2 = _parent.nodes.indexOf(child);\n\n        var befores = _parent.nodes.slice(0, _index2);\n\n        befores.reverse().forEach(function (node) {\n          editor.removeNodeByKey(node.key);\n        });\n        child = _parent;\n      } // Remove any overlapping text content from the leaf text nodes.\n\n\n      if (startLength !== 0) {\n        editor.removeTextByKey(startKey, startOffset, startLength);\n      }\n\n      if (endLength !== 0) {\n        editor.removeTextByKey(endKey, 0, endOffset);\n      } // If the start and end blocks aren't the same, move and merge the end block\n      // into the start block.\n\n\n      if (startBlock.key !== endBlock.key) {\n        document = editor.value.document;\n        var lonely = document.getFurthestOnlyChildAncestor(endBlock.key); // Move the end block to be right after the start block.\n\n        if (endParentIndex !== startParentIndex + 1) {\n          editor.moveNodeByKey(endBlock.key, startParent.key, startParentIndex + 1);\n        } // If the selection is hanging, just remove the start block, otherwise\n        // merge the end block into it.\n\n\n        if (isHanging) {\n          editor.removeNodeByKey(startBlock.key);\n        } else {\n          editor.mergeNodeByKey(endBlock.key);\n        } // If nested empty blocks are left over above the end block, remove them.\n\n\n        if (lonely) {\n          editor.removeNodeByKey(lonely.key);\n        }\n      }\n    }\n  });\n};\n/**\n * Delete backward `n` characters at a `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Number} n (optional)\n */\n\n\nCommands$1.deleteBackwardAtRange = function (editor, range) {\n  var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n  if (n === 0) return;\n  var value = editor.value;\n  var document = value.document;\n  var _range2 = range,\n      start = _range2.start,\n      focus = _range2.focus; // If the range is expanded, perform a regular delete instead.\n\n  if (range.isExpanded) {\n    editor.deleteAtRange(range);\n    return;\n  }\n\n  var voidParent = document.getClosestVoid(start.key, editor); // If there is a void parent, delete it.\n\n  if (voidParent) {\n    editor.removeNodeByKey(voidParent.key);\n    return;\n  } // If the range is at the start of the document, abort.\n\n\n  if (start.isAtStartOfNode(document)) {\n    return;\n  }\n\n  var block = document.getClosestBlock(start.key); // PERF: If the closest block is empty, remove it. This is just a shortcut,\n  // since merging it would result in the same outcome.\n\n  if (document.nodes.size !== 1 && block && block.text === '' && block.nodes.size === 1) {\n    editor.removeNodeByKey(block.key);\n    return;\n  } // If the range is at the start of the text node, we need to figure out what\n  // is behind it to know how to delete...\n\n\n  var text = document.getDescendant(start.key);\n\n  if (start.isAtStartOfNode(text)) {\n    var prev = document.getPreviousText(text.key);\n    var inline = document.getClosestInline(text.key); // If the range is at the start of the inline node, and previous text node\n    // is empty, take the text node before that, or \"prevBlock\" would be the\n    // same node as \"block\"\n\n    if (inline && prev.text === '') {\n      prev = document.getPreviousText(prev.key);\n    }\n\n    var prevBlock = document.getClosestBlock(prev.key);\n    var prevVoid = document.getClosestVoid(prev.key, editor); // If the previous text node has a void parent, remove it.\n\n    if (prevVoid) {\n      editor.removeNodeByKey(prevVoid.key);\n      return;\n    } // If we're deleting by one character and the previous text node is not\n    // inside the current block, we need to merge the two blocks together.\n\n\n    if (n === 1 && prevBlock !== block) {\n      range = range.moveAnchorTo(prev.key, prev.text.length);\n      editor.deleteAtRange(range);\n      return;\n    }\n  } // If the focus offset is farther than the number of characters to delete,\n  // just remove the characters backwards inside the current node.\n\n\n  if (n < focus.offset) {\n    range = range.moveFocusBackward(n);\n    editor.deleteAtRange(range);\n    return;\n  } // Otherwise, we need to see how many nodes backwards to go.\n\n\n  var node = text;\n  var offset = 0;\n  var traversed = focus.offset;\n\n  while (n > traversed) {\n    node = document.getPreviousText(node.key);\n    var next = traversed + node.text.length;\n\n    if (n <= next) {\n      offset = next - n;\n      break;\n    } else {\n      traversed = next;\n    }\n  }\n\n  range = range.moveAnchorTo(node.key, offset);\n  editor.deleteAtRange(range);\n};\n/**\n * Delete backward until the character boundary at a `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n */\n\n\nCommands$1.deleteCharBackwardAtRange = function (editor, range) {\n  if (range.isExpanded) {\n    editor.deleteAtRange(range);\n    return;\n  }\n\n  var value = editor.value;\n  var document = value.document;\n  var start = range.start;\n  var startBlock = document.getClosestBlock(start.key);\n  var offset = startBlock.getOffset(start.key);\n  var o = offset + start.offset;\n  var text = startBlock.text;\n  var n = TextUtils.getCharOffsetBackward(text, o);\n  editor.deleteBackwardAtRange(range, n);\n};\n/**\n * Delete forward until the character boundary at a `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n */\n\n\nCommands$1.deleteCharForwardAtRange = function (editor, range) {\n  if (range.isExpanded) {\n    editor.deleteAtRange(range);\n    return;\n  }\n\n  var value = editor.value;\n  var document = value.document;\n  var start = range.start;\n  var startBlock = document.getClosestBlock(start.key);\n  var offset = startBlock.getOffset(start.key);\n  var o = offset + start.offset;\n  var text = startBlock.text;\n  var n = TextUtils.getCharOffsetForward(text, o);\n  editor.deleteForwardAtRange(range, n);\n};\n/**\n * Delete forward `n` characters at a `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Number} n (optional)\n */\n\n\nCommands$1.deleteForwardAtRange = function (editor, range) {\n  var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n  if (n === 0) return;\n  var value = editor.value;\n  var document = value.document;\n  var _range3 = range,\n      start = _range3.start,\n      focus = _range3.focus; // If the range is expanded, perform a regular delete instead.\n\n  if (range.isExpanded) {\n    editor.deleteAtRange(range);\n    return;\n  }\n\n  var voidParent = document.getClosestVoid(start.key, editor); // If the node has a void parent, delete it.\n\n  if (voidParent) {\n    editor.removeNodeByKey(voidParent.key);\n    return;\n  }\n\n  var block = document.getClosestBlock(start.key); // If the closest is not void, but empty, remove it\n\n  if (block && !editor.isVoid(block) && block.text === '' && document.nodes.size !== 1) {\n    var nextBlock = document.getNextBlock(block.key);\n    editor.removeNodeByKey(block.key);\n\n    if (nextBlock && nextBlock.key) {\n      editor.moveToStartOfNode(nextBlock);\n    }\n\n    return;\n  } // If the range is at the start of the document, abort.\n\n\n  if (start.isAtEndOfNode(document)) {\n    return;\n  } // If the range is at the start of the text node, we need to figure out what\n  // is behind it to know how to delete...\n\n\n  var text = document.getDescendant(start.key);\n\n  if (start.isAtEndOfNode(text)) {\n    var next = document.getNextText(text.key);\n\n    var _nextBlock = document.getClosestBlock(next.key);\n\n    var nextVoid = document.getClosestVoid(next.key, editor); // If the next text node has a void parent, remove it.\n\n    if (nextVoid) {\n      editor.removeNodeByKey(nextVoid.key);\n      return;\n    } // If we're deleting by one character and the previous text node is not\n    // inside the current block, we need to merge the two blocks together.\n\n\n    if (n === 1 && _nextBlock !== block) {\n      range = range.moveFocusTo(next.key, 0);\n      editor.deleteAtRange(range);\n      return;\n    }\n  } // If the remaining characters to the end of the node is greater than or equal\n  // to the number of characters to delete, just remove the characters forwards\n  // inside the current node.\n\n\n  if (n <= text.text.length - focus.offset) {\n    range = range.moveFocusForward(n);\n    editor.deleteAtRange(range);\n    return;\n  } // Otherwise, we need to see how many nodes forwards to go.\n\n\n  var node = text;\n  var offset = focus.offset;\n  var traversed = text.text.length - focus.offset;\n\n  while (n > traversed) {\n    node = document.getNextText(node.key);\n\n    var _next = traversed + node.text.length;\n\n    if (n <= _next) {\n      offset = n - traversed;\n      break;\n    } else {\n      traversed = _next;\n    }\n  }\n\n  range = range.moveFocusTo(node.key, offset);\n  editor.deleteAtRange(range);\n};\n/**\n * Delete backward until the line boundary at a `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n */\n\n\nCommands$1.deleteLineBackwardAtRange = function (editor, range) {\n  if (range.isExpanded) {\n    editor.deleteAtRange(range);\n    return;\n  }\n\n  var value = editor.value;\n  var document = value.document;\n  var start = range.start;\n  var startBlock = document.getClosestBlock(start.key);\n  var offset = startBlock.getOffset(start.key);\n  var o = offset + start.offset;\n  editor.deleteBackwardAtRange(range, o);\n};\n/**\n * Delete forward until the line boundary at a `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n */\n\n\nCommands$1.deleteLineForwardAtRange = function (editor, range) {\n  if (range.isExpanded) {\n    editor.deleteAtRange(range);\n    return;\n  }\n\n  var value = editor.value;\n  var document = value.document;\n  var start = range.start;\n  var startBlock = document.getClosestBlock(start.key);\n  var offset = startBlock.getOffset(start.key);\n  var o = offset + start.offset;\n  editor.deleteForwardAtRange(range, startBlock.text.length - o);\n};\n/**\n * Delete backward until the word boundary at a `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n */\n\n\nCommands$1.deleteWordBackwardAtRange = function (editor, range) {\n  if (range.isExpanded) {\n    editor.deleteAtRange(range);\n    return;\n  }\n\n  var value = editor.value;\n  var document = value.document;\n  var start = range.start;\n  var startBlock = document.getClosestBlock(start.key);\n  var offset = startBlock.getOffset(start.key);\n  var o = offset + start.offset;\n  var text = startBlock.text;\n  var n = o === 0 ? 1 : TextUtils.getWordOffsetBackward(text, o);\n  editor.deleteBackwardAtRange(range, n);\n};\n/**\n * Delete forward until the word boundary at a `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n */\n\n\nCommands$1.deleteWordForwardAtRange = function (editor, range) {\n  if (range.isExpanded) {\n    editor.deleteAtRange(range);\n    return;\n  }\n\n  var value = editor.value;\n  var document = value.document;\n  var start = range.start;\n  var startBlock = document.getClosestBlock(start.key);\n  var offset = startBlock.getOffset(start.key);\n  var o = offset + start.offset;\n  var text = startBlock.text;\n  var wordOffset = TextUtils.getWordOffsetForward(text, o);\n  var n = wordOffset === 0 ? 1 : wordOffset;\n  editor.deleteForwardAtRange(range, n);\n};\n/**\n * Insert a `block` node at `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Block|String|Object} block\n */\n\n\nCommands$1.insertBlockAtRange = function (editor, range, block) {\n  range = deleteExpandedAtRange(editor, range);\n  block = Block.create(block);\n  var value = editor.value;\n  var document = value.document;\n  var _range4 = range,\n      start = _range4.start;\n  var startKey = start.key;\n  var startOffset = start.offset;\n  var startBlock = document.getClosestBlock(startKey);\n  var startInline = document.getClosestInline(startKey);\n  var parent = document.getParent(startBlock.key);\n  var index = parent.nodes.indexOf(startBlock);\n\n  if (editor.isVoid(startBlock)) {\n    var extra = start.isAtEndOfNode(startBlock) ? 1 : 0;\n    editor.insertNodeByKey(parent.key, index + extra, block);\n  } else if (!startInline && startBlock.text === '') {\n    editor.insertNodeByKey(parent.key, index + 1, block);\n  } else if (start.isAtStartOfNode(startBlock)) {\n    editor.insertNodeByKey(parent.key, index, block);\n  } else if (start.isAtEndOfNode(startBlock)) {\n    editor.insertNodeByKey(parent.key, index + 1, block);\n  } else {\n    if (startInline && editor.isVoid(startInline)) {\n      var atEnd = start.isAtEndOfNode(startInline);\n      var siblingText = atEnd ? document.getNextText(startKey) : document.getPreviousText(startKey);\n      var splitRange = atEnd ? range.moveToStartOfNode(siblingText) : range.moveToEndOfNode(siblingText);\n      startKey = splitRange.start.key;\n      startOffset = splitRange.start.offset;\n    }\n\n    editor.withoutNormalizing(function () {\n      editor.splitDescendantsByKey(startBlock.key, startKey, startOffset);\n      editor.insertNodeByKey(parent.key, index + 1, block);\n    });\n  }\n};\n/**\n * Insert a `fragment` at a `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Document} fragment\n */\n\n\nCommands$1.insertFragmentAtRange = function (editor, range, fragment) {\n  editor.withoutNormalizing(function () {\n    range = deleteExpandedAtRange(editor, range); // If the fragment is empty, there's nothing to do after deleting.\n\n    if (!fragment.nodes.size) return; // Regenerate the keys for all of the fragments nodes, so that they're\n    // guaranteed not to collide with the existing keys in the document. Otherwise\n    // they will be rengerated automatically and we won't have an easy way to\n    // reference them.\n\n    fragment = fragment.mapDescendants(function (child) {\n      return child.regenerateKey();\n    }); // Calculate a few things...\n\n    var _range5 = range,\n        start = _range5.start;\n    var value = editor.value;\n    var document = value.document;\n    var startText = document.getDescendant(start.key);\n    var startBlock = document.getClosestBlock(startText.key);\n    var startChild = startBlock.getFurthestAncestor(startText.key);\n    var isAtStart = start.isAtStartOfNode(startBlock);\n    var parent = document.getParent(startBlock.key);\n    var index = parent.nodes.indexOf(startBlock);\n    var blocks = fragment.getBlocks();\n    var firstChild = fragment.nodes.first();\n    var lastChild = fragment.nodes.last();\n    var firstBlock = blocks.first();\n    var lastBlock = blocks.last();\n    var insertionNode = findInsertionNode(fragment, document, startBlock.key); // If the fragment only contains a void block, use `insertBlock` instead.\n\n    if (firstBlock === lastBlock && editor.isVoid(firstBlock)) {\n      editor.insertBlockAtRange(range, firstBlock);\n      return;\n    } // If inserting the entire fragment and it starts or ends with a single\n    // nested block, e.g. a table, we do not merge it with existing blocks.\n\n\n    if (insertionNode === fragment && (firstChild.hasBlockChildren() || lastChild.hasBlockChildren())) {\n      fragment.nodes.reverse().forEach(function (node) {\n        editor.insertBlockAtRange(range, node);\n      });\n      return;\n    } // If the first and last block aren't the same, we need to insert all of the\n    // nodes after the insertion node's first block at the index.\n\n\n    if (firstBlock !== lastBlock) {\n      var lonelyParent = insertionNode.getFurthest(firstBlock.key, function (p) {\n        return p.nodes.size === 1;\n      });\n      var lonelyChild = lonelyParent || firstBlock;\n      var startIndex = parent.nodes.indexOf(startBlock);\n      var excludingLonelyChild = insertionNode.removeNode(lonelyChild.key);\n      excludingLonelyChild.nodes.forEach(function (node, i) {\n        var newIndex = startIndex + i + 1;\n        editor.insertNodeByKey(parent.key, newIndex, node);\n      });\n    } // Check if we need to split the node.\n\n\n    if (start.offset !== 0) {\n      editor.splitDescendantsByKey(startChild.key, start.key, start.offset);\n    } // Update our variables with the new value.\n\n\n    document = editor.value.document;\n    startText = document.getDescendant(start.key);\n    startBlock = document.getClosestBlock(start.key);\n    startChild = startBlock.getFurthestAncestor(startText.key); // If the first and last block aren't the same, we need to move any of the\n    // starting block's children after the split into the last block of the\n    // fragment, which has already been inserted.\n\n    if (firstBlock !== lastBlock) {\n      var nextChild = isAtStart ? startChild : startBlock.getNextSibling(startChild.key);\n      var nextNodes = nextChild ? startBlock.nodes.skipUntil(function (n) {\n        return n.key === nextChild.key;\n      }) : List();\n      var lastIndex = lastBlock.nodes.size;\n      nextNodes.forEach(function (node, i) {\n        var newIndex = lastIndex + i;\n        editor.moveNodeByKey(node.key, lastBlock.key, newIndex);\n      });\n    } // If the starting block is empty, we replace it entirely with the first block\n    // of the fragment, since this leads to a more expected behavior for the user.\n\n\n    if (!editor.isVoid(startBlock) && startBlock.text === '' && !startBlock.findDescendant(function (n) {\n      return editor.isVoid(n);\n    })) {\n      editor.removeNodeByKey(startBlock.key);\n      editor.insertNodeByKey(parent.key, index, firstBlock);\n    } else {\n      // Otherwise, we maintain the starting block, and insert all of the first\n      // block's inline nodes into it at the split point.\n      var inlineChild = startBlock.getFurthestAncestor(startText.key);\n      var inlineIndex = startBlock.nodes.indexOf(inlineChild);\n      firstBlock.nodes.forEach(function (inline, i) {\n        var o = start.offset === 0 ? 0 : 1;\n        var newIndex = inlineIndex + i + o;\n        editor.insertNodeByKey(startBlock.key, newIndex, inline);\n      });\n    }\n  });\n};\n\nvar findInsertionNode = function findInsertionNode(fragment, document, startKey) {\n  var hasSingleNode = function hasSingleNode(object) {\n    if (!object || object.object === 'text') return;\n    return object.nodes.size === 1;\n  };\n\n  var firstNode = function firstNode(object) {\n    return object && object.nodes.first();\n  };\n\n  var node = fragment;\n\n  if (hasSingleNode(fragment)) {\n    var fragmentInner = firstNode(fragment);\n\n    var matches = function matches(documentNode) {\n      return documentNode.type === fragmentInner.type;\n    };\n\n    var documentInner = document.getFurthest(startKey, matches);\n    if (documentInner === document.getParent(startKey)) node = fragmentInner;\n\n    while (hasSingleNode(fragmentInner) && hasSingleNode(documentInner)) {\n      fragmentInner = firstNode(fragmentInner);\n      documentInner = firstNode(documentInner);\n\n      if (fragmentInner.type === documentInner.type) {\n        node = fragmentInner;\n      } else {\n        break;\n      }\n    }\n  }\n\n  return node;\n};\n/**\n * Insert an `inline` node at `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Inline|String|Object} inline\n */\n\n\nCommands$1.insertInlineAtRange = function (editor, range, inline) {\n  inline = Inline.create(inline);\n  editor.withoutNormalizing(function () {\n    range = deleteExpandedAtRange(editor, range);\n    var value = editor.value;\n    var document = value.document;\n    var _range6 = range,\n        start = _range6.start;\n    var parent = document.getParent(start.key);\n    var startText = document.assertDescendant(start.key);\n    var index = parent.nodes.indexOf(startText);\n    if (editor.isVoid(parent)) return;\n    editor.splitNodeByKey(start.key, start.offset);\n    editor.insertNodeByKey(parent.key, index + 1, inline);\n  });\n};\n/**\n * Insert `text` at a `range`, with optional `marks`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {String} text\n * @param {Set<Mark>} marks (optional)\n */\n\n\nCommands$1.insertTextAtRange = function (editor, range, text, marks) {\n  range = deleteExpandedAtRange(editor, range);\n  var value = editor.value;\n  var document = value.document;\n  var _range7 = range,\n      start = _range7.start;\n  var offset = start.offset;\n  var parent = document.getParent(start.key);\n\n  if (editor.isVoid(parent)) {\n    return;\n  }\n\n  editor.insertTextByKey(start.key, offset, text, marks);\n};\n/**\n * Remove an existing `mark` to the characters at `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Mark|String} mark (optional)\n */\n\n\nCommands$1.removeMarkAtRange = function (editor, range, mark) {\n  if (range.isCollapsed) return;\n  var value = editor.value;\n  var document = value.document;\n  var texts = document.getTextsAtRange(range);\n  var start = range.start,\n      end = range.end;\n  editor.withoutNormalizing(function () {\n    texts.forEach(function (node) {\n      var key = node.key;\n      var index = 0;\n      var length = node.text.length;\n      if (key === start.key) index = start.offset;\n      if (key === end.key) length = end.offset;\n      if (key === start.key && key === end.key) length = end.offset - start.offset;\n      editor.removeMarkByKey(key, index, length, mark);\n    });\n  });\n};\n/**\n * Set the `properties` of block nodes in a `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Object|String} properties\n */\n\n\nCommands$1.setBlocksAtRange = function (editor, range, properties) {\n  var value = editor.value;\n  var document = value.document;\n  var blocks = document.getLeafBlocksAtRange(range);\n  var start = range.start,\n      end = range.end,\n      isCollapsed = range.isCollapsed;\n  var isStartVoid = document.hasVoidParent(start.key, editor);\n  var startBlock = document.getClosestBlock(start.key);\n  var endBlock = document.getClosestBlock(end.key); // Check if we have a \"hanging\" selection case where the even though the\n  // selection extends into the start of the end node, we actually want to\n  // ignore that for UX reasons.\n\n  var isHanging = isCollapsed === false && start.offset === 0 && end.offset === 0 && isStartVoid === false && start.key === startBlock.getFirstText().key && end.key === endBlock.getFirstText().key; // If it's a hanging selection, ignore the last block.\n\n  var sets = isHanging ? blocks.slice(0, -1) : blocks;\n  editor.withoutNormalizing(function () {\n    sets.forEach(function (block) {\n      editor.setNodeByKey(block.key, properties);\n    });\n  });\n};\n/**\n * Set the `properties` of inline nodes in a `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Object|String} properties\n */\n\n\nCommands$1.setInlinesAtRange = function (editor, range, properties) {\n  var value = editor.value;\n  var document = value.document;\n  var inlines = document.getLeafInlinesAtRange(range);\n  editor.withoutNormalizing(function () {\n    inlines.forEach(function (inline) {\n      editor.setNodeByKey(inline.key, properties);\n    });\n  });\n};\n/**\n * Split the block nodes at a `range`, to optional `height`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Number} height (optional)\n */\n\n\nCommands$1.splitBlockAtRange = function (editor, range) {\n  var height = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n  range = deleteExpandedAtRange(editor, range);\n  var _range8 = range,\n      start = _range8.start,\n      end = _range8.end;\n  var value = editor.value;\n  var _value = value,\n      document = _value.document;\n  var node = document.assertDescendant(start.key);\n  var parent = document.getClosestBlock(node.key);\n  var h = 0;\n\n  while (parent && parent.object === 'block' && h < height) {\n    node = parent;\n    parent = document.getClosestBlock(parent.key);\n    h++;\n  }\n\n  editor.withoutNormalizing(function () {\n    editor.splitDescendantsByKey(node.key, start.key, start.offset);\n    value = editor.value;\n    document = value.document;\n\n    if (range.isExpanded) {\n      if (range.isBackward) range = range.flip();\n      var nextBlock = document.getNextBlock(node.key);\n      range = range.moveAnchorToStartOfNode(nextBlock);\n      range = range.setFocus(range.focus.setPath(null));\n\n      if (start.key === end.key) {\n        range = range.moveFocusTo(range.anchor.key, end.offset - start.offset);\n      }\n\n      range = document.resolveRange(range);\n      editor.deleteAtRange(range);\n    }\n  });\n};\n/**\n * Split the inline nodes at a `range`, to optional `height`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Number} height (optional)\n */\n\n\nCommands$1.splitInlineAtRange = function (editor, range) {\n  var height = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : Infinity;\n  range = deleteExpandedAtRange(editor, range);\n  var _range9 = range,\n      start = _range9.start;\n  var value = editor.value;\n  var document = value.document;\n  var node = document.assertDescendant(start.key);\n  var parent = document.getClosestInline(node.key);\n  var h = 0;\n\n  while (parent && parent.object === 'inline' && h < height) {\n    node = parent;\n    parent = document.getClosestInline(parent.key);\n    h++;\n  }\n\n  editor.splitDescendantsByKey(node.key, start.key, start.offset);\n};\n/**\n * Add or remove a `mark` from the characters at `range`, depending on whether\n * it's already there.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Mixed} mark\n */\n\n\nCommands$1.toggleMarkAtRange = function (editor, range, mark) {\n  if (range.isCollapsed) return;\n  mark = Mark.create(mark);\n  var value = editor.value;\n  var document = value.document;\n  var marks = document.getActiveMarksAtRange(range);\n  var exists = marks.some(function (m) {\n    return m.equals(mark);\n  });\n\n  if (exists) {\n    editor.removeMarkAtRange(range, mark);\n  } else {\n    editor.addMarkAtRange(range, mark);\n  }\n};\n/**\n * Unwrap all of the block nodes in a `range` from a block with `properties`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {String|Object} properties\n */\n\n\nCommands$1.unwrapBlockAtRange = function (editor, range, properties) {\n  properties = Node.createProperties(properties);\n  var value = editor.value;\n  var document = value.document;\n  var blocks = document.getLeafBlocksAtRange(range);\n  var wrappers = blocks.map(function (block) {\n    return document.getClosest(block.key, function (parent) {\n      if (parent.object !== 'block') return false;\n      if (properties.type != null && parent.type !== properties.type) return false;\n      if (properties.data != null && !parent.data.isSuperset(properties.data)) return false;\n      return true;\n    });\n  }).filter(function (exists) {\n    return exists;\n  }).toOrderedSet().toList();\n  editor.withoutNormalizing(function () {\n    wrappers.forEach(function (block) {\n      var first = block.nodes.first();\n      var last = block.nodes.last();\n      var parent = editor.value.document.getParent(block.key);\n      var index = parent.nodes.indexOf(block);\n      var children = block.nodes.filter(function (child) {\n        return blocks.some(function (b) {\n          return child === b || child.hasDescendant(b.key);\n        });\n      });\n      var firstMatch = children.first();\n      var lastMatch = children.last();\n\n      if (first === firstMatch && last === lastMatch) {\n        block.nodes.forEach(function (child, i) {\n          editor.moveNodeByKey(child.key, parent.key, index + i);\n        });\n        editor.removeNodeByKey(block.key);\n      } else if (last === lastMatch) {\n        block.nodes.skipUntil(function (n) {\n          return n === firstMatch;\n        }).forEach(function (child, i) {\n          editor.moveNodeByKey(child.key, parent.key, index + 1 + i);\n        });\n      } else if (first === firstMatch) {\n        block.nodes.takeUntil(function (n) {\n          return n === lastMatch;\n        }).push(lastMatch).forEach(function (child, i) {\n          editor.moveNodeByKey(child.key, parent.key, index + i);\n        });\n      } else {\n        var firstText = firstMatch.getFirstText();\n        editor.splitDescendantsByKey(block.key, firstText.key, 0);\n        document = editor.value.document;\n        children.forEach(function (child, i) {\n          if (i === 0) {\n            var extra = child;\n            child = document.getNextBlock(child.key);\n            editor.removeNodeByKey(extra.key);\n          }\n\n          editor.moveNodeByKey(child.key, parent.key, index + 1 + i);\n        });\n      }\n    });\n  });\n};\n/**\n * Unwrap the inline nodes in a `range` from an inline with `properties`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {String|Object} properties\n */\n\n\nCommands$1.unwrapInlineAtRange = function (editor, range, properties) {\n  properties = Node.createProperties(properties);\n  var value = editor.value;\n  var document = value.document;\n  var texts = document.getTextsAtRange(range);\n  var inlines = texts.map(function (text) {\n    return document.getClosest(text.key, function (parent) {\n      if (parent.object !== 'inline') return false;\n      if (properties.type != null && parent.type !== properties.type) return false;\n      if (properties.data != null && !parent.data.isSuperset(properties.data)) return false;\n      return true;\n    });\n  }).filter(function (exists) {\n    return exists;\n  }).toOrderedSet().toList();\n  editor.withoutNormalizing(function () {\n    inlines.forEach(function (inline) {\n      var parent = editor.value.document.getParent(inline.key);\n      var index = parent.nodes.indexOf(inline);\n      inline.nodes.forEach(function (child, i) {\n        editor.moveNodeByKey(child.key, parent.key, index + i);\n      });\n      editor.removeNodeByKey(inline.key);\n    });\n  });\n};\n/**\n * Wrap all of the blocks in a `range` in a new `block`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Block|Object|String} block\n */\n\n\nCommands$1.wrapBlockAtRange = function (editor, range, block) {\n  block = Block.create(block);\n  block = block.set('nodes', block.nodes.clear());\n  var value = editor.value;\n  var document = value.document;\n  var blocks = document.getLeafBlocksAtRange(range);\n  var firstblock = blocks.first();\n  var lastblock = blocks.last();\n  var parent = void 0,\n      siblings = void 0,\n      index = void 0; // If there is only one block in the selection then we know the parent and\n  // siblings.\n\n  if (blocks.length === 1) {\n    parent = document.getParent(firstblock.key);\n    siblings = blocks;\n  } else {\n    // Determine closest shared parent to all blocks in selection.\n    parent = document.getClosest(firstblock.key, function (p1) {\n      return !!document.getClosest(lastblock.key, function (p2) {\n        return p1 === p2;\n      });\n    });\n  } // If no shared parent could be found then the parent is the document.\n\n\n  if (parent == null) parent = document; // Create a list of direct children siblings of parent that fall in the\n  // selection.\n\n  if (siblings == null) {\n    var indexes = parent.nodes.reduce(function (ind, node, i) {\n      if (node === firstblock || node.hasDescendant(firstblock.key)) ind[0] = i;\n      if (node === lastblock || node.hasDescendant(lastblock.key)) ind[1] = i;\n      return ind;\n    }, []);\n    index = indexes[0];\n    siblings = parent.nodes.slice(indexes[0], indexes[1] + 1);\n  } // Get the index to place the new wrapped node at.\n\n\n  if (index == null) {\n    index = parent.nodes.indexOf(siblings.first());\n  }\n\n  editor.withoutNormalizing(function () {\n    // Inject the new block node into the parent.\n    editor.insertNodeByKey(parent.key, index, block); // Move the sibling nodes into the new block node.\n\n    siblings.forEach(function (node, i) {\n      editor.moveNodeByKey(node.key, block.key, i);\n    });\n  });\n};\n/**\n * Wrap the text and inlines in a `range` in a new `inline`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Inline|Object|String} inline\n */\n\n\nCommands$1.wrapInlineAtRange = function (editor, range, inline) {\n  var value = editor.value;\n  var document = value.document;\n  var start = range.start,\n      end = range.end;\n\n  if (range.isCollapsed) {\n    // Wrapping an inline void\n    var inlineParent = document.getClosestInline(start.key);\n\n    if (!inlineParent) {\n      return;\n    }\n\n    if (!editor.isVoid(inlineParent)) {\n      return;\n    }\n\n    return editor.wrapInlineByKey(inlineParent.key, inline);\n  }\n\n  inline = Inline.create(inline);\n  inline = inline.set('nodes', inline.nodes.clear());\n  var blocks = document.getLeafBlocksAtRange(range);\n  var startBlock = document.getClosestBlock(start.key);\n  var endBlock = document.getClosestBlock(end.key);\n  var startInline = document.getClosestInline(start.key);\n  var endInline = document.getClosestInline(end.key);\n  var startChild = startBlock.getFurthestAncestor(start.key);\n  var endChild = endBlock.getFurthestAncestor(end.key);\n  editor.withoutNormalizing(function () {\n    if (!startInline || startInline !== endInline) {\n      editor.splitDescendantsByKey(endChild.key, end.key, end.offset);\n      editor.splitDescendantsByKey(startChild.key, start.key, start.offset);\n    }\n\n    document = editor.value.document;\n    startBlock = document.getDescendant(startBlock.key);\n    endBlock = document.getDescendant(endBlock.key);\n    startChild = startBlock.getFurthestAncestor(start.key);\n    endChild = endBlock.getFurthestAncestor(end.key);\n    var startIndex = startBlock.nodes.indexOf(startChild);\n    var endIndex = endBlock.nodes.indexOf(endChild);\n\n    if (startInline && startInline === endInline) {\n      var text = startBlock.getTextsAtRange(range).get(0).splitText(start.offset)[1].splitText(end.offset - start.offset)[0];\n      inline = inline.set('nodes', List([text]));\n      editor.insertInlineAtRange(range, inline);\n      var inlinekey = inline.getFirstText().key;\n      var rng = {\n        anchor: {\n          key: inlinekey,\n          offset: 0\n        },\n        focus: {\n          key: inlinekey,\n          offset: end.offset - start.offset\n        },\n        isFocused: true\n      };\n      editor.select(rng);\n    } else if (startBlock === endBlock) {\n      document = editor.value.document;\n      startBlock = document.getClosestBlock(start.key);\n      startChild = startBlock.getFurthestAncestor(start.key);\n      var startInner = document.getNextSibling(startChild.key);\n      var startInnerIndex = startBlock.nodes.indexOf(startInner);\n      var endInner = start.key === end.key ? startInner : startBlock.getFurthestAncestor(end.key);\n      var inlines = startBlock.nodes.skipUntil(function (n) {\n        return n === startInner;\n      }).takeUntil(function (n) {\n        return n === endInner;\n      }).push(endInner);\n      var node = inline.regenerateKey();\n      editor.insertNodeByKey(startBlock.key, startInnerIndex, node);\n      inlines.forEach(function (child, i) {\n        editor.moveNodeByKey(child.key, node.key, i);\n      });\n    } else {\n      var startInlines = startBlock.nodes.slice(startIndex + 1);\n      var endInlines = endBlock.nodes.slice(0, endIndex + 1);\n      var startNode = inline.regenerateKey();\n      var endNode = inline.regenerateKey();\n      editor.insertNodeByKey(startBlock.key, startIndex + 1, startNode);\n      editor.insertNodeByKey(endBlock.key, endIndex, endNode);\n      startInlines.forEach(function (child, i) {\n        editor.moveNodeByKey(child.key, startNode.key, i);\n      });\n      endInlines.forEach(function (child, i) {\n        editor.moveNodeByKey(child.key, endNode.key, i);\n      });\n      blocks.slice(1, -1).forEach(function (block) {\n        var node = inline.regenerateKey();\n        editor.insertNodeByKey(block.key, 0, node);\n        block.nodes.forEach(function (child, i) {\n          editor.moveNodeByKey(child.key, node.key, i);\n        });\n      });\n    }\n  });\n};\n/**\n * Wrap the text in a `range` in a prefix/suffix.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {String} prefix\n * @param {String} suffix (optional)\n */\n\n\nCommands$1.wrapTextAtRange = function (editor, range, prefix) {\n  var suffix = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : prefix;\n  var start = range.start,\n      end = range.end;\n  var startRange = range.moveToStart();\n  var endRange = range.moveToEnd();\n\n  if (start.key === end.key) {\n    endRange = endRange.moveForward(prefix.length);\n  }\n\n  editor.withoutNormalizing(function () {\n    editor.insertTextAtRange(startRange, prefix, []);\n    editor.insertTextAtRange(endRange, suffix, []);\n  });\n};\n/**\n * Export.\n *\n * @type {Object}\n */\n\n\nvar Commands$2 = {};\n/**\n * Add mark to text at `offset` and `length` in node by `path`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Number} offset\n * @param {Number} length\n * @param {Mixed} mark\n */\n\nCommands$2.addMarkByPath = function (editor, path, offset, length, mark) {\n  mark = Mark.create(mark);\n  var value = editor.value;\n  var document = value.document;\n  var node = document.assertNode(path);\n  var leaves = node.getLeaves();\n  var operations = [];\n  var bx = offset;\n  var by = offset + length;\n  var o = 0;\n  leaves.forEach(function (leaf) {\n    var ax = o;\n    var ay = ax + leaf.text.length;\n    o += leaf.text.length; // If the leaf doesn't overlap with the operation, continue on.\n\n    if (ay < bx || by < ax) return; // If the leaf already has the mark, continue on.\n\n    if (leaf.marks.has(mark)) return; // Otherwise, determine which offset and characters overlap.\n\n    var start = Math.max(ax, bx);\n    var end = Math.min(ay, by);\n    operations.push({\n      type: 'add_mark',\n      path: path,\n      offset: start,\n      length: end - start,\n      mark: mark\n    });\n  });\n  operations.forEach(function (op) {\n    return editor.applyOperation(op);\n  });\n};\n/**\n * Insert a `fragment` at `index` in a node by `path`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Number} index\n * @param {Fragment} fragment\n */\n\n\nCommands$2.insertFragmentByPath = function (editor, path, index, fragment) {\n  fragment.nodes.forEach(function (node, i) {\n    editor.insertNodeByPath(path, index + i, node);\n  });\n};\n/**\n * Insert a `node` at `index` in a node by `path`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Number} index\n * @param {Node} node\n */\n\n\nCommands$2.insertNodeByPath = function (editor, path, index, node) {\n  editor.applyOperation({\n    type: 'insert_node',\n    path: path.concat(index),\n    node: node\n  });\n};\n/**\n * Insert `text` at `offset` in node by `path`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Number} offset\n * @param {String} text\n * @param {Set<Mark>} marks (optional)\n */\n\n\nCommands$2.insertTextByPath = function (editor, path, offset, text, marks) {\n  var value = editor.value;\n  var decorations = value.decorations,\n      document = value.document;\n  var node = document.assertNode(path);\n  marks = marks || node.getMarksAtIndex(offset);\n  var updated = false;\n  var key = node.key;\n  var decs = decorations.filter(function (dec) {\n    var start = dec.start,\n        end = dec.end,\n        mark = dec.mark;\n    var isAtomic = editor.isAtomic(mark);\n    if (!isAtomic) return true;\n    if (start.key !== key) return true;\n\n    if (start.offset < offset && (end.key !== key || end.offset > offset)) {\n      updated = true;\n      return false;\n    }\n\n    return true;\n  });\n\n  if (updated) {\n    editor.setDecorations(decs);\n  }\n\n  editor.applyOperation({\n    type: 'insert_text',\n    path: path,\n    offset: offset,\n    text: text,\n    marks: marks\n  });\n};\n/**\n * Merge a node by `path` with the previous node.\n *\n * @param {Editor} editor\n * @param {Array} path\n */\n\n\nCommands$2.mergeNodeByPath = function (editor, path) {\n  var value = editor.value;\n  var document = value.document;\n  var original = document.getDescendant(path);\n  var previous = document.getPreviousSibling(path);\n\n  if (!previous) {\n    throw new Error('Unable to merge node with path \"' + path + '\", because it has no previous sibling.');\n  }\n\n  var position = previous.object === 'text' ? previous.text.length : previous.nodes.size;\n  editor.applyOperation({\n    type: 'merge_node',\n    path: path,\n    position: position,\n    // for undos to succeed we only need the type and data because\n    // these are the only properties that get changed in the merge operation\n    properties: {\n      type: original.type,\n      data: original.data\n    },\n    target: null\n  });\n};\n/**\n * Move a node by `path` to a new parent by `newParentPath` and `newIndex`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {String} newParentPath\n * @param {Number} newIndex\n */\n\n\nCommands$2.moveNodeByPath = function (editor, path, newParentPath, newIndex) {\n  // If the operation path and newParentPath are the same,\n  // this should be considered a NOOP\n  if (PathUtils.isEqual(path, newParentPath)) {\n    return editor;\n  }\n\n  var newPath = newParentPath.concat(newIndex);\n\n  if (PathUtils.isEqual(path, newPath)) {\n    return editor;\n  }\n\n  editor.applyOperation({\n    type: 'move_node',\n    path: path,\n    newPath: newPath\n  });\n};\n/**\n * Remove mark from text at `offset` and `length` in node by `path`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Number} offset\n * @param {Number} length\n * @param {Mark} mark\n */\n\n\nCommands$2.removeMarkByPath = function (editor, path, offset, length, mark) {\n  mark = Mark.create(mark);\n  var value = editor.value;\n  var document = value.document;\n  var node = document.assertNode(path);\n  var leaves = node.getLeaves();\n  var operations = [];\n  var bx = offset;\n  var by = offset + length;\n  var o = 0;\n  leaves.forEach(function (leaf) {\n    var ax = o;\n    var ay = ax + leaf.text.length;\n    o += leaf.text.length; // If the leaf doesn't overlap with the operation, continue on.\n\n    if (ay < bx || by < ax) return; // If the leaf already has the mark, continue on.\n\n    if (!leaf.marks.has(mark)) return; // Otherwise, determine which offset and characters overlap.\n\n    var start = Math.max(ax, bx);\n    var end = Math.min(ay, by);\n    operations.push({\n      type: 'remove_mark',\n      path: path,\n      offset: start,\n      length: end - start,\n      mark: mark\n    });\n  });\n  operations.forEach(function (op) {\n    return editor.applyOperation(op);\n  });\n};\n/**\n * Remove all `marks` from node by `path`.\n *\n * @param {Editor} editor\n * @param {Array} path\n */\n\n\nCommands$2.removeAllMarksByPath = function (editor, path) {\n  var state = editor.state;\n  var document = state.document;\n  var node = document.assertNode(path);\n  var texts = node.object === 'text' ? [node] : node.getTextsAsArray();\n  texts.forEach(function (text) {\n    text.getMarksAsArray().forEach(function (mark) {\n      editor.removeMarkByKey(text.key, 0, text.text.length, mark);\n    });\n  });\n};\n/**\n * Remove a node by `path`.\n *\n * @param {Editor} editor\n * @param {Array} path\n */\n\n\nCommands$2.removeNodeByPath = function (editor, path) {\n  var value = editor.value;\n  var document = value.document;\n  var node = document.assertNode(path);\n  editor.applyOperation({\n    type: 'remove_node',\n    path: path,\n    node: node\n  });\n};\n/**\n * Remove text at `offset` and `length` in node by `path`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Number} offset\n * @param {Number} length\n */\n\n\nCommands$2.removeTextByPath = function (editor, path, offset, length) {\n  var value = editor.value;\n  var decorations = value.decorations,\n      document = value.document;\n  var node = document.assertNode(path);\n  var leaves = node.getLeaves();\n  var text = node.text;\n  var updated = false;\n  var key = node.key;\n  var from = offset;\n  var to = offset + length;\n  var decs = decorations.filter(function (dec) {\n    var start = dec.start,\n        end = dec.end,\n        mark = dec.mark;\n    var isAtomic = editor.isAtomic(mark);\n    if (!isAtomic) return true;\n    if (start.key !== key) return true;\n\n    if (start.offset < from && (end.key !== key || end.offset > from)) {\n      updated = true;\n      return false;\n    }\n\n    if (start.offset < to && (end.key !== key || end.offset > to)) {\n      updated = true;\n      return null;\n    }\n\n    return true;\n  });\n\n  if (updated) {\n    editor.setDecorations(decs);\n  }\n\n  var removals = [];\n  var bx = offset;\n  var by = offset + length;\n  var o = 0;\n  leaves.forEach(function (leaf) {\n    var ax = o;\n    var ay = ax + leaf.text.length;\n    o += leaf.text.length; // If the leaf doesn't overlap with the removal, continue on.\n\n    if (ay < bx || by < ax) return; // Otherwise, determine which offset and characters overlap.\n\n    var start = Math.max(ax, bx);\n    var end = Math.min(ay, by);\n    var string = text.slice(start, end);\n    removals.push({\n      type: 'remove_text',\n      path: path,\n      offset: start,\n      text: string,\n      marks: leaf.marks\n    });\n  }); // Apply in reverse order, so subsequent removals don't impact previous ones.\n\n  removals.reverse().forEach(function (op) {\n    return editor.applyOperation(op);\n  });\n};\n/**\n`* Replace a `node` with another `node`\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Object|Node} node\n */\n\n\nCommands$2.replaceNodeByPath = function (editor, path, newNode) {\n  newNode = Node.create(newNode);\n  var index = path.last();\n  var parentPath = PathUtils.lift(path);\n  editor.withoutNormalizing(function () {\n    editor.removeNodeByPath(path);\n    editor.insertNodeByPath(parentPath, index, newNode);\n  });\n};\n/**\n * Replace A Length of Text with another string or text\n * @param {Editor} editor\n * @param {String} key\n * @param {Number} offset\n * @param {Number} length\n * @param {string} text\n * @param {Set<Mark>} marks (optional)\n */\n\n\nCommands$2.replaceTextByPath = function (editor, path, offset, length, text, marks) {\n  var document = editor.value.document;\n  var node = document.assertNode(path);\n\n  if (length + offset > node.text.length) {\n    length = node.text.length - offset;\n  }\n\n  var range = document.createRange({\n    anchor: {\n      path: path,\n      offset: offset\n    },\n    focus: {\n      path: path,\n      offset: offset + length\n    }\n  });\n  var activeMarks = document.getActiveMarksAtRange(range);\n  editor.withoutNormalizing(function () {\n    editor.removeTextByPath(path, offset, length);\n\n    if (!marks) {\n      // Do not use mark at index when marks and activeMarks are both empty\n      marks = activeMarks ? activeMarks : [];\n    } else if (activeMarks) {\n      // Do not use `has` because we may want to reset marks like font-size with\n      // an updated data;\n      activeMarks = activeMarks.filter(function (activeMark) {\n        return !marks.find(function (m) {\n          return activeMark.type === m.type;\n        });\n      });\n      marks = activeMarks.merge(marks);\n    }\n\n    editor.insertTextByPath(path, offset, text, marks);\n  });\n};\n/**\n * Set `newProperties` on mark on text at `offset` and `length` in node by `path`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Number} offset\n * @param {Number} length\n * @param {Object|Mark} properties\n * @param {Object} newProperties\n */\n\n\nCommands$2.setMarkByPath = function (editor, path, offset, length, properties, newProperties) {\n  // we call Mark.create() here because we need the complete previous mark instance\n  properties = Mark.create(properties);\n  newProperties = Mark.createProperties(newProperties);\n  editor.applyOperation({\n    type: 'set_mark',\n    path: path,\n    offset: offset,\n    length: length,\n    properties: properties,\n    newProperties: newProperties\n  });\n};\n/**\n * Set `properties` on a node by `path`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Object|String} newProperties\n */\n\n\nCommands$2.setNodeByPath = function (editor, path, newProperties) {\n  var value = editor.value;\n  var document = value.document;\n  var node = document.assertNode(path);\n  newProperties = Node.createProperties(newProperties);\n  var prevProperties = pick(node, Object.keys(newProperties));\n  editor.applyOperation({\n    type: 'set_node',\n    path: path,\n    properties: prevProperties,\n    newProperties: newProperties\n  });\n};\n/**\n * Insert `text` at `offset` in node by `path`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {String} text\n * @param {Set<Mark>} marks (optional)\n */\n\n\nCommands$2.setTextByPath = function (editor, path, text, marks) {\n  var value = editor.value;\n  var document = value.document;\n  var node = document.assertNode(path);\n  var end = node.text.length;\n  editor.replaceTextByPath(path, 0, end, text, marks);\n};\n/**\n * Split a node by `path` at `position`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Number} position\n * @param {Object} options\n */\n\n\nCommands$2.splitNodeByPath = function (editor, path, position) {\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  var _options$target = options.target,\n      target = _options$target === undefined ? null : _options$target;\n  var value = editor.value;\n  var document = value.document;\n  var node = document.getDescendant(path);\n  editor.applyOperation({\n    type: 'split_node',\n    path: path,\n    position: position,\n    target: target,\n    properties: {\n      type: node.type,\n      data: node.data\n    }\n  });\n};\n/**\n * Split a node deeply down the tree by `path`, `textPath` and `textOffset`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Array} textPath\n * @param {Number} textOffset\n */\n\n\nCommands$2.splitDescendantsByPath = function (editor, path, textPath, textOffset) {\n  if (path.equals(textPath)) {\n    editor.splitNodeByPath(textPath, textOffset);\n    return;\n  }\n\n  var value = editor.value;\n  var document = value.document;\n  var node = document.assertNode(path);\n  var text = document.assertNode(textPath);\n  var ancestors = document.getAncestors(textPath);\n  var nodes = ancestors.skipUntil(function (a) {\n    return a.key === node.key;\n  }).reverse().unshift(text);\n  var previous = void 0;\n  var index = void 0;\n  editor.withoutNormalizing(function () {\n    nodes.forEach(function (n) {\n      var prevIndex = index == null ? null : index;\n      index = previous ? n.nodes.indexOf(previous) + 1 : textOffset;\n      previous = n;\n      editor.splitNodeByKey(n.key, index, {\n        target: prevIndex\n      });\n    });\n  });\n};\n/**\n * Unwrap content from an inline parent with `properties`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Object|String} properties\n */\n\n\nCommands$2.unwrapInlineByPath = function (editor, path, properties) {\n  var value = editor.value;\n  var document = value.document,\n      selection = value.selection;\n  var node = document.assertNode(path);\n  var first = node.getFirstText();\n  var last = node.getLastText();\n  var range = selection.moveToRangeOfNode(first, last);\n  editor.unwrapInlineAtRange(range, properties);\n};\n/**\n * Unwrap content from a block parent with `properties`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Object|String} properties\n */\n\n\nCommands$2.unwrapBlockByPath = function (editor, path, properties) {\n  var value = editor.value;\n  var document = value.document,\n      selection = value.selection;\n  var node = document.assertNode(path);\n  var first = node.getFirstText();\n  var last = node.getLastText();\n  var range = selection.moveToRangeOfNode(first, last);\n  editor.unwrapBlockAtRange(range, properties);\n};\n/**\n * Unwrap a single node from its parent.\n *\n * If the node is surrounded with siblings, its parent will be\n * split. If the node is the only child, the parent is removed, and\n * simply replaced by the node itself.  Cannot unwrap a root node.\n *\n * @param {Editor} editor\n * @param {Array} path\n */\n\n\nCommands$2.unwrapNodeByPath = function (editor, path) {\n  var value = editor.value;\n  var document = value.document;\n  document.assertNode(path);\n  var parentPath = PathUtils.lift(path);\n  var parent = document.assertNode(parentPath);\n  var index = path.last();\n  var parentIndex = parentPath.last();\n  var grandPath = PathUtils.lift(parentPath);\n  var isFirst = index === 0;\n  var isLast = index === parent.nodes.size - 1;\n  editor.withoutNormalizing(function () {\n    if (parent.nodes.size === 1) {\n      editor.moveNodeByPath(path, grandPath, parentIndex + 1);\n      editor.removeNodeByPath(parentPath);\n    } else if (isFirst) {\n      editor.moveNodeByPath(path, grandPath, parentIndex);\n    } else if (isLast) {\n      editor.moveNodeByPath(path, grandPath, parentIndex + 1);\n    } else {\n      var updatedPath = PathUtils.increment(path, 1, parentPath.size - 1);\n      updatedPath = updatedPath.set(updatedPath.size - 1, 0);\n      editor.splitNodeByPath(parentPath, index);\n      editor.moveNodeByPath(updatedPath, grandPath, parentIndex + 1);\n    }\n  });\n};\n/**\n * Unwrap all of the children of a node, by removing the node and replacing it\n * with the children in the tree.\n *\n * @param {Editor} editor\n * @param {Array} path\n */\n\n\nCommands$2.unwrapChildrenByPath = function (editor, path) {\n  path = PathUtils.create(path);\n  var value = editor.value;\n  var document = value.document;\n  var node = document.assertNode(path);\n  var parentPath = PathUtils.lift(path);\n  var index = path.last();\n  var nodes = node.nodes;\n  editor.withoutNormalizing(function () {\n    nodes.reverse().forEach(function (child, i) {\n      var childIndex = nodes.size - i - 1;\n      var childPath = path.push(childIndex);\n      editor.moveNodeByPath(childPath, parentPath, index + 1);\n    });\n    editor.removeNodeByPath(path);\n  });\n};\n/**\n * Wrap a node in a block with `properties`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Block|Object|String} block\n */\n\n\nCommands$2.wrapBlockByPath = function (editor, path, block) {\n  block = Block.create(block);\n  block = block.set('nodes', block.nodes.clear());\n  var parentPath = PathUtils.lift(path);\n  var index = path.last();\n  var newPath = PathUtils.increment(path);\n  editor.withoutNormalizing(function () {\n    editor.insertNodeByPath(parentPath, index, block);\n    editor.moveNodeByPath(newPath, path, 0);\n  });\n};\n/**\n * Wrap a node in an inline with `properties`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Block|Object|String} inline\n */\n\n\nCommands$2.wrapInlineByPath = function (editor, path, inline) {\n  inline = Inline.create(inline);\n  inline = inline.set('nodes', inline.nodes.clear());\n  var parentPath = PathUtils.lift(path);\n  var index = path.last();\n  var newPath = PathUtils.increment(path);\n  editor.withoutNormalizing(function () {\n    editor.insertNodeByPath(parentPath, index, inline);\n    editor.moveNodeByPath(newPath, path, 0);\n  });\n};\n/**\n * Wrap a node by `path` with `node`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Node|Object} node\n */\n\n\nCommands$2.wrapNodeByPath = function (editor, path, node) {\n  node = Node.create(node);\n\n  if (node.object === 'block') {\n    editor.wrapBlockByPath(path, node);\n  } else if (node.object === 'inline') {\n    editor.wrapInlineByPath(path, node);\n  }\n};\n/**\n * Mix in `*ByKey` variants.\n */\n\n\nvar COMMANDS = ['addMark', 'insertFragment', 'insertNode', 'insertText', 'mergeNode', 'removeAllMarks', 'removeMark', 'removeNode', 'removeText', 'replaceNode', 'replaceText', 'setMark', 'setNode', 'setText', 'splitNode', 'unwrapBlock', 'unwrapChildren', 'unwrapInline', 'unwrapNode', 'wrapBlock', 'wrapInline', 'wrapNode'];\n\nvar _loop = function _loop(method) {\n  Commands$2[method + 'ByKey'] = function (editor, key) {\n    for (var _len3 = arguments.length, args = Array(_len3 > 2 ? _len3 - 2 : 0), _key3 = 2; _key3 < _len3; _key3++) {\n      args[_key3 - 2] = arguments[_key3];\n    }\n\n    var value = editor.value;\n    var document = value.document;\n    var path = document.assertPath(key);\n    editor[method + 'ByPath'].apply(editor, [path].concat(args));\n  };\n};\n\nvar _iteratorNormalCompletion = true;\nvar _didIteratorError = false;\nvar _iteratorError = undefined;\n\ntry {\n  for (var _iterator = COMMANDS[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n    var method = _step.value;\n\n    _loop(method);\n  } // Moving nodes takes two keys, so it's slightly different.\n\n} catch (err) {\n  _didIteratorError = true;\n  _iteratorError = err;\n} finally {\n  try {\n    if (!_iteratorNormalCompletion && _iterator.return) {\n      _iterator.return();\n    }\n  } finally {\n    if (_didIteratorError) {\n      throw _iteratorError;\n    }\n  }\n}\n\nCommands$2.moveNodeByKey = function (editor, key, newKey) {\n  for (var _len = arguments.length, args = Array(_len > 3 ? _len - 3 : 0), _key = 3; _key < _len; _key++) {\n    args[_key - 3] = arguments[_key];\n  }\n\n  var value = editor.value;\n  var document = value.document;\n  var path = document.assertPath(key);\n  var newPath = document.assertPath(newKey);\n  editor.moveNodeByPath.apply(editor, [path, newPath].concat(args));\n}; // Splitting descendants takes two keys, so it's slightly different.\n\n\nCommands$2.splitDescendantsByKey = function (editor, key, textKey) {\n  for (var _len2 = arguments.length, args = Array(_len2 > 3 ? _len2 - 3 : 0), _key2 = 3; _key2 < _len2; _key2++) {\n    args[_key2 - 3] = arguments[_key2];\n  }\n\n  var value = editor.value;\n  var document = value.document;\n  var path = document.assertPath(key);\n  var textPath = document.assertPath(textKey);\n  editor.splitDescendantsByPath.apply(editor, [path, textPath].concat(args));\n};\n/**\n * Export.\n *\n * @type {Object}\n */\n\n\nvar Commands$3 = {};\n/**\n * Save an `operation` into the history.\n *\n * @param {Editor} editor\n * @param {Object} operation\n */\n\nCommands$3.save = function (editor, operation) {\n  var operations = editor.operations,\n      value = editor.value;\n  var data = value.data;\n  var _editor$tmp = editor.tmp,\n      save = _editor$tmp.save,\n      merge = _editor$tmp.merge;\n  if (save === false) return;\n  var undos = data.get('undos') || List();\n  var lastBatch = undos.last();\n  var lastOperation = lastBatch && lastBatch.last(); // If `merge` is non-commital, and this is not the first operation in a new\n  // editor, then merge, otherwise merge based on the last operation.\n\n  if (merge == null) {\n    if (operations.size !== 0) {\n      merge = true;\n    } else {\n      merge = shouldMerge(operation, lastOperation);\n    }\n  } // If the `merge` flag is true, add the operation to the last batch.\n\n\n  if (merge && lastBatch) {\n    var batch = lastBatch.push(operation);\n    undos = undos.pop();\n    undos = undos.push(batch);\n  } else {\n    // Otherwise, create a new batch with the operation.\n    var _batch = List([operation]);\n\n    undos = undos.push(_batch);\n  } // Constrain the history to 100 entries for memory's sake.\n\n\n  if (undos.size > 100) {\n    undos = undos.takeLast(100);\n  } // Clear the redos and update the history.\n\n\n  editor.withoutSaving(function () {\n    var redos = List();\n    var newData = data.set('undos', undos).set('redos', redos);\n    editor.setData(newData);\n  });\n};\n/**\n * Redo to the next value in the history.\n *\n * @param {Editor} editor\n */\n\n\nCommands$3.redo = function (editor) {\n  var value = editor.value;\n  var data = value.data;\n  var redos = data.get('redos') || List();\n  var undos = data.get('undos') || List();\n  var batch = redos.last();\n  if (!batch) return;\n  editor.withoutSaving(function () {\n    editor.withoutNormalizing(function () {\n      // Replay the batch of operations.\n      batch.forEach(function (op) {\n        var _op = op,\n            type = _op.type,\n            properties = _op.properties; // When the operation mutates the selection, omit its `isFocused` value to\n        // prevent the editor focus from changing during redoing.\n\n        if (type === 'set_selection') {\n          op = op.set('properties', omit(properties, 'isFocused'));\n        }\n\n        editor.applyOperation(op);\n      }); // Shift the next value into the undo stack.\n\n      redos = redos.pop();\n      undos = undos.push(batch);\n      var newData = data.set('undos', undos).set('redos', redos);\n      editor.setData(newData);\n    });\n  });\n};\n/**\n * Undo the previous operations in the history.\n *\n * @param {Editor} editor\n */\n\n\nCommands$3.undo = function (editor) {\n  var value = editor.value;\n  var data = value.data;\n  var redos = data.get('redos') || List();\n  var undos = data.get('undos') || List();\n  var batch = undos.last();\n  if (!batch) return;\n  editor.withoutSaving(function () {\n    editor.withoutNormalizing(function () {\n      // Replay the inverse of the previous operations.\n      batch.slice().reverse().map(function (op) {\n        return op.invert();\n      }).forEach(function (inverse) {\n        var _inverse = inverse,\n            type = _inverse.type,\n            properties = _inverse.properties; // When the operation mutates the selection, omit its `isFocused` value to\n        // prevent the editor focus from changing during undoing.\n\n        if (type === 'set_selection') {\n          inverse = inverse.set('properties', omit(properties, 'isFocused'));\n        }\n\n        editor.applyOperation(inverse);\n      }); // Shift the previous operations into the redo stack.\n\n      redos = redos.push(batch);\n      undos = undos.pop();\n      var newData = data.set('undos', undos).set('redos', redos);\n      editor.setData(newData);\n    });\n  });\n};\n/**\n * Apply a series of changes inside a synchronous `fn`, without merging any of\n * the new operations into previous save point in the history.\n *\n * @param {Editor} editor\n * @param {Function} fn\n */\n\n\nCommands$3.withoutMerging = function (editor, fn) {\n  var value = editor.tmp.merge;\n  editor.tmp.merge = false;\n  fn(editor);\n  editor.tmp.merge = value;\n};\n/**\n * Apply a series of changes inside a synchronous `fn`, without saving any of\n * their operations into the history.\n *\n * @param {Editor} editor\n * @param {Function} fn\n */\n\n\nCommands$3.withoutSaving = function (editor, fn) {\n  var value = editor.tmp.save;\n  editor.tmp.save = false;\n  fn(editor);\n  editor.tmp.save = value;\n};\n/**\n * Check whether to merge a new operation `o` into the previous operation `p`.\n *\n * @param {Object} o\n * @param {Object} p\n * @return {Boolean}\n */\n\n\nfunction shouldMerge(o, p) {\n  if (!p) return false;\n  var merge = o.type === 'set_selection' && p.type === 'set_selection' || o.type === 'insert_text' && p.type === 'insert_text' && o.offset === p.offset + p.text.length && o.path.equals(p.path) || o.type === 'remove_text' && p.type === 'remove_text' && o.offset + o.text.length === p.offset && o.path.equals(p.path);\n  return merge;\n}\n/**\n * Export.\n *\n * @type {Object}\n */\n\n\nvar Commands$4 = {};\n\nCommands$4.blur = function (editor) {\n  editor.select({\n    isFocused: false\n  });\n};\n\nCommands$4.deselect = function (editor) {\n  var range = Selection.create();\n  editor.select(range);\n};\n\nCommands$4.focus = function (editor) {\n  editor.select({\n    isFocused: true\n  });\n};\n\nCommands$4.flip = function (editor) {\n  editor.command(proxy, 'flip');\n};\n\nCommands$4.moveAnchorBackward = function (editor) {\n  for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    args[_key - 1] = arguments[_key];\n  }\n\n  editor.command.apply(editor, [pointBackward, 'anchor'].concat(args));\n};\n\nCommands$4.moveAnchorWordBackward = function (editor) {\n  for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n    args[_key2 - 1] = arguments[_key2];\n  }\n\n  editor.command.apply(editor, [pointWordBackward, 'anchor'].concat(args));\n};\n\nCommands$4.moveAnchorForward = function (editor) {\n  for (var _len3 = arguments.length, args = Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n    args[_key3 - 1] = arguments[_key3];\n  }\n\n  editor.command.apply(editor, [pointForward, 'anchor'].concat(args));\n};\n\nCommands$4.moveAnchorWordForward = function (editor) {\n  for (var _len4 = arguments.length, args = Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n    args[_key4 - 1] = arguments[_key4];\n  }\n\n  editor.command.apply(editor, [pointWordForward, 'anchor'].concat(args));\n};\n\nCommands$4.moveAnchorTo = function (editor) {\n  for (var _len5 = arguments.length, args = Array(_len5 > 1 ? _len5 - 1 : 0), _key5 = 1; _key5 < _len5; _key5++) {\n    args[_key5 - 1] = arguments[_key5];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveAnchorTo'].concat(args));\n};\n\nCommands$4.moveAnchorToEndOfBlock = function (editor) {\n  editor.command(pointEdgeObject, 'anchor', 'end', 'block');\n};\n\nCommands$4.moveAnchorToEndOfInline = function (editor) {\n  editor.command(pointEdgeObject, 'anchor', 'end', 'inline');\n};\n\nCommands$4.moveAnchorToEndOfDocument = function (editor) {\n  editor.moveAnchorToEndOfNode(editor.value.document).moveToAnchor();\n};\n\nCommands$4.moveAnchorToEndOfNextBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'anchor', 'end', 'next', 'block');\n};\n\nCommands$4.moveAnchorToEndOfNextInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'anchor', 'end', 'next', 'inline');\n};\n\nCommands$4.moveAnchorToEndOfNextText = function (editor) {\n  editor.command(pointEdgeSideObject, 'anchor', 'end', 'next', 'text');\n};\n\nCommands$4.moveAnchorToEndOfNode = function (editor) {\n  for (var _len6 = arguments.length, args = Array(_len6 > 1 ? _len6 - 1 : 0), _key6 = 1; _key6 < _len6; _key6++) {\n    args[_key6 - 1] = arguments[_key6];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveAnchorToEndOfNode'].concat(args));\n};\n\nCommands$4.moveAnchorToEndOfPreviousBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'anchor', 'end', 'previous', 'block');\n};\n\nCommands$4.moveAnchorToEndOfPreviousInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'anchor', 'end', 'previous', 'inline');\n};\n\nCommands$4.moveAnchorToEndOfPreviousText = function (editor) {\n  editor.command(pointEdgeSideObject, 'anchor', 'end', 'previous', 'text');\n};\n\nCommands$4.moveAnchorToEndOfText = function (editor) {\n  editor.command(pointEdgeObject, 'anchor', 'end', 'text');\n};\n\nCommands$4.moveAnchorToStartOfBlock = function (editor) {\n  editor.command(pointEdgeObject, 'anchor', 'start', 'block');\n};\n\nCommands$4.moveAnchorToStartOfDocument = function (editor) {\n  editor.moveAnchorToStartOfNode(editor.value.document).moveToAnchor();\n};\n\nCommands$4.moveAnchorToStartOfInline = function (editor) {\n  editor.command(pointEdgeObject, 'anchor', 'start', 'inline');\n};\n\nCommands$4.moveAnchorToStartOfNextBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'anchor', 'start', 'next', 'block');\n};\n\nCommands$4.moveAnchorToStartOfNextInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'anchor', 'start', 'next', 'inline');\n};\n\nCommands$4.moveAnchorToStartOfNextText = function (editor) {\n  editor.command(pointEdgeSideObject, 'anchor', 'start', 'next', 'text');\n};\n\nCommands$4.moveAnchorToStartOfNode = function (editor) {\n  for (var _len7 = arguments.length, args = Array(_len7 > 1 ? _len7 - 1 : 0), _key7 = 1; _key7 < _len7; _key7++) {\n    args[_key7 - 1] = arguments[_key7];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveAnchorToStartOfNode'].concat(args));\n};\n\nCommands$4.moveAnchorToStartOfPreviousBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'anchor', 'start', 'previous', 'block');\n};\n\nCommands$4.moveAnchorToStartOfPreviousInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'anchor', 'start', 'previous', 'inline');\n};\n\nCommands$4.moveAnchorToStartOfPreviousText = function (editor) {\n  editor.command(pointEdgeSideObject, 'anchor', 'start', 'previous', 'text');\n};\n\nCommands$4.moveAnchorToStartOfText = function (editor) {\n  editor.command(pointEdgeObject, 'anchor', 'start', 'text');\n};\n\nCommands$4.moveBackward = function (editor) {\n  var _editor$moveAnchorBac;\n\n  for (var _len8 = arguments.length, args = Array(_len8 > 1 ? _len8 - 1 : 0), _key8 = 1; _key8 < _len8; _key8++) {\n    args[_key8 - 1] = arguments[_key8];\n  }\n\n  (_editor$moveAnchorBac = editor.moveAnchorBackward.apply(editor, args)).moveFocusBackward.apply(_editor$moveAnchorBac, args);\n};\n\nCommands$4.moveWordBackward = function (editor) {\n  for (var _len9 = arguments.length, args = Array(_len9 > 1 ? _len9 - 1 : 0), _key9 = 1; _key9 < _len9; _key9++) {\n    args[_key9 - 1] = arguments[_key9];\n  }\n\n  editor.moveFocusWordBackward.apply(editor, args).moveToFocus();\n};\n\nCommands$4.moveEndBackward = function (editor) {\n  for (var _len10 = arguments.length, args = Array(_len10 > 1 ? _len10 - 1 : 0), _key10 = 1; _key10 < _len10; _key10++) {\n    args[_key10 - 1] = arguments[_key10];\n  }\n\n  editor.command.apply(editor, [pointBackward, 'end'].concat(args));\n};\n\nCommands$4.moveEndWordBackward = function (editor) {\n  for (var _len11 = arguments.length, args = Array(_len11 > 1 ? _len11 - 1 : 0), _key11 = 1; _key11 < _len11; _key11++) {\n    args[_key11 - 1] = arguments[_key11];\n  }\n\n  editor.command.apply(editor, [pointWordBackward, 'end'].concat(args));\n};\n\nCommands$4.moveEndForward = function (editor) {\n  for (var _len12 = arguments.length, args = Array(_len12 > 1 ? _len12 - 1 : 0), _key12 = 1; _key12 < _len12; _key12++) {\n    args[_key12 - 1] = arguments[_key12];\n  }\n\n  editor.command.apply(editor, [pointForward, 'end'].concat(args));\n};\n\nCommands$4.moveEndWordForward = function (editor) {\n  for (var _len13 = arguments.length, args = Array(_len13 > 1 ? _len13 - 1 : 0), _key13 = 1; _key13 < _len13; _key13++) {\n    args[_key13 - 1] = arguments[_key13];\n  }\n\n  editor.command.apply(editor, [pointWordForward, 'end'].concat(args));\n};\n\nCommands$4.moveEndTo = function (editor) {\n  for (var _len14 = arguments.length, args = Array(_len14 > 1 ? _len14 - 1 : 0), _key14 = 1; _key14 < _len14; _key14++) {\n    args[_key14 - 1] = arguments[_key14];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveEndTo'].concat(args));\n};\n\nCommands$4.moveEndToEndOfBlock = function (editor) {\n  editor.command(pointEdgeObject, 'end', 'end', 'block');\n};\n\nCommands$4.moveEndToEndOfDocument = function (editor) {\n  editor.moveEndToEndOfNode(editor.value.document).moveToEnd();\n};\n\nCommands$4.moveEndToEndOfInline = function (editor) {\n  editor.command(pointEdgeObject, 'end', 'end', 'inline');\n};\n\nCommands$4.moveEndToEndOfNextBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'end', 'end', 'next', 'block');\n};\n\nCommands$4.moveEndToEndOfNextInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'end', 'end', 'next', 'inline');\n};\n\nCommands$4.moveEndToEndOfNextText = function (editor) {\n  editor.command(pointEdgeSideObject, 'end', 'end', 'next', 'text');\n};\n\nCommands$4.moveEndToEndOfNode = function (editor) {\n  for (var _len15 = arguments.length, args = Array(_len15 > 1 ? _len15 - 1 : 0), _key15 = 1; _key15 < _len15; _key15++) {\n    args[_key15 - 1] = arguments[_key15];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveEndToEndOfNode'].concat(args));\n};\n\nCommands$4.moveEndToEndOfPreviousBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'end', 'end', 'previous', 'block');\n};\n\nCommands$4.moveEndToEndOfPreviousInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'end', 'end', 'previous', 'inline');\n};\n\nCommands$4.moveEndToEndOfPreviousText = function (editor) {\n  editor.command(pointEdgeSideObject, 'end', 'end', 'previous', 'text');\n};\n\nCommands$4.moveEndToEndOfText = function (editor) {\n  editor.command(pointEdgeObject, 'end', 'end', 'text');\n};\n\nCommands$4.moveEndToStartOfBlock = function (editor) {\n  editor.command(pointEdgeObject, 'end', 'start', 'block');\n};\n\nCommands$4.moveEndToStartOfDocument = function (editor) {\n  editor.moveEndToStartOfNode(editor.value.document).moveToEnd();\n};\n\nCommands$4.moveEndToStartOfInline = function (editor) {\n  editor.command(pointEdgeObject, 'end', 'start', 'inline');\n};\n\nCommands$4.moveEndToStartOfNextBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'end', 'start', 'next', 'block');\n};\n\nCommands$4.moveEndToStartOfNextInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'end', 'start', 'next', 'inline');\n};\n\nCommands$4.moveEndToStartOfNextText = function (editor) {\n  editor.command(pointEdgeSideObject, 'end', 'start', 'next', 'text');\n};\n\nCommands$4.moveEndToStartOfNode = function (editor) {\n  for (var _len16 = arguments.length, args = Array(_len16 > 1 ? _len16 - 1 : 0), _key16 = 1; _key16 < _len16; _key16++) {\n    args[_key16 - 1] = arguments[_key16];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveEndToStartOfNode'].concat(args));\n};\n\nCommands$4.moveEndToStartOfPreviousBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'end', 'start', 'previous', 'block');\n};\n\nCommands$4.moveEndToStartOfPreviousInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'end', 'start', 'previous', 'inline');\n};\n\nCommands$4.moveEndToStartOfPreviousText = function (editor) {\n  editor.command(pointEdgeSideObject, 'end', 'start', 'previous', 'text');\n};\n\nCommands$4.moveEndToStartOfText = function (editor) {\n  editor.command(pointEdgeObject, 'end', 'start', 'text');\n};\n\nCommands$4.moveFocusBackward = function (editor) {\n  for (var _len17 = arguments.length, args = Array(_len17 > 1 ? _len17 - 1 : 0), _key17 = 1; _key17 < _len17; _key17++) {\n    args[_key17 - 1] = arguments[_key17];\n  }\n\n  editor.command.apply(editor, [pointBackward, 'focus'].concat(args));\n};\n\nCommands$4.moveFocusWordBackward = function (editor) {\n  for (var _len18 = arguments.length, args = Array(_len18 > 1 ? _len18 - 1 : 0), _key18 = 1; _key18 < _len18; _key18++) {\n    args[_key18 - 1] = arguments[_key18];\n  }\n\n  editor.command.apply(editor, [pointWordBackward, 'focus'].concat(args));\n};\n\nCommands$4.moveFocusForward = function (editor) {\n  for (var _len19 = arguments.length, args = Array(_len19 > 1 ? _len19 - 1 : 0), _key19 = 1; _key19 < _len19; _key19++) {\n    args[_key19 - 1] = arguments[_key19];\n  }\n\n  editor.command.apply(editor, [pointForward, 'focus'].concat(args));\n};\n\nCommands$4.moveFocusWordForward = function (editor) {\n  for (var _len20 = arguments.length, args = Array(_len20 > 1 ? _len20 - 1 : 0), _key20 = 1; _key20 < _len20; _key20++) {\n    args[_key20 - 1] = arguments[_key20];\n  }\n\n  editor.command.apply(editor, [pointWordForward, 'focus'].concat(args));\n};\n\nCommands$4.moveFocusTo = function (editor) {\n  for (var _len21 = arguments.length, args = Array(_len21 > 1 ? _len21 - 1 : 0), _key21 = 1; _key21 < _len21; _key21++) {\n    args[_key21 - 1] = arguments[_key21];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveFocusTo'].concat(args));\n};\n\nCommands$4.moveFocusToEndOfBlock = function (editor) {\n  editor.command(pointEdgeObject, 'focus', 'end', 'block');\n};\n\nCommands$4.moveFocusToEndOfDocument = function (editor) {\n  editor.moveFocusToEndOfNode(editor.value.document).moveToFocus();\n};\n\nCommands$4.moveFocusToEndOfInline = function (editor) {\n  editor.command(pointEdgeObject, 'focus', 'end', 'inline');\n};\n\nCommands$4.moveFocusToEndOfNextBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'focus', 'end', 'next', 'block');\n};\n\nCommands$4.moveFocusToEndOfNextInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'focus', 'end', 'next', 'inline');\n};\n\nCommands$4.moveFocusToEndOfNextText = function (editor) {\n  editor.command(pointEdgeSideObject, 'focus', 'end', 'next', 'text');\n};\n\nCommands$4.moveFocusToEndOfNode = function (editor) {\n  for (var _len22 = arguments.length, args = Array(_len22 > 1 ? _len22 - 1 : 0), _key22 = 1; _key22 < _len22; _key22++) {\n    args[_key22 - 1] = arguments[_key22];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveFocusToEndOfNode'].concat(args));\n};\n\nCommands$4.moveFocusToEndOfPreviousBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'focus', 'end', 'previous', 'block');\n};\n\nCommands$4.moveFocusToEndOfPreviousInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'focus', 'end', 'previous', 'inline');\n};\n\nCommands$4.moveFocusToEndOfPreviousText = function (editor) {\n  editor.command(pointEdgeSideObject, 'focus', 'end', 'previous', 'text');\n};\n\nCommands$4.moveFocusToEndOfText = function (editor) {\n  editor.command(pointEdgeObject, 'focus', 'end', 'text');\n};\n\nCommands$4.moveFocusToStartOfBlock = function (editor) {\n  editor.command(pointEdgeObject, 'focus', 'start', 'block');\n};\n\nCommands$4.moveFocusToStartOfDocument = function (editor) {\n  editor.moveFocusToStartOfNode(editor.value.document).moveToFocus();\n};\n\nCommands$4.moveFocusToStartOfInline = function (editor) {\n  editor.command(pointEdgeObject, 'focus', 'start', 'inline');\n};\n\nCommands$4.moveFocusToStartOfNextBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'focus', 'start', 'next', 'block');\n};\n\nCommands$4.moveFocusToStartOfNextInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'focus', 'start', 'next', 'inline');\n};\n\nCommands$4.moveFocusToStartOfNextText = function (editor) {\n  editor.command(pointEdgeSideObject, 'focus', 'start', 'next', 'text');\n};\n\nCommands$4.moveFocusToStartOfNode = function (editor) {\n  for (var _len23 = arguments.length, args = Array(_len23 > 1 ? _len23 - 1 : 0), _key23 = 1; _key23 < _len23; _key23++) {\n    args[_key23 - 1] = arguments[_key23];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveFocusToStartOfNode'].concat(args));\n};\n\nCommands$4.moveFocusToStartOfPreviousBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'focus', 'start', 'previous', 'block');\n};\n\nCommands$4.moveFocusToStartOfPreviousInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'focus', 'start', 'previous', 'inline');\n};\n\nCommands$4.moveFocusToStartOfPreviousText = function (editor) {\n  editor.command(pointEdgeSideObject, 'focus', 'start', 'previous', 'text');\n};\n\nCommands$4.moveFocusToStartOfText = function (editor) {\n  editor.command(pointEdgeObject, 'focus', 'start', 'text');\n};\n\nCommands$4.moveForward = function (editor) {\n  var _editor$moveAnchorFor;\n\n  for (var _len24 = arguments.length, args = Array(_len24 > 1 ? _len24 - 1 : 0), _key24 = 1; _key24 < _len24; _key24++) {\n    args[_key24 - 1] = arguments[_key24];\n  }\n\n  (_editor$moveAnchorFor = editor.moveAnchorForward.apply(editor, args)).moveFocusForward.apply(_editor$moveAnchorFor, args);\n};\n\nCommands$4.moveWordForward = function (editor) {\n  var _editor$moveFocusWord;\n\n  for (var _len25 = arguments.length, args = Array(_len25 > 1 ? _len25 - 1 : 0), _key25 = 1; _key25 < _len25; _key25++) {\n    args[_key25 - 1] = arguments[_key25];\n  }\n\n  (_editor$moveFocusWord = editor.moveFocusWordForward.apply(editor, args)).moveToFocus.apply(_editor$moveFocusWord, args);\n};\n\nCommands$4.moveStartBackward = function (editor) {\n  for (var _len26 = arguments.length, args = Array(_len26 > 1 ? _len26 - 1 : 0), _key26 = 1; _key26 < _len26; _key26++) {\n    args[_key26 - 1] = arguments[_key26];\n  }\n\n  editor.command.apply(editor, [pointBackward, 'start'].concat(args));\n};\n\nCommands$4.moveStartWordBackward = function (editor) {\n  for (var _len27 = arguments.length, args = Array(_len27 > 1 ? _len27 - 1 : 0), _key27 = 1; _key27 < _len27; _key27++) {\n    args[_key27 - 1] = arguments[_key27];\n  }\n\n  editor.command.apply(editor, [pointWordBackward, 'start'].concat(args));\n};\n\nCommands$4.moveStartForward = function (editor) {\n  for (var _len28 = arguments.length, args = Array(_len28 > 1 ? _len28 - 1 : 0), _key28 = 1; _key28 < _len28; _key28++) {\n    args[_key28 - 1] = arguments[_key28];\n  }\n\n  editor.command.apply(editor, [pointForward, 'start'].concat(args));\n};\n\nCommands$4.moveStartWordForward = function (editor) {\n  for (var _len29 = arguments.length, args = Array(_len29 > 1 ? _len29 - 1 : 0), _key29 = 1; _key29 < _len29; _key29++) {\n    args[_key29 - 1] = arguments[_key29];\n  }\n\n  editor.command.apply(editor, [pointWordForward, 'start'].concat(args));\n};\n\nCommands$4.moveStartTo = function (editor) {\n  for (var _len30 = arguments.length, args = Array(_len30 > 1 ? _len30 - 1 : 0), _key30 = 1; _key30 < _len30; _key30++) {\n    args[_key30 - 1] = arguments[_key30];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveStartTo'].concat(args));\n};\n\nCommands$4.moveStartToEndOfBlock = function (editor) {\n  editor.command(pointEdgeObject, 'start', 'end', 'block');\n};\n\nCommands$4.moveStartToEndOfDocument = function (editor) {\n  editor.moveStartToEndOfNode(editor.value.document).moveToStart();\n};\n\nCommands$4.moveStartToEndOfInline = function (editor) {\n  editor.command(pointEdgeObject, 'start', 'end', 'inline');\n};\n\nCommands$4.moveStartToEndOfNextBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'start', 'end', 'next', 'block');\n};\n\nCommands$4.moveStartToEndOfNextInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'start', 'end', 'next', 'inline');\n};\n\nCommands$4.moveStartToEndOfNextText = function (editor) {\n  editor.command(pointEdgeSideObject, 'start', 'end', 'next', 'text');\n};\n\nCommands$4.moveStartToEndOfNode = function (editor) {\n  for (var _len31 = arguments.length, args = Array(_len31 > 1 ? _len31 - 1 : 0), _key31 = 1; _key31 < _len31; _key31++) {\n    args[_key31 - 1] = arguments[_key31];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveStartToEndOfNode'].concat(args));\n};\n\nCommands$4.moveStartToEndOfPreviousBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'start', 'end', 'previous', 'block');\n};\n\nCommands$4.moveStartToEndOfPreviousInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'start', 'end', 'previous', 'inline');\n};\n\nCommands$4.moveStartToEndOfPreviousText = function (editor) {\n  editor.command(pointEdgeSideObject, 'start', 'end', 'previous', 'text');\n};\n\nCommands$4.moveStartToEndOfText = function (editor) {\n  editor.command(pointEdgeObject, 'start', 'end', 'text');\n};\n\nCommands$4.moveStartToStartOfBlock = function (editor) {\n  editor.command(pointEdgeObject, 'start', 'start', 'block');\n};\n\nCommands$4.moveStartToStartOfDocument = function (editor) {\n  editor.moveStartToStartOfNode(editor.value.document).moveToStart();\n};\n\nCommands$4.moveStartToStartOfInline = function (editor) {\n  editor.command(pointEdgeObject, 'start', 'start', 'inline');\n};\n\nCommands$4.moveStartToStartOfNextBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'start', 'start', 'next', 'block');\n};\n\nCommands$4.moveStartToStartOfNextInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'start', 'start', 'next', 'inline');\n};\n\nCommands$4.moveStartToStartOfNextText = function (editor) {\n  editor.command(pointEdgeSideObject, 'start', 'start', 'next', 'text');\n};\n\nCommands$4.moveStartToStartOfNode = function (editor) {\n  for (var _len32 = arguments.length, args = Array(_len32 > 1 ? _len32 - 1 : 0), _key32 = 1; _key32 < _len32; _key32++) {\n    args[_key32 - 1] = arguments[_key32];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveStartToStartOfNode'].concat(args));\n};\n\nCommands$4.moveStartToStartOfPreviousBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'start', 'start', 'previous', 'block');\n};\n\nCommands$4.moveStartToStartOfPreviousInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'start', 'start', 'previous', 'inline');\n};\n\nCommands$4.moveStartToStartOfPreviousText = function (editor) {\n  editor.command(pointEdgeSideObject, 'start', 'start', 'previous', 'text');\n};\n\nCommands$4.moveStartToStartOfText = function (editor) {\n  editor.command(pointEdgeObject, 'start', 'start', 'text');\n};\n\nCommands$4.moveTo = function (editor) {\n  for (var _len33 = arguments.length, args = Array(_len33 > 1 ? _len33 - 1 : 0), _key33 = 1; _key33 < _len33; _key33++) {\n    args[_key33 - 1] = arguments[_key33];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveTo'].concat(args));\n};\n\nCommands$4.moveToAnchor = function (editor) {\n  editor.command(proxy, 'moveToAnchor');\n};\n\nCommands$4.moveToEnd = function (editor) {\n  editor.command(proxy, 'moveToEnd');\n};\n\nCommands$4.moveToEndOfBlock = function (editor) {\n  editor.moveEndToEndOfBlock().moveToEnd();\n};\n\nCommands$4.moveToEndOfDocument = function (editor) {\n  editor.moveEndToEndOfNode(editor.value.document).moveToEnd();\n};\n\nCommands$4.moveToEndOfInline = function (editor) {\n  editor.moveEndToEndOfInline().moveToEnd();\n};\n\nCommands$4.moveToEndOfNextBlock = function (editor) {\n  editor.moveEndToEndOfNextBlock().moveToEnd();\n};\n\nCommands$4.moveToEndOfNextInline = function (editor) {\n  editor.moveEndToEndOfNextInline().moveToEnd();\n};\n\nCommands$4.moveToEndOfNextText = function (editor) {\n  editor.moveEndToEndOfNextText().moveToEnd();\n};\n\nCommands$4.moveToEndOfNode = function (editor) {\n  for (var _len34 = arguments.length, args = Array(_len34 > 1 ? _len34 - 1 : 0), _key34 = 1; _key34 < _len34; _key34++) {\n    args[_key34 - 1] = arguments[_key34];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveToEndOfNode'].concat(args));\n};\n\nCommands$4.moveToEndOfPreviousBlock = function (editor) {\n  editor.moveStartToEndOfPreviousBlock().moveToStart();\n};\n\nCommands$4.moveToEndOfPreviousInline = function (editor) {\n  editor.moveStartToEndOfPreviousInline().moveToStart();\n};\n\nCommands$4.moveToEndOfPreviousText = function (editor) {\n  editor.moveStartToEndOfPreviousText().moveToStart();\n};\n\nCommands$4.moveToEndOfText = function (editor) {\n  editor.moveEndToEndOfText().moveToEnd();\n};\n\nCommands$4.moveToFocus = function (editor) {\n  editor.command(proxy, 'moveToFocus');\n};\n\nCommands$4.moveToRangeOfDocument = function (editor) {\n  editor.moveToRangeOfNode(editor.value.document);\n};\n\nCommands$4.moveToRangeOfNode = function (editor) {\n  for (var _len35 = arguments.length, args = Array(_len35 > 1 ? _len35 - 1 : 0), _key35 = 1; _key35 < _len35; _key35++) {\n    args[_key35 - 1] = arguments[_key35];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveToRangeOfNode'].concat(args));\n};\n\nCommands$4.moveToStart = function (editor) {\n  editor.command(proxy, 'moveToStart');\n};\n\nCommands$4.moveToStartOfBlock = function (editor) {\n  editor.moveStartToStartOfBlock().moveToStart();\n};\n\nCommands$4.moveToStartOfDocument = function (editor) {\n  editor.moveStartToStartOfNode(editor.value.document).moveToStart();\n};\n\nCommands$4.moveToStartOfInline = function (editor) {\n  editor.moveStartToStartOfInline().moveToStart();\n};\n\nCommands$4.moveToStartOfNextBlock = function (editor) {\n  editor.moveEndToStartOfNextBlock().moveToEnd();\n};\n\nCommands$4.moveToStartOfNextInline = function (editor) {\n  editor.moveEndToStartOfNextInline().moveToEnd();\n};\n\nCommands$4.moveToStartOfNextText = function (editor) {\n  editor.moveEndToStartOfNextText().moveToEnd();\n};\n\nCommands$4.moveToStartOfNode = function (editor) {\n  for (var _len36 = arguments.length, args = Array(_len36 > 1 ? _len36 - 1 : 0), _key36 = 1; _key36 < _len36; _key36++) {\n    args[_key36 - 1] = arguments[_key36];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveToStartOfNode'].concat(args));\n};\n\nCommands$4.moveToStartOfPreviousBlock = function (editor) {\n  editor.moveStartToStartOfPreviousBlock().moveToStart();\n};\n\nCommands$4.moveToStartOfPreviousInline = function (editor) {\n  editor.moveStartToStartOfPreviousInline().moveToStart();\n};\n\nCommands$4.moveToStartOfPreviousText = function (editor) {\n  editor.moveStartToStartOfPreviousText().moveToStart();\n};\n\nCommands$4.moveToStartOfText = function (editor) {\n  editor.moveStartToStartOfText().moveToStart();\n};\n\nCommands$4.select = function (editor, properties) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  properties = Selection.createProperties(properties);\n  var _options$snapshot = options.snapshot,\n      snapshot = _options$snapshot === undefined ? false : _options$snapshot;\n  var value = editor.value;\n  var document = value.document,\n      selection = value.selection;\n  var newProperties = {};\n  var next = selection.setProperties(properties);\n  next = document.resolveSelection(next); // Re-compute the properties, to ensure that we get their normalized values.\n\n  properties = pick(next, Object.keys(properties)); // Remove any properties that are already equal to the current selection. And\n  // create a dictionary of the previous values for all of the properties that\n  // are being changed, for the inverse operation.\n\n  for (var k in properties) {\n    if (snapshot === true || !is(properties[k], selection[k])) {\n      newProperties[k] = properties[k];\n    }\n  } // If the selection moves, clear any marks, unless the new selection\n  // properties change the marks in some way.\n\n\n  if (selection.marks && !newProperties.marks && (newProperties.anchor || newProperties.focus)) {\n    newProperties.marks = null;\n  } // If there are no new properties to set, abort to avoid extra operations.\n\n\n  if (Object.keys(newProperties).length === 0) {\n    return;\n  } // TODO: for some reason toJSON() is required here (it breaks selections between blocks)? - 2018-10-10\n\n\n  var prevProperties = pick(selection.toJSON(), Object.keys(newProperties));\n  editor.applyOperation({\n    type: 'set_selection',\n    value: value,\n    properties: prevProperties,\n    newProperties: newProperties\n  }, snapshot ? {\n    skip: false,\n    merge: false\n  } : {});\n};\n\nCommands$4.setAnchor = function (editor) {\n  for (var _len37 = arguments.length, args = Array(_len37 > 1 ? _len37 - 1 : 0), _key37 = 1; _key37 < _len37; _key37++) {\n    args[_key37 - 1] = arguments[_key37];\n  }\n\n  editor.command.apply(editor, [proxy, 'setAnchor'].concat(args));\n};\n\nCommands$4.setEnd = function (editor) {\n  for (var _len38 = arguments.length, args = Array(_len38 > 1 ? _len38 - 1 : 0), _key38 = 1; _key38 < _len38; _key38++) {\n    args[_key38 - 1] = arguments[_key38];\n  }\n\n  editor.command.apply(editor, [proxy, 'setEnd'].concat(args));\n};\n\nCommands$4.setFocus = function (editor) {\n  for (var _len39 = arguments.length, args = Array(_len39 > 1 ? _len39 - 1 : 0), _key39 = 1; _key39 < _len39; _key39++) {\n    args[_key39 - 1] = arguments[_key39];\n  }\n\n  editor.command.apply(editor, [proxy, 'setFocus'].concat(args));\n};\n\nCommands$4.setStart = function (editor) {\n  for (var _len40 = arguments.length, args = Array(_len40 > 1 ? _len40 - 1 : 0), _key40 = 1; _key40 < _len40; _key40++) {\n    args[_key40 - 1] = arguments[_key40];\n  }\n\n  editor.command.apply(editor, [proxy, 'setStart'].concat(args));\n};\n\nCommands$4.snapshotSelection = function (editor) {\n  editor.withoutMerging(function () {\n    editor.select(editor.value.selection, {\n      snapshot: true\n    });\n  });\n};\n/**\n * Helpers.\n */\n\n\nfunction proxy(editor, method) {\n  var _editor$value$selecti;\n\n  for (var _len41 = arguments.length, args = Array(_len41 > 2 ? _len41 - 2 : 0), _key41 = 2; _key41 < _len41; _key41++) {\n    args[_key41 - 2] = arguments[_key41];\n  }\n\n  var range = (_editor$value$selecti = editor.value.selection)[method].apply(_editor$value$selecti, args);\n\n  editor.select(range);\n}\n\nfunction pointEdgeObject(editor, point, edge, object) {\n  var Point = point.slice(0, 1).toUpperCase() + point.slice(1);\n  var Edge = edge.slice(0, 1).toUpperCase() + edge.slice(1);\n  var Object = object.slice(0, 1).toUpperCase() + object.slice(1);\n  var method = 'move' + Point + 'To' + Edge + 'OfNode';\n  var getNode = object === 'text' ? 'getNode' : 'getClosest' + Object;\n  var value = editor.value;\n  var document = value.document,\n      selection = value.selection;\n  var p = selection[point];\n  var node = document[getNode](p.key);\n  if (!node) return;\n  editor[method](node);\n}\n\nfunction pointEdgeSideObject(editor, point, edge, side, object) {\n  var Point = point.slice(0, 1).toUpperCase() + point.slice(1);\n  var Edge = edge.slice(0, 1).toUpperCase() + edge.slice(1);\n  var Side = side.slice(0, 1).toUpperCase() + side.slice(1);\n  var Object = object.slice(0, 1).toUpperCase() + object.slice(1);\n  var method = 'move' + Point + 'To' + Edge + 'OfNode';\n  var getNode = object === 'text' ? 'getNode' : 'getClosest' + Object;\n  var getDirectionNode = 'get' + Side + Object;\n  var value = editor.value;\n  var document = value.document,\n      selection = value.selection;\n  var p = selection[point];\n  var node = document[getNode](p.key);\n  if (!node) return;\n  var target = document[getDirectionNode](node.key);\n  if (!target) return;\n  editor[method](target);\n}\n\nfunction pointBackward(editor, point) {\n  var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n  if (n === 0) return;\n  if (n < 0) return pointForward(editor, point, -n);\n  var Point = point.slice(0, 1).toUpperCase() + point.slice(1);\n  var value = editor.value;\n  var document = value.document,\n      selection = value.selection;\n  var p = selection[point];\n  var hasVoidParent = document.hasVoidParent(p.path, editor); // what is this?\n\n  if (!hasVoidParent && p.offset - n >= 0) {\n    var range = selection['move' + Point + 'Backward'](n);\n    editor.select(range);\n    return;\n  }\n\n  var previous = document.getPreviousText(p.path);\n  if (!previous) return;\n  var block = document.getClosestBlock(p.path);\n  var isInBlock = block.hasNode(previous.key);\n  var isPreviousInVoid = previous && document.hasVoidParent(previous.key, editor);\n  editor['move' + Point + 'ToEndOfNode'](previous); // when is this called?\n\n  if (!hasVoidParent && !isPreviousInVoid && isInBlock) {\n    var _range = editor.value.selection['move' + Point + 'Backward'](n);\n\n    editor.select(_range);\n  }\n}\n\nfunction pointForward(editor, point) {\n  var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n  if (n === 0) return;\n  if (n < 0) return pointBackward(editor, point, -n);\n  var Point = point.slice(0, 1).toUpperCase() + point.slice(1);\n  var value = editor.value;\n  var document = value.document,\n      selection = value.selection;\n  var p = selection[point];\n  var text = document.getNode(p.path);\n  var hasVoidParent = document.hasVoidParent(p.path, editor); // what is this?\n\n  if (!hasVoidParent && p.offset + n <= text.text.length) {\n    var range = selection['move' + Point + 'Forward'](n);\n    editor.select(range);\n    return;\n  }\n\n  var next = document.getNextText(p.path);\n  if (!next) return;\n  var block = document.getClosestBlock(p.path);\n  var isInBlock = block.hasNode(next.key);\n  var isNextInVoid = document.hasVoidParent(next.key, editor);\n  editor['move' + Point + 'ToStartOfNode'](next); // when is this called?\n\n  if (!hasVoidParent && !isNextInVoid && isInBlock) {\n    var _range2 = editor.value.selection['move' + Point + 'Forward'](n);\n\n    editor.select(_range2);\n  }\n}\n\nfunction pointWordBackward(editor, pointName) {\n  var value = editor.value;\n  var document = value.document,\n      selection = value.selection;\n  var point = selection[pointName];\n  var block = document.getClosestBlock(point.key);\n  var offset = block.getOffset(point.key);\n  var o = offset + point.offset;\n  var text = block.text;\n  var n = TextUtils.getWordOffsetBackward(text, o);\n  editor.command(pointBackward, pointName, n > 0 ? n : 1);\n}\n\nfunction pointWordForward(editor, pointName) {\n  var value = editor.value;\n  var document = value.document,\n      selection = value.selection;\n  var point = selection[pointName];\n  var block = document.getClosestBlock(point.key);\n  var offset = block.getOffset(point.key);\n  var o = offset + point.offset;\n  var text = block.text;\n  var n = TextUtils.getWordOffsetForward(text, o);\n  editor.command(pointForward, pointName, n > 0 ? n : 1);\n}\n\nvar Commands$5 = {};\n/**\n * Set `properties` on the value.\n *\n * @param {Editor} editor\n * @param {Object|Value} properties\n */\n\nCommands$5.setData = function (editor) {\n  var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var value = editor.value;\n  var newProperties = Value.createProperties({\n    data: data\n  });\n  var prevProperties = pick(value, Object.keys(newProperties));\n  editor.applyOperation({\n    type: 'set_value',\n    properties: prevProperties,\n    newProperties: newProperties\n  });\n};\n/**\n * Set `properties` on the value.\n *\n * @param {Editor} editor\n * @param {Object|Value} properties\n */\n\n\nCommands$5.setDecorations = function (editor) {\n  var decorations = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var value = editor.value;\n  var newProperties = Value.createProperties({\n    decorations: decorations\n  });\n  var prevProperties = pick(value, Object.keys(newProperties));\n  editor.applyOperation({\n    type: 'set_value',\n    properties: prevProperties,\n    newProperties: newProperties\n  });\n};\n/**\n * Export.\n *\n * @type {Object}\n */\n\n/**\n * A plugin that adds a set of queries to the editor.\n *\n * @param {Object} queries\n * @return {Object}\n */\n\n\nfunction QueriesPlugin() {\n  var queries = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  /**\n   * On construct, register all the queries.\n   *\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n  function onConstruct(editor, next) {\n    for (var query in queries) {\n      editor.registerQuery(query);\n    }\n\n    return next();\n  }\n  /**\n   * On query, if it exists in our list of queries, call it.\n   *\n   * @param {Object} query\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onQuery(query, editor, next) {\n    var type = query.type,\n        args = query.args;\n    var fn = queries[type];\n    if (!fn) return next();\n    var ret = fn.apply(undefined, [editor].concat(toConsumableArray(args)));\n    return ret === undefined ? next() : ret;\n  }\n  /**\n   * Return the plugin.\n   *\n   * @type {Object}\n   */\n\n\n  return {\n    onConstruct: onConstruct,\n    onQuery: onQuery\n  };\n}\n/**\n * Export.\n *\n * @type {Object}\n */\n\n/**\n * Define a Slate error.\n *\n * @type {SlateError}\n */\n\n\nvar SlateError = function (_Error) {\n  inherits(SlateError, _Error);\n\n  function SlateError(code) {\n    var attrs = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    classCallCheck(this, SlateError);\n\n    var _this = possibleConstructorReturn(this, (SlateError.__proto__ || Object.getPrototypeOf(SlateError)).call(this, code));\n\n    _this.code = code;\n\n    for (var key in attrs) {\n      _this[key] = attrs[key];\n    }\n\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(_this, _this.constructor);\n    } else {\n      _this.stack = new Error().stack;\n    }\n\n    return _this;\n  }\n\n  return SlateError;\n}(Error);\n/**\n * Export.\n *\n * @type {SlateError}\n */\n\n\nfunction SchemaPlugin(schema) {\n  var rules = schema.rules,\n      document = schema.document,\n      blocks = schema.blocks,\n      inlines = schema.inlines,\n      marks = schema.marks;\n  var schemaRules = [];\n\n  if (rules) {\n    schemaRules = schemaRules.concat(rules);\n  }\n\n  if (document) {\n    schemaRules.push(_extends({\n      match: [{\n        object: 'document'\n      }]\n    }, document));\n  }\n\n  if (blocks) {\n    for (var key in blocks) {\n      schemaRules.push(_extends({\n        match: [{\n          object: 'block',\n          type: key\n        }]\n      }, blocks[key]));\n    }\n  }\n\n  if (inlines) {\n    for (var _key in inlines) {\n      schemaRules.push(_extends({\n        match: [{\n          object: 'inline',\n          type: _key\n        }]\n      }, inlines[_key]));\n    }\n  }\n\n  if (marks) {\n    for (var _key2 in marks) {\n      schemaRules.push(_extends({\n        match: [{\n          object: 'mark',\n          type: _key2\n        }]\n      }, marks[_key2]));\n    }\n  }\n  /**\n   * Check if a `mark` is void based on the schema rules.\n   *\n   * @param {Editor} editor\n   * @param {Mark} mark\n   * @return {Boolean}\n   */\n\n\n  function isAtomic(editor, mark) {\n    var rule = schemaRules.find(function (r) {\n      return 'isAtomic' in r && testRules(mark, r.match);\n    });\n    return rule && rule.isAtomic;\n  }\n  /**\n   * Check if a `node` is void based on the schema rules.\n   *\n   * @param {Editor} editor\n   * @param {Node} node\n   * @return {Boolean}\n   */\n\n\n  function isVoid(editor, node) {\n    var rule = schemaRules.find(function (r) {\n      return 'isVoid' in r && testRules(node, r.match);\n    });\n    return rule && rule.isVoid;\n  }\n  /**\n   * Normalize a `node` with the schema rules, returning a function that will\n   * fix the invalid node, or void if the node is valid.\n   *\n   * @param {Node} node\n   * @param {Editor} editor\n   * @param {Function} next\n   * @return {Function|Void}\n   */\n\n\n  function normalizeNode(node, editor, next) {\n    var error = validateNode(node, editor, function () {});\n    if (!error) return next();\n    return function () {\n      var rule = error.rule;\n      var size = editor.operations.size; // First run the user-provided `normalize` function if one exists...\n\n      if (rule.normalize) {\n        rule.normalize(editor, error);\n      } // If the `normalize` function did not add any operations to the editor\n      // object, it can't have normalized, so run the default one.\n\n\n      if (editor.operations.size === size) {\n        defaultNormalize(editor, error);\n      }\n    };\n  }\n  /**\n   * Validate a `node` with the schema rules, returning a `SlateError` if it's\n   * invalid.\n   *\n   * @param {Node} node\n   * @param {Editor} editor\n   * @param {Function} next\n   * @return {Error|Void}\n   */\n\n\n  function validateNode(node, editor, next) {\n    var matches = schemaRules.filter(function (r) {\n      return testRules(node, r.match);\n    });\n    var failure = validateRules(node, matches, schemaRules, {\n      every: true\n    });\n    if (!failure) return next();\n    var error = new SlateError(failure.code, failure);\n    return error;\n  }\n  /**\n   * On schema-related queries, respond if we can.\n   *\n   * @param {Object} query\n   * @param {Function} next\n   */\n\n\n  var queries = QueriesPlugin({\n    isAtomic: isAtomic,\n    isVoid: isVoid\n  });\n  /**\n   * Return the plugins.\n   *\n   * @type {Object}\n   */\n\n  return [{\n    normalizeNode: normalizeNode,\n    validateNode: validateNode\n  }, queries];\n}\n/**\n * Normalize an invalid value with `error` with default remedies.\n *\n * @param {Editor} editor\n * @param {SlateError} error\n */\n\n\nfunction defaultNormalize(editor, error) {\n  var code = error.code,\n      node = error.node,\n      child = error.child,\n      next = error.next,\n      previous = error.previous,\n      key = error.key,\n      mark = error.mark;\n\n  switch (code) {\n    case 'child_max_invalid':\n    case 'child_object_invalid':\n    case 'child_type_invalid':\n    case 'child_unknown':\n    case 'first_child_object_invalid':\n    case 'first_child_type_invalid':\n    case 'last_child_object_invalid':\n    case 'last_child_type_invalid':\n      {\n        return child.object === 'text' && node.object === 'block' && node.nodes.size === 1 ? editor.removeNodeByKey(node.key) : editor.removeNodeByKey(child.key);\n      }\n\n    case 'previous_sibling_object_invalid':\n    case 'previous_sibling_type_invalid':\n      {\n        return previous.object === 'text' && node.object === 'block' && node.nodes.size === 1 ? editor.removeNodeByKey(node.key) : editor.removeNodeByKey(previous.key);\n      }\n\n    case 'next_sibling_object_invalid':\n    case 'next_sibling_type_invalid':\n      {\n        return next.object === 'text' && node.object === 'block' && node.nodes.size === 1 ? editor.removeNodeByKey(node.key) : editor.removeNodeByKey(next.key);\n      }\n\n    case 'child_min_invalid':\n    case 'node_text_invalid':\n    case 'parent_object_invalid':\n    case 'parent_type_invalid':\n      {\n        return node.object === 'document' ? node.nodes.forEach(function (n) {\n          return editor.removeNodeByKey(n.key);\n        }) : editor.removeNodeByKey(node.key);\n      }\n\n    case 'node_data_invalid':\n      {\n        return node.data.get(key) === undefined && node.object !== 'document' ? editor.removeNodeByKey(node.key) : editor.setNodeByKey(node.key, {\n          data: node.data.delete(key)\n        });\n      }\n\n    case 'node_mark_invalid':\n      {\n        return node.getTexts().forEach(function (t) {\n          return editor.removeMarkByKey(t.key, 0, t.text.length, mark);\n        });\n      }\n\n    default:\n      {\n        return editor.removeNodeByKey(node.key);\n      }\n  }\n}\n/**\n * Check that an `object` matches one of a set of `rules`.\n *\n * @param {Mixed} object\n * @param {Object|Array} rules\n * @return {Boolean}\n */\n\n\nfunction testRules(object, rules) {\n  var error = validateRules(object, rules);\n  return !error;\n}\n/**\n * Validate that a `object` matches a `rule` object or array.\n *\n * @param {Mixed} object\n * @param {Object|Array} rule\n * @param {Array|Void} rules\n * @return {Error|Void}\n */\n\n\nfunction validateRules(object, rule, rules) {\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  var _options$every = options.every,\n      every = _options$every === undefined ? false : _options$every;\n\n  if (Array.isArray(rule)) {\n    var array = rule.length ? rule : [{}];\n    var first = void 0;\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = array[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var r = _step.value;\n\n        var _error = validateRules(object, r, rules);\n\n        first = first || _error;\n        if (every && _error) return _error;\n        if (!every && !_error) return;\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator.return) {\n          _iterator.return();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n\n    return first;\n  }\n\n  var error = validateObject(object, rule) || validateType(object, rule) || validateData(object, rule) || validateMarks(object, rule) || validateText(object, rule) || validateFirst(object, rule) || validateLast(object, rule) || validateNodes(object, rule, rules);\n  return error;\n}\n\nfunction validateObject(node, rule) {\n  if (rule.object == null) return;\n  if (rule.object === node.object) return;\n  if (typeof rule.object === 'function' && rule.object(node.object)) return;\n  return fail('node_object_invalid', {\n    rule: rule,\n    node: node\n  });\n}\n\nfunction validateType(node, rule) {\n  if (rule.type == null) return;\n  if (rule.type === node.type) return;\n  if (typeof rule.type === 'function' && rule.type(node.type)) return;\n  return fail('node_type_invalid', {\n    rule: rule,\n    node: node\n  });\n}\n\nfunction validateData(node, rule) {\n  if (rule.data == null) return;\n  if (node.data == null) return;\n\n  if (typeof rule.data === 'function') {\n    if (rule.data(node.data)) return;\n    return fail('node_data_invalid', {\n      rule: rule,\n      node: node\n    });\n  }\n\n  for (var key in rule.data) {\n    var fn = rule.data[key];\n    var value = node.data && node.data.get(key);\n    var valid = typeof fn === 'function' ? fn(value) : fn === value;\n    if (valid) continue;\n    return fail('node_data_invalid', {\n      rule: rule,\n      node: node,\n      key: key,\n      value: value\n    });\n  }\n}\n\nfunction validateMarks(node, rule) {\n  if (rule.marks == null) return;\n  var marks = node.getMarks().toArray();\n\n  var _loop = function _loop(mark) {\n    var valid = rule.marks.some(function (def) {\n      return typeof def.type === 'function' ? def.type(mark.type) : def.type === mark.type;\n    });\n    if (valid) return 'continue';\n    return {\n      v: fail('node_mark_invalid', {\n        rule: rule,\n        node: node,\n        mark: mark\n      })\n    };\n  };\n\n  var _iteratorNormalCompletion2 = true;\n  var _didIteratorError2 = false;\n  var _iteratorError2 = undefined;\n\n  try {\n    for (var _iterator2 = marks[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n      var mark = _step2.value;\n\n      var _ret = _loop(mark);\n\n      switch (_ret) {\n        case 'continue':\n          continue;\n\n        default:\n          if ((typeof _ret === 'undefined' ? 'undefined' : _typeof(_ret)) === \"object\") return _ret.v;\n      }\n    }\n  } catch (err) {\n    _didIteratorError2 = true;\n    _iteratorError2 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion2 && _iterator2.return) {\n        _iterator2.return();\n      }\n    } finally {\n      if (_didIteratorError2) {\n        throw _iteratorError2;\n      }\n    }\n  }\n}\n\nfunction validateText(node, rule) {\n  if (rule.text == null) return;\n  var text = node.text;\n  var valid = typeof rule.text === 'function' ? rule.text(text) : rule.text.test(text);\n  if (valid) return;\n  return fail('node_text_invalid', {\n    rule: rule,\n    node: node,\n    text: text\n  });\n}\n\nfunction validateFirst(node, rule) {\n  if (rule.first == null) return;\n  var first = node.nodes.first();\n  if (!first) return;\n  var error = validateRules(first, rule.first);\n  if (!error) return;\n  error.rule = rule;\n  error.node = node;\n  error.child = first;\n  error.code = error.code.replace('node_', 'first_child_');\n  return error;\n}\n\nfunction validateLast(node, rule) {\n  if (rule.last == null) return;\n  var last = node.nodes.last();\n  if (!last) return;\n  var error = validateRules(last, rule.last);\n  if (!error) return;\n  error.rule = rule;\n  error.node = node;\n  error.child = last;\n  error.code = error.code.replace('node_', 'last_child_');\n  return error;\n}\n\nfunction validateNodes(node, rule) {\n  var rules = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n  if (node.nodes == null) return;\n  var children = node.nodes;\n  var defs = rule.nodes != null ? rule.nodes.slice() : [];\n  var count = 0;\n  var lastCount = 0;\n  var min = null;\n  var index = -1;\n  var def = null;\n  var max = null;\n  var child = null;\n  var previous = null;\n  var next = null;\n\n  function nextDef() {\n    if (defs.length === 0) return false;\n    def = defs.shift();\n    lastCount = count;\n    count = 0;\n    min = def.min || null;\n    max = def.max || null;\n    return true;\n  }\n\n  function nextChild() {\n    index += 1;\n    previous = index ? children.get(index - 1) : null;\n    child = children.get(index);\n    next = children.get(index + 1);\n    if (!child) return false;\n    lastCount = count;\n    count += 1;\n    return true;\n  }\n\n  function rewind() {\n    if (index > 0) {\n      index -= 1;\n      count = lastCount;\n    }\n  }\n\n  if (rule.nodes != null) {\n    nextDef();\n  }\n\n  while (nextChild()) {\n    var err = validateParent(node, child, rules) || validatePrevious(node, child, previous, index, rules) || validateNext(node, child, next, index, rules);\n    if (err) return err;\n\n    if (rule.nodes != null) {\n      if (!def) {\n        return fail('child_unknown', {\n          rule: rule,\n          node: node,\n          child: child,\n          index: index\n        });\n      }\n\n      if (def.match) {\n        var error = validateRules(child, def.match);\n\n        if (error) {\n          // Since we want to report overflow on last matching child we don't\n          // immediately check for count > max, but instead do so once we find\n          // a child that doesn't match.\n          if (max != null && count - 1 > max) {\n            rewind();\n            return fail('child_max_invalid', {\n              rule: rule,\n              node: node,\n              index: index,\n              child: children.get(index),\n              count: count,\n              limit: max\n            });\n          }\n\n          var lastMin = min; // If there are more groups after this one then child might actually\n          // be valid.\n\n          if (nextDef()) {\n            // If we've already satisfied the minimum for the current group,\n            // then we can rewind and proceed to the next group.\n            if (lastCount - 1 >= lastMin) {\n              index -= 1;\n              continue;\n            } // Otherwise we know that current value is underflowing. There are\n            // three possible causes for this...\n            // 1. There might just not be enough elements for current group, and\n            // current child is in fact the first of the next group. If so, the\n            // next def will not report errors, in which case we can rewind and\n            // report an minimum error.\n\n\n            if (validateRules(child, def.match) == null) {\n              rewind();\n              return fail('child_min_invalid', {\n                rule: rule,\n                node: node,\n                index: index,\n                count: lastCount - 1,\n                limit: lastMin\n              });\n            } // 2. The current group is underflowing, but there is also an\n            // invalid child before the next group.\n            // 3. Or the current group is not underflowing but it appears so\n            // because there's an invalid child between its members.\n            // It's either the second or third case. If it's the second then\n            // we could report an underflow, but presence of an invalid child\n            // is arguably more important, so we report it first. It also lets\n            // us avoid checking for which case exactly is it.\n\n\n            error.rule = rule;\n            error.node = node;\n            error.child = child;\n            error.index = index;\n            error.code = error.code.replace('node_', 'child_');\n            return error;\n          } // Otherwise either we exhausted the last group, in which case it's\n          // an unknown child, ...\n\n\n          if (max != null && count > max) {\n            return fail('child_unknown', {\n              rule: rule,\n              node: node,\n              child: child,\n              index: index\n            });\n          } // ... or it's an invalid child for the last group.\n\n\n          error.rule = rule;\n          error.node = node;\n          error.child = child;\n          error.index = index;\n          error.code = error.code.replace('node_', 'child_');\n          return error;\n        }\n      }\n    }\n  } // Since we want to report overflow on last matching child we don't\n  // immediately check for count > max, but do so after processing all nodes.\n\n\n  if (max != null && count > max) {\n    return fail('child_max_invalid', {\n      rule: rule,\n      node: node,\n      index: index - 1,\n      count: count,\n      child: children.get(index - 1),\n      limit: max\n    });\n  }\n\n  if (rule.nodes != null) {\n    do {\n      if (count < min) {\n        return fail('child_min_invalid', {\n          rule: rule,\n          node: node,\n          index: index,\n          count: count,\n          limit: min\n        });\n      }\n    } while (nextDef());\n  }\n}\n\nfunction validateParent(node, child, rules) {\n  var _iteratorNormalCompletion3 = true;\n  var _didIteratorError3 = false;\n  var _iteratorError3 = undefined;\n\n  try {\n    for (var _iterator3 = rules[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n      var rule = _step3.value;\n      if (rule.parent == null) continue;\n      if (!testRules(child, rule.match)) continue;\n      var error = validateRules(node, rule.parent);\n      if (!error) continue;\n      error.rule = rule;\n      error.parent = node;\n      error.node = child;\n      error.code = error.code.replace('node_', 'parent_');\n      return error;\n    }\n  } catch (err) {\n    _didIteratorError3 = true;\n    _iteratorError3 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion3 && _iterator3.return) {\n        _iterator3.return();\n      }\n    } finally {\n      if (_didIteratorError3) {\n        throw _iteratorError3;\n      }\n    }\n  }\n}\n\nfunction validatePrevious(node, child, previous, index, rules) {\n  if (!previous) return;\n  var _iteratorNormalCompletion4 = true;\n  var _didIteratorError4 = false;\n  var _iteratorError4 = undefined;\n\n  try {\n    for (var _iterator4 = rules[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n      var rule = _step4.value;\n      if (rule.previous == null) continue;\n      if (!testRules(child, rule.match)) continue;\n      var error = validateRules(previous, rule.previous);\n      if (!error) continue;\n      error.rule = rule;\n      error.node = node;\n      error.child = child;\n      error.index = index;\n      error.previous = previous;\n      error.code = error.code.replace('node_', 'previous_sibling_');\n      return error;\n    }\n  } catch (err) {\n    _didIteratorError4 = true;\n    _iteratorError4 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion4 && _iterator4.return) {\n        _iterator4.return();\n      }\n    } finally {\n      if (_didIteratorError4) {\n        throw _iteratorError4;\n      }\n    }\n  }\n}\n\nfunction validateNext(node, child, next, index, rules) {\n  if (!next) return;\n  var _iteratorNormalCompletion5 = true;\n  var _didIteratorError5 = false;\n  var _iteratorError5 = undefined;\n\n  try {\n    for (var _iterator5 = rules[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n      var rule = _step5.value;\n      if (rule.next == null) continue;\n      if (!testRules(child, rule.match)) continue;\n      var error = validateRules(next, rule.next);\n      if (!error) continue;\n      error.rule = rule;\n      error.node = node;\n      error.child = child;\n      error.index = index;\n      error.next = next;\n      error.code = error.code.replace('node_', 'next_sibling_');\n      return error;\n    }\n  } catch (err) {\n    _didIteratorError5 = true;\n    _iteratorError5 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion5 && _iterator5.return) {\n        _iterator5.return();\n      }\n    } finally {\n      if (_didIteratorError5) {\n        throw _iteratorError5;\n      }\n    }\n  }\n}\n/**\n * Create an interim failure object with `code` and `attrs`.\n *\n * @param {String} code\n * @param {Object} attrs\n * @return {Object}\n */\n\n\nfunction fail(code, attrs) {\n  return _extends({\n    code: code\n  }, attrs);\n}\n/**\n * Export.\n *\n * @type {Object}\n */\n\n\nfunction deleteExpanded(editor) {\n  var value = editor.value;\n  var selection = value.selection;\n\n  if (selection.isExpanded) {\n    editor.delete();\n  }\n}\n/**\n * Commands.\n *\n * @type {Object}\n */\n\n\nvar Commands$6 = {};\n/**\n * Add a `mark` to the characters in the current selection.\n *\n * @param {Editor} editor\n * @param {Mark} mark\n */\n\nCommands$6.addMark = function (editor, mark) {\n  mark = Mark.create(mark);\n  var value = editor.value;\n  var document = value.document,\n      selection = value.selection;\n\n  if (selection.isExpanded) {\n    editor.addMarkAtRange(selection, mark);\n  } else if (selection.marks) {\n    var marks = selection.marks.add(mark);\n    var sel = selection.set('marks', marks);\n    editor.select(sel);\n  } else {\n    var _marks = document.getActiveMarksAtRange(selection).add(mark);\n\n    var _sel = selection.set('marks', _marks);\n\n    editor.select(_sel);\n  }\n};\n/**\n * Add a list of `marks` to the characters in the current selection.\n *\n * @param {Editor} editor\n * @param {Set<Mark>|Array<Object>} marks\n */\n\n\nCommands$6.addMarks = function (editor, marks) {\n  marks.forEach(function (mark) {\n    return editor.addMark(mark);\n  });\n};\n/**\n * Delete at the current selection.\n *\n * @param {Editor} editor\n */\n\n\nCommands$6.delete = function (editor) {\n  var value = editor.value;\n  var selection = value.selection;\n  editor.deleteAtRange(selection); // COMPAT: Ensure that the selection is collapsed, because in certain cases\n  // when deleting across inline nodes, when splitting the inline node the end\n  // point of the selection will end up after the split point.\n\n  editor.moveToFocus();\n};\n/**\n * Delete backward `n` characters.\n *\n * @param {Editor} editor\n * @param {Number} n (optional)\n */\n\n\nCommands$6.deleteBackward = function (editor) {\n  var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  var value = editor.value;\n  var selection = value.selection;\n\n  if (selection.isExpanded) {\n    editor.delete();\n  } else {\n    editor.deleteBackwardAtRange(selection, n);\n  }\n};\n/**\n * Delete backward one character.\n *\n * @param {Editor} editor\n */\n\n\nCommands$6.deleteCharBackward = function (editor) {\n  var value = editor.value;\n  var selection = value.selection;\n\n  if (selection.isExpanded) {\n    editor.delete();\n  } else {\n    editor.deleteCharBackwardAtRange(selection);\n  }\n};\n/**\n * Delete backward one line.\n *\n * @param {Editor} editor\n */\n\n\nCommands$6.deleteLineBackward = function (editor) {\n  var value = editor.value;\n  var selection = value.selection;\n\n  if (selection.isExpanded) {\n    editor.delete();\n  } else {\n    editor.deleteLineBackwardAtRange(selection);\n  }\n};\n/**\n * Delete backward one word.\n *\n * @param {Editor} editor\n */\n\n\nCommands$6.deleteWordBackward = function (editor) {\n  var value = editor.value;\n  var selection = value.selection;\n\n  if (selection.isExpanded) {\n    editor.delete();\n  } else {\n    editor.deleteWordBackwardAtRange(selection);\n  }\n};\n/**\n * Delete backward `n` characters.\n *\n * @param {Editor} editor\n * @param {Number} n (optional)\n */\n\n\nCommands$6.deleteForward = function (editor) {\n  var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  var value = editor.value;\n  var selection = value.selection;\n\n  if (selection.isExpanded) {\n    editor.delete();\n  } else {\n    editor.deleteForwardAtRange(selection, n);\n  }\n};\n/**\n * Delete backward one character.\n *\n * @param {Editor} editor\n */\n\n\nCommands$6.deleteCharForward = function (editor) {\n  var value = editor.value;\n  var selection = value.selection;\n\n  if (selection.isExpanded) {\n    editor.delete();\n  } else {\n    editor.deleteCharForwardAtRange(selection);\n  }\n};\n/**\n * Delete backward one line.\n *\n * @param {Editor} editor\n */\n\n\nCommands$6.deleteLineForward = function (editor) {\n  var value = editor.value;\n  var selection = value.selection;\n\n  if (selection.isExpanded) {\n    editor.delete();\n  } else {\n    editor.deleteLineForwardAtRange(selection);\n  }\n};\n/**\n * Delete backward one word.\n *\n * @param {Editor} editor\n */\n\n\nCommands$6.deleteWordForward = function (editor) {\n  var value = editor.value;\n  var selection = value.selection;\n\n  if (selection.isExpanded) {\n    editor.delete();\n  } else {\n    editor.deleteWordForwardAtRange(selection);\n  }\n};\n/**\n * Insert a `block` at the current selection.\n *\n * @param {Editor} editor\n * @param {String|Object|Block} block\n */\n\n\nCommands$6.insertBlock = function (editor, block) {\n  deleteExpanded(editor);\n  block = Block.create(block);\n  var value = editor.value;\n  var selection = value.selection;\n  editor.insertBlockAtRange(selection, block); // If the node was successfully inserted, update the selection.\n\n  var node = editor.value.document.getNode(block.key);\n  if (node) editor.moveToEndOfNode(node);\n};\n/**\n * Insert a `fragment` at the current selection.\n *\n * @param {Editor} editor\n * @param {Document} fragment\n */\n\n\nCommands$6.insertFragment = function (editor, fragment) {\n  if (!fragment.nodes.size) return;\n  deleteExpanded(editor);\n  var value = editor.value;\n  var _value = value,\n      document = _value.document,\n      selection = _value.selection;\n  var start = selection.start,\n      end = selection.end;\n  var _value2 = value,\n      startText = _value2.startText,\n      endText = _value2.endText,\n      startInline = _value2.startInline;\n  var lastText = fragment.getLastText();\n  var lastInline = fragment.getClosestInline(lastText.key);\n  var lastBlock = fragment.getClosestBlock(lastText.key);\n  var firstChild = fragment.nodes.first();\n  var lastChild = fragment.nodes.last();\n  var keys = document.getTexts().map(function (text) {\n    return text.key;\n  });\n  var isAppending = !startInline || start.isAtStartOfNode(startText) || end.isAtStartOfNode(startText) || start.isAtEndOfNode(endText) || end.isAtEndOfNode(endText);\n  var isInserting = firstChild.hasBlockChildren() || lastChild.hasBlockChildren();\n  editor.insertFragmentAtRange(selection, fragment);\n  value = editor.value;\n  document = value.document;\n  var newTexts = document.getTexts().filter(function (n) {\n    return !keys.includes(n.key);\n  });\n  var newText = isAppending ? newTexts.last() : newTexts.takeLast(2).first();\n\n  if (newText && (lastInline || isInserting)) {\n    editor.moveToEndOfNode(newText);\n  } else if (newText) {\n    editor.moveToStartOfNode(newText).moveForward(lastBlock.text.length);\n  }\n};\n/**\n * Insert an `inline` at the current selection.\n *\n * @param {Editor} editor\n * @param {String|Object|Inline} inline\n */\n\n\nCommands$6.insertInline = function (editor, inline) {\n  deleteExpanded(editor);\n  inline = Inline.create(inline);\n  var value = editor.value;\n  var selection = value.selection;\n  editor.insertInlineAtRange(selection, inline); // If the node was successfully inserted, update the selection.\n\n  var node = editor.value.document.getNode(inline.key);\n  if (node) editor.moveToEndOfNode(node);\n};\n/**\n * Insert a string of `text` with optional `marks` at the current selection.\n *\n * @param {Editor} editor\n * @param {String} text\n * @param {Set<Mark>} marks (optional)\n */\n\n\nCommands$6.insertText = function (editor, text, marks) {\n  deleteExpanded(editor);\n  var value = editor.value;\n  var document = value.document,\n      selection = value.selection;\n  marks = marks || selection.marks || document.getInsertMarksAtRange(selection);\n  editor.insertTextAtRange(selection, text, marks); // If the text was successfully inserted, and the selection had marks on it,\n  // unset the selection's marks.\n\n  if (selection.marks && document !== editor.value.document) {\n    editor.select({\n      marks: null\n    });\n  }\n};\n/**\n * Remove a `mark` from the characters in the current selection.\n *\n * @param {Editor} editor\n * @param {Mark} mark\n */\n\n\nCommands$6.removeMark = function (editor, mark) {\n  mark = Mark.create(mark);\n  var value = editor.value;\n  var document = value.document,\n      selection = value.selection;\n\n  if (selection.isExpanded) {\n    editor.removeMarkAtRange(selection, mark);\n  } else if (selection.marks) {\n    var marks = selection.marks.remove(mark);\n    var sel = selection.set('marks', marks);\n    editor.select(sel);\n  } else {\n    var _marks2 = document.getActiveMarksAtRange(selection).remove(mark);\n\n    var _sel2 = selection.set('marks', _marks2);\n\n    editor.select(_sel2);\n  }\n};\n/**\n * Replace an `oldMark` with a `newMark` in the characters in the current selection.\n *\n * @param {Editor} editor\n * @param {Mark} oldMark\n * @param {Mark} newMark\n */\n\n\nCommands$6.replaceMark = function (editor, oldMark, newMark) {\n  editor.removeMark(oldMark);\n  editor.addMark(newMark);\n};\n/**\n * Set the `properties` of block nodes.\n *\n * @param {Editor} editor\n * @param {Object|String} properties\n */\n\n\nCommands$6.setBlocks = function (editor, properties) {\n  var value = editor.value;\n  var selection = value.selection;\n  editor.setBlocksAtRange(selection, properties);\n};\n/**\n * Set the `properties` of inline nodes.\n *\n * @param {Editor} editor\n * @param {Object|String} properties\n */\n\n\nCommands$6.setInlines = function (editor, properties) {\n  var value = editor.value;\n  var selection = value.selection;\n  editor.setInlinesAtRange(selection, properties);\n};\n/**\n * Split the block node at the current selection, to optional `depth`.\n *\n * @param {Editor} editor\n * @param {Number} depth (optional)\n */\n\n\nCommands$6.splitBlock = function (editor) {\n  var depth = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  deleteExpanded(editor);\n  var value = editor.value;\n  var selection = value.selection,\n      document = value.document;\n  var marks = selection.marks || document.getInsertMarksAtRange(selection);\n  editor.splitBlockAtRange(selection, depth).moveToEnd();\n\n  if (marks && marks.size !== 0) {\n    editor.select({\n      marks: marks\n    });\n  }\n};\n/**\n * Split the inline nodes to optional `height`.\n *\n * @param {Editor} editor\n * @param {Number} height (optional)\n */\n\n\nCommands$6.splitInline = function (editor, height) {\n  deleteExpanded(editor);\n  var value = editor.value;\n  var selection = value.selection;\n  editor.splitInlineAtRange(selection, height);\n};\n/**\n * Add or remove a `mark` from the characters in the current selection,\n * depending on whether it's already there.\n *\n * @param {Editor} editor\n * @param {Mark} mark\n */\n\n\nCommands$6.toggleMark = function (editor, mark) {\n  mark = Mark.create(mark);\n  var value = editor.value;\n  var exists = value.activeMarks.has(mark);\n\n  if (exists) {\n    editor.removeMark(mark);\n  } else {\n    editor.addMark(mark);\n  }\n};\n/**\n * Unwrap nodes from a block with `properties`.\n *\n * @param {Editor} editor\n * @param {String|Object} properties\n */\n\n\nCommands$6.unwrapBlock = function (editor, properties) {\n  var value = editor.value;\n  var selection = value.selection;\n  editor.unwrapBlockAtRange(selection, properties);\n};\n/**\n * Unwrap nodes from an inline with `properties`.\n *\n * @param {Editor} editor\n * @param {String|Object} properties\n */\n\n\nCommands$6.unwrapInline = function (editor, properties) {\n  var value = editor.value;\n  var selection = value.selection;\n  editor.unwrapInlineAtRange(selection, properties);\n};\n/**\n * Wrap nodes in a new `block`.\n *\n * @param {Editor} editor\n * @param {Block|Object|String} block\n */\n\n\nCommands$6.wrapBlock = function (editor, block) {\n  var value = editor.value;\n  var selection = value.selection;\n  editor.wrapBlockAtRange(selection, block);\n};\n/**\n * Wrap nodes in a new `inline`.\n *\n * @param {Editor} editor\n * @param {Inline|Object|String} inline\n */\n\n\nCommands$6.wrapInline = function (editor, inline) {\n  var value = editor.value;\n  var selection = value.selection;\n  editor.wrapInlineAtRange(selection, inline);\n};\n/**\n * Wrap the current selection with prefix/suffix.\n *\n * @param {Editor} editor\n * @param {String} prefix\n * @param {String} suffix\n */\n\n\nCommands$6.wrapText = function (editor, prefix) {\n  var suffix = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : prefix;\n  var value = editor.value;\n  var selection = value.selection;\n  editor.wrapTextAtRange(selection, prefix, suffix); // If the selection was collapsed, it will have moved the start offset too.\n\n  if (selection.isCollapsed) {\n    editor.moveStartBackward(prefix.length);\n  } // Adding the suffix will have pushed the end of the selection further on, so\n  // we need to move it back to account for this.\n\n\n  editor.moveEndBackward(suffix.length); // There's a chance that the selection points moved \"through\" each other,\n  // resulting in a now-incorrect selection direction.\n\n  if (selection.isForward !== editor.value.selection.isForward) {\n    editor.flip();\n  }\n};\n/**\n * Export.\n *\n * @type {Object}\n */\n\n\nfunction CorePlugin() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var _options$plugins = options.plugins,\n      plugins = _options$plugins === undefined ? [] : _options$plugins;\n  /**\n   * The core Slate commands.\n   *\n   * @type {Object}\n   */\n\n  var commands = CommandsPlugin(_extends({}, Commands$1, Commands$2, Commands$3, Commands$4, Commands$5, Commands$6));\n  /**\n   * The core Slate queries.\n   *\n   * @type {Object}\n   */\n\n  var queries = QueriesPlugin({\n    isAtomic: function isAtomic() {\n      return false;\n    },\n    isVoid: function isVoid() {\n      return false;\n    }\n  });\n  /**\n   * The core Slate schema.\n   *\n   * @type {Object}\n   */\n\n  var schema = SchemaPlugin({\n    rules: [// Only allow block nodes in documents.\n    {\n      match: {\n        object: 'document'\n      },\n      nodes: [{\n        match: {\n          object: 'block'\n        }\n      }]\n    }, // Only allow block nodes or inline and text nodes in blocks.\n    {\n      match: {\n        object: 'block',\n        first: {\n          object: 'block'\n        }\n      },\n      nodes: [{\n        match: {\n          object: 'block'\n        }\n      }]\n    }, {\n      match: {\n        object: 'block',\n        first: [{\n          object: 'inline'\n        }, {\n          object: 'text'\n        }]\n      },\n      nodes: [{\n        match: [{\n          object: 'inline'\n        }, {\n          object: 'text'\n        }]\n      }]\n    }, // Only allow inline and text nodes in inlines.\n    {\n      match: {\n        object: 'inline'\n      },\n      nodes: [{\n        match: [{\n          object: 'inline'\n        }, {\n          object: 'text'\n        }]\n      }]\n    }, // Ensure that block and inline nodes have at least one text child.\n    {\n      match: [{\n        object: 'block'\n      }, {\n        object: 'inline'\n      }],\n      nodes: [{\n        min: 1\n      }],\n      normalize: function normalize(editor, error) {\n        var code = error.code,\n            node = error.node;\n\n        if (code === 'child_min_invalid' && node.nodes.isEmpty()) {\n          editor.insertNodeByKey(node.key, 0, Text.create());\n        }\n      }\n    }, // Ensure that inline nodes are surrounded by text nodes.\n    {\n      match: {\n        object: 'block'\n      },\n      first: [{\n        object: 'block'\n      }, {\n        object: 'text'\n      }],\n      last: [{\n        object: 'block'\n      }, {\n        object: 'text'\n      }],\n      normalize: function normalize(editor, error) {\n        var code = error.code,\n            node = error.node;\n        var text = Text.create();\n        var i = void 0;\n\n        if (code === 'first_child_object_invalid') {\n          i = 0;\n        } else if (code === 'last_child_object_invalid') {\n          i = node.nodes.size;\n        } else {\n          return;\n        }\n\n        editor.insertNodeByKey(node.key, i, text);\n      }\n    }, {\n      match: {\n        object: 'inline'\n      },\n      first: [{\n        object: 'block'\n      }, {\n        object: 'text'\n      }],\n      last: [{\n        object: 'block'\n      }, {\n        object: 'text'\n      }],\n      previous: [{\n        object: 'block'\n      }, {\n        object: 'text'\n      }],\n      next: [{\n        object: 'block'\n      }, {\n        object: 'text'\n      }],\n      normalize: function normalize(editor, error) {\n        var code = error.code,\n            node = error.node,\n            index = error.index;\n        var text = Text.create();\n        var i = void 0;\n\n        if (code === 'first_child_object_invalid') {\n          i = 0;\n        } else if (code === 'last_child_object_invalid') {\n          i = node.nodes.size;\n        } else if (code === 'previous_sibling_object_invalid') {\n          i = index;\n        } else if (code === 'next_sibling_object_invalid') {\n          i = index + 1;\n        } else {\n          return;\n        }\n\n        editor.insertNodeByKey(node.key, i, text);\n      }\n    }, // Merge adjacent text nodes.\n    {\n      match: {\n        object: 'text'\n      },\n      next: [{\n        object: 'block'\n      }, {\n        object: 'inline'\n      }],\n      normalize: function normalize(editor, error) {\n        var code = error.code,\n            next = error.next;\n\n        if (code === 'next_sibling_object_invalid') {\n          editor.mergeNodeByKey(next.key);\n        }\n      }\n    }]\n  });\n  /**\n   * Return the plugins.\n   *\n   * @type {Array}\n   */\n\n  return [schema].concat(toConsumableArray(plugins), [commands, queries]);\n}\n/**\n * Export.\n *\n * @type {Object}\n */\n\n\nvar debug$2 = Debug('slate:editor');\n/**\n * Editor.\n *\n * @type {Editor}\n */\n\nvar Editor = function () {\n  /**\n   * Create a new `Editor` with `attrs`.\n   *\n   * @param {Object} attrs\n   * @param {Object} options\n   */\n  function Editor() {\n    var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    classCallCheck(this, Editor);\n    var _options$controller = options.controller,\n        controller = _options$controller === undefined ? this : _options$controller,\n        _options$construct = options.construct,\n        construct = _options$construct === undefined ? true : _options$construct;\n    var _attrs$onChange = attrs.onChange,\n        onChange = _attrs$onChange === undefined ? function () {} : _attrs$onChange,\n        _attrs$plugins = attrs.plugins,\n        plugins = _attrs$plugins === undefined ? [] : _attrs$plugins,\n        _attrs$readOnly = attrs.readOnly,\n        readOnly = _attrs$readOnly === undefined ? false : _attrs$readOnly,\n        _attrs$value = attrs.value,\n        value = _attrs$value === undefined ? Value.create() : _attrs$value;\n    this.controller = controller;\n    this.middleware = {};\n    this.onChange = onChange;\n    this.operations = List();\n    this.readOnly = null;\n    this.value = null;\n    this.tmp = {\n      dirty: [],\n      flushing: false,\n      merge: null,\n      normalize: true,\n      save: true\n    };\n    var core = CorePlugin({\n      plugins: plugins\n    });\n    registerPlugin(this, core);\n\n    if (construct) {\n      this.run('onConstruct');\n      this.setReadOnly(readOnly);\n      this.setValue(value, options);\n    }\n  }\n  /**\n   * Apply an `operation` to the editor, updating its value.\n   *\n   * @param {Operation|Object} operation\n   * @return {Editor}\n   */\n\n\n  createClass(Editor, [{\n    key: 'applyOperation',\n    value: function applyOperation(operation) {\n      var _this = this;\n\n      var operations = this.operations,\n          controller = this.controller;\n      var value = this.value; // Add in the current `value` in case the operation was serialized.\n\n      if (isPlainObject(operation)) {\n        operation = _extends({}, operation, {\n          value: value\n        });\n      }\n\n      operation = Operation.create(operation); // Save the operation into the history. Since `save` is a command, we need\n      // to do it without normalizing, since it would have side effects.\n\n      this.withoutNormalizing(function () {\n        controller.save(operation);\n        value = _this.value;\n      }); // Apply the operation to the value.\n\n      debug$2('apply', {\n        operation: operation\n      });\n      this.value = operation.apply(value);\n      this.operations = operations.push(operation); // Get the paths of the affected nodes, and mark them as dirty.\n\n      var newDirtyPaths = getDirtyPaths(operation);\n      var dirty = this.tmp.dirty.reduce(function (memo, path) {\n        path = PathUtils.create(path);\n        var transformed = PathUtils.transform(path, operation);\n        memo = memo.concat(transformed.toArray());\n        return memo;\n      }, newDirtyPaths);\n      this.tmp.dirty = dirty; // If we're not already, queue the flushing process on the next tick.\n\n      if (!this.tmp.flushing) {\n        this.tmp.flushing = true;\n        Promise.resolve().then(function () {\n          return _this.flush();\n        });\n      }\n\n      return controller;\n    }\n    /**\n     * Flush the editor's current change.\n     *\n     * @return {Editor}\n     */\n\n  }, {\n    key: 'flush',\n    value: function flush() {\n      this.run('onChange');\n      var value = this.value,\n          operations = this.operations,\n          controller = this.controller;\n      var change = {\n        value: value,\n        operations: operations\n      };\n      this.operations = List();\n      this.tmp.flushing = false;\n      this.onChange(change);\n      return controller;\n    }\n    /**\n     * Trigger a command by `type` with `...args`.\n     *\n     * @param {String|Function} type\n     * @param {Any} ...args\n     * @return {Editor}\n     */\n\n  }, {\n    key: 'command',\n    value: function command(type) {\n      for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      var controller = this.controller;\n\n      if (typeof type === 'function') {\n        type.apply(undefined, [controller].concat(args));\n        normalizeDirtyPaths(this);\n        return controller;\n      }\n\n      debug$2('command', {\n        type: type,\n        args: args\n      });\n      var obj = {\n        type: type,\n        args: args\n      };\n      this.run('onCommand', obj);\n      normalizeDirtyPaths(this);\n      return controller;\n    }\n    /**\n     * Checks if a command by `type` has been registered.\n     *\n     * @param {String} type\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'hasCommand',\n    value: function hasCommand(type) {\n      var controller = this.controller;\n      var has = type in controller && controller[type].__command;\n      return has;\n    }\n    /**\n     * Checks if a query by `type` has been registered.\n     *\n     * @param {String} type\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'hasQuery',\n    value: function hasQuery(type) {\n      var controller = this.controller;\n      var has = type in controller && controller[type].__query;\n      return has;\n    }\n    /**\n     * Normalize all of the nodes in the document from scratch.\n     *\n     * @return {Editor}\n     */\n\n  }, {\n    key: 'normalize',\n    value: function normalize() {\n      var value = this.value,\n          controller = this.controller;\n      var document = value.document;\n      var table = document.getKeysToPathsTable();\n      var paths = Object.values(table).map(PathUtils.create);\n      this.tmp.dirty = this.tmp.dirty.concat(paths);\n      normalizeDirtyPaths(this);\n      var selection = value.selection;\n      document = value.document;\n\n      if (selection.isUnset && document.nodes.size) {\n        controller.moveToStartOfDocument();\n      }\n\n      return controller;\n    }\n    /**\n     * Ask a query by `type` with `...args`.\n     *\n     * @param {String|Function} type\n     * @param {Any} ...args\n     * @return {Any}\n     */\n\n  }, {\n    key: 'query',\n    value: function query(type) {\n      for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        args[_key2 - 1] = arguments[_key2];\n      }\n\n      var controller = this.controller;\n\n      if (typeof type === 'function') {\n        return type.apply(undefined, [controller].concat(args));\n      }\n\n      debug$2('query', {\n        type: type,\n        args: args\n      });\n      var obj = {\n        type: type,\n        args: args\n      };\n      return this.run('onQuery', obj);\n    }\n    /**\n     * Register a command `type` with the editor.\n     *\n     * @param {String} type\n     * @return {Editor}\n     */\n\n  }, {\n    key: 'registerCommand',\n    value: function registerCommand(type) {\n      var _this2 = this;\n\n      var controller = this.controller;\n\n      if (type in controller && controller[type].__command) {\n        return controller;\n      }\n\n      invariant(!(type in controller), 'You cannot register a `' + type + '` command because it would overwrite an existing property of the `Editor`.');\n\n      var method = function method() {\n        for (var _len3 = arguments.length, args = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n          args[_key3] = arguments[_key3];\n        }\n\n        return _this2.command.apply(_this2, [type].concat(args));\n      };\n\n      controller[type] = method;\n      method.__command = true;\n      return controller;\n    }\n    /**\n     * Register a query `type` with the editor.\n     *\n     * @param {String} type\n     * @return {Editor}\n     */\n\n  }, {\n    key: 'registerQuery',\n    value: function registerQuery(type) {\n      var _this3 = this;\n\n      var controller = this.controller;\n\n      if (type in controller && controller[type].__query) {\n        return controller;\n      }\n\n      invariant(!(type in controller), 'You cannot register a `' + type + '` query because it would overwrite an existing property of the `Editor`.');\n\n      var method = function method() {\n        for (var _len4 = arguments.length, args = Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n          args[_key4] = arguments[_key4];\n        }\n\n        return _this3.query.apply(_this3, [type].concat(args));\n      };\n\n      controller[type] = method;\n      method.__query = true;\n      return controller;\n    }\n    /**\n     * Run through the middleware stack by `key` with `args`.\n     *\n     * @param {String} key\n     * @param {Any} ...args\n     * @return {Any}\n     */\n\n  }, {\n    key: 'run',\n    value: function run(key) {\n      for (var _len5 = arguments.length, args = Array(_len5 > 1 ? _len5 - 1 : 0), _key5 = 1; _key5 < _len5; _key5++) {\n        args[_key5 - 1] = arguments[_key5];\n      }\n\n      var controller = this.controller,\n          middleware = this.middleware;\n      var fns = middleware[key] || [];\n      var i = 0;\n\n      function next() {\n        var fn = fns[i++];\n        if (!fn) return;\n\n        for (var _len6 = arguments.length, overrides = Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n          overrides[_key6] = arguments[_key6];\n        }\n\n        if (overrides.length) {\n          args = overrides;\n        }\n\n        var ret = fn.apply(undefined, toConsumableArray(args).concat([controller, next]));\n        return ret;\n      }\n\n      Object.defineProperty(next, 'change', {\n        get: function get$$1() {\n          invariant(false, 'As of Slate 0.42, the `editor` is no longer passed as the third argument to event handlers. You can access it via `change.editor` instead.');\n        }\n      });\n      Object.defineProperty(next, 'onChange', {\n        get: function get$$1() {\n          invariant(false, 'As of Slate 0.42, the `editor` is no longer passed as the third argument to event handlers. You can access it via `change.editor` instead.');\n        }\n      });\n      Object.defineProperty(next, 'props', {\n        get: function get$$1() {\n          invariant(false, 'As of Slate 0.42, the `editor` is no longer passed as the third argument to event handlers. You can access it via `change.editor` instead.');\n        }\n      });\n      Object.defineProperty(next, 'schema', {\n        get: function get$$1() {\n          invariant(false, 'As of Slate 0.42, the `editor` is no longer passed as the third argument to event handlers. You can access it via `change.editor` instead.');\n        }\n      });\n      Object.defineProperty(next, 'stack', {\n        get: function get$$1() {\n          invariant(false, 'As of Slate 0.42, the `editor` is no longer passed as the third argument to event handlers. You can access it via `change.editor` instead.');\n        }\n      });\n      return next();\n    }\n    /**\n     * Set the `readOnly` flag.\n     *\n     * @param {Boolean} readOnly\n     * @return {Editor}\n     */\n\n  }, {\n    key: 'setReadOnly',\n    value: function setReadOnly(readOnly) {\n      this.readOnly = readOnly;\n      return this;\n    }\n    /**\n     * Set the editor's `value`.\n     *\n     * @param {Value} value\n     * @param {Options} options\n     * @return {Editor}\n     */\n\n  }, {\n    key: 'setValue',\n    value: function setValue(value) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var _options$normalize = options.normalize,\n          normalize = _options$normalize === undefined ? value !== this.value : _options$normalize;\n      this.value = value;\n\n      if (normalize) {\n        this.normalize();\n      }\n\n      return this;\n    }\n    /**\n     * Apply a series of changes inside a synchronous `fn`, deferring\n     * normalization until after the function has finished executing.\n     *\n     * @param {Function} fn\n     * @return {Editor}\n     */\n\n  }, {\n    key: 'withoutNormalizing',\n    value: function withoutNormalizing(fn) {\n      var controller = this.controller;\n      var value = this.tmp.normalize;\n      this.tmp.normalize = false;\n      fn(controller);\n      this.tmp.normalize = value;\n      normalizeDirtyPaths(this);\n      return controller;\n    }\n    /**\n     * Deprecated.\n     */\n\n  }, {\n    key: 'change',\n    value: function change(fn) {\n      warning(false, 'As of Slate 0.43 the `change` object has been replaced with `editor`, so the `editor.change()` method is deprecated.`');\n\n      for (var _len7 = arguments.length, args = Array(_len7 > 1 ? _len7 - 1 : 0), _key7 = 1; _key7 < _len7; _key7++) {\n        args[_key7 - 1] = arguments[_key7];\n      }\n\n      fn.apply(undefined, [this.controller].concat(args));\n    }\n  }, {\n    key: 'call',\n    value: function call(fn) {\n      warning(false, 'As of Slate 0.43 the `editor.call(fn)` method has been deprecated, please use `editor.command(fn)` instead.');\n\n      for (var _len8 = arguments.length, args = Array(_len8 > 1 ? _len8 - 1 : 0), _key8 = 1; _key8 < _len8; _key8++) {\n        args[_key8 - 1] = arguments[_key8];\n      }\n\n      fn.apply(undefined, [this.controller].concat(args));\n      return this.controller;\n    }\n  }, {\n    key: 'applyOperations',\n    value: function applyOperations(operations) {\n      var _this4 = this;\n\n      warning(false, 'As of Slate 0.43 the `applyOperations` method is deprecated, please apply each operation in a loop instead.');\n      operations.forEach(function (op) {\n        return _this4.applyOperation(op);\n      });\n      return this.controller;\n    }\n  }, {\n    key: 'setOperationFlag',\n    value: function setOperationFlag(key, value) {\n      warning(false, 'As of slate@0.41 the `change.setOperationFlag` method has been deprecated.');\n      this.tmp[key] = value;\n      return this;\n    }\n  }, {\n    key: 'getFlag',\n    value: function getFlag(key) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      warning(false, 'As of slate@0.41 the `change.getFlag` method has been deprecated.');\n      return options[key] !== undefined ? options[key] : this.tmp[key];\n    }\n  }, {\n    key: 'unsetOperationFlag',\n    value: function unsetOperationFlag(key) {\n      warning(false, 'As of slate@0.41 the `change.unsetOperationFlag` method has been deprecated.');\n      delete this.tmp[key];\n      return this;\n    }\n  }, {\n    key: 'withoutNormalization',\n    value: function withoutNormalization(fn) {\n      warning(false, 'As of slate@0.41 the `change.withoutNormalization` helper has been renamed to `change.withoutNormalizing`.');\n      return this.withoutNormalizing(fn);\n    }\n  }, {\n    key: 'editor',\n    get: function get$$1() {\n      warning(false, \"As of Slate 0.43 the `change` object has been replaced with `editor`, so you don't need to access `change.editor`.\");\n      return this.controller;\n    }\n  }]);\n  return Editor;\n}();\n/**\n * Get the \"dirty\" paths for a given `operation`.\n *\n * @param {Operation} operation\n * @return {Array}\n */\n\n\nfunction getDirtyPaths(operation) {\n  var type = operation.type,\n      node = operation.node,\n      path = operation.path,\n      newPath = operation.newPath;\n\n  switch (type) {\n    case 'add_mark':\n    case 'insert_text':\n    case 'remove_mark':\n    case 'remove_text':\n    case 'set_mark':\n    case 'set_node':\n      {\n        var ancestors = PathUtils.getAncestors(path).toArray();\n        return [].concat(toConsumableArray(ancestors), [path]);\n      }\n\n    case 'insert_node':\n      {\n        var table = node.getKeysToPathsTable();\n        var paths = Object.values(table).map(function (p) {\n          return path.concat(p);\n        });\n\n        var _ancestors = PathUtils.getAncestors(path).toArray();\n\n        return [].concat(toConsumableArray(_ancestors), [path], toConsumableArray(paths));\n      }\n\n    case 'split_node':\n      {\n        var _ancestors2 = PathUtils.getAncestors(path).toArray();\n\n        var nextPath = PathUtils.increment(path);\n        return [].concat(toConsumableArray(_ancestors2), [path, nextPath]);\n      }\n\n    case 'merge_node':\n      {\n        var _ancestors3 = PathUtils.getAncestors(path).toArray();\n\n        var previousPath = PathUtils.decrement(path);\n        return [].concat(toConsumableArray(_ancestors3), [previousPath]);\n      }\n\n    case 'move_node':\n      {\n        if (PathUtils.isEqual(path, newPath)) {\n          return [];\n        }\n\n        var oldAncestors = PathUtils.getAncestors(path).reduce(function (arr, p) {\n          arr.push.apply(arr, toConsumableArray(PathUtils.transform(p, operation).toArray()));\n          return arr;\n        }, []);\n        var newAncestors = PathUtils.getAncestors(newPath).reduce(function (arr, p) {\n          arr.push.apply(arr, toConsumableArray(PathUtils.transform(p, operation).toArray()));\n          return arr;\n        }, []);\n        return [].concat(toConsumableArray(oldAncestors), toConsumableArray(newAncestors));\n      }\n\n    case 'remove_node':\n      {\n        var _ancestors4 = PathUtils.getAncestors(path).toArray();\n\n        return [].concat(toConsumableArray(_ancestors4));\n      }\n\n    default:\n      {\n        return [];\n      }\n  }\n}\n/**\n * Normalize any new \"dirty\" paths that have been added to the change.\n *\n * @param {Editor}\n */\n\n\nfunction normalizeDirtyPaths(editor) {\n  if (!editor.tmp.normalize) {\n    return;\n  }\n\n  if (!editor.tmp.dirty.length) {\n    return;\n  }\n\n  editor.withoutNormalizing(function () {\n    while (editor.tmp.dirty.length) {\n      var path = editor.tmp.dirty.pop();\n      normalizeNodeByPath(editor, path);\n    }\n  });\n}\n/**\n * Normalize the node at a specific `path`.\n *\n * @param {Editor} editor\n * @param {Array} path\n */\n\n\nfunction normalizeNodeByPath(editor, path) {\n  var controller = editor.controller;\n  var value = editor.value;\n  var _value = value,\n      document = _value.document;\n  var node = document.assertNode(path);\n  var iterations = 0;\n  var max = 100 + (node.object === 'text' ? 1 : node.nodes.size);\n\n  while (node) {\n    var fn = node.normalize(controller);\n\n    if (!fn) {\n      break;\n    } // Run the normalize `fn` to fix the node.\n\n\n    fn(controller); // Attempt to re-find the node by path, or by key if it has changed\n    // locations in the tree continue iterating.\n\n    value = editor.value;\n    document = value.document;\n    var _node = node,\n        key = _node.key;\n    var found = document.getDescendant(path);\n\n    if (found && found.key === key) {\n      node = found;\n    } else {\n      found = document.getDescendant(key);\n\n      if (found) {\n        node = found;\n        path = document.getPath(key);\n      } else {\n        // If it no longer exists by key, it was removed, so we're done.\n        break;\n      }\n    } // Increment the iterations counter, and check to make sure that we haven't\n    // exceeded the max. Without this check, it's easy for the `normalize`\n    // function of a schema rule to be written incorrectly and for an infinite\n    // invalid loop to occur.\n\n\n    iterations++;\n\n    if (iterations > max) {\n      throw new Error('A schema rule could not be normalized after sufficient iterations. This is usually due to a `rule.normalize` or `plugin.normalizeNode` function of a schema being incorrectly written, causing an infinite loop.');\n    }\n  }\n}\n/**\n * Register a `plugin` with the editor.\n *\n * @param {Editor} editor\n * @param {Object|Array} plugin\n */\n\n\nfunction registerPlugin(editor, plugin) {\n  if (Array.isArray(plugin)) {\n    plugin.forEach(function (p) {\n      return registerPlugin(editor, p);\n    });\n    return;\n  }\n\n  var commands = plugin.commands,\n      queries = plugin.queries,\n      schema = plugin.schema,\n      rest = objectWithoutProperties(plugin, ['commands', 'queries', 'schema']);\n\n  if (commands) {\n    var commandsPlugin = CommandsPlugin(commands);\n    registerPlugin(editor, commandsPlugin);\n  }\n\n  if (queries) {\n    var queriesPlugin = QueriesPlugin(queries);\n    registerPlugin(editor, queriesPlugin);\n  }\n\n  if (schema) {\n    var schemaPlugin = SchemaPlugin(schema);\n    registerPlugin(editor, schemaPlugin);\n  }\n\n  for (var key in rest) {\n    var fn = rest[key];\n    var middleware = editor.middleware[key] = editor.middleware[key] || [];\n    middleware.push(fn);\n  }\n}\n/**\n * Export.\n *\n * @type {Editor}\n */\n\n/**\n * Mix in an `Interface` to a `Class`.\n *\n * @param {Class} Interface\n * @param {Class} Class\n */\n\n\nfunction mixin(Interface, Classes) {\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = Classes[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var Class = _step.value; // Copy static properties from the interface.\n\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = Object.getOwnPropertyNames(Interface)[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var name = _step2.value;\n          if (Class.hasOwnProperty(name)) continue;\n          var desc = Object.getOwnPropertyDescriptor(Interface, name);\n          Object.defineProperty(Class, name, desc);\n        } // Copy instance properties from the interface.\n\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      var _iteratorNormalCompletion3 = true;\n      var _didIteratorError3 = false;\n      var _iteratorError3 = undefined;\n\n      try {\n        for (var _iterator3 = Object.getOwnPropertyNames(Interface.prototype)[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n          var _name = _step3.value;\n          if (Class.prototype.hasOwnProperty(_name)) continue;\n          var desc = Object.getOwnPropertyDescriptor(Interface.prototype, _name);\n          Object.defineProperty(Class.prototype, _name, desc);\n        }\n      } catch (err) {\n        _didIteratorError3 = true;\n        _iteratorError3 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion3 && _iterator3.return) {\n            _iterator3.return();\n          }\n        } finally {\n          if (_didIteratorError3) {\n            throw _iteratorError3;\n          }\n        }\n      }\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n}\n\nfunction create$2(type) {\n  var TYPE = TYPES[type];\n  var camel = '' + type.charAt(0).toUpperCase() + type.slice(1);\n  var is$$1 = 'is' + camel;\n\n  var ObjectInterface = function () {\n    function ObjectInterface() {\n      classCallCheck(this, ObjectInterface);\n    }\n\n    createClass(ObjectInterface, [{\n      key: 'object',\n\n      /**\n       * Return the type of the object.\n       *\n       * @return {String}\n       */\n      get: function get$$1() {\n        return type;\n      }\n    }]);\n    return ObjectInterface;\n  }();\n\n  ObjectInterface[is$$1] = isObject.bind(null, type);\n  ObjectInterface.prototype[TYPE] = true;\n  return ObjectInterface;\n}\n/**\n * Mix in the object interfaces.\n */\n\n\nObject.entries({\n  Block: Block,\n  Change: Change,\n  Decoration: Decoration,\n  Document: Document,\n  Editor: Editor,\n  Inline: Inline,\n  Leaf: Leaf,\n  Mark: Mark,\n  Node: Node,\n  Operation: Operation,\n  Point: Point,\n  Range: Range,\n  Selection: Selection,\n  Text: Text,\n  Value: Value\n}).forEach(function (_ref) {\n  var _ref2 = slicedToArray(_ref, 2),\n      camel = _ref2[0],\n      obj = _ref2[1];\n\n  return mixin(create$2(camel.toLowerCase()), [obj]);\n});\n\nvar ModelInterface = function () {\n  function ModelInterface() {\n    classCallCheck(this, ModelInterface);\n  }\n\n  createClass(ModelInterface, [{\n    key: 'toJS',\n\n    /**\n     * Alias `toJS`.\n     */\n    value: function toJS() {\n      return this.toJSON.apply(this, arguments);\n    }\n  }], [{\n    key: 'fromJS',\n\n    /**\n     * Alias `fromJS`.\n     */\n    value: function fromJS() {\n      return this.fromJSON.apply(this, arguments);\n    }\n  }]);\n  return ModelInterface;\n}();\n/**\n * Mix in the common interface.\n *\n * @param {Record}\n */\n\n\nmixin(ModelInterface, [Block, Decoration, Document, Inline, Leaf, Mark, Node, Operation, Point, Range, Selection, Text, Value]);\n\nvar NodeInterface = function () {\n  function NodeInterface() {\n    classCallCheck(this, NodeInterface);\n  }\n\n  createClass(NodeInterface, [{\n    key: 'getFirstText',\n\n    /**\n     * Get the first text node of a node, or the node itself.\n     *\n     * @return {Node|Null}\n     */\n    value: function getFirstText() {\n      if (this.object === 'text') {\n        return this;\n      }\n\n      var descendant = null;\n      var found = this.nodes.find(function (node) {\n        if (node.object === 'text') return true;\n        descendant = node.getFirstText();\n        return !!descendant;\n      });\n      return descendant || found;\n    }\n    /**\n     * Get an object mapping all the keys in the node to their paths.\n     *\n     * @return {Object}\n     */\n\n  }, {\n    key: 'getKeysToPathsTable',\n    value: function getKeysToPathsTable() {\n      var ret = defineProperty({}, this.key, []);\n\n      if (this.nodes) {\n        this.nodes.forEach(function (node, i) {\n          var nested = node.getKeysToPathsTable();\n\n          for (var key in nested) {\n            var path = nested[key];\n            warning(!(key in ret), 'A node with a duplicate key of \"' + key + '\" was found! Duplicate keys are not allowed, you should use `node.regenerateKey` before inserting if you are reusing an existing node.');\n            ret[key] = [i].concat(toConsumableArray(path));\n          }\n        });\n      }\n\n      return ret;\n    }\n    /**\n     * Get the last text node of a node, or the node itself.\n     *\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getLastText',\n    value: function getLastText() {\n      if (this.object === 'text') {\n        return this;\n      }\n\n      var descendant = null;\n      var found = this.nodes.findLast(function (node) {\n        if (node.object === 'text') return true;\n        descendant = node.getLastText();\n        return descendant;\n      });\n      return descendant || found;\n    }\n    /**\n     * Get a node in the tree, or the node itself.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getNode',\n    value: function getNode(path) {\n      path = this.resolvePath(path);\n      if (!path) return null;\n      if (this.object === 'text' && path.size) return null;\n      var node = path.size ? this.getDescendant(path) : this;\n      return node;\n    }\n    /**\n     * Find the path to a node.\n     *\n     * @param {String|List} key\n     * @return {List}\n     */\n\n  }, {\n    key: 'getPath',\n    value: function getPath(key) {\n      // Handle the case of passing in a path directly, to match other methods.\n      if (List.isList(key)) return key;\n      var dict = this.getKeysToPathsTable();\n      var path = dict[key];\n      return path ? List(path) : null;\n    }\n    /**\n     * Get the concatenated text string of a node.\n     *\n     * @return {String}\n     */\n\n  }, {\n    key: 'getText',\n    value: function getText() {\n      var children = this.object === 'text' ? this.leaves : this.nodes;\n      var text = children.reduce(function (memo, c) {\n        return memo + c.text;\n      }, '');\n      return text;\n    }\n    /**\n     * Check if a node exists.\n     *\n     * @param {List|String} path\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'hasNode',\n    value: function hasNode(path) {\n      var node = this.getNode(path);\n      return !!node;\n    }\n    /**\n     * Normalize the text node with an `editor`.\n     *\n     * @param {Editor} editor\n     * @return {Function|Void}\n     */\n\n  }, {\n    key: 'normalize',\n    value: function normalize(editor) {\n      var normalizer = editor.run('normalizeNode', this);\n      return normalizer;\n    }\n    /**\n     * Regenerate the node's key.\n     *\n     * @return {Node}\n     */\n\n  }, {\n    key: 'regenerateKey',\n    value: function regenerateKey() {\n      var key = KeyUtils.create();\n      var node = this.set('key', key);\n      return node;\n    }\n    /**\n     * Resolve a path from a path list or key string.\n     *\n     * An `index` can be provided, in which case paths created from a key string\n     * will have the index pushed onto them. This is helpful in cases where you\n     * want to accept either a `path` or a `key, index` combination for targeting\n     * a location in the tree that doesn't exist yet, like when inserting.\n     *\n     * @param {List|String} value\n     * @param {Number} index\n     * @return {List}\n     */\n\n  }, {\n    key: 'resolvePath',\n    value: function resolvePath(path, index) {\n      if (typeof path === 'string') {\n        path = this.getPath(path);\n\n        if (index != null) {\n          path = path.concat(index);\n        }\n      } else {\n        path = PathUtils.create(path);\n      }\n\n      return path;\n    }\n    /**\n     * Validate the node with an `editor`.\n     *\n     * @param {Editor} editor\n     * @return {Error|Void}\n     */\n\n  }, {\n    key: 'validate',\n    value: function validate(editor) {\n      var error = editor.run('validateNode', this);\n      return error;\n    }\n  }, {\n    key: 'text',\n\n    /**\n     * Get the concatenated text of the node.\n     *\n     * @return {String}\n     */\n    get: function get$$1() {\n      return this.getText();\n    }\n  }]);\n  return NodeInterface;\n}();\n/**\n * Memoize read methods.\n */\n\n\nmemoize(NodeInterface.prototype, ['getFirstText', 'getKeysToPathsTable', 'getLastText', 'getText', 'normalize', 'validate']);\n/**\n * Mix in the node interface.\n */\n\nmixin(NodeInterface, [Block, Document, Inline, Text]);\n\nvar ElementInterface = function () {\n  function ElementInterface() {\n    classCallCheck(this, ElementInterface);\n  }\n\n  createClass(ElementInterface, [{\n    key: 'addMark',\n\n    /**\n     * Add mark to text at `offset` and `length` in node by `path`.\n     *\n     * @param {List|String} path\n     * @param {Number} offset\n     * @param {Number} length\n     * @param {Mark} mark\n     * @return {Node}\n     */\n    value: function addMark(path, offset, length, mark) {\n      var node = this.assertDescendant(path);\n      path = this.resolvePath(path);\n      node = node.addMark(offset, length, mark);\n      var ret = this.replaceNode(path, node);\n      return ret;\n    }\n    /**\n     * Create a decoration with `properties` relative to the node.\n     *\n     * @param {Object|Decoration} properties\n     * @return {Decoration}\n     */\n\n  }, {\n    key: 'createDecoration',\n    value: function createDecoration(properties) {\n      properties = Decoration.createProperties(properties);\n      var decoration = this.resolveDecoration(properties);\n      return decoration;\n    }\n    /**\n     * Create a point with `properties` relative to the node.\n     *\n     * @param {Object|Point} properties\n     * @return {Range}\n     */\n\n  }, {\n    key: 'createPoint',\n    value: function createPoint(properties) {\n      properties = Point.createProperties(properties);\n      var point = this.resolvePoint(properties);\n      return point;\n    }\n    /**\n     * Create a range with `properties` relative to the node.\n     *\n     * @param {Object|Range} properties\n     * @return {Range}\n     */\n\n  }, {\n    key: 'createRange',\n    value: function createRange(properties) {\n      properties = Range.createProperties(properties);\n      var range = this.resolveRange(properties);\n      return range;\n    }\n    /**\n     * Create a selection with `properties` relative to the node.\n     *\n     * @param {Object|Selection} properties\n     * @return {Selection}\n     */\n\n  }, {\n    key: 'createSelection',\n    value: function createSelection(properties) {\n      properties = Selection.createProperties(properties);\n      var selection = this.resolveSelection(properties);\n      return selection;\n    }\n    /**\n     * Recursively filter all descendant nodes with `iterator`.\n     *\n     * @param {Function} iterator\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'filterDescendants',\n    value: function filterDescendants(iterator) {\n      var matches = [];\n      this.forEachDescendant(function (node, i, nodes) {\n        if (iterator(node, i, nodes)) matches.push(node);\n      });\n      return List(matches);\n    }\n    /**\n     * Recursively find a descendant node by `iterator`.\n     *\n     * @param {Function} iterator\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'findDescendant',\n    value: function findDescendant(iterator) {\n      var found = null;\n      this.forEachDescendant(function (node, i, nodes) {\n        if (iterator(node, i, nodes)) {\n          found = node;\n          return false;\n        }\n      });\n      return found;\n    }\n    /**\n     * Recursively find a descendant node and its path by `iterator`.\n     *\n     * @param {Function} iterator\n     * @return {Null|[Node, List]}\n     */\n\n  }, {\n    key: 'findDescendantAndPath',\n    value: function findDescendantAndPath(iterator) {\n      var pathToThisNode = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : PathUtils.create([]);\n      var findLast = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var found = void 0;\n      var foundPath = void 0;\n      this.forEachDescendantWithPath(function (node, path, nodes) {\n        if (iterator(node, path, nodes)) {\n          found = node;\n          foundPath = path;\n          return false;\n        }\n      }, pathToThisNode, findLast);\n      return found ? [found, foundPath] : null;\n    } // Easy helpers to avoid needing to pass findLast boolean\n\n  }, {\n    key: 'findFirstDescendantAndPath',\n    value: function findFirstDescendantAndPath(iterator, pathToThisNode) {\n      return this.findDescendantAndPath(iterator, pathToThisNode, false);\n    }\n  }, {\n    key: 'findLastDescendantAndPath',\n    value: function findLastDescendantAndPath(iterator, pathToThisNode) {\n      return this.findDescendantAndPath(iterator, pathToThisNode, true);\n    }\n    /**\n     * Recursively iterate over all descendant nodes with `iterator`. If the\n     * iterator returns false it will break the loop.\n     *\n     * @param {Function} iterator\n     */\n\n  }, {\n    key: 'forEachDescendant',\n    value: function forEachDescendant(iterator) {\n      var ret = void 0;\n      this.nodes.forEach(function (child, i, nodes) {\n        if (iterator(child, i, nodes) === false) {\n          ret = false;\n          return false;\n        }\n\n        if (child.object !== 'text') {\n          ret = child.forEachDescendant(iterator);\n          return ret;\n        }\n      });\n      return ret;\n    }\n    /**\n     * Recursively iterate over all descendant nodes with `iterator`. If the\n     * iterator returns false it will break the loop.\n     * Calls iterator with node and path.\n     *\n     * @param {Function} iterator\n     * @param {List} path\n     * @param {Boolean} findLast - whether to iterate in reverse order\n     */\n\n  }, {\n    key: 'forEachDescendantWithPath',\n    value: function forEachDescendantWithPath(iterator) {\n      var path = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : PathUtils.create([]);\n      var findLast = arguments[2];\n      var nodes = this.nodes;\n      var ret = void 0;\n      if (findLast) nodes = nodes.reverse();\n      nodes.forEach(function (child, i) {\n        var childPath = path.concat(i);\n\n        if (iterator(child, childPath, nodes) === false) {\n          ret = false;\n          return false;\n        }\n\n        if (child.object !== 'text') {\n          ret = child.forEachDescendantWithPath(iterator, childPath, findLast);\n          return ret;\n        }\n      });\n      return ret;\n    }\n    /**\n     * Get a set of the active marks in a `range`.\n     *\n     * @param {Range} range\n     * @return {Set<Mark>}\n     */\n\n  }, {\n    key: 'getActiveMarksAtRange',\n    value: function getActiveMarksAtRange(range) {\n      range = this.resolveRange(range);\n      if (range.isUnset) return Set();\n\n      if (range.isCollapsed) {\n        var _range = range,\n            _start = _range.start;\n        return this.getMarksAtPosition(_start.path, _start.offset).toSet();\n      }\n\n      var _range2 = range,\n          start = _range2.start,\n          end = _range2.end;\n      var startPath = start.path;\n      var startOffset = start.offset;\n      var endPath = end.path;\n      var endOffset = end.offset;\n      var startText = this.getDescendant(startPath);\n      var endText = this.getDescendant(endPath);\n\n      if (!PathUtils.isEqual(startPath, endPath)) {\n        while (!PathUtils.isEqual(startPath, endPath) && endOffset === 0) {\n          var _getPreviousTextAndPa = this.getPreviousTextAndPath(endPath);\n\n          var _getPreviousTextAndPa2 = slicedToArray(_getPreviousTextAndPa, 2);\n\n          endText = _getPreviousTextAndPa2[0];\n          endPath = _getPreviousTextAndPa2[1];\n          endOffset = endText.text.length;\n        }\n\n        while (!PathUtils.isEqual(startPath, endPath) && startOffset === startText.text.length) {\n          var _getNextTextAndPath = this.getNextTextAndPath(startPath);\n\n          var _getNextTextAndPath2 = slicedToArray(_getNextTextAndPath, 2);\n\n          startText = _getNextTextAndPath2[0];\n          startPath = _getNextTextAndPath2[1];\n          startOffset = 0;\n        }\n      }\n\n      if (PathUtils.isEqual(startPath, endPath)) {\n        return startText.getActiveMarksBetweenOffsets(startOffset, endOffset);\n      }\n\n      var startMarks = startText.getActiveMarksBetweenOffsets(startOffset, startText.text.length);\n      if (startMarks.size === 0) return Set();\n      var endMarks = endText.getActiveMarksBetweenOffsets(0, endOffset);\n      var marks = startMarks.intersect(endMarks); // If marks is already empty, the active marks is empty\n\n      if (marks.size === 0) {\n        return marks;\n      }\n\n      var _getNextTextAndPath3 = this.getNextTextAndPath(startPath);\n\n      var _getNextTextAndPath4 = slicedToArray(_getNextTextAndPath3, 2);\n\n      startText = _getNextTextAndPath4[0];\n      startPath = _getNextTextAndPath4[1];\n\n      while (!PathUtils.isEqual(startPath, endPath)) {\n        if (startText.text.length !== 0) {\n          marks = marks.intersect(startText.getActiveMarks());\n          if (marks.size === 0) return Set();\n        }\n\n        var _getNextTextAndPath5 = this.getNextTextAndPath(startPath);\n\n        var _getNextTextAndPath6 = slicedToArray(_getNextTextAndPath5, 2);\n\n        startText = _getNextTextAndPath6[0];\n        startPath = _getNextTextAndPath6[1];\n      }\n\n      return marks;\n    }\n    /**\n     * Get a list of the ancestors of a descendant.\n     *\n     * @param {List|String} path\n     * @return {List<Node>|Null}\n     */\n\n  }, {\n    key: 'getAncestors',\n    value: function getAncestors(path) {\n      var _this = this;\n\n      path = this.resolvePath(path);\n      if (!path) return null;\n      var ancestors = [];\n      path.forEach(function (p, i) {\n        var current = path.slice(0, i);\n\n        var parent = _this.getNode(current);\n\n        ancestors.push(parent);\n      });\n      return List(ancestors);\n    }\n    /**\n     * Get the leaf block descendants of the node.\n     *\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'getBlocks',\n    value: function getBlocks() {\n      var array = this.getBlocksAsArray();\n      return List(array);\n    }\n    /**\n     * Get the leaf block descendants of the node.\n     *\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'getBlocksAsArray',\n    value: function getBlocksAsArray() {\n      return this.nodes.reduce(function (array, child) {\n        if (child.object !== 'block') return array;\n        if (!child.isLeafBlock()) return array.concat(child.getBlocksAsArray());\n        array.push(child);\n        return array;\n      }, []);\n    }\n    /**\n     * Get the leaf block descendants in a `range`.\n     *\n     * @param {Range} range\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'getBlocksAtRange',\n    value: function getBlocksAtRange(range) {\n      warning(false, 'As of slate@0.44 the `node.getBlocksAtRange` method has been renamed to `getLeafBlocksAtRange`.');\n      return this.getLeafBlocksAtRange(range);\n    }\n    /**\n     * Get the bottom-most block descendants in a `range` as an array\n     *\n     * @param {Range} range\n     * @return {Array}\n     */\n\n  }, {\n    key: 'getBlocksAtRangeAsArray',\n    value: function getBlocksAtRangeAsArray(range) {\n      warning(false, 'As of slate@0.44 the `node.getBlocksAtRangeAsArray` method has been renamed to `getLeafBlocksAtRangeAsArray`.');\n      return this.getLeafBlocksAtRangeAsArray(range);\n    }\n    /**\n     * Get all of the leaf blocks that match a `type`.\n     *\n     * @param {String} type\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'getBlocksByType',\n    value: function getBlocksByType(type) {\n      var array = this.getBlocksByTypeAsArray(type);\n      return List(array);\n    }\n    /**\n     * Get all of the leaf blocks that match a `type` as an array\n     *\n     * @param {String} type\n     * @return {Array}\n     */\n\n  }, {\n    key: 'getBlocksByTypeAsArray',\n    value: function getBlocksByTypeAsArray(type) {\n      return this.nodes.reduce(function (array, node) {\n        if (node.object !== 'block') {\n          return array;\n        } else if (node.isLeafBlock() && node.type === type) {\n          array.push(node);\n          return array;\n        } else {\n          return array.concat(node.getBlocksByTypeAsArray(type));\n        }\n      }, []);\n    }\n    /**\n     * Get a child node.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getChild',\n    value: function getChild(path) {\n      path = this.resolvePath(path);\n      if (!path || path.size > 1) return null;\n      var child = this.nodes.get(path.first());\n      return child;\n    }\n    /**\n     * Get closest parent of node that matches an `iterator`.\n     *\n     * @param {List|String} path\n     * @param {Function} iterator\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getClosest',\n    value: function getClosest(path, iterator) {\n      var _this2 = this;\n\n      var ancestors = this.getAncestors(path);\n      if (!ancestors) return null;\n      var closest = ancestors.findLast(function (node) {\n        for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          args[_key - 1] = arguments[_key];\n        } // We never want to include the top-level node.\n\n\n        if (node === _this2) return false;\n        return iterator.apply(undefined, [node].concat(args));\n      });\n      return closest || null;\n    }\n    /**\n     * Get the closest block parent of a node.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getClosestBlock',\n    value: function getClosestBlock(path) {\n      var closest = this.getClosest(path, function (n) {\n        return n.object === 'block';\n      });\n      return closest;\n    }\n    /**\n     * Get the closest inline parent of a node by `path`.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getClosestInline',\n    value: function getClosestInline(path) {\n      var closest = this.getClosest(path, function (n) {\n        return n.object === 'inline';\n      });\n      return closest;\n    }\n    /**\n     * Get the closest void parent of a node by `path`.\n     *\n     * @param {List|String} path\n     * @param {Editor} editor\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getClosestVoid',\n    value: function getClosestVoid(path, editor) {\n      invariant(!Value.isValue(editor), 'As of Slate 0.42.0, the `node.getClosestVoid` method takes an `editor` instead of a `value`.');\n      var ancestors = this.getAncestors(path);\n      if (!ancestors) return null;\n      var ancestor = ancestors.findLast(function (a) {\n        return editor.query('isVoid', a);\n      });\n      return ancestor;\n    }\n    /**\n     * Get the common ancestor of nodes `a` and `b`.\n     *\n     * @param {List} a\n     * @param {List} b\n     * @return {Node}\n     */\n\n  }, {\n    key: 'getCommonAncestor',\n    value: function getCommonAncestor(a, b) {\n      a = this.resolvePath(a);\n      b = this.resolvePath(b);\n      if (!a || !b) return null;\n      var path = PathUtils.relate(a, b);\n      var node = this.getNode(path);\n      return node;\n    }\n    /**\n     * Get the decorations for the node from an `editor`.\n     *\n     * @param {Editor} editor\n     * @return {List}\n     */\n\n  }, {\n    key: 'getDecorations',\n    value: function getDecorations(editor) {\n      invariant(!Value.isValue(editor), 'As of Slate 0.42.0, the `node.getDecorations` method takes an `editor` instead of a `value`.');\n      var array = editor.run('decorateNode', this);\n      var decorations = Decoration.createList(array);\n      return decorations;\n    }\n    /**\n     * Get the depth of a descendant, with optional `startAt`.\n     *\n     * @param {List|String} path\n     * @param {Number} startAt\n     * @return {Number|Null}\n     */\n\n  }, {\n    key: 'getDepth',\n    value: function getDepth(path) {\n      var startAt = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      path = this.resolvePath(path);\n      if (!path) return null;\n      var node = this.getNode(path);\n      var depth = node ? path.size - 1 + startAt : null;\n      return depth;\n    }\n    /**\n     * Get a descendant node.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getDescendant',\n    value: function getDescendant(path) {\n      path = this.resolvePath(path);\n      if (!path || !path.size) return null;\n      var node = this;\n      path.forEach(function (index) {\n        node = node.getIn(['nodes', index]);\n        return !!node;\n      });\n      return node;\n    }\n    /**\n     * Get a fragment of the node at a `range`.\n     *\n     * @param {Range} range\n     * @return {Document}\n     */\n\n  }, {\n    key: 'getFragmentAtRange',\n    value: function getFragmentAtRange(range) {\n      range = this.resolveRange(range);\n\n      if (range.isUnset) {\n        return Document.create();\n      }\n\n      var _range3 = range,\n          start = _range3.start,\n          end = _range3.end;\n      var node = this;\n      var targetPath = end.path;\n      var targetPosition = end.offset;\n      var mode = 'end';\n\n      while (targetPath.size) {\n        var index = targetPath.last();\n        node = node.splitNode(targetPath, targetPosition);\n        targetPosition = index + 1;\n        targetPath = PathUtils.lift(targetPath);\n\n        if (!targetPath.size && mode === 'end') {\n          targetPath = start.path;\n          targetPosition = start.offset;\n          mode = 'start';\n        }\n      }\n\n      var startIndex = start.path.first() + 1;\n      var endIndex = end.path.first() + 2;\n      var nodes = node.nodes.slice(startIndex, endIndex);\n      var fragment = Document.create({\n        nodes: nodes\n      });\n      return fragment;\n    }\n    /**\n     * Get the furthest parent of a node that matches an `iterator`.\n     *\n     * @param {Path} path\n     * @param {Function} iterator\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getFurthest',\n    value: function getFurthest(path, iterator) {\n      var _this3 = this;\n\n      var ancestors = this.getAncestors(path);\n      if (!ancestors) return null;\n      var furthest = ancestors.find(function (node) {\n        for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n          args[_key2 - 1] = arguments[_key2];\n        } // We never want to include the top-level node.\n\n\n        if (node === _this3) return false;\n        return iterator.apply(undefined, [node].concat(args));\n      });\n      return furthest || null;\n    }\n    /**\n     * Get the furthest ancestor of a node.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getFurthestAncestor',\n    value: function getFurthestAncestor(path) {\n      path = this.resolvePath(path);\n      if (!path || !path.size) return null;\n      var furthest = this.nodes.get(path.first());\n      return furthest;\n    }\n    /**\n     * Get the furthest block parent of a node.\n     *\n     * @param {Path} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getFurthestBlock',\n    value: function getFurthestBlock(path) {\n      var furthest = this.getFurthest(path, function (n) {\n        return n.object === 'block';\n      });\n      return furthest;\n    }\n    /**\n     * Get the furthest inline parent of a node.\n     *\n     * @param {Path} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getFurthestInline',\n    value: function getFurthestInline(path) {\n      var furthest = this.getFurthest(path, function (n) {\n        return n.object === 'inline';\n      });\n      return furthest;\n    }\n    /**\n     * Get the furthest ancestor of a node, where all ancestors to that point only have one child.\n     *\n     * @param {Path} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getFurthestOnlyChildAncestor',\n    value: function getFurthestOnlyChildAncestor(path) {\n      var ancestors = this.getAncestors(path);\n      if (!ancestors) return null;\n      var furthest = ancestors.rest().reverse().takeUntil(function (p) {\n        return p.nodes.size > 1;\n      }).last();\n      return furthest || null;\n    }\n    /**\n     * Get the closest inline nodes for each text node in the node.\n     *\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'getInlines',\n    value: function getInlines() {\n      var array = this.getInlinesAsArray();\n      var list = List(array);\n      return list;\n    }\n    /**\n     * Get the closest inline nodes for each text node in the node, as an array.\n     *\n     * @return {Array<Node>}\n     */\n\n  }, {\n    key: 'getInlinesAsArray',\n    value: function getInlinesAsArray() {\n      var array = [];\n      this.nodes.forEach(function (child) {\n        if (child.object === 'text') return;\n\n        if (child.isLeafInline()) {\n          array.push(child);\n        } else {\n          array = array.concat(child.getInlinesAsArray());\n        }\n      });\n      return array;\n    }\n    /**\n     * Get the bottom-most inline nodes for each text node in a `range`.\n     *\n     * @param {Range} range\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'getInlinesAtRange',\n    value: function getInlinesAtRange(range) {\n      warning(false, 'As of slate@0.44 the `node.getInlinesAtRange` method has been renamed to `getLeafInlinesAtRange`.');\n      return this.getLeafInlinesAtRange(range);\n    }\n    /**\n     * Get the bottom-most inline nodes for each text node in a `range` as an array.\n     *\n     * @param {Range} range\n     * @return {Array}\n     */\n\n  }, {\n    key: 'getInlinesAtRangeAsArray',\n    value: function getInlinesAtRangeAsArray(range) {\n      warning(false, 'As of slate@0.44 the `node.getInlinesAtRangeAsArray` method has been renamed to `getLeafInlinesAtRangeAsArray`.');\n      return this.getLeafInlinesAtRangeAsArray(range);\n    }\n    /**\n     * Get all of the leaf inline nodes that match a `type`.\n     *\n     * @param {String} type\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'getInlinesByType',\n    value: function getInlinesByType(type) {\n      var array = this.getInlinesByTypeAsArray(type);\n      var list = List(array);\n      return list;\n    }\n    /**\n     * Get all of the leaf inline nodes that match a `type` as an array.\n     *\n     * @param {String} type\n     * @return {Array}\n     */\n\n  }, {\n    key: 'getInlinesByTypeAsArray',\n    value: function getInlinesByTypeAsArray(type) {\n      var array = this.nodes.reduce(function (inlines, node) {\n        if (node.object === 'text') {\n          return inlines;\n        } else if (node.isLeafInline() && node.type === type) {\n          inlines.push(node);\n          return inlines;\n        } else {\n          return inlines.concat(node.getInlinesByTypeAsArray(type));\n        }\n      }, []);\n      return array;\n    }\n    /**\n     * Get a set of the marks in a `range`.\n     *\n     * @param {Range} range\n     * @return {Set<Mark>}\n     */\n\n  }, {\n    key: 'getInsertMarksAtRange',\n    value: function getInsertMarksAtRange(range) {\n      range = this.resolveRange(range);\n      var _range4 = range,\n          start = _range4.start;\n\n      if (range.isUnset) {\n        return Set();\n      }\n\n      if (range.isCollapsed) {\n        // PERF: range is not cachable, use key and offset as proxies for cache\n        return this.getMarksAtPosition(start.path, start.offset);\n      }\n\n      var text = this.getDescendant(start.path);\n      var marks = text.getMarksAtIndex(start.offset + 1);\n      return marks;\n    }\n    /**\n     * Get the bottom-most block descendants in a `range`.\n     *\n     * @param {Range} range\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'getLeafBlocksAtRange',\n    value: function getLeafBlocksAtRange(range) {\n      var array = this.getLeafBlocksAtRangeAsArray(range); // Eliminate duplicates by converting to an `OrderedSet` first.\n\n      return List(OrderedSet(array));\n    }\n    /**\n     * Get the bottom-most descendants in a `range` as an array\n     *\n     * @param {Range} range\n     * @return {Array<Node>}\n     */\n\n  }, {\n    key: 'getLeafBlocksAtRangeAsArray',\n    value: function getLeafBlocksAtRangeAsArray(range) {\n      range = this.resolveRange(range);\n      if (range.isUnset) return [];\n      var _range5 = range,\n          start = _range5.start,\n          end = _range5.end;\n      return this.getLeafBlocksBetweenPathPositionsAsArray(start.path, end.path);\n    }\n    /**\n     * Get the bottom-most descendants between two paths as an array\n     *\n     * @param {List|Null} startPath\n     * @param {List|Null} endPath\n     * @return {Array<Node>}\n     */\n\n  }, {\n    key: 'getLeafBlocksBetweenPathPositionsAsArray',\n    value: function getLeafBlocksBetweenPathPositionsAsArray(startPath, endPath) {\n      // PERF: the most common case is when the range is in a single block node,\n      // where we can avoid a lot of iterating of the tree.\n      if (startPath && endPath && PathUtils.isEqual(startPath, endPath)) {\n        return [this.getClosestBlock(startPath)];\n      } else if (!startPath && !endPath) {\n        return this.getBlocksAsArray();\n      }\n\n      var startIndex = startPath ? startPath.get(0, 0) : 0;\n      var endIndex = endPath ? endPath.get(0, this.nodes.size - 1) : this.nodes.size - 1;\n      var array = [];\n      this.nodes.slice(startIndex, endIndex + 1).forEach(function (node, i) {\n        if (node.object !== 'block') {\n          return;\n        } else if (node.isLeafBlock()) {\n          array.push(node);\n        } else {\n          var childStartPath = startPath && i === 0 ? PathUtils.drop(startPath) : null;\n          var childEndPath = endPath && i === endIndex - startIndex ? PathUtils.drop(endPath) : null;\n          array = array.concat(node.getLeafBlocksBetweenPathPositionsAsArray(childStartPath, childEndPath));\n        }\n      });\n      return array;\n    }\n    /**\n     * Get the bottom-most inline nodes for each text node in a `range`.\n     *\n     * @param {Range} range\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'getLeafInlinesAtRange',\n    value: function getLeafInlinesAtRange(range) {\n      var array = this.getLeafInlinesAtRangeAsArray(range); // Remove duplicates by converting it to an `OrderedSet` first.\n\n      var list = List(OrderedSet(array));\n      return list;\n    }\n    /**\n     * Get the bottom-most inline nodes for each text node in a `range` as an array.\n     *\n     * @param {Range} range\n     * @return {Array<Node>}\n     */\n\n  }, {\n    key: 'getLeafInlinesAtRangeAsArray',\n    value: function getLeafInlinesAtRangeAsArray(range) {\n      var _this4 = this;\n\n      range = this.resolveRange(range);\n      if (range.isUnset) return [];\n      var array = this.getTextsAtRangeAsArray(range).map(function (text) {\n        return _this4.getClosestInline(text.key);\n      }).filter(function (exists) {\n        return exists;\n      });\n      return array;\n    }\n    /**\n     * Get all of the marks for all of the characters of every text node.\n     *\n     * @return {Set<Mark>}\n     */\n\n  }, {\n    key: 'getMarks',\n    value: function getMarks() {\n      var array = this.getMarksAsArray();\n      return Set(array);\n    }\n    /**\n     * Get all of the marks as an array.\n     *\n     * @return {Array}\n     */\n\n  }, {\n    key: 'getMarksAsArray',\n    value: function getMarksAsArray() {\n      var _ref;\n\n      var result = [];\n      this.nodes.forEach(function (node) {\n        result.push(node.getMarksAsArray());\n      }); // PERF: use only one concat rather than multiple for speed.\n\n      var array = (_ref = []).concat.apply(_ref, result);\n\n      return array;\n    }\n    /**\n     * Get a set of marks in a `position`, the equivalent of a collapsed range\n     *\n     * @param {List|string} key\n     * @param {number} offset\n     * @return {Set}\n     */\n\n  }, {\n    key: 'getMarksAtPosition',\n    value: function getMarksAtPosition(path, offset) {\n      path = this.resolvePath(path);\n      var text = this.getDescendant(path);\n      var currentMarks = text.getMarksAtIndex(offset);\n      if (offset !== 0) return currentMarks;\n      var closestBlock = this.getClosestBlock(path);\n\n      if (closestBlock.text === '') {\n        // insert mark for empty block; the empty block are often created by split node or add marks in a range including empty blocks\n        return currentMarks;\n      }\n\n      var previous = this.getPreviousTextAndPath(path);\n      if (!previous) return Set();\n\n      var _previous = slicedToArray(previous, 2),\n          previousText = _previous[0],\n          previousPath = _previous[1];\n\n      if (closestBlock.hasDescendant(previousPath)) {\n        return previousText.getMarksAtIndex(previousText.text.length);\n      }\n\n      return currentMarks;\n    }\n    /**\n     * Get a set of the marks in a `range`.\n     *\n     * @param {Range} range\n     * @return {Set<Mark>}\n     */\n\n  }, {\n    key: 'getMarksAtRange',\n    value: function getMarksAtRange(range) {\n      var marks = Set(this.getOrderedMarksAtRange(range));\n      return marks;\n    }\n    /**\n     * Get all of the marks that match a `type`.\n     *\n     * @param {String} type\n     * @return {Set<Mark>}\n     */\n\n  }, {\n    key: 'getMarksByType',\n    value: function getMarksByType(type) {\n      var array = this.getMarksByTypeAsArray(type);\n      return Set(array);\n    }\n    /**\n     * Get all of the marks that match a `type` as an array.\n     *\n     * @param {String} type\n     * @return {Array}\n     */\n\n  }, {\n    key: 'getMarksByTypeAsArray',\n    value: function getMarksByTypeAsArray(type) {\n      var array = this.nodes.reduce(function (memo, node) {\n        return node.object === 'text' ? memo.concat(node.getMarksAsArray().filter(function (m) {\n          return m.type === type;\n        })) : memo.concat(node.getMarksByTypeAsArray(type));\n      }, []);\n      return array;\n    }\n    /**\n     * Get the block node after a descendant text node by `path`.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getNextBlock',\n    value: function getNextBlock(path) {\n      path = this.resolvePath(path);\n      var match = this.getNextDeepMatchingNodeAndPath(path, function (n) {\n        return n.object === 'block';\n      });\n      return match ? match[0] : null;\n    }\n    /**\n     * Get the next node in the tree from a node.\n     *\n     * This will not only check for siblings but instead move up the tree\n     * returning the next ancestor if no sibling is found.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getNextNode',\n    value: function getNextNode(path) {\n      path = this.resolvePath(path);\n      if (!path) return null;\n      if (!path.size) return null;\n\n      for (var i = path.size; i > 0; i--) {\n        var p = path.slice(0, i);\n        var target = PathUtils.increment(p);\n        var node = this.getNode(target);\n        if (node) return node;\n      }\n\n      return null;\n    }\n    /**\n     * Get the next node in the tree from a node that matches iterator\n     *\n     * This will not only check for siblings but instead move up the tree\n     * returning the next ancestor if no sibling is found.\n     *\n     * @param {List} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getNextMatchingNodeAndPath',\n    value: function getNextMatchingNodeAndPath(path) {\n      var iterator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {\n        return true;\n      };\n      if (!path) return null;\n\n      for (var i = path.size; i > 0; i--) {\n        var p = path.slice(0, i);\n        var nextPath = PathUtils.increment(p);\n        var nextNode = this.getNode(nextPath);\n\n        while (nextNode && !iterator(nextNode)) {\n          nextPath = PathUtils.increment(nextPath);\n          nextNode = this.getNode(nextPath);\n        }\n\n        if (nextNode) return [nextNode, nextPath];\n      }\n\n      return null;\n    }\n    /**\n     * Get the next, deepest node in the tree from a node that matches iterator\n     *\n     * This will not only check for siblings but instead move up the tree\n     * returning the next ancestor if no sibling is found.\n     *\n     * @param {List} path\n     * @param {Function} iterator\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getNextDeepMatchingNodeAndPath',\n    value: function getNextDeepMatchingNodeAndPath(path) {\n      var iterator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {\n        return true;\n      };\n      var match = this.getNextMatchingNodeAndPath(path);\n      if (!match) return null;\n\n      var _match = slicedToArray(match, 2),\n          nextNode = _match[0],\n          nextPath = _match[1];\n\n      var childMatch = void 0;\n\n      var assign = function assign() {\n        childMatch = nextNode.object !== 'text' && nextNode.findFirstDescendantAndPath(iterator, nextPath);\n        return childMatch;\n      };\n\n      while (assign(childMatch)) {\n        var _childMatch = childMatch;\n\n        var _childMatch2 = slicedToArray(_childMatch, 2);\n\n        nextNode = _childMatch2[0];\n        nextPath = _childMatch2[1];\n      }\n\n      if (!nextNode) return null;\n      return iterator(nextNode) ? [nextNode, nextPath] : this.getNextDeepMatchingNodeAndPath(match[1], iterator);\n    }\n    /**\n     * Get the next sibling of a node.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getNextSibling',\n    value: function getNextSibling(path) {\n      path = this.resolvePath(path);\n      if (!path) return null;\n      if (!path.size) return null;\n      var p = PathUtils.increment(path);\n      var sibling = this.getNode(p);\n      return sibling;\n    }\n    /**\n     * Get the text node after a descendant text node.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getNextText',\n    value: function getNextText(path) {\n      path = this.resolvePath(path);\n      if (!path) return null;\n      if (!path.size) return null;\n      var next = this.getNextNode(path);\n      if (!next) return null;\n      var text = next.getFirstText();\n      return text;\n    }\n  }, {\n    key: 'getNextTextAndPath',\n    value: function getNextTextAndPath(path) {\n      if (!path) return null;\n      if (!path.size) return null;\n      var match = this.getNextDeepMatchingNodeAndPath(path, function (n) {\n        return n.object === 'text';\n      });\n      return match;\n    }\n    /**\n     * Get all of the nodes in a `range`. This includes all of the\n     * text nodes inside the range and all ancestors of those text\n     * nodes up to this node.\n     *\n     * @param {Range} range\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'getNodesAtRange',\n    value: function getNodesAtRange(range) {\n      range = this.resolveRange(range);\n      if (range.isUnset) return List();\n      var _range6 = range,\n          start = _range6.start,\n          end = _range6.end; // Do a depth-first stack-based search for all nodes in the range\n      // Nodes that are pushed to the stack are inside the range\n      // Start with the nodes that are on the highest level in the tree\n\n      var stack = Stack(this.nodes.slice(start.path.get(0), end.path.get(0) + 1).map(function (node, index) {\n        return {\n          node: node,\n          onStartEdge: index === 0,\n          onEndEdge: index === end.path.get(0) - start.path.get(0),\n          relativeStartPath: start.path.slice(1),\n          relativeEndPath: end.path.slice(1)\n        };\n      }));\n      var result = [];\n\n      var _loop = function _loop() {\n        var _stack$peek = stack.peek(),\n            node = _stack$peek.node,\n            onStartEdge = _stack$peek.onStartEdge,\n            onEndEdge = _stack$peek.onEndEdge,\n            relativeStartPath = _stack$peek.relativeStartPath,\n            relativeEndPath = _stack$peek.relativeEndPath;\n\n        stack = stack.shift();\n        result.push(node);\n        if (node.object === 'text') return 'continue'; // Modify indexes to exclude children that are outside of the range\n\n        var startIndex = onStartEdge ? relativeStartPath.get(0) : 0;\n        var endIndex = onEndEdge ? relativeEndPath.get(0) : node.nodes.size - 1; // Push children that are inside the range to the stack\n\n        stack = stack.pushAll(node.nodes.slice(startIndex, endIndex + 1).map(function (n, i) {\n          return {\n            node: n,\n            onStartEdge: onStartEdge && i === 0,\n            onEndEdge: onEndEdge && i === endIndex - startIndex,\n            relativeStartPath: onStartEdge && i === 0 ? relativeStartPath.slice(1) : null,\n            relativeEndPath: onEndEdge && i === endIndex - startIndex ? relativeEndPath.slice(1) : null\n          };\n        }));\n      };\n\n      while (stack.size > 0) {\n        var _ret = _loop();\n\n        if (_ret === 'continue') continue;\n      }\n\n      return List(result);\n    }\n    /**\n     * Get the offset for a descendant text node by `path` or `key`.\n     *\n     * @param {List|string} path\n     * @return {Number}\n     */\n\n  }, {\n    key: 'getOffset',\n    value: function getOffset(path) {\n      path = this.resolvePath(path);\n      this.assertDescendant(path); // Calculate the offset of the nodes before the highest child.\n\n      var index = path.first();\n      var offset = this.nodes.slice(0, index).reduce(function (memo, n) {\n        return memo + n.text.length;\n      }, 0); // Recurse if need be.\n\n      var ret = path.size === 1 ? offset : offset + this.nodes.get(index).getOffset(PathUtils.drop(path));\n      return ret;\n    }\n    /**\n     * Get the offset from a `range`.\n     *\n     * @param {Range} range\n     * @return {Number}\n     */\n\n  }, {\n    key: 'getOffsetAtRange',\n    value: function getOffsetAtRange(range) {\n      range = this.resolveRange(range);\n\n      if (range.isUnset) {\n        throw new Error('The range cannot be unset to calculcate its offset.');\n      }\n\n      if (range.isExpanded) {\n        throw new Error('The range must be collapsed to calculcate its offset.');\n      }\n\n      var _range7 = range,\n          start = _range7.start;\n      var offset = this.getOffset(start.path) + start.offset;\n      return offset;\n    }\n    /**\n     * Get all of the marks for all of the characters of every text node.\n     *\n     * @return {OrderedSet<Mark>}\n     */\n\n  }, {\n    key: 'getOrderedMarks',\n    value: function getOrderedMarks() {\n      var array = this.getMarksAsArray();\n      return OrderedSet(array);\n    }\n    /**\n     * Get a set of the marks in a `range`.\n     *\n     * @param {Range} range\n     * @return {OrderedSet<Mark>}\n     */\n\n  }, {\n    key: 'getOrderedMarksAtRange',\n    value: function getOrderedMarksAtRange(range) {\n      range = this.resolveRange(range);\n      var _range8 = range,\n          start = _range8.start,\n          end = _range8.end;\n\n      if (range.isUnset) {\n        return OrderedSet();\n      }\n\n      if (range.isCollapsed) {\n        // PERF: range is not cachable, use path? and offset as proxies for cache\n        return this.getMarksAtPosition(start.path, start.offset);\n      }\n\n      var marks = this.getOrderedMarksBetweenPositions(start.path, start.offset, end.path, end.offset);\n      return marks;\n    }\n    /**\n     * Get a set of the marks in a `range`.\n     * PERF: arguments use key and offset for utilizing cache\n     *\n     * @param {List|string} startPath\n     * @param {number} startOffset\n     * @param {List|string} endPath\n     * @param {number} endOffset\n     * @returns {OrderedSet<Mark>}\n     */\n\n  }, {\n    key: 'getOrderedMarksBetweenPositions',\n    value: function getOrderedMarksBetweenPositions(startPath, startOffset, endPath, endOffset) {\n      startPath = this.resolvePath(startPath);\n      endPath = this.resolvePath(endPath);\n      var startText = this.getDescendant(startPath);\n\n      if (PathUtils.isEqual(startPath, endPath)) {\n        return startText.getMarksBetweenOffsets(startOffset, endOffset);\n      }\n\n      var endText = this.getDescendant(endPath);\n      var texts = this.getTextsBetweenPathPositionsAsArray(startPath, endPath);\n      return OrderedSet().withMutations(function (result) {\n        texts.forEach(function (text) {\n          if (text.key === startText.key) {\n            result.union(text.getMarksBetweenOffsets(startOffset, text.text.length));\n          } else if (text.key === endText.key) {\n            result.union(text.getMarksBetweenOffsets(0, endOffset));\n          } else {\n            result.union(text.getMarks());\n          }\n        });\n      });\n    }\n    /**\n     * Get all of the marks that match a `type`.\n     *\n     * @param {String} type\n     * @return {OrderedSet<Mark>}\n     */\n\n  }, {\n    key: 'getOrderedMarksByType',\n    value: function getOrderedMarksByType(type) {\n      var array = this.getMarksByTypeAsArray(type);\n      return OrderedSet(array);\n    }\n    /**\n     * Get the parent of a descendant node.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getParent',\n    value: function getParent(path) {\n      path = this.resolvePath(path);\n      if (!path) return null;\n      if (!path.size) return null;\n      var parentPath = PathUtils.lift(path);\n      var parent = this.getNode(parentPath);\n      return parent;\n    }\n    /**\n     * Get the block node before a descendant text node by `path`.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getPreviousBlock',\n    value: function getPreviousBlock(path) {\n      path = this.resolvePath(path);\n      var match = this.getPreviousDeepMatchingNodeAndPath(path, function (n) {\n        return n.object === 'block';\n      });\n      return match ? match[0] : null;\n    }\n    /**\n     * Get the highest block descendants in a `range`.\n     *\n     * @param {Range} range\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'getRootBlocksAtRange',\n    value: function getRootBlocksAtRange(range) {\n      range = this.resolveRange(range);\n      if (range.isUnset) return List();\n      var _range9 = range,\n          start = _range9.start,\n          end = _range9.end;\n      return this.nodes.slice(start.path.first(), end.path.first() + 1);\n    }\n    /**\n     * Get the top-most inline nodes for each text node in a `range`.\n     *\n     * @param {Range} range\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'getRootInlinesAtRange',\n    value: function getRootInlinesAtRange(range) {\n      var array = this.getRootInlinesAtRangeAsArray(range); // Remove duplicates by converting it to an `OrderedSet` first.\n\n      var list = List(OrderedSet(array));\n      return list;\n    }\n    /**\n     * Get the top-most inline nodes for each text node in a `range` as an array.\n     *\n     * @param {Range} range\n     * @return {Array}\n     */\n\n  }, {\n    key: 'getRootInlinesAtRangeAsArray',\n    value: function getRootInlinesAtRangeAsArray(range) {\n      var _this5 = this;\n\n      range = this.resolveRange(range);\n      if (range.isUnset) return List();\n      var array = this.getTextsAtRangeAsArray(range).map(function (text) {\n        return _this5.getFurthestInline(text.key);\n      }).filter(function (exists) {\n        return exists;\n      });\n      return array;\n    }\n    /**\n     * Get the previous node from a node in the tree.\n     *\n     * This will not only check for siblings but instead move up the tree\n     * returning the previous ancestor if no sibling is found.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getPreviousNode',\n    value: function getPreviousNode(path) {\n      path = this.resolvePath(path);\n      if (!path) return null;\n      if (!path.size) return null;\n\n      for (var i = path.size; i > 0; i--) {\n        var p = path.slice(0, i);\n        if (p.last() === 0) continue;\n        var target = PathUtils.decrement(p);\n        var node = this.getNode(target);\n        if (node) return node;\n      }\n\n      return null;\n    }\n    /**\n     * Get the previous node in the tree from a node that matches iterator\n     *\n     * This will not only check for siblings but instead move up the tree\n     * returning the previous ancestor if no sibling is found.\n     *\n     * @param {List} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getPreviousMatchingNodeAndPath',\n    value: function getPreviousMatchingNodeAndPath(path) {\n      var iterator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {\n        return true;\n      };\n      if (!path) return null;\n\n      for (var i = path.size; i > 0; i--) {\n        var p = path.slice(0, i);\n        if (p.last() === 0) continue;\n        var previousPath = PathUtils.decrement(p);\n        var previousNode = this.getNode(previousPath);\n\n        while (previousNode && !iterator(previousNode)) {\n          previousPath = PathUtils.decrement(previousPath);\n          previousNode = this.getNode(previousPath);\n        }\n\n        if (previousNode) return [previousNode, previousPath];\n      }\n\n      return null;\n    }\n    /**\n     * Get the next previous in the tree from a node that matches iterator\n     *\n     * This will not only check for siblings but instead move up the tree\n     * returning the previous ancestor if no sibling is found.\n     * Once a node is found, the last deepest child matching is returned\n     *\n     * @param {List} path\n     * @param {Function} iterator\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getPreviousDeepMatchingNodeAndPath',\n    value: function getPreviousDeepMatchingNodeAndPath(path) {\n      var iterator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {\n        return true;\n      };\n      var match = this.getPreviousMatchingNodeAndPath(path);\n      if (!match) return null;\n\n      var _match2 = slicedToArray(match, 2),\n          previousNode = _match2[0],\n          previousPath = _match2[1];\n\n      var childMatch = void 0;\n\n      var assign = function assign() {\n        childMatch = previousNode.object !== 'text' && previousNode.findLastDescendantAndPath(iterator, previousPath);\n        return childMatch;\n      };\n\n      while (assign(childMatch)) {\n        var _childMatch3 = childMatch;\n\n        var _childMatch4 = slicedToArray(_childMatch3, 2);\n\n        previousNode = _childMatch4[0];\n        previousPath = _childMatch4[1];\n      }\n\n      if (!previousNode) return null;\n      return iterator(previousNode) ? [previousNode, previousPath] : this.getPreviousDeepMatchingNodeAndPath(match[1], iterator);\n    }\n    /**\n     * Get the previous sibling of a node.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getPreviousSibling',\n    value: function getPreviousSibling(path) {\n      path = this.resolvePath(path);\n      if (!path) return null;\n      if (!path.size) return null;\n      if (path.last() === 0) return null;\n      var p = PathUtils.decrement(path);\n      var sibling = this.getNode(p);\n      return sibling;\n    }\n    /**\n     * Get the text node before a descendant text node.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getPreviousText',\n    value: function getPreviousText(path) {\n      path = this.resolvePath(path);\n      if (!path) return null;\n      if (!path.size) return null;\n      var previous = this.getPreviousNode(path);\n      if (!previous) return null;\n      var match = previous.getLastText();\n      return match;\n    }\n  }, {\n    key: 'getPreviousTextAndPath',\n    value: function getPreviousTextAndPath(path) {\n      if (!path) return null;\n      if (!path.size) return null;\n      var match = this.getPreviousDeepMatchingNodeAndPath(path, function (n) {\n        return n.object === 'text';\n      });\n      return match;\n    }\n    /**\n     * Get the indexes of the selection for a `range`, given an extra flag for\n     * whether the node `isSelected`, to determine whether not finding matches\n     * means everything is selected or nothing is.\n     *\n     * @param {Range} range\n     * @param {Boolean} isSelected\n     * @return {Object|Null}\n     */\n\n  }, {\n    key: 'getSelectionIndexes',\n    value: function getSelectionIndexes(range) {\n      var isSelected = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      var start = range.start,\n          end = range.end; // PERF: if we're not selected, we can exit early.\n\n      if (!isSelected) {\n        return null;\n      } // if we've been given an invalid selection we can exit early.\n\n\n      if (range.isUnset) {\n        return null;\n      } // PERF: if the start and end keys are the same, just check for the child\n      // that contains that single key.\n\n\n      if (start.key === end.key) {\n        var child = this.getFurthestAncestor(start.key);\n        var index = child ? this.nodes.indexOf(child) : null;\n        return {\n          start: index,\n          end: index + 1\n        };\n      } // Otherwise, check all of the children...\n\n\n      var startIndex = null;\n      var endIndex = null;\n      this.nodes.forEach(function (child, i) {\n        if (child.object === 'text') {\n          if (startIndex == null && child.key === start.key) startIndex = i;\n          if (endIndex == null && child.key === end.key) endIndex = i + 1;\n        } else {\n          if (startIndex == null && child.hasDescendant(start.key)) startIndex = i;\n          if (endIndex == null && child.hasDescendant(end.key)) endIndex = i + 1;\n        } // PERF: exit early if both start and end have been found.\n\n\n        return startIndex == null || endIndex == null;\n      });\n      if (isSelected && startIndex == null) startIndex = 0;\n      if (isSelected && endIndex == null) endIndex = this.nodes.size;\n      return startIndex == null ? null : {\n        start: startIndex,\n        end: endIndex\n      };\n    }\n    /**\n     * Get the descendent text node at an `offset`.\n     *\n     * @param {String} offset\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getTextAtOffset',\n    value: function getTextAtOffset(offset) {\n      // PERF: Add a few shortcuts for the obvious cases.\n      if (offset === 0) return this.getFirstText();\n      if (offset === this.text.length) return this.getLastText();\n      if (offset < 0 || offset > this.text.length) return null;\n      var length = 0;\n      var text = this.getTexts().find(function (node, i, nodes) {\n        length += node.text.length;\n        return length > offset;\n      });\n      return text;\n    }\n    /**\n     * Get the direction of the node's text.\n     *\n     * @return {String}\n     */\n\n  }, {\n    key: 'getTextDirection',\n    value: function getTextDirection() {\n      var dir = direction(this.text);\n      return dir === 'neutral' ? null : dir;\n    }\n    /**\n     * Recursively get all of the child text nodes in order of appearance.\n     *\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'getTexts',\n    value: function getTexts() {\n      var array = this.getTextsAsArray();\n      return List(array);\n    }\n    /**\n     * Recursively get all the leaf text nodes in order of appearance, as array.\n     *\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'getTextsAsArray',\n    value: function getTextsAsArray() {\n      var array = [];\n      this.nodes.forEach(function (node) {\n        if (node.object === 'text') {\n          array.push(node);\n        } else {\n          array = array.concat(node.getTextsAsArray());\n        }\n      });\n      return array;\n    }\n    /**\n     * Get all of the text nodes in a `range` as a List.\n     *\n     * @param {Range} range\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'getTextsAtRange',\n    value: function getTextsAtRange(range) {\n      var arr = this.getTextsAtRangeAsArray(range);\n      return List(arr);\n    }\n    /**\n     * Get all of the text nodes in a `range` as an array.\n     *\n     * @param {Range} range\n     * @return {Array<Node>}\n     */\n\n  }, {\n    key: 'getTextsAtRangeAsArray',\n    value: function getTextsAtRangeAsArray(range) {\n      range = this.resolveRange(range);\n      if (range.isUnset) return [];\n      var _range10 = range,\n          start = _range10.start,\n          end = _range10.end;\n      var texts = this.getTextsBetweenPathPositionsAsArray(start.path, end.path);\n      return texts;\n    }\n    /**\n     * Get all of the text nodes in a `range` as an array.\n     * PERF: use key / path in arguments for cache\n     *\n     * @param {List|string} startPath\n     * @param {List|string} endPath\n     * @returns {Array}\n     */\n\n  }, {\n    key: 'getTextsBetweenPositionsAsArray',\n    value: function getTextsBetweenPositionsAsArray(startPath, endPath) {\n      startPath = this.resolvePath(startPath);\n      endPath = this.resolvePath(endPath);\n      return this.getTextsBetweenPathPositionsAsArray(startPath, endPath);\n    }\n    /**\n     * Get all of the text nodes in a `range` as an array.\n     *\n     * @param {List|falsey} startPath\n     * @param {List|falsey} endPath\n     * @returns {Array}\n     */\n\n  }, {\n    key: 'getTextsBetweenPathPositionsAsArray',\n    value: function getTextsBetweenPathPositionsAsArray(startPath, endPath) {\n      // PERF: the most common case is when the range is in a single text node,\n      // where we can avoid a lot of iterating of the tree.\n      if (startPath && endPath && PathUtils.isEqual(startPath, endPath)) {\n        return [this.getDescendant(startPath)];\n      } else if (!startPath && !endPath) {\n        return this.getTextsAsArray();\n      }\n\n      var startIndex = startPath ? startPath.get(0, 0) : 0;\n      var endIndex = endPath ? endPath.get(0, this.nodes.size - 1) : this.nodes.size - 1;\n      var array = [];\n      this.nodes.slice(startIndex, endIndex + 1).forEach(function (node, i) {\n        if (node.object === 'text') {\n          array.push(node);\n        } else {\n          // For the node at start and end of this list, we want to provide a start and end path\n          // For other nodes, we can just get all their text nodes, they are between the paths\n          var childStartPath = startPath && i === 0 ? PathUtils.drop(startPath) : null;\n          var childEndPath = endPath && i === endIndex - startIndex ? PathUtils.drop(endPath) : null;\n          array = array.concat(node.getTextsBetweenPathPositionsAsArray(childStartPath, childEndPath));\n        }\n      });\n      return array;\n    }\n    /**\n     * Check if the node has block children.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'hasBlockChildren',\n    value: function hasBlockChildren() {\n      return !!(this.nodes && this.nodes.find(function (n) {\n        return n.object === 'block';\n      }));\n    }\n    /**\n     * Check if a child node exists.\n     *\n     * @param {List|String} path\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'hasChild',\n    value: function hasChild(path) {\n      var child = this.getChild(path);\n      return !!child;\n    }\n    /**\n     * Check if a node has inline children.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'hasInlineChildren',\n    value: function hasInlineChildren() {\n      return !!(this.nodes && this.nodes.find(function (n) {\n        return n.object === 'inline' || n.object === 'text';\n      }));\n    }\n    /**\n     * Recursively check if a child node exists.\n     *\n     * @param {List|String} path\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'hasDescendant',\n    value: function hasDescendant(path) {\n      var descendant = this.getDescendant(path);\n      return !!descendant;\n    }\n    /**\n     * Check if a node has a void parent.\n     *\n     * @param {List|String} path\n     * @param {Editor} editor\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'hasVoidParent',\n    value: function hasVoidParent(path, editor) {\n      invariant(!Value.isValue(editor), 'As of Slate 0.42.0, the `node.hasVoidParent` method takes an `editor` instead of a `value`.');\n      var closest = this.getClosestVoid(path, editor);\n      return !!closest;\n    }\n    /**\n     * Insert a `node`.\n     *\n     * @param {List|String} path\n     * @param {Node} node\n     * @return {Node}\n     */\n\n  }, {\n    key: 'insertNode',\n    value: function insertNode(path, node) {\n      path = this.resolvePath(path);\n      var index = path.last();\n      var parentPath = PathUtils.lift(path);\n      var parent = this.assertNode(parentPath);\n      var nodes = parent.nodes.splice(index, 0, node);\n      parent = parent.set('nodes', nodes);\n      var ret = this.replaceNode(parentPath, parent);\n      return ret;\n    }\n    /**\n     * Insert `text` at `offset` in node by `path`.\n     *\n     * @param {List|String} path\n     * @param {Number} offset\n     * @param {String} text\n     * @param {Set} marks\n     * @return {Node}\n     */\n\n  }, {\n    key: 'insertText',\n    value: function insertText(path, offset, text, marks) {\n      var node = this.assertDescendant(path);\n      path = this.resolvePath(path);\n      node = node.insertText(offset, text, marks);\n      var ret = this.replaceNode(path, node);\n      return ret;\n    }\n    /**\n     * Check whether the node is a leaf block.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isLeafBlock',\n    value: function isLeafBlock() {\n      var object = this.object,\n          nodes = this.nodes;\n      if (object !== 'block') return false;\n      if (!nodes.size) return true;\n      return nodes.first().object !== 'block';\n    }\n    /**\n     * Check whether the node is a leaf inline.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isLeafInline',\n    value: function isLeafInline() {\n      var object = this.object,\n          nodes = this.nodes;\n      if (object !== 'inline') return false;\n      if (!nodes.size) return true;\n      return nodes.first().object !== 'inline';\n    }\n    /**\n     * Check whether a descendant node is inside a range. This will return true for all\n     * text nodes inside the range and all ancestors of those text nodes up to this node.\n     *\n     * @param {List|string} path\n     * @param {Range} range\n     * @return {Node}\n     */\n\n  }, {\n    key: 'isNodeInRange',\n    value: function isNodeInRange(path, range) {\n      this.assertDescendant(path);\n      path = this.resolvePath(path);\n      range = this.resolveRange(range);\n      if (range.isUnset) return false;\n      var toStart = PathUtils.compare(path, range.start.path);\n      var toEnd = range.start.key === range.end.key ? toStart : PathUtils.compare(path, range.end.path);\n      var is$$1 = toStart !== -1 && toEnd !== 1;\n      return is$$1;\n    }\n    /**\n     * Map all child nodes, updating them in their parents. This method is\n     * optimized to not return a new node if no changes are made.\n     *\n     * @param {Function} iterator\n     * @return {Node}\n     */\n\n  }, {\n    key: 'mapChildren',\n    value: function mapChildren(iterator) {\n      var _this6 = this;\n\n      var nodes = this.nodes;\n      nodes.forEach(function (node, i) {\n        var ret = iterator(node, i, _this6.nodes);\n        if (ret !== node) nodes = nodes.set(ret.key, ret);\n      });\n      var ret = this.set('nodes', nodes);\n      return ret;\n    }\n    /**\n     * Map all descendant nodes, updating them in their parents. This method is\n     * optimized to not return a new node if no changes are made.\n     *\n     * @param {Function} iterator\n     * @return {Node}\n     */\n\n  }, {\n    key: 'mapDescendants',\n    value: function mapDescendants(iterator) {\n      var _this7 = this;\n\n      var nodes = this.nodes;\n      nodes.forEach(function (node, index) {\n        var ret = node;\n        if (ret.object !== 'text') ret = ret.mapDescendants(iterator);\n        ret = iterator(ret, index, _this7.nodes);\n        if (ret === node) return;\n        nodes = nodes.set(index, ret);\n      });\n      var ret = this.set('nodes', nodes);\n      return ret;\n    }\n    /**\n     * Merge a node backwards its previous sibling.\n     *\n     * @param {List|Key} path\n     * @return {Node}\n     */\n\n  }, {\n    key: 'mergeNode',\n    value: function mergeNode(path) {\n      var b = this.assertNode(path);\n      path = this.resolvePath(path);\n\n      if (path.last() === 0) {\n        throw new Error('Unable to merge node because it has no previous sibling: ' + b);\n      }\n\n      var withPath = PathUtils.decrement(path);\n      var a = this.assertNode(withPath);\n\n      if (a.object !== b.object) {\n        throw new Error('Unable to merge two different kinds of nodes: ' + a + ' and ' + b);\n      }\n\n      var newNode = a.object === 'text' ? a.mergeText(b) : a.set('nodes', a.nodes.concat(b.nodes));\n      var ret = this;\n      ret = ret.removeNode(path);\n      ret = ret.removeNode(withPath);\n      ret = ret.insertNode(withPath, newNode);\n      return ret;\n    }\n    /**\n     * Move a node by `path` to `newPath`.\n     *\n     * A `newIndex` can be provided when move nodes by `key`, to account for not\n     * being able to have a key for a location in the tree that doesn't exist yet.\n     *\n     * @param {List|Key} path\n     * @param {List|Key} newPath\n     * @param {Number} newIndex\n     * @return {Node}\n     */\n\n  }, {\n    key: 'moveNode',\n    value: function moveNode(path, newPath) {\n      var newIndex = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var node = this.assertNode(path);\n      path = this.resolvePath(path);\n      newPath = this.resolvePath(newPath, newIndex);\n      var newParentPath = PathUtils.lift(newPath);\n      this.assertNode(newParentPath); // TODO: this is a bit hacky, re-creating the operation that led to this method being called\n      // Alternative 1: pass the operation through from apply -> value.moveNode\n      // Alternative 2: add a third property to the operation called \"transformedNewPath\", pass that through\n\n      var op = Operation.create({\n        type: 'move_node',\n        path: path,\n        newPath: newPath\n      });\n      newPath = PathUtils.transform(path, op).first();\n      var ret = this;\n      ret = ret.removeNode(path);\n      ret = ret.insertNode(newPath, node);\n      return ret;\n    }\n    /**\n     * Remove mark from text at `offset` and `length` in node.\n     *\n     * @param {List} path\n     * @param {Number} offset\n     * @param {Number} length\n     * @param {Mark} mark\n     * @return {Node}\n     */\n\n  }, {\n    key: 'removeMark',\n    value: function removeMark(path, offset, length, mark) {\n      var node = this.assertDescendant(path);\n      path = this.resolvePath(path);\n      node = node.removeMark(offset, length, mark);\n      var ret = this.replaceNode(path, node);\n      return ret;\n    }\n    /**\n     * Remove a node.\n     *\n     * @param {List|String} path\n     * @return {Node}\n     */\n\n  }, {\n    key: 'removeNode',\n    value: function removeNode(path) {\n      this.assertDescendant(path);\n      path = this.resolvePath(path);\n      var deep = path.flatMap(function (x) {\n        return ['nodes', x];\n      });\n      var ret = this.deleteIn(deep);\n      return ret;\n    }\n    /**\n     * Remove `text` at `offset` in node.\n     *\n     * @param {List|Key} path\n     * @param {Number} offset\n     * @param {String} text\n     * @return {Node}\n     */\n\n  }, {\n    key: 'removeText',\n    value: function removeText(path, offset, text) {\n      var node = this.assertDescendant(path);\n      node = node.removeText(offset, text.length);\n      var ret = this.replaceNode(path, node);\n      return ret;\n    }\n    /**\n     * Replace a `node` in the tree.\n     *\n     * @param {List|Key} path\n     * @param {Node} node\n     * @return {Node}\n     */\n\n  }, {\n    key: 'replaceNode',\n    value: function replaceNode(path, node) {\n      path = this.resolvePath(path);\n\n      if (!path) {\n        throw new Error('Unable to replace a node because it could not be found in the first place: ' + path);\n      }\n\n      if (!path.size) return node;\n      this.assertNode(path);\n      var deep = path.flatMap(function (x) {\n        return ['nodes', x];\n      });\n      var ret = this.setIn(deep, node);\n      return ret;\n    }\n    /**\n     * Resolve a `decoration`, relative to the node, ensuring that the keys and\n     * offsets in the decoration exist and that they are synced with the paths.\n     *\n     * @param {Decoration|Object} decoration\n     * @return {Decoration}\n     */\n\n  }, {\n    key: 'resolveDecoration',\n    value: function resolveDecoration(decoration) {\n      decoration = Decoration.create(decoration);\n      decoration = decoration.normalize(this);\n      return decoration;\n    }\n    /**\n     * Resolve a `point`, relative to the node, ensuring that the keys and\n     * offsets in the point exist and that they are synced with the paths.\n     *\n     * @param {Point|Object} point\n     * @return {Point}\n     */\n\n  }, {\n    key: 'resolvePoint',\n    value: function resolvePoint(point) {\n      point = Point.create(point);\n      point = point.normalize(this);\n      return point;\n    }\n    /**\n     * Resolve a `range`, relative to the node, ensuring that the keys and\n     * offsets in the range exist and that they are synced with the paths.\n     *\n     * @param {Range|Object} range\n     * @return {Range}\n     */\n\n  }, {\n    key: 'resolveRange',\n    value: function resolveRange(range) {\n      range = Range.create(range);\n      range = range.normalize(this);\n      return range;\n    }\n    /**\n     * Resolve a `selection`, relative to the node, ensuring that the keys and\n     * offsets in the selection exist and that they are synced with the paths.\n     *\n     * @param {Selection|Object} selection\n     * @return {Selection}\n     */\n\n  }, {\n    key: 'resolveSelection',\n    value: function resolveSelection(selection) {\n      selection = Selection.create(selection);\n      selection = selection.normalize(this);\n      return selection;\n    }\n    /**\n     * Set `properties` on a node.\n     *\n     * @param {List|String} path\n     * @param {Object} properties\n     * @return {Node}\n     */\n\n  }, {\n    key: 'setNode',\n    value: function setNode(path, properties) {\n      var node = this.assertNode(path);\n      node = node.merge(properties);\n      var ret = this.replaceNode(path, node);\n      return ret;\n    }\n    /**\n     * Set `properties` on `mark` on text at `offset` and `length` in node.\n     *\n     * @param {List|String} path\n     * @param {Number} offset\n     * @param {Number} length\n     * @param {Mark} mark\n     * @param {Object} properties\n     * @return {Node}\n     */\n\n  }, {\n    key: 'setMark',\n    value: function setMark(path, offset, length, properties, newProperties) {\n      var node = this.assertNode(path);\n      node = node.updateMark(offset, length, properties, newProperties);\n      var ret = this.replaceNode(path, node);\n      return ret;\n    }\n    /**\n     * Split a node by `path` at `position` with optional `properties` to apply\n     * to the newly split node.\n     *\n     * @param {List|String} path\n     * @param {Number} position\n     * @param {Object} properties\n     * @return {Node}\n     */\n\n  }, {\n    key: 'splitNode',\n    value: function splitNode(path, position, properties) {\n      var child = this.assertNode(path);\n      path = this.resolvePath(path);\n      var a = void 0;\n      var b = void 0;\n\n      if (child.object === 'text') {\n        var _child$splitText = child.splitText(position);\n\n        var _child$splitText2 = slicedToArray(_child$splitText, 2);\n\n        a = _child$splitText2[0];\n        b = _child$splitText2[1];\n      } else {\n        var befores = child.nodes.take(position);\n        var afters = child.nodes.skip(position);\n        a = child.set('nodes', befores);\n        b = child.set('nodes', afters).regenerateKey();\n      }\n\n      if (properties && child.object !== 'text') {\n        b = b.merge(properties);\n      }\n\n      var ret = this;\n      ret = ret.removeNode(path);\n      ret = ret.insertNode(path, b);\n      ret = ret.insertNode(path, a);\n      return ret;\n    }\n  }]);\n  return ElementInterface;\n}();\n/**\n * Mix in assertion variants.\n */\n\n\nvar ASSERTS = ['Child', 'Depth', 'Descendant', 'Node', 'Parent', 'Path'];\n\nvar _loop2 = function _loop2(method) {\n  ElementInterface.prototype['assert' + method] = function (path) {\n    for (var _len3 = arguments.length, args = Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n      args[_key3 - 1] = arguments[_key3];\n    }\n\n    var ret = this['get' + method].apply(this, [path].concat(args));\n\n    if (ret == null) {\n      throw new Error('`Node.assert' + method + '` could not find node with path or key: ' + path);\n    }\n\n    return ret;\n  };\n};\n\nvar _iteratorNormalCompletion$1 = true;\nvar _didIteratorError$1 = false;\nvar _iteratorError$1 = undefined;\n\ntry {\n  for (var _iterator$1 = ASSERTS[Symbol.iterator](), _step$1; !(_iteratorNormalCompletion$1 = (_step$1 = _iterator$1.next()).done); _iteratorNormalCompletion$1 = true) {\n    var method$1 = _step$1.value;\n\n    _loop2(method$1);\n  }\n  /**\n   * Memoize read methods.\n   */\n\n} catch (err) {\n  _didIteratorError$1 = true;\n  _iteratorError$1 = err;\n} finally {\n  try {\n    if (!_iteratorNormalCompletion$1 && _iterator$1.return) {\n      _iterator$1.return();\n    }\n  } finally {\n    if (_didIteratorError$1) {\n      throw _iteratorError$1;\n    }\n  }\n}\n\nmemoize(ElementInterface.prototype, ['getBlocksAsArray', 'getLeafBlocksAtRangeAsArray', 'getBlocksByTypeAsArray', 'getDecorations', 'getFragmentAtRange', 'getInlinesAsArray', 'getInlinesByTypeAsArray', 'getLeafBlocksAtRangeAsArray', 'getLeafInlinesAtRangeAsArray', 'getMarksAsArray', 'getMarksAtPosition', 'getNodesAtRange', 'getOrderedMarksBetweenPositions', 'getInsertMarksAtRange', 'getMarksByTypeAsArray', 'getNextBlock', 'getOffset', 'getOffsetAtRange', 'getPreviousBlock', 'getRootBlocksAtRange', 'getRootInlinesAtRangeAsArray', 'getTextAtOffset', 'getTextDirection', 'getTextsAsArray', 'getTextsBetweenPathPositionsAsArray']);\n/**\n * Mix in the element interface.\n */\n\nmixin(ElementInterface, [Block, Document, Inline]);\n\nvar RangeInterface = function () {\n  function RangeInterface() {\n    classCallCheck(this, RangeInterface);\n  }\n\n  createClass(RangeInterface, [{\n    key: 'flip',\n\n    /**\n     * Flip the range.\n     *\n     * @return {Range}\n     */\n    value: function flip() {\n      var range = this.setPoints([this.focus, this.anchor]);\n      return range;\n    }\n    /**\n     * Move the anchor and focus offsets forward `n` characters.\n     *\n     * @param {Number} n\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveForward',\n    value: function moveForward(n) {\n      return this.updatePoints(function (point) {\n        return point.moveForward(n);\n      });\n    }\n    /**\n     * Move the anchor and focus offsets backward `n` characters.\n     *\n     * @param {Number} n\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveBackward',\n    value: function moveBackward(n) {\n      return this.updatePoints(function (point) {\n        return point.moveBackward(n);\n      });\n    }\n    /**\n     * Move the anchor offset backward `n` characters.\n     *\n     * @param {Number} n\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveAnchorBackward',\n    value: function moveAnchorBackward(n) {\n      var range = this.setAnchor(this.anchor.moveBackward(n));\n      return range;\n    }\n    /**\n     * Move the anchor offset forward `n` characters.\n     *\n     * @param {Number} n\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveAnchorForward',\n    value: function moveAnchorForward(n) {\n      var range = this.setAnchor(this.anchor.moveForward(n));\n      return range;\n    }\n    /**\n     * Move the range's anchor point to a new `path` and `offset`.\n     *\n     * Optionally, the `path` can be a key string, or omitted entirely in which\n     * case it would be the offset number.\n     *\n     * @param {List|String} path\n     * @param {Number} offset\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveAnchorTo',\n    value: function moveAnchorTo(path, offset) {\n      var range = this.setAnchor(this.anchor.moveTo(path, offset));\n      return range;\n    }\n    /**\n     * Move the range's anchor point to the start of a `node`.\n     *\n     * @param {Node} node\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveAnchorToStartOfNode',\n    value: function moveAnchorToStartOfNode(node) {\n      var range = this.setAnchor(this.anchor.moveToStartOfNode(node));\n      return range;\n    }\n    /**\n     * Move the range's anchor point to the end of a `node`.\n     *\n     * @param {Node} node\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveAnchorToEndOfNode',\n    value: function moveAnchorToEndOfNode(node) {\n      var range = this.setAnchor(this.anchor.moveToEndOfNode(node));\n      return range;\n    }\n    /**\n     * Move the end offset backward `n` characters.\n     *\n     * @param {Number} n\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveEndBackward',\n    value: function moveEndBackward(n) {\n      var range = this.setEnd(this.end.moveBackward(n));\n      return range;\n    }\n    /**\n     * Move the end offset forward `n` characters.\n     *\n     * @param {Number} n\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveEndForward',\n    value: function moveEndForward(n) {\n      var range = this.setEnd(this.end.moveForward(n));\n      return range;\n    }\n    /**\n     * Move the range's end point to a new `path` and `offset`.\n     *\n     * Optionally, the `path` can be a key string, or omitted entirely in which\n     * case it would be the offset number.\n     *\n     * @param {List|String} path\n     * @param {Number} offset\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveEndTo',\n    value: function moveEndTo(path, offset) {\n      var range = this.setEnd(this.end.moveTo(path, offset));\n      return range;\n    }\n    /**\n     * Move the range's end point to the start of a `node`.\n     *\n     * @param {Node} node\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveEndToStartOfNode',\n    value: function moveEndToStartOfNode(node) {\n      var range = this.setEnd(this.end.moveToStartOfNode(node));\n      return range;\n    }\n    /**\n     * Move the range's end point to the end of a `node`.\n     *\n     * @param {Node} node\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveEndToEndOfNode',\n    value: function moveEndToEndOfNode(node) {\n      var range = this.setEnd(this.end.moveToEndOfNode(node));\n      return range;\n    }\n    /**\n     * Move the focus offset backward `n` characters.\n     *\n     * @param {Number} n\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveFocusBackward',\n    value: function moveFocusBackward(n) {\n      var range = this.setFocus(this.focus.moveBackward(n));\n      return range;\n    }\n    /**\n     * Move the focus offset forward `n` characters.\n     *\n     * @param {Number} n\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveFocusForward',\n    value: function moveFocusForward(n) {\n      var range = this.setFocus(this.focus.moveForward(n));\n      return range;\n    }\n    /**\n     * Move the range's focus point to a new `path` and `offset`.\n     *\n     * Optionally, the `path` can be a key string, or omitted entirely in which\n     * case it would be the offset number.\n     *\n     * @param {List|String} path\n     * @param {Number} offset\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveFocusTo',\n    value: function moveFocusTo(path, offset) {\n      var range = this.setFocus(this.focus.moveTo(path, offset));\n      return range;\n    }\n    /**\n     * Move the range's focus point to the start of a `node`.\n     *\n     * @param {Node} node\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveFocusToStartOfNode',\n    value: function moveFocusToStartOfNode(node) {\n      var range = this.setFocus(this.focus.moveToStartOfNode(node));\n      return range;\n    }\n    /**\n     * Move the range's focus point to the end of a `node`.\n     *\n     * @param {Node} node\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveFocusToEndOfNode',\n    value: function moveFocusToEndOfNode(node) {\n      var range = this.setFocus(this.focus.moveToEndOfNode(node));\n      return range;\n    }\n    /**\n     * Move the start offset backward `n` characters.\n     *\n     * @param {Number} n\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveStartBackward',\n    value: function moveStartBackward(n) {\n      var range = this.setStart(this.start.moveBackward(n));\n      return range;\n    }\n    /**\n     * Move the start offset forward `n` characters.\n     *\n     * @param {Number} n\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveStartForward',\n    value: function moveStartForward(n) {\n      var range = this.setStart(this.start.moveForward(n));\n      return range;\n    }\n    /**\n     * Move the range's start point to a new `path` and `offset`.\n     *\n     * Optionally, the `path` can be a key string, or omitted entirely in which\n     * case it would be the offset number.\n     *\n     * @param {List|String} path\n     * @param {Number} offset\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveStartTo',\n    value: function moveStartTo(path, offset) {\n      var range = this.setStart(this.start.moveTo(path, offset));\n      return range;\n    }\n    /**\n     * Move the range's start point to the start of a `node`.\n     *\n     * @param {Node} node\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveStartToStartOfNode',\n    value: function moveStartToStartOfNode(node) {\n      var range = this.setStart(this.start.moveToStartOfNode(node));\n      return range;\n    }\n    /**\n     * Move the range's start point to the end of a `node`.\n     *\n     * @param {Node} node\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveStartToEndOfNode',\n    value: function moveStartToEndOfNode(node) {\n      var range = this.setStart(this.start.moveToEndOfNode(node));\n      return range;\n    }\n    /**\n     * Move range's points to a new `path` and `offset`.\n     *\n     * @param {Number} n\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveTo',\n    value: function moveTo(path, offset) {\n      return this.updatePoints(function (point) {\n        return point.moveTo(path, offset);\n      });\n    }\n    /**\n     * Move the focus point to the anchor point.\n     *\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveToAnchor',\n    value: function moveToAnchor() {\n      var range = this.setFocus(this.anchor);\n      return range;\n    }\n    /**\n     * Move the start point to the end point.\n     *\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveToEnd',\n    value: function moveToEnd() {\n      var range = this.setStart(this.end);\n      return range;\n    }\n    /**\n     * Move the range's points to the end of a `node`.\n     *\n     * @param {Node} node\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveToEndOfNode',\n    value: function moveToEndOfNode(node) {\n      return this.updatePoints(function (point) {\n        return point.moveToEndOfNode(node);\n      });\n    }\n    /**\n     * Move the anchor point to the focus point.\n     *\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveToFocus',\n    value: function moveToFocus() {\n      var range = this.setAnchor(this.focus);\n      return range;\n    }\n    /**\n     * Move to the entire range of `start` and `end` nodes.\n     *\n     * @param {Node} start\n     * @param {Node} end (optional)\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveToRangeOfNode',\n    value: function moveToRangeOfNode(start) {\n      var end = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : start;\n      var range = this.setPoints([this.anchor.moveToStartOfNode(start), this.focus.moveToEndOfNode(end)]);\n      return range;\n    }\n    /**\n     * Move the end point to the start point.\n     *\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveToStart',\n    value: function moveToStart() {\n      var range = this.setEnd(this.start);\n      return range;\n    }\n    /**\n     * Move the range's points to the start of a `node`.\n     *\n     * @param {Node} node\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveToStartOfNode',\n    value: function moveToStartOfNode(node) {\n      return this.updatePoints(function (point) {\n        return point.moveToStartOfNode(node);\n      });\n    }\n    /**\n     * Normalize the range, relative to a `node`, ensuring that the anchor\n     * and focus nodes of the range always refer to leaf text nodes.\n     *\n     * @param {Node} node\n     * @return {Range}\n     */\n\n  }, {\n    key: 'normalize',\n    value: function normalize(node) {\n      return this.updatePoints(function (point) {\n        return point.normalize(node);\n      });\n    }\n    /**\n     * Set the anchor point to a new `anchor`.\n     *\n     * @param {Point} anchor\n     * @return {Range}\n     */\n\n  }, {\n    key: 'setAnchor',\n    value: function setAnchor(anchor) {\n      var range = this.set('anchor', anchor);\n      return range;\n    }\n    /**\n     * Set the end point to a new `point`.\n     *\n     * @param {Point} point\n     * @return {Range}\n     */\n\n  }, {\n    key: 'setEnd',\n    value: function setEnd(point) {\n      var range = this.isBackward ? this.setAnchor(point) : this.setFocus(point);\n      return range;\n    }\n    /**\n     * Set the focus point to a new `focus`.\n     *\n     * @param {Point} focus\n     * @return {Range}\n     */\n\n  }, {\n    key: 'setFocus',\n    value: function setFocus(focus) {\n      var range = this.set('focus', focus);\n      return range;\n    }\n    /**\n     * Set the anchor and focus points to new `values`.\n     *\n     * @param {Array<Point>} values\n     * @return {Range}\n     */\n\n  }, {\n    key: 'setPoints',\n    value: function setPoints(values) {\n      var _values = slicedToArray(values, 2),\n          anchor = _values[0],\n          focus = _values[1];\n\n      var range = this.set('anchor', anchor).set('focus', focus);\n      return range;\n    }\n    /**\n     * Set the anchor and focus points with `updater` callback\n     *\n     * @param {Function} updater\n     * @return {Range}\n     */\n\n  }, {\n    key: 'updatePoints',\n    value: function updatePoints(updater) {\n      var anchor = this.anchor,\n          focus = this.focus;\n      anchor = updater(anchor);\n      focus = updater(focus);\n      return this.merge({\n        anchor: anchor,\n        focus: focus\n      });\n    }\n    /**\n     * Set the start point to a new `point`.\n     *\n     * @param {Point} point\n     * @return {Range}\n     */\n\n  }, {\n    key: 'setStart',\n    value: function setStart(point) {\n      var range = this.isBackward ? this.setFocus(point) : this.setAnchor(point);\n      return range;\n    }\n    /**\n     * Set new `properties` on the range.\n     *\n     * @param {Object|Range} properties\n     * @return {Range}\n     */\n\n  }, {\n    key: 'setProperties',\n    value: function setProperties(properties) {\n      properties = Range.createProperties(properties);\n      var _properties = properties,\n          anchor = _properties.anchor,\n          focus = _properties.focus,\n          props = objectWithoutProperties(_properties, ['anchor', 'focus']);\n\n      if (anchor) {\n        props.anchor = Point.create(anchor);\n      }\n\n      if (focus) {\n        props.focus = Point.create(focus);\n      }\n\n      var range = this.merge(props);\n      return range;\n    }\n    /**\n     * Return a JSON representation of the range.\n     *\n     * @param {Object} options\n     * @return {Object}\n     */\n\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var object = {\n        object: this.object,\n        anchor: this.anchor.toJSON(options),\n        focus: this.focus.toJSON(options)\n      };\n      return object;\n    }\n    /**\n     * Return a `Range` instance from any range-like instance.\n     *\n     * @return {Range}\n     */\n\n  }, {\n    key: 'toRange',\n    value: function toRange() {\n      var properties = Range.createProperties(this);\n      var range = Range.create(properties);\n      return range;\n    }\n    /**\n     * Unset the range.\n     *\n     * @return {Range}\n     */\n\n  }, {\n    key: 'unset',\n    value: function unset() {\n      var range = this.updatePoints(function (p) {\n        return p.unset();\n      });\n      return range;\n    }\n  }, {\n    key: 'isCollapsed',\n\n    /**\n     * Check whether the range is collapsed.\n     *\n     * @return {Boolean}\n     */\n    get: function get$$1() {\n      return this.anchor === this.focus || this.anchor.key === this.focus.key && this.anchor.offset === this.focus.offset;\n    }\n    /**\n     * Check whether the range is expanded.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isExpanded',\n    get: function get$$1() {\n      return !this.isCollapsed;\n    }\n    /**\n     * Check whether the range is backward.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isBackward',\n    get: function get$$1() {\n      var isUnset = this.isUnset,\n          anchor = this.anchor,\n          focus = this.focus;\n\n      if (isUnset) {\n        return null;\n      }\n\n      if (anchor.key === focus.key) {\n        return anchor.offset > focus.offset;\n      }\n\n      var isBackward = PathUtils.isBefore(focus.path, anchor.path);\n      return isBackward;\n    }\n    /**\n     * Check whether the range is forward.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isForward',\n    get: function get$$1() {\n      var isBackward = this.isBackward;\n      var isForward = isBackward == null ? null : !isBackward;\n      return isForward;\n    }\n    /**\n     * Check whether the range isn't set.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isUnset',\n    get: function get$$1() {\n      var anchor = this.anchor,\n          focus = this.focus;\n      var isUnset = anchor.isUnset || focus.isUnset;\n      return isUnset;\n    }\n    /**\n     * Check whether the range is set.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isSet',\n    get: function get$$1() {\n      return !this.isUnset;\n    }\n    /**\n     * Get the start point.\n     *\n     * @return {String}\n     */\n\n  }, {\n    key: 'start',\n    get: function get$$1() {\n      return this.isBackward ? this.focus : this.anchor;\n    }\n    /**\n     * Get the end point.\n     *\n     * @return {String}\n     */\n\n  }, {\n    key: 'end',\n    get: function get$$1() {\n      return this.isBackward ? this.anchor : this.focus;\n    }\n  }]);\n  return RangeInterface;\n}();\n/**\n * Mix in the range interface.\n *\n * @param {Record}\n */\n\n\nmixin(RangeInterface, [Decoration, Range, Selection]);\nvar index = {\n  Block: Block,\n  Change: Change,\n  Data: Data,\n  Decoration: Decoration,\n  Document: Document,\n  Editor: Editor,\n  Inline: Inline,\n  KeyUtils: KeyUtils,\n  Leaf: Leaf,\n  Mark: Mark,\n  Node: Node,\n  Operation: Operation,\n  PathUtils: PathUtils,\n  Point: Point,\n  Range: Range,\n  resetMemoization: resetMemoization,\n  Selection: Selection,\n  Text: Text,\n  TextUtils: TextUtils,\n  useMemoization: useMemoization,\n  Value: Value\n};\nexport default index;\nexport { Block, Change, Data, Decoration, Document, Editor, Inline, KeyUtils, Leaf, Mark, Node, Operation, PathUtils, Point, Range, resetMemoization, Selection, Text, TextUtils, useMemoization, Value };","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.wrapCodeBlockByKey = exports.wrapCodeBlock = exports.unwrapCodeBlockByKey = exports.unwrapCodeBlock = exports.toggleCodeBlock = exports.indentLines = exports.dedentLines = undefined;\n\nvar _dedentLines = require('./dedentLines');\n\nvar _dedentLines2 = _interopRequireDefault(_dedentLines);\n\nvar _indentLines = require('./indentLines');\n\nvar _indentLines2 = _interopRequireDefault(_indentLines);\n\nvar _toggleCodeBlock = require('./toggleCodeBlock');\n\nvar _toggleCodeBlock2 = _interopRequireDefault(_toggleCodeBlock);\n\nvar _unwrapCodeBlock = require('./unwrapCodeBlock');\n\nvar _unwrapCodeBlock2 = _interopRequireDefault(_unwrapCodeBlock);\n\nvar _unwrapCodeBlockByKey = require('./unwrapCodeBlockByKey');\n\nvar _unwrapCodeBlockByKey2 = _interopRequireDefault(_unwrapCodeBlockByKey);\n\nvar _wrapCodeBlock = require('./wrapCodeBlock');\n\nvar _wrapCodeBlock2 = _interopRequireDefault(_wrapCodeBlock);\n\nvar _wrapCodeBlockByKey = require('./wrapCodeBlockByKey');\n\nvar _wrapCodeBlockByKey2 = _interopRequireDefault(_wrapCodeBlockByKey);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nexports.dedentLines = _dedentLines2.default;\nexports.indentLines = _indentLines2.default;\nexports.toggleCodeBlock = _toggleCodeBlock2.default;\nexports.unwrapCodeBlock = _unwrapCodeBlock2.default;\nexports.unwrapCodeBlockByKey = _unwrapCodeBlockByKey2.default;\nexports.wrapCodeBlock = _wrapCodeBlock2.default;\nexports.wrapCodeBlockByKey = _wrapCodeBlockByKey2.default;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isSelectionInBlockquote = exports.getCurrentBlockquote = undefined;\n\nvar _getCurrentBlockquote = require('./getCurrentBlockquote');\n\nvar _getCurrentBlockquote2 = _interopRequireDefault(_getCurrentBlockquote);\n\nvar _isSelectionInBlockquote = require('./isSelectionInBlockquote');\n\nvar _isSelectionInBlockquote2 = _interopRequireDefault(_isSelectionInBlockquote);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nexports.getCurrentBlockquote = _getCurrentBlockquote2.default;\nexports.isSelectionInBlockquote = _isSelectionInBlockquote2.default;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.wrapInBlockquote = exports.unwrapBlockquote = undefined;\n\nvar _unwrapBlockquote = require('./unwrapBlockquote');\n\nvar _unwrapBlockquote2 = _interopRequireDefault(_unwrapBlockquote);\n\nvar _wrapInBlockquote = require('./wrapInBlockquote');\n\nvar _wrapInBlockquote2 = _interopRequireDefault(_wrapInBlockquote);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nexports.unwrapBlockquote = _unwrapBlockquote2.default;\nexports.wrapInBlockquote = _wrapInBlockquote2.default;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _immutable = require('immutable');\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n/**\n * The plugin options\n */\n\n\nvar Options = function (_Record) {\n  _inherits(Options, _Record);\n\n  function Options() {\n    _classCallCheck(this, Options);\n\n    return _possibleConstructorReturn(this, (Options.__proto__ || Object.getPrototypeOf(Options)).apply(this, arguments));\n  }\n\n  return Options;\n}((0, _immutable.Record)({\n  maxDepth: 6,\n  types: ['ul_list', 'ol_list'],\n  typeItem: 'list_item',\n  typeDefault: 'paragraph',\n  canMerge: function canMerge(a, b) {\n    return a.type === b.type;\n  }\n}));\n\nexports.default = Options;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nrequire('slate');\n/**\n * True if the node is a list container\n */\n\n\nfunction isList(opts, node) {\n  return opts.types.includes(node.type);\n}\n\nexports.default = isList;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.encode = encode;\nexports.decode = decode; // to ensure markdown compatability we need to specifically encode some characters\n\nfunction encode(href) {\n  return decodeSafe(href).trim().replace(/ /g, \"%20\").replace(/'/g, \"%27\").replace(/\\(/g, \"%28\").replace(/\\)/g, \"%29\");\n}\n\nfunction decode(href) {\n  try {\n    return decodeURI(href);\n  } catch (e) {\n    return decodeSafe(href);\n  }\n} // convert hanging % characters into percentage encoded %25 as decodeURI cannot\n// handle this scenario but users may input 'invalid' urls.\n\n\nfunction decodeSafe(uri) {\n  var components = uri.split(/(%(?:d0|d1)%.{2})/);\n  return components.map(function (component) {\n    try {\n      return decodeURIComponent(component);\n    } catch (e) {\n      return component.replace(/%(?!\\d+)/g, \"%25\");\n    }\n  }).join(\"\");\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _slate = require('slate');\n\nvar _immutable = require('immutable');\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar DEFAULTS = {\n  containerType: 'code_block',\n  lineType: 'code_line',\n  exitBlockType: 'paragraph',\n  selectAll: true,\n  allowMarks: false,\n  getIndent: null,\n  onExit: null\n};\n/**\n * The plugin options container\n */\n\nvar Options = function (_Record) {\n  _inherits(Options, _Record);\n\n  function Options() {\n    _classCallCheck(this, Options);\n\n    return _possibleConstructorReturn(this, (Options.__proto__ || Object.getPrototypeOf(Options)).apply(this, arguments));\n  }\n\n  _createClass(Options, [{\n    key: 'resolvedOnExit',\n    value: function resolvedOnExit(editor) {\n      if (this.onExit) {\n        // Custom onExit option\n        return this.onExit(editor);\n      } // Default behavior: insert an exit block\n\n\n      var range = editor.value.selection;\n\n      var exitBlock = _slate.Block.create({\n        type: this.exitBlockType,\n        nodes: [_slate.Text.create()]\n      });\n\n      editor.withoutNormalizing(function () {\n        editor.deleteAtRange(range);\n        editor.insertBlockAtRange(editor.value.selection, exitBlock); // Exit the code block\n\n        editor.unwrapNodeByKey(exitBlock.key);\n      });\n      return editor.moveToStartOfNode(exitBlock);\n    }\n  }]);\n\n  return Options;\n}((0, _immutable.Record)(DEFAULTS));\n\nexports.default = Options;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nrequire('slate');\n\nvar _utils = require('../utils');\n\nvar _changes = require('../changes');\n/**\n * User pressed Tab in an editor:\n * Insert a tab after detecting it from code block content.\n */\n\n\nfunction onTab(opts, event, editor, next) {\n  var value = editor.value;\n  event.preventDefault();\n  event.stopPropagation();\n  var isCollapsed = value.isCollapsed;\n  var indent = (0, _utils.getCurrentIndent)(opts, value); // Selection is collapsed, we just insert an indent at cursor\n\n  if (isCollapsed) {\n    return editor.insertText(indent).focus();\n  } // We indent all selected lines\n\n\n  return (0, _changes.indentLines)(opts, editor, indent);\n}\n\nexports.default = onTab;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nrequire('slate');\n/**\n * Return the current code block, from current selection or from a node key.\n */\n\n\nfunction getCurrentCode(opts, value, key) {\n  var document = value.document;\n  var currentBlock = void 0;\n\n  if (key) {\n    // FIXME - getDescendant?\n    currentBlock = value.document.getDescendant(key);\n  } else {\n    if (!value.selection.start.key) return null;\n    currentBlock = value.startBlock;\n  } // The structure is always code_block -> code_line -> text\n  // So the parent of the currentBlock should be the code_block\n\n\n  var parent = document.getParent(currentBlock.key);\n\n  if (parent && parent.type === opts.containerType) {\n    return parent;\n  }\n\n  return null;\n}\n\nexports.default = getCurrentCode;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _detectIndent = require('detect-indent');\n\nvar _detectIndent2 = _interopRequireDefault(_detectIndent);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar DEFAULT_INDENTATION = '    ';\n/**\n * Detect indentation in a text\n */\n\nfunction getIndent(text) {\n  var defaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_INDENTATION;\n  return (0, _detectIndent2.default)(text).indent || defaultValue;\n}\n\nexports.default = getIndent;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nrequire('slate');\n\nvar _wrapCodeBlockByKey = require('./wrapCodeBlockByKey');\n\nvar _wrapCodeBlockByKey2 = _interopRequireDefault(_wrapCodeBlockByKey);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n/**\n * Wrap current block into a code block.\n */\n\n\nfunction wrapCodeBlock(opts, editor) {\n  var value = editor.value;\n  var startBlock = value.startBlock,\n      selection = value.selection; // Convert to code block\n\n  (0, _wrapCodeBlockByKey2.default)(opts, editor, startBlock.key); // Move selection back in the block\n\n  editor.moveToStartOfNode(editor.value.document.getDescendant(startBlock.key)).moveAnchorTo(selection.anchor.offset).moveFocusTo(selection.focus.offset);\n  return editor;\n}\n\nexports.default = wrapCodeBlock;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nrequire('slate');\n\nvar _utils = require('../utils');\n/**\n * Wrap a block into a code block.\n */\n\n\nfunction wrapCodeBlockByKey(opts, editor, key) {\n  var value = editor.value;\n  var document = value.document;\n  var startBlock = document.getDescendant(key);\n  var text = startBlock.text; // Remove all child\n\n  editor.withoutNormalizing(function () {\n    startBlock.nodes.forEach(function (node) {\n      editor.removeNodeByKey(node.key);\n    });\n  }); // Insert new text\n\n  var toInsert = (0, _utils.deserializeCode)(opts, text);\n  editor.withoutNormalizing(function () {\n    toInsert.nodes.forEach(function (node, i) {\n      editor.insertNodeByKey(startBlock.key, i, node);\n    });\n  }); // Set node type\n\n  editor.setNodeByKey(startBlock.key, {\n    type: opts.containerType\n  });\n  return editor;\n}\n\nexports.default = wrapCodeBlockByKey;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nrequire('slate');\n\nvar _utils = require('../utils');\n\nvar _unwrapCodeBlockByKey = require('./unwrapCodeBlockByKey');\n\nvar _unwrapCodeBlockByKey2 = _interopRequireDefault(_unwrapCodeBlockByKey);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n/**\n * Convert a code block to a normal block.\n */\n\n\nfunction unwrapCodeBlock(opts, editor, type) {\n  var value = editor.value;\n  var codeBlock = (0, _utils.getCurrentCode)(opts, value);\n\n  if (!codeBlock) {\n    return editor;\n  } // Convert to paragraph\n\n\n  (0, _unwrapCodeBlockByKey2.default)(opts, editor, codeBlock.key, type);\n  return editor;\n}\n\nexports.default = unwrapCodeBlock;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nrequire('slate');\n/**\n * Unwrap a code block into a normal block.\n */\n\n\nfunction unwrapCodeBlockByKey(opts, editor, key, type) {\n  var value = editor.value;\n  var document = value.document; // Get the code block\n\n  var codeBlock = document.getDescendant(key);\n\n  if (!codeBlock || codeBlock.type != opts.containerType) {\n    throw new Error('Block passed to unwrapCodeBlockByKey should be a code block container');\n  } // change lines into paragraph\n\n\n  editor.withoutNormalizing(function () {\n    codeBlock.nodes.forEach(function (line) {\n      return editor.setNodeByKey(line.key, {\n        type: type\n      }).unwrapNodeByKey(line.key);\n    });\n  });\n  return editor;\n}\n\nexports.default = unwrapCodeBlockByKey;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nrequire('slate');\n\nvar _utils = require('../utils');\n\nvar _changes = require('../changes');\n/**\n * User pressed Shift+Tab in an editor:\n * Reduce indentation in the selected lines.\n */\n\n\nfunction onShiftTab(opts, event, editor, next) {\n  var value = editor.value;\n  event.preventDefault();\n  event.stopPropagation();\n  var indent = (0, _utils.getCurrentIndent)(opts, value); // We dedent all selected lines\n\n  return (0, _changes.dedentLines)(opts, editor, indent);\n}\n\nexports.default = onShiftTab;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nrequire('slate');\n\nvar _utils = require('../utils');\n/**\n * User pressed Enter in an editor:\n * Insert a new code line and start it with the indentation from previous line\n */\n\n\nfunction onEnter(opts, event, editor, next) {\n  var value = editor.value;\n\n  if (!value.selection.isCollapsed) {\n    return next();\n  }\n\n  event.preventDefault();\n  var startBlock = value.startBlock;\n  var currentLineText = startBlock.text;\n  var indent = (0, _utils.getIndent)(currentLineText, '');\n  return editor.splitBlock().insertText(indent).focus();\n}\n\nexports.default = onEnter;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nrequire('slate');\n/**\n * User pressed Mod+Enter in an editor\n * Exit the current code block\n */\n\n\nfunction onModEnter(opts, event, editor, next) {\n  var value = editor.value;\n\n  if (!value.selection.isCollapsed) {\n    return next();\n  }\n\n  event.preventDefault(); // Exit the code block\n\n  return opts.resolvedOnExit(editor);\n}\n\nexports.default = onModEnter;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nrequire('slate');\n\nvar _endsWith = require('ends-with');\n\nvar _endsWith2 = _interopRequireDefault(_endsWith);\n\nvar _utils = require('../utils');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n/**\n * User pressed Delete in an editor:\n * Remove last idnentation before cursor\n */\n\n\nfunction onBackspace(opts, event, editor, next) {\n  var value = editor.value;\n\n  if (value.selection.isExpanded) {\n    return next();\n  }\n\n  var selection = value.selection,\n      startText = value.startText;\n  var currentLine = value.startBlock; // Detect and remove indentation at cursor\n\n  var indent = (0, _utils.getCurrentIndent)(opts, value);\n  var beforeSelection = currentLine.text.slice(0, selection.start.offset); // If the line before selection ending with the indentation?\n\n  if ((0, _endsWith2.default)(beforeSelection, indent)) {\n    // Remove indent\n    event.preventDefault();\n    return editor.deleteBackward(indent.length).focus();\n  } else if (opts.exitBlockType) {\n    // Otherwise check if we are in an empty code container...\n    var currentCode = (0, _utils.getCurrentCode)(opts, value);\n    var isStartOfCode = selection.start.offset === 0 && currentCode.getFirstText() === startText; // PERF: avoid checking for whole currentCode.text\n\n    var isEmpty = currentCode.nodes.size === 1 && currentLine.text.length === 0;\n\n    if (isStartOfCode && isEmpty) {\n      event.preventDefault(); // Convert it to default exit type\n\n      editor.withoutNormalizing(function () {\n        editor.setBlocks(opts.exitBlockType).unwrapNodeByKey(currentLine.key);\n      });\n      return editor;\n    }\n  }\n\n  return next();\n}\n\nexports.default = onBackspace;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nrequire('slate');\n\nvar _utils = require('../utils');\n/**\n * User is Cmd+A to select all text\n */\n\n\nfunction onSelectAll(opts, event, editor, next) {\n  var value = editor.value;\n  event.preventDefault();\n  var currentCode = (0, _utils.getCurrentCode)(opts, value);\n  return editor.moveToStartOfNode(currentCode.getFirstText()).moveFocusToEndOfNode(currentCode.getLastText());\n}\n\nexports.default = onSelectAll;","/**\n * Schema violations.\n *\n * @type {String}\n */\nvar CHILD_OBJECT_INVALID = 'child_object_invalid';\nvar CHILD_REQUIRED = 'child_required';\nvar CHILD_TYPE_INVALID = 'child_type_invalid';\nvar CHILD_UNKNOWN = 'child_unknown';\nvar FIRST_CHILD_OBJECT_INVALID = 'first_child_object_invalid';\nvar FIRST_CHILD_TYPE_INVALID = 'first_child_type_invalid';\nvar LAST_CHILD_OBJECT_INVALID = 'last_child_object_invalid';\nvar LAST_CHILD_TYPE_INVALID = 'last_child_type_invalid';\nvar NEXT_SIBLING_OBJECT_INVALID = 'next_sibling_object_invalid';\nvar NEXT_SIBLING_TYPE_INVALID = 'next_sibling_type_invalid';\nvar NODE_DATA_INVALID = 'node_data_invalid';\nvar NODE_IS_VOID_INVALID = 'node_is_void_invalid';\nvar NODE_MARK_INVALID = 'node_mark_invalid';\nvar NODE_OBJECT_INVALID = 'node_object_invalid';\nvar NODE_TEXT_INVALID = 'node_text_invalid';\nvar NODE_TYPE_INVALID = 'node_type_invalid';\nvar PARENT_OBJECT_INVALID = 'parent_object_invalid';\nvar PARENT_TYPE_INVALID = 'parent_type_invalid';\nvar PREVIOUS_SIBLING_OBJECT_INVALID = 'previous_sibling_object_invalid';\nvar PREVIOUS_SIBLING_TYPE_INVALID = 'previous_sibling_type_invalid';\nexport { CHILD_OBJECT_INVALID, CHILD_REQUIRED, CHILD_TYPE_INVALID, CHILD_UNKNOWN, FIRST_CHILD_OBJECT_INVALID, FIRST_CHILD_TYPE_INVALID, LAST_CHILD_OBJECT_INVALID, LAST_CHILD_TYPE_INVALID, NEXT_SIBLING_OBJECT_INVALID, NEXT_SIBLING_TYPE_INVALID, NODE_DATA_INVALID, NODE_IS_VOID_INVALID, NODE_MARK_INVALID, NODE_OBJECT_INVALID, NODE_TEXT_INVALID, NODE_TYPE_INVALID, PARENT_OBJECT_INVALID, PARENT_TYPE_INVALID, PREVIOUS_SIBLING_OBJECT_INVALID, PREVIOUS_SIBLING_TYPE_INVALID };","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _immutable = require('immutable');\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar DEFAULTS = {\n  type: 'blockquote',\n  typeDefault: 'paragraph'\n};\n/**\n * The plugin options container\n */\n\nvar Options = function (_Record) {\n  _inherits(Options, _Record);\n\n  function Options() {\n    _classCallCheck(this, Options);\n\n    return _possibleConstructorReturn(this, (Options.__proto__ || Object.getPrototypeOf(Options)).apply(this, arguments));\n  }\n\n  return Options;\n}((0, _immutable.Record)(DEFAULTS));\n\nexports.default = Options;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nrequire('slate');\n\nvar _utils = require('../utils');\n\nvar _changes = require('../changes');\n/**\n * User pressed Delete in an editor:\n * Unwrap the blockquote if at the start of the inner block.\n */\n\n\nfunction onBackspace(opts, event, editor, next) {\n  var value = editor.value;\n  var selection = value.selection;\n\n  if (!(0, _utils.getCurrentBlockquote)(opts, value) || !selection.isCollapsed) {\n    return next();\n  }\n\n  if (selection.start.offset !== 0) {\n    return next();\n  } // FIXME - Block is empty, we exit the blockquote\n\n\n  event.preventDefault();\n  return (0, _changes.unwrapBlockquote)(opts, editor);\n}\n\nexports.default = onBackspace;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nrequire('slate');\n/**\n * Return the current blockquote, from current selection or from a node.\n */\n\n\nfunction getCurrentBlockquote(opts, value, block) {\n  var document = value.document;\n\n  if (!block) {\n    if (!value.selection.anchor.key) return null;\n    block = value.startBlock;\n  } // FIXME - getParent?\n\n\n  var parent = document.getParent(block.key);\n  return parent && parent.type === opts.type ? parent : null;\n}\n\nexports.default = getCurrentBlockquote;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nrequire('slate');\n\nvar _utils = require('../utils');\n\nvar _changes = require('../changes/');\n/**\n * User pressed Enter in an editor\n *\n * Enter on an empty block inside a blockquote exit the blockquote.\n */\n\n\nfunction onEnter(opts, event, editor, next) {\n  var value = editor.value;\n  var startBlock = value.startBlock;\n\n  if (!(0, _utils.getCurrentBlockquote)(opts, value)) {\n    return next();\n  }\n\n  if (startBlock.text.length !== 0) {\n    return next();\n  } // FIXME - Block is empty, we exit the blockquote\n\n\n  event.preventDefault();\n  return (0, _changes.unwrapBlockquote)(opts, editor);\n}\n\nexports.default = onEnter;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar TOKEN_MARK = 'prism-token';\nexports.default = TOKEN_MARK;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nrequire('slate');\n\nvar _isList = require('./isList');\n\nvar _isList2 = _interopRequireDefault(_isList);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n/**\n * Return the parent list block for an item block.\n */\n\n\nfunction getListForItem(opts, value, item) {\n  var document = value.document;\n  var parent = document.getParent(item.key);\n  return parent && (0, _isList2.default)(opts, parent) ? parent : null;\n}\n\nexports.default = getListForItem;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nrequire('slate');\n\nvar _immutable = require('immutable');\n\nvar _isList = require('./isList');\n\nvar _isList2 = _interopRequireDefault(_isList);\n\nvar _getCurrentItem = require('./getCurrentItem');\n\nvar _getCurrentItem2 = _interopRequireDefault(_getCurrentItem);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n/**\n * Return the list of items at the given range. The returned items are\n * the highest list item blocks that cover the range.\n *\n * Returns an empty list if no list of items can cover the range\n */\n\n\nfunction getItemsAtRange(opts, value, range) {\n  range = range || value.selection;\n\n  if (!range.start.key) {\n    return (0, _immutable.List)();\n  }\n\n  var document = value.document;\n  var startBlock = document.getClosestBlock(range.start.key);\n  var endBlock = document.getClosestBlock(range.end.key);\n\n  if (startBlock === endBlock) {\n    var item = (0, _getCurrentItem2.default)(opts, value, startBlock);\n    return item ? (0, _immutable.List)([item]) : (0, _immutable.List)();\n  }\n\n  var ancestor = document.getCommonAncestor(startBlock.key, endBlock.key);\n\n  if ((0, _isList2.default)(opts, ancestor)) {\n    var startPath = ancestor.getPath(startBlock.key);\n    var endPath = ancestor.getPath(endBlock.key);\n    return ancestor.nodes.slice(startPath.get(0), endPath.get(0) + 1);\n  } else if (ancestor.type === opts.typeItem) {\n    // The ancestor is the highest list item that covers the range\n    return (0, _immutable.List)([ancestor]);\n  } // No list of items can cover the range\n\n\n  return (0, _immutable.List)();\n}\n\nexports.default = getItemsAtRange;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.encode = encode;\nexports.decode = decode; // to ensure markdown compatability we need to specifically encode some characters\n\nfunction encode(href) {\n  return decodeSafe(href).trim().replace(/ /g, \"%20\").replace(/'/g, \"%27\").replace(/\\(/g, \"%28\").replace(/\\)/g, \"%29\");\n}\n\nfunction decode(href) {\n  try {\n    return decodeURI(href);\n  } catch (e) {\n    return decodeSafe(href);\n  }\n} // convert hanging % characters into percentage encoded %25 as decodeURI cannot\n// handle this scenario but users may input 'invalid' urls.\n\n\nfunction decodeSafe(uri) {\n  var components = uri.split(/(%(?:d0|d1)%.{2})/);\n  return components.map(function (component) {\n    try {\n      return decodeURIComponent(component);\n    } catch (e) {\n      return component.replace(/%(?!\\d+)/g, \"%25\");\n    }\n  }).join(\"\");\n}","var global$1 = typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {}; // shim for using process in browser\n// based off https://github.com/defunctzombie/node-process/blob/master/browser.js\n\nfunction defaultSetTimout() {\n  throw new Error('setTimeout has not been defined');\n}\n\nfunction defaultClearTimeout() {\n  throw new Error('clearTimeout has not been defined');\n}\n\nvar cachedSetTimeout = defaultSetTimout;\nvar cachedClearTimeout = defaultClearTimeout;\n\nif (typeof global$1.setTimeout === 'function') {\n  cachedSetTimeout = setTimeout;\n}\n\nif (typeof global$1.clearTimeout === 'function') {\n  cachedClearTimeout = clearTimeout;\n}\n\nfunction runTimeout(fun) {\n  if (cachedSetTimeout === setTimeout) {\n    //normal enviroments in sane situations\n    return setTimeout(fun, 0);\n  } // if setTimeout wasn't available but was latter defined\n\n\n  if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n    cachedSetTimeout = setTimeout;\n    return setTimeout(fun, 0);\n  }\n\n  try {\n    // when when somebody has screwed with setTimeout but no I.E. maddness\n    return cachedSetTimeout(fun, 0);\n  } catch (e) {\n    try {\n      // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n      return cachedSetTimeout.call(null, fun, 0);\n    } catch (e) {\n      // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n      return cachedSetTimeout.call(this, fun, 0);\n    }\n  }\n}\n\nfunction runClearTimeout(marker) {\n  if (cachedClearTimeout === clearTimeout) {\n    //normal enviroments in sane situations\n    return clearTimeout(marker);\n  } // if clearTimeout wasn't available but was latter defined\n\n\n  if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n    cachedClearTimeout = clearTimeout;\n    return clearTimeout(marker);\n  }\n\n  try {\n    // when when somebody has screwed with setTimeout but no I.E. maddness\n    return cachedClearTimeout(marker);\n  } catch (e) {\n    try {\n      // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n      return cachedClearTimeout.call(null, marker);\n    } catch (e) {\n      // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n      // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n      return cachedClearTimeout.call(this, marker);\n    }\n  }\n}\n\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n  if (!draining || !currentQueue) {\n    return;\n  }\n\n  draining = false;\n\n  if (currentQueue.length) {\n    queue = currentQueue.concat(queue);\n  } else {\n    queueIndex = -1;\n  }\n\n  if (queue.length) {\n    drainQueue();\n  }\n}\n\nfunction drainQueue() {\n  if (draining) {\n    return;\n  }\n\n  var timeout = runTimeout(cleanUpNextTick);\n  draining = true;\n  var len = queue.length;\n\n  while (len) {\n    currentQueue = queue;\n    queue = [];\n\n    while (++queueIndex < len) {\n      if (currentQueue) {\n        currentQueue[queueIndex].run();\n      }\n    }\n\n    queueIndex = -1;\n    len = queue.length;\n  }\n\n  currentQueue = null;\n  draining = false;\n  runClearTimeout(timeout);\n}\n\nfunction nextTick(fun) {\n  var args = new Array(arguments.length - 1);\n\n  if (arguments.length > 1) {\n    for (var i = 1; i < arguments.length; i++) {\n      args[i - 1] = arguments[i];\n    }\n  }\n\n  queue.push(new Item(fun, args));\n\n  if (queue.length === 1 && !draining) {\n    runTimeout(drainQueue);\n  }\n} // v8 likes predictible objects\n\n\nfunction Item(fun, array) {\n  this.fun = fun;\n  this.array = array;\n}\n\nItem.prototype.run = function () {\n  this.fun.apply(null, this.array);\n};\n\nvar title = 'browser';\nvar platform = 'browser';\nvar browser = true;\nvar env = {};\nvar argv = [];\nvar version = ''; // empty string to avoid regexp issues\n\nvar versions = {};\nvar release = {};\nvar config = {};\n\nfunction noop() {}\n\nvar on = noop;\nvar addListener = noop;\nvar once = noop;\nvar off = noop;\nvar removeListener = noop;\nvar removeAllListeners = noop;\nvar emit = noop;\n\nfunction binding(name) {\n  throw new Error('process.binding is not supported');\n}\n\nfunction cwd() {\n  return '/';\n}\n\nfunction chdir(dir) {\n  throw new Error('process.chdir is not supported');\n}\n\nfunction umask() {\n  return 0;\n} // from https://github.com/kumavis/browser-process-hrtime/blob/master/index.js\n\n\nvar performance = global$1.performance || {};\n\nvar performanceNow = performance.now || performance.mozNow || performance.msNow || performance.oNow || performance.webkitNow || function () {\n  return new Date().getTime();\n}; // generate timestamp or delta\n// see http://nodejs.org/api/process.html#process_process_hrtime\n\n\nfunction hrtime(previousTimestamp) {\n  var clocktime = performanceNow.call(performance) * 1e-3;\n  var seconds = Math.floor(clocktime);\n  var nanoseconds = Math.floor(clocktime % 1 * 1e9);\n\n  if (previousTimestamp) {\n    seconds = seconds - previousTimestamp[0];\n    nanoseconds = nanoseconds - previousTimestamp[1];\n\n    if (nanoseconds < 0) {\n      seconds--;\n      nanoseconds += 1e9;\n    }\n  }\n\n  return [seconds, nanoseconds];\n}\n\nvar startTime = new Date();\n\nfunction uptime() {\n  var currentTime = new Date();\n  var dif = currentTime - startTime;\n  return dif / 1000;\n}\n\nvar process = {\n  nextTick: nextTick,\n  title: title,\n  browser: browser,\n  env: env,\n  argv: argv,\n  version: version,\n  versions: versions,\n  on: on,\n  addListener: addListener,\n  once: once,\n  off: off,\n  removeListener: removeListener,\n  removeAllListeners: removeAllListeners,\n  emit: emit,\n  binding: binding,\n  cwd: cwd,\n  chdir: chdir,\n  umask: umask,\n  hrtime: hrtime,\n  platform: platform,\n  release: release,\n  config: config,\n  uptime: uptime\n};\n/* eslint-disable no-console */\n\n/**\n * Is deprecate interface forbidden?\n */\n\nvar FORBID_DEPRECATE = process && process.env && process.env.FORBID_DEPRECATIONS;\n/**\n * Is warning scenarios forbidden?\n */\n\nvar FORBID_WARNING = process && process.env && process.env.FORBID_WARNINGS;\n/**\n * Is in development?\n *\n * @type {Boolean}\n */\n\nvar IS_DEV = typeof process !== 'undefined' && process.env && \"development\" !== 'production';\n/**\n * Has console?\n *\n * @type {Boolean}\n */\n\nvar HAS_CONSOLE = typeof console != 'undefined' && typeof console.log == 'function' && typeof console.warn == 'function' && typeof console.error == 'function';\n/**\n * Log a `message` at `level`.\n *\n * @param {String} level\n * @param {String} message\n * @param {Any} ...args\n */\n\nfunction log(level, message) {\n  if (!IS_DEV) {\n    return;\n  }\n\n  if (HAS_CONSOLE) {\n    var _console;\n\n    for (var _len = arguments.length, args = Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n      args[_key - 2] = arguments[_key];\n    }\n\n    (_console = console)[level].apply(_console, [message].concat(args));\n  }\n}\n/**\n * Log an error `message`.\n *\n * @param {String} message\n * @param {Any} ...args\n */\n\n\nfunction error(message) {\n  if (HAS_CONSOLE) {\n    var _console2;\n\n    for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n      args[_key2 - 1] = arguments[_key2];\n    }\n\n    (_console2 = console).error.apply(_console2, [message].concat(args));\n  }\n}\n/**\n * Log a warning `message` in development only.\n *\n * @param {String} message\n * @param {Any} ...args\n */\n\n\nfunction warn(message) {\n  var logger = FORBID_WARNING ? forbidden : log;\n\n  for (var _len3 = arguments.length, args = Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n    args[_key3 - 1] = arguments[_key3];\n  }\n\n  logger.apply(undefined, ['warn', 'Warning: ' + message].concat(args));\n}\n/**\n * Log a deprecation warning `message`, with helpful `version` number in\n * development only.\n *\n * @param {String} version\n * @param {String} message\n * @param {Any} ...args\n */\n\n\nfunction deprecate(version$$1, message) {\n  var logger = FORBID_DEPRECATE ? forbidden : log;\n\n  for (var _len4 = arguments.length, args = Array(_len4 > 2 ? _len4 - 2 : 0), _key4 = 2; _key4 < _len4; _key4++) {\n    args[_key4 - 2] = arguments[_key4];\n  }\n\n  logger.apply(undefined, ['warn', 'Deprecation (' + version$$1 + '): ' + message].concat(args));\n}\n\nfunction forbidden(level, message) {\n  throw new Error(message);\n}\n/**\n * Export.\n *\n * @type {Function}\n */\n\n\nvar index = {\n  deprecate: deprecate,\n  error: error,\n  warn: warn\n};\nexport default index;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _parser = require(\"./parser\");\n\nvar _parser2 = _interopRequireDefault(_parser);\n\nvar _slate = require(\"slate\");\n\nvar _immutable = require(\"immutable\");\n\nvar _urls = require(\"./urls\");\n\nvar _utils = require(\"./utils\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nvar String = new _immutable.Record({\n  object: \"string\",\n  text: \"\"\n});\n/**\n * Rules to (de)serialize nodes.\n *\n * @type {Object}\n */\n\nvar tableHeader = \"\";\nvar firstRow = true;\nvar RULES = [{\n  serialize: function serialize(obj, children) {\n    if (obj.object === \"string\") {\n      return children;\n    }\n  }\n}, {\n  serialize: function serialize(obj, children, document) {\n    if (obj.object !== \"block\") return;\n    var parent = document.getParent(obj.key);\n\n    switch (obj.type) {\n      case \"table\":\n        tableHeader = \"\";\n        firstRow = true; // trim removes trailing newline\n\n        return children.trim();\n\n      case \"table-cell\":\n        {\n          switch (obj.getIn([\"data\", \"align\"])) {\n            case \"left\":\n              tableHeader += \"|:--- \";\n              break;\n\n            case \"center\":\n              tableHeader += \"|:---:\";\n              break;\n\n            case \"right\":\n              tableHeader += \"| ---:\";\n              break;\n\n            default:\n              tableHeader += \"| --- \";\n          }\n\n          return \"| \" + children + \" \";\n        }\n\n      case \"table-row\":\n        var output = \"\";\n\n        if (firstRow) {\n          output = tableHeader + \"|\\n\";\n          tableHeader = \"\";\n          firstRow = false;\n        }\n\n        return children + \"|\\n\" + output;\n\n      case \"paragraph\":\n        return children;\n\n      case \"code\":\n        {\n          var language = obj.getIn([\"data\", \"language\"]) || \"\";\n          return \"```\" + language + \"\\n\" + children + \"\\n```\";\n        }\n\n      case \"code-line\":\n        return children + \"\\n\";\n\n      case \"block-quote\":\n        // Handle multi-line blockquotes\n        return children.split(\"\\n\").map(function (text) {\n          return \"> \" + text;\n        }).join(\"\\n\");\n\n      case \"todo-list\":\n      case \"bulleted-list\":\n      case \"ordered-list\":\n        {\n          // root list\n          if (parent === document) {\n            return children;\n          } // nested list\n\n\n          return \"\\n\" + children.replace(/\\n+$/gm, \"\").replace(/^/gm, \"   \");\n        }\n\n      case \"list-item\":\n        {\n          switch (parent.type) {\n            case \"ordered-list\":\n              return \"1. \" + children + \"\\n\";\n\n            case \"todo-list\":\n              var checked = obj.getIn([\"data\", \"checked\"]);\n              var box = checked ? \"[x]\" : \"[ ]\";\n              return box + \" \" + children + \"\\n\";\n\n            default:\n            case \"bulleted-list\":\n              return \"* \" + children + \"\\n\";\n          }\n        }\n\n      case \"heading1\":\n        return \"# \" + children + \"\\n\";\n\n      case \"heading2\":\n        return \"\\n## \" + children + \"\\n\";\n\n      case \"heading3\":\n        return \"\\n### \" + children + \"\\n\";\n\n      case \"heading4\":\n        return \"\\n#### \" + children + \"\\n\";\n\n      case \"heading5\":\n        return \"\\n##### \" + children + \"\\n\";\n\n      case \"heading6\":\n        return \"\\n###### \" + children + \"\\n\";\n\n      case \"horizontal-rule\":\n        return \"---\";\n\n      case \"image\":\n        var alt = obj.getIn([\"data\", \"alt\"]) || \"\";\n        var src = (0, _urls.encode)(obj.getIn([\"data\", \"src\"]) || \"\");\n        return \"![\" + alt + \"](\" + src + \")\";\n    }\n  }\n}, {\n  serialize: function serialize(obj, children) {\n    if (obj.type === \"hashtag\") return children;\n  }\n}, {\n  serialize: function serialize(obj, children) {\n    if (obj.type === \"link\") {\n      var href = (0, _urls.encode)(obj.getIn([\"data\", \"href\"]) || \"\");\n      var text = children.trim() || href;\n      return href ? \"[\" + text + \"](\" + href + \")\" : text;\n    }\n  }\n}, {\n  serialize: function serialize(obj, children) {\n    if (obj.object !== \"mark\") return;\n    if (!children) return;\n\n    switch (obj.type) {\n      case \"bold\":\n        return \"**\" + children + \"**\";\n\n      case \"italic\":\n        return \"_\" + children + \"_\";\n\n      case \"code\":\n        return \"`\" + children + \"`\";\n\n      case \"inserted\":\n        return \"++\" + children + \"++\";\n\n      case \"deleted\":\n        return \"~~\" + children + \"~~\";\n\n      case \"underlined\":\n        return \"__\" + children + \"__\";\n    }\n  }\n}];\n/**\n * Markdown serializer.\n *\n * @type {Markdown}\n */\n\nvar Markdown = function () {\n  /**\n   * Create a new serializer with `rules`.\n   *\n   * @param {Object} options\n   * @property {Array} rules\n   * @return {Markdown} serializer\n   */\n  function Markdown() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Markdown);\n\n    this.rules = [].concat(_toConsumableArray(options.rules || []), RULES);\n    this.serializeNode = this.serializeNode.bind(this);\n    this.serializeLeaves = this.serializeLeaves.bind(this);\n    this.serializeString = this.serializeString.bind(this);\n  }\n  /**\n   * Serialize a `state` object into an HTML string.\n   *\n   * @param {State} state\n   * @return {String} markdown\n   */\n\n\n  _createClass(Markdown, [{\n    key: \"serialize\",\n    value: function serialize(state) {\n      var _this = this;\n\n      var document = state.document;\n      var elements = document.nodes.map(function (node) {\n        return _this.serializeNode(node, document);\n      });\n      var output = elements.join(\"\\n\"); // trim beginning whitespace\n\n      return output.replace(/^\\s+/g, \"\");\n    }\n    /**\n     * Serialize a `node`.\n     *\n     * @param {Node} node\n     * @return {String}\n     */\n\n  }, {\n    key: \"serializeNode\",\n    value: function serializeNode(node, document) {\n      var _this2 = this;\n\n      if (node.object == \"text\") {\n        var leaves = node.getLeaves();\n        var inCodeBlock = !!document.getClosest(node.key, function (n) {\n          return n.type === \"code\";\n        });\n        return leaves.map(function (leave) {\n          var inCodeMark = !!leave.marks.filter(function (mark) {\n            return mark.type === \"code\";\n          }).size;\n          return _this2.serializeLeaves(leave, !inCodeBlock && !inCodeMark);\n        });\n      }\n\n      var children = node.nodes.map(function (childNode) {\n        var serialized = _this2.serializeNode(childNode, document);\n\n        return (serialized && serialized.join ? serialized.join(\"\") : serialized) || \"\";\n      }).join( // Special case for blockquotes, children in blockquotes are separated by new lines\n      node.type === \"block-quote\" ? \"\\n\" : \"\");\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.rules[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var rule = _step.value;\n          if (!rule.serialize) continue;\n          var ret = rule.serialize(node, children, document);\n          if (ret) return ret;\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    }\n    /**\n     * Serialize `leaves`.\n     *\n     * @param {Leave[]} leaves\n     * @return {String}\n     */\n\n  }, {\n    key: \"serializeLeaves\",\n    value: function serializeLeaves(leaves) {\n      var _this3 = this;\n\n      var escape = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      var leavesText = leaves.text;\n\n      if (escape) {\n        // escape markdown characters\n        leavesText = (0, _utils.escapeMarkdownChars)(leavesText);\n      }\n\n      var string = new String({\n        text: leavesText\n      });\n      var text = this.serializeString(string);\n      return leaves.marks.reduce(function (children, mark) {\n        var _iteratorNormalCompletion2 = true;\n        var _didIteratorError2 = false;\n        var _iteratorError2 = undefined;\n\n        try {\n          for (var _iterator2 = _this3.rules[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n            var rule = _step2.value;\n            if (!rule.serialize) continue;\n            var ret = rule.serialize(mark, children);\n            if (ret) return ret;\n          }\n        } catch (err) {\n          _didIteratorError2 = true;\n          _iteratorError2 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion2 && _iterator2.return) {\n              _iterator2.return();\n            }\n          } finally {\n            if (_didIteratorError2) {\n              throw _iteratorError2;\n            }\n          }\n        }\n      }, text);\n    }\n    /**\n     * Serialize a `string`.\n     *\n     * @param {String} string\n     * @return {String}\n     */\n\n  }, {\n    key: \"serializeString\",\n    value: function serializeString(string) {\n      var _iteratorNormalCompletion3 = true;\n      var _didIteratorError3 = false;\n      var _iteratorError3 = undefined;\n\n      try {\n        for (var _iterator3 = this.rules[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n          var rule = _step3.value;\n          if (!rule.serialize) continue;\n          var ret = rule.serialize(string, string.text);\n          if (ret) return ret;\n        }\n      } catch (err) {\n        _didIteratorError3 = true;\n        _iteratorError3 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion3 && _iterator3.return) {\n            _iterator3.return();\n          }\n        } finally {\n          if (_didIteratorError3) {\n            throw _iteratorError3;\n          }\n        }\n      }\n    }\n    /**\n     * Deserialize a markdown `string`.\n     *\n     * @param {String} markdown\n     * @return {State} state\n     */\n\n  }, {\n    key: \"deserialize\",\n    value: function deserialize(markdown) {\n      var document = _parser2.default.parse(markdown);\n\n      return _slate.Value.fromJSON({\n        document: document\n      });\n    }\n  }]);\n\n  return Markdown;\n}();\n\nexports.default = Markdown;","import isBrowser from 'is-in-browser';\n\nvar slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n/**\n * Browser matching rules.\n *\n * @type {Array}\n */\n\n\nvar BROWSER_RULES = [['edge', /Edge\\/([0-9\\._]+)/], ['chrome', /(?!Chrom.*OPR)Chrom(?:e|ium)\\/([0-9\\.]+)(:?\\s|$)/], ['firefox', /Firefox\\/([0-9\\.]+)(?:\\s|$)/], ['opera', /Opera\\/([0-9\\.]+)(?:\\s|$)/], ['opera', /OPR\\/([0-9\\.]+)(:?\\s|$)$/], ['ie', /Trident\\/7\\.0.*rv\\:([0-9\\.]+)\\).*Gecko$/], ['ie', /MSIE\\s([0-9\\.]+);.*Trident\\/[4-7].0/], ['ie', /MSIE\\s(7\\.0)/], ['android', /Android\\s([0-9\\.]+)/], ['safari', /Version\\/([0-9\\._]+).*Safari/]];\nvar browser = void 0;\n\nif (isBrowser) {\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = BROWSER_RULES[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var _ref = _step.value;\n\n      var _ref2 = slicedToArray(_ref, 2);\n\n      var name = _ref2[0];\n      var regexp = _ref2[1];\n\n      if (regexp.test(window.navigator.userAgent)) {\n        browser = name;\n        break;\n      }\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n}\n/**\n * Operating system matching rules.\n *\n * @type {Array}\n */\n\n\nvar OS_RULES = [['ios', /os ([\\.\\_\\d]+) like mac os/i], // must be before the macos rule\n['macos', /mac os x/i], ['android', /android/i], ['firefoxos', /mozilla\\/[a-z\\.\\_\\d]+ \\((?:mobile)|(?:tablet)/i], ['windows', /windows\\s*(?:nt)?\\s*([\\.\\_\\d]+)/i]];\nvar os = void 0;\n\nif (isBrowser) {\n  var _iteratorNormalCompletion2 = true;\n  var _didIteratorError2 = false;\n  var _iteratorError2 = undefined;\n\n  try {\n    for (var _iterator2 = OS_RULES[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n      var _ref3 = _step2.value;\n\n      var _ref4 = slicedToArray(_ref3, 2);\n\n      var _name = _ref4[0];\n      var _regexp = _ref4[1];\n\n      if (_regexp.test(window.navigator.userAgent)) {\n        os = _name;\n        break;\n      }\n    }\n  } catch (err) {\n    _didIteratorError2 = true;\n    _iteratorError2 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion2 && _iterator2.return) {\n        _iterator2.return();\n      }\n    } finally {\n      if (_didIteratorError2) {\n        throw _iteratorError2;\n      }\n    }\n  }\n}\n/**\n * Feature matching rules.\n *\n * @type {Array}\n */\n\n\nvar FEATURE_RULES = [['inputeventslevel1', function (window) {\n  var event = window.InputEvent ? new window.InputEvent('input') : {};\n  var support = 'inputType' in event;\n  return support;\n}], ['inputeventslevel2', function (window) {\n  var element = window.document.createElement('div');\n  element.contentEditable = true;\n  var support = 'onbeforeinput' in element;\n  return support;\n}]];\nvar features = [];\n\nif (isBrowser) {\n  var _iteratorNormalCompletion3 = true;\n  var _didIteratorError3 = false;\n  var _iteratorError3 = undefined;\n\n  try {\n    for (var _iterator3 = FEATURE_RULES[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n      var _ref5 = _step3.value;\n\n      var _ref6 = slicedToArray(_ref5, 2);\n\n      var _name2 = _ref6[0];\n      var test = _ref6[1];\n\n      if (test(window)) {\n        features.push(_name2);\n      }\n    }\n  } catch (err) {\n    _didIteratorError3 = true;\n    _iteratorError3 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion3 && _iterator3.return) {\n        _iterator3.return();\n      }\n    } finally {\n      if (_didIteratorError3) {\n        throw _iteratorError3;\n      }\n    }\n  }\n}\n/**\n * Array of regular expression matchers and their API version\n *\n * @type {Array}\n */\n\n\nvar ANDROID_API_VERSIONS = [[/^9([.]0|)/, 28], [/^8[.]1/, 27], [/^8([.]0|)/, 26], [/^7[.]1/, 25], [/^7([.]0|)/, 24], [/^6([.]0|)/, 23], [/^5[.]1/, 22], [/^5([.]0|)/, 21], [/^4[.]4/, 20]];\n/**\n * get the Android API version from the userAgent\n *\n * @return {number} version\n */\n\nfunction getAndroidApiVersion() {\n  if (os !== 'android') return null;\n  var userAgent = window.navigator.userAgent;\n  var matchData = userAgent.match(/Android\\s([0-9\\.]+)/);\n  if (matchData == null) return null;\n  var versionString = matchData[1];\n  var _iteratorNormalCompletion4 = true;\n  var _didIteratorError4 = false;\n  var _iteratorError4 = undefined;\n\n  try {\n    for (var _iterator4 = ANDROID_API_VERSIONS[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n      var _ref7 = _step4.value;\n\n      var _ref8 = slicedToArray(_ref7, 2);\n\n      var regex = _ref8[0];\n      var version = _ref8[1];\n      if (versionString.match(regex)) return version;\n    }\n  } catch (err) {\n    _didIteratorError4 = true;\n    _iteratorError4 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion4 && _iterator4.return) {\n        _iterator4.return();\n      }\n    } finally {\n      if (_didIteratorError4) {\n        throw _iteratorError4;\n      }\n    }\n  }\n\n  return null;\n}\n/**\n * Export.\n *\n * @type {Boolean}\n */\n\n\nvar IS_CHROME = browser === 'chrome';\nvar IS_OPERA = browser === 'opera';\nvar IS_FIREFOX = browser === 'firefox';\nvar IS_SAFARI = browser === 'safari';\nvar IS_IE = browser === 'ie';\nvar IS_EDGE = browser === 'edge';\nvar IS_ANDROID = os === 'android';\nvar IS_IOS = os === 'ios';\nvar IS_MAC = os === 'macos';\nvar IS_WINDOWS = os === 'windows';\nvar ANDROID_API_VERSION = getAndroidApiVersion();\nvar HAS_INPUT_EVENTS_LEVEL_1 = features.includes('inputeventslevel1');\nvar HAS_INPUT_EVENTS_LEVEL_2 = features.includes('inputeventslevel2') || IS_ANDROID && (ANDROID_API_VERSION === 28 || ANDROID_API_VERSION === null);\nexport { IS_CHROME, IS_OPERA, IS_FIREFOX, IS_SAFARI, IS_IE, IS_EDGE, IS_ANDROID, IS_IOS, IS_MAC, IS_WINDOWS, ANDROID_API_VERSION, HAS_INPUT_EVENTS_LEVEL_1, HAS_INPUT_EVENTS_LEVEL_2 };","import { Node, Value } from 'slate';\nimport { atob, btoa } from 'isomorphic-base64';\n/**\n * Encode a JSON `object` as base-64 `string`.\n *\n * @param {Object} object\n * @return {String}\n */\n\nfunction encode(object) {\n  var string = JSON.stringify(object);\n  var encoded = btoa(encodeURIComponent(string));\n  return encoded;\n}\n/**\n * Decode a base-64 `string` to a JSON `object`.\n *\n * @param {String} string\n * @return {Object}\n */\n\n\nfunction decode(string) {\n  var decoded = decodeURIComponent(atob(string));\n  var object = JSON.parse(decoded);\n  return object;\n}\n/**\n * Deserialize a Value `string`.\n *\n * @param {String} string\n * @return {Value}\n */\n\n\nfunction deserialize(string, options) {\n  var raw = decode(string);\n  var value = Value.fromJSON(raw, options);\n  return value;\n}\n/**\n * Deserialize a Node `string`.\n *\n * @param {String} string\n * @return {Node}\n */\n\n\nfunction deserializeNode(string, options) {\n  var raw = decode(string);\n  var node = Node.fromJSON(raw, options);\n  return node;\n}\n/**\n * Serialize a `value`.\n *\n * @param {Value} value\n * @return {String}\n */\n\n\nfunction serialize(value, options) {\n  var raw = value.toJSON(options);\n  var encoded = encode(raw);\n  return encoded;\n}\n/**\n * Serialize a `node`.\n *\n * @param {Node} node\n * @return {String}\n */\n\n\nfunction serializeNode(node, options) {\n  var raw = node.toJSON(options);\n  var encoded = encode(raw);\n  return encoded;\n}\n/**\n * Export.\n *\n * @type {Object}\n */\n\n\nvar index = {\n  deserialize: deserialize,\n  deserializeNode: deserializeNode,\n  serialize: serialize,\n  serializeNode: serializeNode\n};\nexport default index;","import { isKeyHotkey } from 'is-hotkey';\nimport { IS_IOS, IS_MAC } from 'slate-dev-environment';\n/**\n * Hotkey mappings for each platform.\n *\n * @type {Object}\n */\n\nvar HOTKEYS = {\n  bold: 'mod+b',\n  compose: ['down', 'left', 'right', 'up', 'backspace', 'enter'],\n  moveBackward: 'left',\n  moveForward: 'right',\n  moveWordBackward: 'ctrl+left',\n  moveWordForward: 'ctrl+right',\n  deleteBackward: 'shift?+backspace',\n  deleteForward: 'shift?+delete',\n  extendBackward: 'shift+left',\n  extendForward: 'shift+right',\n  italic: 'mod+i',\n  splitBlock: 'shift?+enter',\n  undo: 'mod+z'\n};\nvar APPLE_HOTKEYS = {\n  moveLineBackward: 'opt+up',\n  moveLineForward: 'opt+down',\n  moveWordBackward: 'opt+left',\n  moveWordForward: 'opt+right',\n  deleteBackward: ['ctrl+backspace', 'ctrl+h'],\n  deleteForward: ['ctrl+delete', 'ctrl+d'],\n  deleteLineBackward: 'cmd+shift?+backspace',\n  deleteLineForward: ['cmd+shift?+delete', 'ctrl+k'],\n  deleteWordBackward: 'opt+shift?+backspace',\n  deleteWordForward: 'opt+shift?+delete',\n  extendLineBackward: 'opt+shift+up',\n  extendLineForward: 'opt+shift+down',\n  redo: 'cmd+shift+z',\n  transposeCharacter: 'ctrl+t'\n};\nvar WINDOWS_HOTKEYS = {\n  deleteWordBackward: 'ctrl+shift?+backspace',\n  deleteWordForward: 'ctrl+shift?+delete',\n  redo: 'ctrl+y'\n  /**\n   * Hotkeys.\n   *\n   * @type {Object}\n   */\n\n};\nvar Hotkeys = {};\nvar IS_APPLE = IS_IOS || IS_MAC;\nvar IS_WINDOWS = !IS_APPLE;\nvar KEYS = [].concat(Object.keys(HOTKEYS)).concat(Object.keys(APPLE_HOTKEYS)).concat(Object.keys(WINDOWS_HOTKEYS));\nKEYS.forEach(function (key) {\n  var method = 'is' + key[0].toUpperCase() + key.slice(1);\n  if (Hotkeys[method]) return;\n  var generic = HOTKEYS[key];\n  var apple = APPLE_HOTKEYS[key];\n  var windows = WINDOWS_HOTKEYS[key];\n  var isGeneric = generic && isKeyHotkey(generic);\n  var isApple = apple && isKeyHotkey(apple);\n  var isWindows = windows && isKeyHotkey(windows);\n\n  Hotkeys[method] = function (event) {\n    if (isGeneric && isGeneric(event)) return true;\n    if (IS_APPLE && isApple && isApple(event)) return true;\n    if (IS_WINDOWS && isWindows && isWindows(event)) return true;\n    return false;\n  };\n});\nexport default Hotkeys;","import { Block, Change, Data, Document, Inline, Leaf, Mark, Node, Range, Selection, Value, Text } from 'slate';\n/**\n * Create a prop type checker for Slate objects with `name` and `validate`.\n *\n * @param {String} name\n * @param {Function} validate\n * @return {Function}\n */\n\nfunction create(name, validate) {\n  function check(isRequired, props, propName, componentName, location) {\n    var value = props[propName];\n\n    if (value == null && !isRequired) {\n      return null;\n    }\n\n    if (value == null && isRequired) {\n      return new Error('The ' + location + ' `' + propName + '` is marked as required in `' + componentName + '`, but it was not supplied.');\n    }\n\n    if (validate(value)) {\n      return null;\n    }\n\n    return new Error('Invalid ' + location + ' `' + propName + '` supplied to `' + componentName + '`, expected a Slate `' + name + '` but received: ' + value);\n  }\n\n  function propType() {\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return check.apply(undefined, [false].concat(args));\n  }\n\n  propType.isRequired = function () {\n    for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    return check.apply(undefined, [true].concat(args));\n  };\n\n  return propType;\n}\n/**\n * Prop type checkers.\n *\n * @type {Object}\n */\n\n\nvar Types = {\n  block: create('Block', function (v) {\n    return Block.isBlock(v);\n  }),\n  blocks: create('List<Block>', function (v) {\n    return Block.isBlockList(v);\n  }),\n  change: create('Change', function (v) {\n    return Change.isChange(v);\n  }),\n  data: create('Data', function (v) {\n    return Data.isData(v);\n  }),\n  document: create('Document', function (v) {\n    return Document.isDocument(v);\n  }),\n  inline: create('Inline', function (v) {\n    return Inline.isInline(v);\n  }),\n  inlines: create('Inline', function (v) {\n    return Inline.isInlineList(v);\n  }),\n  leaf: create('Leaf', function (v) {\n    return Leaf.isLeaf(v);\n  }),\n  leaves: create('List<Leaf>', function (v) {\n    return Leaf.isLeafList(v);\n  }),\n  mark: create('Mark', function (v) {\n    return Mark.isMark(v);\n  }),\n  marks: create('Set<Mark>', function (v) {\n    return Mark.isMarkSet(v);\n  }),\n  node: create('Node', function (v) {\n    return Node.isNode(v);\n  }),\n  nodes: create('List<Node>', function (v) {\n    return Node.isNodeList(v);\n  }),\n  range: create('Range', function (v) {\n    return Range.isRange(v);\n  }),\n  ranges: create('List<Range>', function (v) {\n    return Range.isRangeList(v);\n  }),\n  selection: create('Selection', function (v) {\n    return Selection.isSelection(v);\n  }),\n  value: create('Value', function (v) {\n    return Value.isValue(v);\n  }),\n  text: create('Text', function (v) {\n    return Text.isText(v);\n  }),\n  texts: create('List<Text>', function (v) {\n    return Text.isTextList(v);\n  })\n  /**\n   * Export.\n   *\n   * @type {Object}\n   */\n\n};\nexport default Types;","import React from 'react';\nvar isProduction = \"development\" === 'production';\nvar prefix = 'Invariant failed';\n\nvar index = function index(condition, message) {\n  if (condition) {\n    return;\n  }\n\n  if (isProduction) {\n    throw new Error(prefix);\n  } else {\n    throw new Error(prefix + \": \" + (message || ''));\n  }\n};\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar toConsumableArray = function toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n};\n/*\n * Instance counter to enable unique marks for multiple Placeholder instances.\n */\n\n\nvar instanceCounter = 0;\n/**\n * A plugin that renders a React placeholder for a given Slate node.\n *\n * @param {Object} options\n * @return {Object}\n */\n\nfunction SlateReactPlaceholder() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var instanceId = instanceCounter++;\n  var placeholderMark = {\n    type: 'placeholder',\n    data: {\n      key: instanceId\n    }\n  };\n  var placeholder = options.placeholder,\n      when = options.when,\n      _options$style = options.style,\n      style = _options$style === undefined ? {} : _options$style;\n  index(placeholder, 'You must pass `SlateReactPlaceholder` an `options.placeholder` string.');\n  index(when, 'You must pass `SlateReactPlaceholder` an `options.when` query.');\n  /**\n   * Decorate a match node with a placeholder mark when it fits the query.\n   *\n   * @param {Node} node\n   * @param {Editor} editor\n   * @param {Function} next\n   * @return {Array}\n   */\n\n  function decorateNode(node, editor, next) {\n    if (!editor.query(when, node)) {\n      return next();\n    }\n\n    var others = next();\n    var document = editor.value.document;\n    var first = node.getFirstText();\n    var last = node.getLastText();\n    var decoration = {\n      anchor: {\n        key: first.key,\n        offset: 0,\n        path: document.getPath(first.key)\n      },\n      focus: {\n        key: last.key,\n        offset: last.text.length,\n        path: document.getPath(last.key)\n      },\n      mark: placeholderMark\n    };\n    return [].concat(toConsumableArray(others), [decoration]);\n  }\n  /**\n   * Render an inline placeholder for the placeholder mark.\n   *\n   * @param {Object} props\n   * @param {Editor} editor\n   * @param {Function} next\n   * @return {Element}\n   */\n\n\n  function renderMark(props, editor, next) {\n    var children = props.children,\n        mark = props.mark;\n\n    if (mark.type === 'placeholder' && mark.data.get('key') === instanceId) {\n      var placeHolderStyle = _extends({\n        pointerEvents: 'none',\n        display: 'inline-block',\n        width: '0',\n        maxWidth: '100%',\n        whiteSpace: 'nowrap',\n        opacity: '0.333'\n      }, style);\n\n      return React.createElement('span', null, React.createElement('span', {\n        contentEditable: false,\n        style: placeHolderStyle\n      }, placeholder), children);\n    }\n\n    return next();\n  }\n  /**\n   * Return the plugin.\n   *\n   * @return {Object}\n   */\n\n\n  return {\n    decorateNode: decorateNode,\n    renderMark: renderMark\n  };\n}\n\nexport default SlateReactPlaceholder;","var simpleIsEqual = function simpleIsEqual(a, b) {\n  return a === b;\n};\n\nfunction index(resultFn, isEqual) {\n  if (isEqual === void 0) {\n    isEqual = simpleIsEqual;\n  }\n\n  var lastThis;\n  var lastArgs = [];\n  var lastResult;\n  var calledOnce = false;\n\n  var isNewArgEqualToLast = function isNewArgEqualToLast(newArg, index) {\n    return isEqual(newArg, lastArgs[index], index);\n  };\n\n  var result = function result() {\n    for (var _len = arguments.length, newArgs = new Array(_len), _key = 0; _key < _len; _key++) {\n      newArgs[_key] = arguments[_key];\n    }\n\n    if (calledOnce && lastThis === this && newArgs.length === lastArgs.length && newArgs.every(isNewArgEqualToLast)) {\n      return lastResult;\n    }\n\n    lastResult = resultFn.apply(this, newArgs);\n    calledOnce = true;\n    lastThis = this;\n    lastArgs = newArgs;\n    return lastResult;\n  };\n\n  return result;\n}\n\nexport default index;","import getWindow from 'get-window';\nimport invariant from 'tiny-invariant';\nimport { Value, Node, PathUtils, Editor } from 'slate';\nimport Debug from 'debug';\nimport pick from 'lodash/pick';\nimport { ANDROID_API_VERSION, IS_IE, IS_IOS, IS_EDGE, IS_FIREFOX, HAS_INPUT_EVENTS_LEVEL_2, IS_ANDROID, IS_SAFARI } from 'slate-dev-environment';\nimport Base64 from 'slate-base64-serializer';\nimport Plain from 'slate-plain-serializer';\nimport Hotkeys from 'slate-hotkeys';\nimport ReactDOM from 'react-dom';\nimport React from 'react';\nimport Types from 'prop-types';\nimport SlateTypes from 'slate-prop-types';\nimport ImmutableTypes from 'react-immutable-proptypes';\nimport { Set } from 'immutable';\nimport warning from 'tiny-warning';\nimport isBackward from 'selection-is-backward';\nimport throttle from 'lodash/throttle';\nimport PlaceholderPlugin from 'slate-react-placeholder';\nimport memoizeOne from 'memoize-one';\n/**\n * Event handlers used by Slate plugins.\n *\n * @type {Array}\n */\n\nvar EVENT_HANDLERS = ['onBeforeInput', 'onBlur', 'onClick', 'onContextMenu', 'onCompositionEnd', 'onCompositionStart', 'onCopy', 'onCut', 'onDragEnd', 'onDragEnter', 'onDragExit', 'onDragLeave', 'onDragOver', 'onDragStart', 'onDrop', 'onInput', 'onFocus', 'onKeyDown', 'onKeyUp', 'onMouseDown', 'onMouseUp', 'onPaste', 'onSelect'];\n/**\n * Fixes a selection within the DOM when the cursor is in Slate's special\n * zero-width block. Slate handles empty blocks in a special manner and the\n * cursor can end up either before or after the non-breaking space. This\n * causes different behavior in Android and so we make sure the seleciton is\n * always before the zero-width space.\n *\n * @param {Window} window\n */\n\nfunction fixSelectionInZeroWidthBlock(window) {\n  var domSelection = window.getSelection();\n  var anchorNode = domSelection.anchorNode;\n  var dataset = anchorNode.parentElement.dataset;\n  var isZeroWidth = dataset ? dataset.slateZeroWidth === 'n' : false; // We are doing three checks to see if we need to move the cursor.\n  // Is this a zero-width slate span?\n  // Is the current cursor position not at the start of it?\n  // Is there more than one character (i.e. the zero-width space char) in here?\n\n  if (isZeroWidth && anchorNode.textContent.length === 1 && domSelection.anchorOffset !== 0) {\n    var range = window.document.createRange();\n    range.setStart(anchorNode, 0);\n    range.setEnd(anchorNode, 0);\n    domSelection.removeAllRanges();\n    domSelection.addRange(range);\n  }\n}\n\nvar classCallCheck = function classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar defineProperty = function defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n};\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar inherits = function inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\nvar possibleConstructorReturn = function possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\nvar slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\nvar toConsumableArray = function toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n};\n/**\n * Offset key parser regex.\n *\n * @type {RegExp}\n */\n\n\nvar PARSER = /^([\\w-]+)(?::(\\d+))?$/;\n/**\n * Parse an offset key `string`.\n *\n * @param {String} string\n * @return {Object}\n */\n\nfunction parse(string) {\n  var matches = PARSER.exec(string);\n\n  if (!matches) {\n    throw new Error(\"Invalid offset key string \\\"\" + string + \"\\\".\");\n  }\n\n  var _matches = slicedToArray(matches, 3),\n      original = _matches[0],\n      key = _matches[1],\n      index = _matches[2]; // eslint-disable-line no-unused-vars\n\n\n  return {\n    key: key,\n    index: parseInt(index, 10)\n  };\n}\n/**\n * Stringify an offset key `object`.\n *\n * @param {Object} object\n *   @property {String} key\n *   @property {Number} index\n * @return {String}\n */\n\n\nfunction stringify(object) {\n  return object.key + \":\" + object.index;\n}\n/**\n * Export.\n *\n * @type {Object}\n */\n\n\nvar OffsetKey = {\n  parse: parse,\n  stringify: stringify\n};\n/**\n * Constants.\n *\n * @type {String}\n */\n\nvar ZERO_WIDTH_ATTRIBUTE = 'data-slate-zero-width';\nvar ZERO_WIDTH_SELECTOR = '[' + ZERO_WIDTH_ATTRIBUTE + ']';\nvar OFFSET_KEY_ATTRIBUTE = 'data-offset-key';\nvar RANGE_SELECTOR = '[' + OFFSET_KEY_ATTRIBUTE + ']';\nvar TEXT_SELECTOR = '[data-key]';\nvar VOID_SELECTOR = '[data-slate-void]';\n/**\n * Find a Slate point from a DOM selection's `nativeNode` and `nativeOffset`.\n *\n * @param {Element} nativeNode\n * @param {Number} nativeOffset\n * @param {Editor} editor\n * @return {Point}\n */\n\nfunction findPoint(nativeNode, nativeOffset, editor) {\n  invariant(!Value.isValue(editor), 'As of Slate 0.42.0, the `findPoint` utility takes an `editor` instead of a `value`.');\n\n  var _normalizeNodeAndOffs = normalizeNodeAndOffset(nativeNode, nativeOffset),\n      nearestNode = _normalizeNodeAndOffs.node,\n      nearestOffset = _normalizeNodeAndOffs.offset;\n\n  var window = getWindow(nativeNode);\n  var parentNode = nearestNode.parentNode;\n  var rangeNode = parentNode.closest(RANGE_SELECTOR);\n  var offset = void 0;\n  var node = void 0; // Calculate how far into the text node the `nearestNode` is, so that we can\n  // determine what the offset relative to the text node is.\n\n  if (rangeNode) {\n    var range = window.document.createRange();\n    var textNode = rangeNode.closest(TEXT_SELECTOR);\n    range.setStart(textNode, 0);\n    range.setEnd(nearestNode, nearestOffset);\n    node = textNode; // COMPAT: Edge has a bug where Range.prototype.toString() will convert \\n\n    // into \\r\\n. The bug causes a loop when slate-react attempts to reposition\n    // its cursor to match the native position. Use textContent.length instead.\n    // https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/10291116/\n\n    offset = range.cloneContents().textContent.length;\n  } else {\n    // For void nodes, the element with the offset key will be a cousin, not an\n    // ancestor, so find it by going down from the nearest void parent.\n    var voidNode = parentNode.closest(VOID_SELECTOR);\n    if (!voidNode) return null;\n    rangeNode = voidNode.querySelector(RANGE_SELECTOR);\n    if (!rangeNode) return null;\n    node = rangeNode;\n    offset = node.textContent.length;\n  } // COMPAT: If the parent node is a Slate zero-width space, this is because the\n  // text node should have no characters. However, during IME composition the\n  // ASCII characters will be prepended to the zero-width space, so subtract 1\n  // from the offset to account for the zero-width space character.\n\n\n  if (offset === node.textContent.length && parentNode.hasAttribute(ZERO_WIDTH_ATTRIBUTE)) {\n    offset--;\n  } // Get the string value of the offset key attribute.\n\n\n  var offsetKey = rangeNode.getAttribute(OFFSET_KEY_ATTRIBUTE);\n  if (!offsetKey) return null;\n\n  var _OffsetKey$parse = OffsetKey.parse(offsetKey),\n      key = _OffsetKey$parse.key; // COMPAT: If someone is clicking from one Slate editor into another, the\n  // select event fires twice, once for the old editor's `element` first, and\n  // then afterwards for the correct `element`. (2017/03/03)\n\n\n  var value = editor.value;\n  if (!value.document.hasDescendant(key)) return null;\n  var point = value.document.createPoint({\n    key: key,\n    offset: offset\n  });\n  return point;\n}\n/**\n * From a DOM selection's `node` and `offset`, normalize so that it always\n * refers to a text node.\n *\n * @param {Element} node\n * @param {Number} offset\n * @return {Object}\n */\n\n\nfunction normalizeNodeAndOffset(node, offset) {\n  // If it's an element node, its offset refers to the index of its children\n  // including comment nodes, so try to find the right text child node.\n  if (node.nodeType === 1 && node.childNodes.length) {\n    var isLast = offset === node.childNodes.length;\n    var direction = isLast ? 'backward' : 'forward';\n    var index = isLast ? offset - 1 : offset;\n    node = getEditableChild(node, index, direction); // If the node has children, traverse until we have a leaf node. Leaf nodes\n    // can be either text nodes, or other void DOM nodes.\n\n    while (node.nodeType === 1 && node.childNodes.length) {\n      var i = isLast ? node.childNodes.length - 1 : 0;\n      node = getEditableChild(node, i, direction);\n    } // Determine the new offset inside the text node.\n\n\n    offset = isLast ? node.textContent.length : 0;\n  } // Return the node and offset.\n\n\n  return {\n    node: node,\n    offset: offset\n  };\n}\n/**\n * Get the nearest editable child at `index` in a `parent`, preferring\n * `direction`.\n *\n * @param {Element} parent\n * @param {Number} index\n * @param {String} direction ('forward' or 'backward')\n * @return {Element|Null}\n */\n\n\nfunction getEditableChild(parent, index, direction) {\n  var childNodes = parent.childNodes;\n  var child = childNodes[index];\n  var i = index;\n  var triedForward = false;\n  var triedBackward = false; // While the child is a comment node, or an element node with no children,\n  // keep iterating to find a sibling non-void, non-comment node.\n\n  while (child.nodeType === 8 || child.nodeType === 1 && child.childNodes.length === 0 || child.nodeType === 1 && child.getAttribute('contenteditable') === 'false') {\n    if (triedForward && triedBackward) break;\n\n    if (i >= childNodes.length) {\n      triedForward = true;\n      i = index - 1;\n      direction = 'backward';\n      continue;\n    }\n\n    if (i < 0) {\n      triedBackward = true;\n      i = index + 1;\n      direction = 'forward';\n      continue;\n    }\n\n    child = childNodes[i];\n    if (direction === 'forward') i++;\n    if (direction === 'backward') i--;\n  }\n\n  return child || null;\n}\n/**\n * Find a Slate range from a DOM `native` selection.\n *\n * @param {Selection} native\n * @param {Editor} editor\n * @return {Range}\n */\n\n\nfunction findRange(native, editor) {\n  invariant(!Value.isValue(editor), 'As of Slate 0.42.0, the `findNode` utility takes an `editor` instead of a `value`.');\n  var el = native.anchorNode || native.startContainer;\n  if (!el) return null;\n  var window = getWindow(el); // If the `native` object is a DOM `Range` or `StaticRange` object, change it\n  // into something that looks like a DOM `Selection` instead.\n\n  if (native instanceof window.Range || window.StaticRange && native instanceof window.StaticRange) {\n    native = {\n      anchorNode: native.startContainer,\n      anchorOffset: native.startOffset,\n      focusNode: native.endContainer,\n      focusOffset: native.endOffset\n    };\n  }\n\n  var _native = native,\n      anchorNode = _native.anchorNode,\n      anchorOffset = _native.anchorOffset,\n      focusNode = _native.focusNode,\n      focusOffset = _native.focusOffset,\n      isCollapsed = _native.isCollapsed;\n  var value = editor.value;\n  var anchor = findPoint(anchorNode, anchorOffset, editor);\n  var focus = isCollapsed ? anchor : findPoint(focusNode, focusOffset, editor);\n  if (!anchor || !focus) return null;\n  var document = value.document;\n  var range = document.createRange({\n    anchor: anchor,\n    focus: focus\n  });\n  return range;\n}\n\nfunction getSelectionFromDOM(window, editor, domSelection) {\n  var value = editor.value;\n  var document = value.document; // If there are no ranges, the editor was blurred natively.\n\n  if (!domSelection.rangeCount) {\n    editor.blur();\n    return;\n  } // Otherwise, determine the Slate selection from the native one.\n\n\n  var range = findRange(domSelection, editor);\n\n  if (!range) {\n    return;\n  }\n\n  var _range = range,\n      anchor = _range.anchor,\n      focus = _range.focus;\n  var anchorText = document.getNode(anchor.key);\n  var focusText = document.getNode(focus.key);\n  var anchorInline = document.getClosestInline(anchor.key);\n  var focusInline = document.getClosestInline(focus.key);\n  var focusBlock = document.getClosestBlock(focus.key);\n  var anchorBlock = document.getClosestBlock(anchor.key); // COMPAT: If the anchor point is at the start of a non-void, and the\n  // focus point is inside a void node with an offset that isn't `0`, set\n  // the focus offset to `0`. This is due to void nodes <span>'s being\n  // positioned off screen, resulting in the offset always being greater\n  // than `0`. Since we can't know what it really should be, and since an\n  // offset of `0` is less destructive because it creates a hanging\n  // selection, go with `0`. (2017/09/07)\n\n  if (anchorBlock && !editor.isVoid(anchorBlock) && anchor.offset === 0 && focusBlock && editor.isVoid(focusBlock) && focus.offset !== 0) {\n    range = range.setFocus(focus.setOffset(0));\n  } // COMPAT: If the selection is at the end of a non-void inline node, and\n  // there is a node after it, put it in the node after instead. This\n  // standardizes the behavior, since it's indistinguishable to the user.\n\n\n  if (anchorInline && !editor.isVoid(anchorInline) && anchor.offset === anchorText.text.length) {\n    var block = document.getClosestBlock(anchor.key);\n    var nextText = block.getNextText(anchor.key);\n    if (nextText) range = range.moveAnchorTo(nextText.key, 0);\n  }\n\n  if (focusInline && !editor.isVoid(focusInline) && focus.offset === focusText.text.length) {\n    var _block = document.getClosestBlock(focus.key);\n\n    var _nextText = _block.getNextText(focus.key);\n\n    if (_nextText) range = range.moveFocusTo(_nextText.key, 0);\n  }\n\n  var selection = document.createSelection(range);\n  selection = selection.setIsFocused(true); // Preserve active marks from the current selection.\n  // They will be cleared by `editor.select` if the selection actually moved.\n\n  selection = selection.set('marks', value.selection.marks);\n  return selection;\n}\n/**\n * Looks at the DOM and generates the equivalent Slate Selection.\n *\n * @param {Window} window\n * @param {Editor} editor\n * @param {Selection} domSelection - The DOM's selection Object\n */\n\n\nfunction setSelectionFromDOM(window, editor, domSelection) {\n  var selection = getSelectionFromDOM(window, editor, domSelection);\n  editor.select(selection);\n}\n/**\n * setTextFromDomNode lets us take a domNode and reconcile the text in the\n * editor's Document such that it reflects the text in the DOM. This is the\n * opposite of what the Editor usually does which takes the Editor's Document\n * and React modifies the DOM to match. The purpose of this method is for\n * composition changes where we don't know what changes the user made by\n * looking at events. Instead we wait until the DOM is in a safe state, we\n * read from it, and update the Editor's Document.\n *\n * @param {Window} window\n * @param {Editor} editor\n * @param {Node} domNode\n */\n\n\nfunction setTextFromDomNode(window, editor, domNode) {\n  var point = findPoint(domNode, 0, editor);\n  if (!point) return; // Get the text node and leaf in question.\n\n  var value = editor.value;\n  var document = value.document,\n      selection = value.selection;\n  var node = document.getDescendant(point.key);\n  var block = document.getClosestBlock(node.key);\n  var leaves = node.getLeaves();\n  var lastText = block.getLastText();\n  var lastLeaf = leaves.last();\n  var start = 0;\n  var end = 0;\n  var leaf = leaves.find(function (r) {\n    start = end;\n    end += r.text.length;\n    if (end > point.offset) return true;\n  }) || lastLeaf; // Get the text information.\n\n  var text = leaf.text;\n  var textContent = domNode.textContent;\n  var isLastText = node === lastText;\n  var isLastLeaf = leaf === lastLeaf;\n  var lastChar = textContent.charAt(textContent.length - 1); // COMPAT: If this is the last leaf, and the DOM text ends in a new line,\n  // we will have added another new line in <Leaf>'s render method to account\n  // for browsers collapsing a single trailing new lines, so remove it.\n\n  if (isLastText && isLastLeaf && lastChar === '\\n') {\n    textContent = textContent.slice(0, -1);\n  } // If the text is no different, abort.\n\n\n  if (textContent === text) return; // Determine what the selection should be after changing the text.\n  // const delta = textContent.length - text.length\n  // const corrected = selection.moveToEnd().moveForward(delta)\n\n  var entire = selection.moveAnchorTo(point.key, start).moveFocusTo(point.key, end);\n  entire = document.resolveRange(entire); // Change the current value to have the leaf's text replaced.\n\n  editor.insertTextAtRange(entire, textContent, leaf.marks);\n}\n/**\n * In Android API 26 and 27 we can tell if the input key was pressed by\n * waiting for the `beforeInput` event and seeing that the last character\n * of its `data` property is char code `10`.\n *\n * Note that at this point it is too late to prevent the event from affecting\n * the DOM so we use other methods to clean the DOM up after we have detected\n * the input.\n *\n * @param  {String} data\n * @return {Boolean}\n */\n\n\nfunction isInputDataEnter(data) {\n  if (data == null) return false;\n  var lastChar = data[data.length - 1];\n  var charCode = lastChar.charCodeAt(0);\n  return charCode === 10;\n}\n/**\n * In Android sometimes the only way to tell what the user is trying to do\n * is to look at an event's `data` property and see if the last characters\n * matches a character. This method helps us make that determination.\n *\n * @param {String} data\n * @param {[String]} chars\n * @return {Boolean}\n */\n\n\nfunction isInputDataLastChar(data, chars) {\n  if (!Array.isArray(chars)) throw new Error(\"chars must be an array of one character strings\");\n  if (data == null) return false;\n  var lastChar = data[data.length - 1];\n  return chars.includes(lastChar);\n}\n/**\n * Is the given node a text node?\n *\n * @param {node} node\n * @param {Window} window\n * @return {Boolean}\n */\n\n\nfunction isTextNode(node, window) {\n  return node.nodeType === window.Node.TEXT_NODE;\n}\n/**\n * Takes a node and returns a snapshot of the node.\n *\n * @param {node} node\n * @param {Window} window\n * @return {object} element snapshot\n */\n\n\nfunction getElementSnapshot(node, window) {\n  var snapshot = {};\n  snapshot.node = node;\n\n  if (isTextNode(node, window)) {\n    snapshot.text = node.textContent;\n  }\n\n  snapshot.children = Array.from(node.childNodes).map(function (childNode) {\n    return getElementSnapshot(childNode, window);\n  });\n  return snapshot;\n}\n/**\n * Takes an array of elements and returns a snapshot\n *\n * @param {elements[]} elements\n * @param {Window} window\n * @return {object} snapshot\n */\n\n\nfunction getSnapshot(elements, window) {\n  if (!elements.length) throw new Error('elements must be an Array');\n  var lastElement = elements[elements.length - 1];\n  var snapshot = {\n    elements: elements.map(function (element) {\n      return getElementSnapshot(element, window);\n    }),\n    parent: lastElement.parentElement,\n    next: lastElement.nextElementSibling\n  };\n  return snapshot;\n}\n/**\n * Takes an element snapshot and applies it to the element in the DOM.\n * Basically, it fixes the DOM to the point in time that the snapshot was\n * taken. This will put the DOM back in sync with React.\n *\n * @param {Object} snapshot\n * @param {Window} window\n */\n\n\nfunction applyElementSnapshot(snapshot, window) {\n  var el = snapshot.node;\n\n  if (isTextNode(el, window)) {\n    // Update text if it is different\n    if (el.textContent !== snapshot.text) {\n      el.textContent = snapshot.text;\n    }\n  }\n\n  snapshot.children.forEach(function (childSnapshot) {\n    applyElementSnapshot(childSnapshot, window);\n    el.appendChild(childSnapshot.node);\n  }); // remove children that shouldn't be there\n\n  var snapLength = snapshot.children.length;\n\n  while (el.childNodes.length > snapLength) {\n    el.removeChild(el.childNodes[0]);\n  } // remove any clones from the DOM. This can happen when a block is split.\n\n\n  var dataset = el.dataset;\n  if (!dataset) return; // if there's no dataset, don't remove it\n\n  var key = dataset.key;\n  if (!key) return; // if there's no `data-key`, don't remove it\n\n  var dups = new window.Set(Array.from(window.document.querySelectorAll('[data-key=\\'' + key + '\\']')));\n  dups.delete(el);\n  dups.forEach(function (dup) {\n    return dup.parentElement.removeChild(dup);\n  });\n}\n/**\n * Takes a snapshot and applies it to the DOM. Rearranges both the contents\n * of the elements in the snapshot as well as putting the elements back into\n * position relative to each other and also makes sure the last element is\n * before the same element as it was when the snapshot was taken.\n *\n * @param {snapshot} snapshot\n * @param {Window} window\n */\n\n\nfunction applySnapshot(snapshot, window) {\n  var elements = snapshot.elements,\n      next = snapshot.next,\n      parent = snapshot.parent;\n  elements.forEach(function (element) {\n    return applyElementSnapshot(element, window);\n  });\n  var lastElement = elements[elements.length - 1].node;\n\n  if (snapshot.next) {\n    parent.insertBefore(lastElement, next);\n  } else {\n    parent.appendChild(lastElement);\n  }\n\n  var prevElement = lastElement;\n\n  for (var i = elements.length - 2; i >= 0; i--) {\n    var element = elements[i].node;\n    parent.insertBefore(element, prevElement);\n    prevElement = element;\n  }\n}\n/**\n * A snapshot of one or more elements.\n */\n\n\nvar ElementSnapshot = function () {\n  /**\n   * constructor\n   * @param {elements[]} elements - array of element to snapshot. Must be in order.\n   * @param {object} data - any arbitrary data you want to store with the snapshot\n   */\n  function ElementSnapshot(elements, data) {\n    classCallCheck(this, ElementSnapshot);\n    this.window = getWindow(elements[0]);\n    this.snapshot = getSnapshot(elements, this.window);\n    this.data = data;\n  }\n  /**\n   * apply the current snapshot to the DOM.\n   */\n\n\n  createClass(ElementSnapshot, [{\n    key: 'apply',\n    value: function apply() {\n      applySnapshot(this.snapshot, this.window);\n    }\n    /**\n     * get the data you passed into the constructor.\n     *\n     * @return {object} data\n     */\n\n  }, {\n    key: 'getData',\n    value: function getData() {\n      return this.data;\n    }\n  }]);\n  return ElementSnapshot;\n}();\n/**\n * Returns the closest element that matches the selector.\n * Unlike the native `Element.closest` method, this doesn't require the\n * starting node to be an Element.\n *\n * @param  {Node} node to start at\n * @param  {String} css selector to match\n * @return {Element} the closest matching element\n */\n\n\nfunction closest(node, selector) {\n  var win = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : window;\n\n  if (node.nodeType === win.Node.TEXT_NODE) {\n    node = node.parentNode;\n  }\n\n  return node.closest(selector);\n}\n/**\n * A DomSnapshot remembers the state of elements at a given point in time\n * and also remembers the state of the Editor at that time as well.\n * The state can be applied to the DOM at a time in the future.\n */\n\n\nvar DomSnapshot = function () {\n  /**\n   * Constructor.\n   *\n   * @param {Window} window\n   * @param {Editor} editor\n   * @param {Boolean} options.before - should we remember the element before the one passed in\n   */\n  function DomSnapshot(window, editor) {\n    var _ref = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n        _ref$before = _ref.before,\n        before = _ref$before === undefined ? false : _ref$before;\n\n    classCallCheck(this, DomSnapshot);\n    var domSelection = window.getSelection();\n    var anchorNode = domSelection.anchorNode;\n    var subrootEl = closest(anchorNode, '[data-slate-editor] > *');\n    var elements = [subrootEl]; // The before option is for when we need to take a snapshot of the current\n    // subroot and the element before when the user hits the backspace key.\n\n    if (before) {\n      var previousElementSibling = subrootEl.previousElementSibling;\n\n      if (previousElementSibling) {\n        elements.unshift(previousElementSibling);\n      }\n    }\n\n    this.snapshot = new ElementSnapshot(elements);\n    this.selection = getSelectionFromDOM(window, editor, domSelection);\n  }\n  /**\n   * Apply the snapshot to the DOM and set the selection in the Editor.\n   *\n   * @param {Editor} editor\n   */\n\n\n  createClass(DomSnapshot, [{\n    key: 'apply',\n    value: function apply(editor) {\n      var snapshot = this.snapshot,\n          selection = this.selection;\n      snapshot.apply();\n      editor.moveTo(selection.anchor.key, selection.anchor.offset);\n    }\n  }]);\n  return DomSnapshot;\n}();\n/**\n * A function that does nothing\n * @return {Function}\n */\n\n\nfunction noop() {}\n/**\n * Creates an executor like a `resolver` or a `deleter` that handles\n * delayed execution of a method using a `requestAnimationFrame` or `setTimeout`.\n *\n * Unlike a `requestAnimationFrame`, after a method is cancelled, it can be\n * resumed. You can also optionally add a `timeout` after which time the\n * executor is automatically cancelled.\n */\n\n\nvar Executor =\n/**\n * Executor\n * @param {window} window\n * @param {Function} fn - the function to execute when done\n * @param {Object} options\n */\nfunction Executor(window, fn) {\n  var _this = this;\n\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  classCallCheck(this, Executor);\n\n  this.__call__ = function () {\n    // I don't clear the timeout since it will be noop'ed anyways. Less code.\n    _this.fn();\n\n    _this.preventFurtherCalls(); // Ensure you can only call the function once\n\n  };\n\n  this.preventFurtherCalls = function () {\n    _this.fn = noop;\n  };\n\n  this.resume = function (ms) {\n    // in case resume is called more than once, we don't want old timers\n    // from executing because the `timeoutId` or `callbackId` is overwritten.\n    _this.cancel();\n\n    if (ms) {\n      _this.mode = 'timeout';\n      _this.timeoutId = _this.window.setTimeout(_this.__call__, ms);\n    } else {\n      _this.mode = 'animationFrame';\n      _this.callbackId = _this.window.requestAnimationFrame(_this.__call__);\n    }\n  };\n\n  this.cancel = function () {\n    if (_this.mode === 'timeout') {\n      _this.window.clearTimeout(_this.timeoutId);\n    } else {\n      _this.window.cancelAnimationFrame(_this.callbackId);\n    }\n\n    if (_this.onCancel) _this.onCancel();\n  };\n\n  this.__setTimeout__ = function (timeout) {\n    if (timeout == null) return;\n\n    _this.window.setTimeout(function () {\n      _this.cancel();\n\n      _this.preventFurtherCalls();\n    }, timeout);\n  };\n\n  this.fn = fn;\n  this.window = window;\n  this.resume();\n  this.onCancel = options.onCancel;\n\n  this.__setTimeout__(options.timeout);\n};\n\nvar debug = Debug('slate:android');\ndebug.reconcile = Debug('slate:reconcile');\ndebug('ANDROID_API_VERSION', {\n  ANDROID_API_VERSION: ANDROID_API_VERSION\n});\n/**\n * Define variables related to composition state.\n */\n\nvar NONE = 0;\nvar COMPOSING = 1;\n\nfunction AndroidPlugin() {\n  /**\n   * The current state of composition.\n   *\n   * @type {NONE|COMPOSING|WAITING}\n   */\n  var status = NONE;\n  /**\n   * The set of nodes that we need to process when we next reconcile.\n   * Usually this is soon after the `onCompositionEnd` event.\n   *\n   * @type {Set} set containing Node objects\n   */\n\n  var nodes = new window.Set();\n  /**\n   * Keep a snapshot after a composition end for API 26/27. If a `beforeInput`\n   * gets called with data that ends in an ENTER then we need to use this\n   * snapshot to revert the DOM so that React doesn't get out of sync with the\n   * DOM. We also need to cancel the `reconcile` operation as it interferes in\n   * certain scenarios like hitting 'enter' at the end of a word.\n   *\n   * @type {DomSnapshot} [compositionEndSnapshot]\n   \n   */\n\n  var compositionEndSnapshot = null;\n  /**\n   * When there is a `compositionEnd` we ened to reconcile Slate's Document\n   * with the DOM. The `reconciler` is an instance of `Executor` that does\n   * this for us. It is created on every `compositionEnd` and executes on the\n   * next `requestAnimationFrame`. The `Executor` can be cancelled and resumed\n   * which some methods do.\n   *\n   * @type {Executor}\n   */\n\n  var reconciler = null;\n  /**\n   * A snapshot that gets taken when there is a `keydown` event in API26/27.\n   * If an `input` gets called with `inputType` of `deleteContentBackward`\n   * we need to undo the delete that Android does to keep React in sync with\n   * the DOM.\n   *\n   * @type {DomSnapshot}\n   */\n\n  var keyDownSnapshot = null;\n  /**\n   * The deleter is an instace of `Executor` that will execute a delete\n   * operation on the next `requestAnimationFrame`. It has to wait because\n   * we need Android to finish all of its DOM operations to do with deletion\n   * before we revert them to a Snapshot. After reverting, we then execute\n   * Slate's version of delete.\n   *\n   * @type {Executor}\n   */\n\n  var deleter = null;\n  /**\n   * Because Slate implements its own event handler for `beforeInput` in\n   * addition to React's version, we actually get two. If we cancel the\n   * first native version, the React one will still fire. We set this to\n   * `true` if we don't want that to happen. Remember that when we prevent it,\n   * we need to tell React to `preventDefault` so the event doesn't continue\n   * through React's event system.\n   *\n   * type {Boolean}\n   */\n\n  var preventNextBeforeInput = false;\n  /**\n   * When a composition ends, in some API versions we may need to know what we\n   * have learned so far about the composition and what we want to do because of\n   * some actions that may come later.\n   *\n   * For example in API 26/27, if we get a `beforeInput` that tells us that the\n   * input was a `.`, then we want the reconcile to happen even if there are\n   * `onInput:delete` events that follow. In this case, we would set\n   * `compositionEndAction` to `period`. During the `onInput` we would check if\n   * the `compositionEndAction` says `period` and if so we would not start the\n   * `delete` action.\n   *\n   * @type {(String|null)}\n   */\n\n  var compositionEndAction = null;\n  /**\n   * Looks at the `nodes` we have collected, usually the things we have edited\n   * during the course of a composition, and then updates Slate's internal\n   * Document based on the text values in these DOM nodes and also updates\n   * Slate's Selection based on the current cursor position in the Editor.\n   *\n   * @param {Window} window\n   * @param {Editor} editor\n   * @param {String} options.from - where reconcile was called from for debug\n   */\n\n  function reconcile(window, editor, _ref) {\n    var from = _ref.from;\n    debug.reconcile({\n      from: from\n    });\n    var domSelection = window.getSelection();\n    nodes.forEach(function (node) {\n      setTextFromDomNode(window, editor, node);\n    });\n    setSelectionFromDOM(window, editor, domSelection);\n    nodes.clear();\n  }\n  /**\n   * On before input.\n   *\n   * Check `components/content` because some versions of Android attach a\n   * native `beforeinput` event on the Editor. In this case, you might need\n   * to distinguish whether the event coming through is the native or React\n   * version of the event. Also, if you cancel the native version that does\n   * not necessarily mean that the React version is cancelled.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onBeforeInput(event, editor, next) {\n    var isNative = !event.nativeEvent;\n    debug('onBeforeInput', {\n      isNative: isNative,\n      event: event,\n      status: status,\n      e: pick(event, ['data', 'inputType', 'isComposing', 'nativeEvent'])\n    });\n    var window = getWindow(event.target);\n\n    if (preventNextBeforeInput) {\n      event.preventDefault();\n      preventNextBeforeInput = false;\n      return;\n    }\n\n    switch (ANDROID_API_VERSION) {\n      case 25:\n        // prevent onBeforeInput to allow selecting an alternate suggest to\n        // work.\n        break;\n\n      case 26:\n      case 27:\n        if (deleter) {\n          deleter.cancel();\n          reconciler.resume();\n        } // This analyses Android's native `beforeInput` which Slate adds\n        // on in the `Content` component. It only fires if the cursor is at\n        // the end of a block. Otherwise, the code below checks.\n\n\n        if (isNative) {\n          if (event.inputType === 'insertParagraph' || event.inputType === 'insertLineBreak') {\n            debug('onBeforeInput:enter:native', {});\n            var domSelection = window.getSelection();\n            var selection = getSelectionFromDOM(window, editor, domSelection);\n            preventNextBeforeInput = true;\n            event.preventDefault();\n            editor.moveTo(selection.anchor.key, selection.anchor.offset);\n            editor.splitBlock();\n          }\n        } else {\n          if (isInputDataLastChar(event.data, ['.'])) {\n            debug('onBeforeInput:period');\n            reconciler.cancel();\n            compositionEndAction = 'period';\n            return;\n          } // This looks at the beforeInput event's data property and sees if it\n          // ends in a linefeed which is character code 10. This appears to be\n          // the only way to detect that enter has been pressed except at end\n          // of line where it doesn't work.\n\n\n          var isEnter = isInputDataEnter(event.data);\n\n          if (isEnter) {\n            if (reconciler) reconciler.cancel();\n            window.requestAnimationFrame(function () {\n              debug('onBeforeInput:enter:react', {});\n              compositionEndSnapshot.apply(editor);\n              editor.splitBlock();\n            });\n          }\n        }\n\n        break;\n\n      case 28:\n        // If a `beforeInput` event fires after an `input:deleteContentBackward`\n        // event, it appears to be a good indicator that it is some sort of\n        // special combined Android event. If this is the case, then we don't\n        // want to have a deletion to happen, we just want to wait until Android\n        // has done its thing and then at the end we just want to reconcile.\n        if (deleter) {\n          deleter.cancel();\n          reconciler.resume();\n        }\n\n        break;\n\n      default:\n        if (status !== COMPOSING) next();\n    }\n  }\n  /**\n   * On Composition end. By default, when a `compositionEnd` event happens,\n   * we start a reconciler. The reconciler will update Slate's Document using\n   * the DOM as the source of truth. In some cases, the reconciler needs to\n   * be cancelled and can also be resumed. For example, when a delete\n   * immediately followed a `compositionEnd`, we don't want to reconcile.\n   * Instead, we want the `delete` to take precedence.\n   *\n   * @param  {Event} event\n   * @param  {Editor} editor\n   * @param  {Function} next\n   */\n\n\n  function onCompositionEnd(event, editor, next) {\n    debug('onCompositionEnd', {\n      event: event\n    });\n    var window = getWindow(event.target);\n    var domSelection = window.getSelection();\n    var anchorNode = domSelection.anchorNode;\n\n    switch (ANDROID_API_VERSION) {\n      case 26:\n      case 27:\n        compositionEndSnapshot = new DomSnapshot(window, editor); // fixes a bug in Android API 26 & 27 where a `compositionEnd` is triggered\n        // without the corresponding `compositionStart` event when clicking a\n        // suggestion.\n        //\n        // If we don't add this, the `onBeforeInput` is triggered and passes\n        // through to the `before` plugin.\n\n        status = COMPOSING;\n        break;\n    }\n\n    compositionEndAction = 'reconcile';\n    nodes.add(anchorNode);\n    reconciler = new Executor(window, function () {\n      status = NONE;\n      reconcile(window, editor, {\n        from: 'onCompositionEnd:reconciler'\n      });\n      compositionEndAction = null;\n    });\n  }\n  /**\n   * On composition start.\n   *\n   * @param  {Event} event\n   * @param  {Editor} editor\n   * @param  {Function} next\n   */\n\n\n  function onCompositionStart(event, editor, next) {\n    debug('onCompositionStart', {\n      event: event\n    });\n    status = COMPOSING;\n    nodes.clear();\n  }\n  /**\n   * On composition update.\n   *\n   * @param  {Event} event\n   * @param  {Editor} editor\n   * @param  {Function} next\n   */\n\n\n  function onCompositionUpdate(event, editor, next) {\n    debug('onCompositionUpdate', {\n      event: event\n    });\n  }\n  /**\n   * On input.\n   *\n   * @param  {Event} event\n   * @param  {Editor} editor\n   * @param  {Function} next\n   */\n\n\n  function onInput(event, editor, next) {\n    debug('onInput', {\n      event: event,\n      status: status,\n      e: pick(event, ['data', 'nativeEvent', 'inputType', 'isComposing'])\n    });\n\n    switch (ANDROID_API_VERSION) {\n      case 24:\n      case 25:\n        break;\n\n      case 26:\n      case 27:\n      case 28:\n        var nativeEvent = event.nativeEvent;\n\n        if (ANDROID_API_VERSION === 28) {\n          // NOTE API 28:\n          // When a user hits space and then backspace in `middle` we end up\n          // with `midle`.\n          //\n          // This is because when the user hits space, the composition is not\n          // ended because `compositionEnd` is not called yet. When backspace is\n          // hit, the `compositionEnd` is called. We need to revert the DOM but\n          // the reconciler has not had a chance to run from the\n          // `compositionEnd` because it is set to run on the next\n          // `requestAnimationFrame`. When the backspace is carried out on the\n          // Slate Value, Slate doesn't know about the space yet so the\n          // backspace is carried out without the space cuasing us to lose a\n          // character.\n          //\n          // This fix forces Android to reconcile immediately after hitting\n          // the space.\n          //\n          // NOTE API 27:\n          // It is confirmed that this bug does not present itself on API27.\n          // A space fires a `compositionEnd` (as well as other events including\n          // an input that is a delete) so the reconciliation happens.\n          //\n          if (nativeEvent.inputType === 'insertText' && nativeEvent.data === ' ') {\n            if (reconciler) reconciler.cancel();\n            if (deleter) deleter.cancel();\n            reconcile(window, editor, {\n              from: 'onInput:space'\n            });\n            return;\n          }\n        }\n\n        if (ANDROID_API_VERSION === 26 || ANDROID_API_VERSION === 27) {\n          if (compositionEndAction === 'period') {\n            debug('onInput:period:abort'); // This means that there was a `beforeInput` that indicated the\n            // period was pressed. When a period is pressed, you get a bunch\n            // of delete actions mixed in. We want to ignore those. At this\n            // point, we add the current node to the list of things we need to\n            // resolve at the next compositionEnd. We know that a new\n            // composition will start right after this event so it is safe to\n            // do this.\n\n            var _window$getSelection = window.getSelection(),\n                anchorNode = _window$getSelection.anchorNode;\n\n            nodes.add(anchorNode);\n            return;\n          }\n        }\n\n        if (nativeEvent.inputType === 'deleteContentBackward') {\n          debug('onInput:delete', {\n            keyDownSnapshot: keyDownSnapshot\n          });\n\n          var _window = getWindow(event.target);\n\n          if (reconciler) reconciler.cancel();\n          if (deleter) deleter.cancel();\n          deleter = new Executor(_window, function () {\n            debug('onInput:delete:callback', {\n              keyDownSnapshot: keyDownSnapshot\n            });\n            keyDownSnapshot.apply(editor);\n            editor.deleteBackward();\n            deleter = null;\n          }, {\n            onCancel: function onCancel() {\n              deleter = null;\n            }\n          });\n          return;\n        }\n\n        if (status === COMPOSING) {\n          var _window$getSelection2 = window.getSelection(),\n              _anchorNode = _window$getSelection2.anchorNode;\n\n          nodes.add(_anchorNode);\n          return;\n        } // Some keys like '.' are input without compositions. This happens\n        // in API28. It might be happening in API 27 as well. Check by typing\n        // `It me. No.` On a blank line.\n\n\n        if (ANDROID_API_VERSION === 28) {\n          debug('onInput:fallback');\n\n          var _window$getSelection3 = window.getSelection(),\n              _anchorNode2 = _window$getSelection3.anchorNode;\n\n          nodes.add(_anchorNode2);\n          window.requestAnimationFrame(function () {\n            debug('onInput:fallback:callback');\n            reconcile(window, editor, {\n              from: 'onInput:fallback'\n            });\n          });\n          return;\n        }\n\n        break;\n\n      default:\n        if (status === COMPOSING) return;\n        next();\n    }\n  }\n  /**\n   * On key down.\n   *\n   * @param  {Event} event\n   * @param  {Editor} editor\n   * @param  {Function} next\n   */\n\n\n  function onKeyDown(event, editor, next) {\n    debug('onKeyDown', {\n      event: event,\n      status: status,\n      e: pick(event, ['char', 'charCode', 'code', 'key', 'keyCode', 'keyIdentifier', 'keyLocation', 'location', 'nativeEvent', 'which'])\n    });\n    var window = getWindow(event.target);\n\n    switch (ANDROID_API_VERSION) {\n      // 1. We want to allow enter keydown to allows go through\n      // 2. We want to deny keydown, I think, when it fires before the composition\n      //    or something. Need to remember what it was.\n      case 25:\n        // in API25 prevent other keys to fix clicking a word and then\n        // selecting an alternate suggestion.\n        //\n        // NOTE:\n        // The `setSelectionFromDom` is to allow hitting `Enter` to work\n        // because the selection needs to be in the right place; however,\n        // for now we've removed the cancelling of `onSelect` and everything\n        // appears to be working. Not sure why we removed `onSelect` though\n        // in API25.\n        if (event.key === 'Enter') {\n          // const window = getWindow(event.target)\n          // const selection = window.getSelection()\n          // setSelectionFromDom(window, editor, selection)\n          next();\n        }\n\n        break;\n\n      case 26:\n      case 27:\n        if (event.key === 'Enter') {\n          debug('onKeyDown:enter', {});\n\n          if (deleter) {\n            // If a `deleter` exists which means there was an onInput with\n            // `deleteContentBackward` that hasn't fired yet, then we know\n            // this is one of the cases where we have to revert to before\n            // the split.\n            deleter.cancel();\n            event.preventDefault();\n            window.requestAnimationFrame(function () {\n              debug('onKeyDown:enter:callback');\n              compositionEndSnapshot.apply(editor);\n              editor.splitBlock();\n            });\n          } else {\n            event.preventDefault(); // If there is no deleter, all we have to do is prevent the\n            // action before applying or splitBlock. In this scenario, we\n            // have to grab the selection from the DOM.\n\n            var domSelection = window.getSelection();\n            var selection = getSelectionFromDOM(window, editor, domSelection);\n            editor.moveTo(selection.anchor.key, selection.anchor.offset);\n            editor.splitBlock();\n          }\n\n          return;\n        } // We need to take a snapshot of the current selection and the\n        // element before when the user hits the backspace key. This is because\n        // we only know if the user hit backspace if the `onInput` event that\n        // follows has an `inputType` of `deleteContentBackward`. At that time\n        // it's too late to stop the event.\n\n\n        keyDownSnapshot = new DomSnapshot(window, editor, {\n          before: true\n        }); // If we let 'Enter' through it breaks handling of hitting\n        // enter at the beginning of a word so we need to stop it.\n\n        break;\n\n      case 28:\n        {\n          if (event.key === 'Enter') {\n            debug('onKeyDown:enter');\n            event.preventDefault();\n            if (reconciler) reconciler.cancel();\n            if (deleter) deleter.cancel();\n            window.requestAnimationFrame(function () {\n              reconcile(window, editor, {\n                from: 'onKeyDown:enter'\n              });\n              editor.splitBlock();\n            });\n            return;\n          } // We need to take a snapshot of the current selection and the\n          // element before when the user hits the backspace key. This is because\n          // we only know if the user hit backspace if the `onInput` event that\n          // follows has an `inputType` of `deleteContentBackward`. At that time\n          // it's too late to stop the event.\n\n\n          keyDownSnapshot = new DomSnapshot(window, editor, {\n            before: true\n          });\n          debug('onKeyDown:snapshot', {\n            keyDownSnapshot: keyDownSnapshot\n          });\n        } // If we let 'Enter' through it breaks handling of hitting\n        // enter at the beginning of a word so we need to stop it.\n\n        break;\n\n      default:\n        if (status !== COMPOSING) {\n          next();\n        }\n\n    }\n  }\n  /**\n   * On select.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onSelect(event, editor, next) {\n    debug('onSelect', {\n      event: event,\n      status: status\n    });\n\n    switch (ANDROID_API_VERSION) {\n      // We don't want to have the selection move around in an onSelect because\n      // it happens after we press `enter` in the same transaction. This\n      // causes the cursor position to not be properly placed.\n      case 26:\n      case 27:\n      case 28:\n        var _window2 = getWindow(event.target);\n\n        fixSelectionInZeroWidthBlock(_window2);\n        break;\n\n      default:\n        break;\n    }\n  }\n  /**\n   * Return the plugin.\n   *\n   * @type {Object}\n   */\n\n\n  return {\n    onBeforeInput: onBeforeInput,\n    onCompositionEnd: onCompositionEnd,\n    onCompositionStart: onCompositionStart,\n    onCompositionUpdate: onCompositionUpdate,\n    onInput: onInput,\n    onKeyDown: onKeyDown,\n    onSelect: onSelect\n  };\n}\n/**\n * The transfer types that Slate recognizes.\n *\n * @type {Object}\n */\n\n\nvar TRANSFER_TYPES = {\n  FRAGMENT: 'application/x-slate-fragment',\n  HTML: 'text/html',\n  NODE: 'application/x-slate-node',\n  RICH: 'text/rtf',\n  TEXT: 'text/plain'\n  /**\n   * Export.\n   *\n   * @type {Object}\n   */\n\n};\n/**\n * Find the DOM node for a `key`.\n *\n * @param {String|Node} key\n * @param {Window} win (optional)\n * @return {Element}\n */\n\nfunction findDOMNode(key) {\n  var win = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : window;\n\n  if (Node.isNode(key)) {\n    key = key.key;\n  }\n\n  var el = win.document.querySelector('[data-key=\"' + key + '\"]');\n\n  if (!el) {\n    throw new Error('Unable to find a DOM node for \"' + key + '\". This is often because of forgetting to add `props.attributes` to a custom component.');\n  }\n\n  return el;\n}\n/**\n * COMPAT: if we are in <= IE11 and the selection contains\n * tables, `removeAllRanges()` will throw\n * \"unable to complete the operation due to error 800a025e\"\n *\n * @param {Selection} selection document selection\n */\n\n\nfunction removeAllRanges(selection) {\n  var doc = window.document;\n\n  if (doc && doc.body.createTextRange) {\n    // All IE but Edge\n    var range = doc.body.createTextRange();\n    range.collapse();\n    range.select();\n  } else {\n    selection.removeAllRanges();\n  }\n}\n\nvar FRAGMENT = TRANSFER_TYPES.FRAGMENT;\nvar HTML = TRANSFER_TYPES.HTML;\nvar TEXT = TRANSFER_TYPES.TEXT;\n/**\n * Prepares a Slate document fragment to be copied to the clipboard.\n *\n * @param {Event} event\n * @param {Editor} editor\n */\n\nfunction cloneFragment(event, editor) {\n  var callback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function () {\n    return undefined;\n  };\n  invariant(!Value.isValue(editor), 'As of Slate 0.42.0, the `cloneFragment` utility takes an `editor` instead of a `value`.');\n  var window = getWindow(event.target);\n  var native = window.getSelection();\n  var value = editor.value;\n  var document = value.document,\n      fragment = value.fragment,\n      selection = value.selection;\n  var start = selection.start,\n      end = selection.end;\n  var startVoid = document.getClosestVoid(start.key, editor);\n  var endVoid = document.getClosestVoid(end.key, editor); // If the selection is collapsed, and it isn't inside a void node, abort.\n\n  if (native.isCollapsed && !startVoid) return; // Create a fake selection so that we can add a Base64-encoded copy of the\n  // fragment to the HTML, to decode on future pastes.\n\n  var encoded = Base64.serializeNode(fragment);\n  var range = native.getRangeAt(0);\n  var contents = range.cloneContents();\n  var attach = contents.childNodes[0]; // Make sure attach is a non-empty node, since empty nodes will not get copied\n\n  contents.childNodes.forEach(function (node) {\n    if (node.textContent && node.textContent.trim() !== '') {\n      attach = node;\n    }\n  }); // COMPAT: If the end node is a void node, we need to move the end of the\n  // range from the void node's spacer span, to the end of the void node's\n  // content, since the spacer is before void's content in the DOM.\n\n  if (endVoid) {\n    var r = range.cloneRange();\n    var node = findDOMNode(endVoid, window);\n    r.setEndAfter(node);\n    contents = r.cloneContents();\n  } // COMPAT: If the start node is a void node, we need to attach the encoded\n  // fragment to the void node's content node instead of the spacer, because\n  // attaching it to empty `<div>/<span>` nodes will end up having it erased by\n  // most browsers. (2018/04/27)\n\n\n  if (startVoid) {\n    attach = contents.childNodes[0].childNodes[1].firstChild;\n  } // Remove any zero-width space spans from the cloned DOM so that they don't\n  // show up elsewhere when pasted.\n\n\n  [].slice.call(contents.querySelectorAll(ZERO_WIDTH_SELECTOR)).forEach(function (zw) {\n    var isNewline = zw.getAttribute(ZERO_WIDTH_ATTRIBUTE) === 'n';\n    zw.textContent = isNewline ? '\\n' : '';\n  }); // Set a `data-slate-fragment` attribute on a non-empty node, so it shows up\n  // in the HTML, and can be used for intra-Slate pasting. If it's a text\n  // node, wrap it in a `<span>` so we have something to set an attribute on.\n\n  if (attach.nodeType === 3) {\n    var span = window.document.createElement('span'); // COMPAT: In Chrome and Safari, if we don't add the `white-space` style\n    // then leading and trailing spaces will be ignored. (2017/09/21)\n\n    span.style.whiteSpace = 'pre';\n    span.appendChild(attach);\n    contents.appendChild(span);\n    attach = span;\n  }\n\n  attach.setAttribute('data-slate-fragment', encoded); //  Creates value from only the selected blocks\n  //  Then gets plaintext for clipboard with proper linebreaks for BLOCK elements\n  //  Via Plain serializer\n\n  var valFromSelection = Value.create({\n    document: fragment\n  });\n  var plainText = Plain.serialize(valFromSelection); // Add the phony content to a div element. This is needed to copy the\n  // contents into the html clipboard register.\n\n  var div = window.document.createElement('div');\n  div.appendChild(contents); // For browsers supporting it, we set the clipboard registers manually,\n  // since the result is more predictable.\n  // COMPAT: IE supports the setData method, but only in restricted sense.\n  // IE doesn't support arbitrary MIME types or common ones like 'text/plain';\n  // it only accepts \"Text\" (which gets mapped to 'text/plain') and \"Url\"\n  // (mapped to 'text/url-list'); so, we should only enter block if !IS_IE\n\n  if (event.clipboardData && event.clipboardData.setData && !IS_IE) {\n    event.preventDefault();\n    event.clipboardData.setData(TEXT, plainText);\n    event.clipboardData.setData(FRAGMENT, encoded);\n    event.clipboardData.setData(HTML, div.innerHTML);\n    callback();\n    return;\n  } // COMPAT: For browser that don't support the Clipboard API's setData method,\n  // we must rely on the browser to natively copy what's selected.\n  // So we add the div (containing our content) to the DOM, and select it.\n\n\n  var editorEl = event.target.closest('[data-slate-editor]');\n  div.setAttribute('contenteditable', true);\n  div.style.position = 'absolute';\n  div.style.left = '-9999px';\n  editorEl.appendChild(div);\n  native.selectAllChildren(div); // Revert to the previous selection right after copying.\n\n  window.requestAnimationFrame(function () {\n    editorEl.removeChild(div);\n    removeAllRanges(native);\n    native.addRange(range);\n    callback();\n  });\n}\n/**\n * Find a Slate node from a DOM `element`.\n *\n * @param {Element} element\n * @param {Editor} editor\n * @return {Node|Null}\n */\n\n\nfunction findNode(element, editor) {\n  invariant(!Value.isValue(editor), 'As of Slate 0.42.0, the `findNode` utility takes an `editor` instead of a `value`.');\n  var closest = element.closest('[data-key]');\n  if (!closest) return null;\n  var key = closest.getAttribute('data-key');\n  if (!key) return null;\n  var value = editor.value;\n  var document = value.document;\n  var node = document.getNode(key);\n  return node || null;\n}\n/**\n * Get the target range from a DOM `event`.\n *\n * @param {Event} event\n * @param {Editor} editor\n * @return {Range}\n */\n\n\nfunction getEventRange(event, editor) {\n  invariant(!Value.isValue(editor), 'As of Slate 0.42.0, the `findNode` utility takes an `editor` instead of a `value`.');\n\n  if (event.nativeEvent) {\n    event = event.nativeEvent;\n  }\n\n  var _event = event,\n      x = _event.clientX,\n      y = _event.clientY,\n      target = _event.target;\n  if (x == null || y == null) return null;\n  var value = editor.value;\n  var document = value.document;\n  var node = findNode(target, editor);\n  if (!node) return null; // If the drop target is inside a void node, move it into either the next or\n  // previous node, depending on which side the `x` and `y` coordinates are\n  // closest to.\n\n  if (editor.query('isVoid', node)) {\n    var rect = target.getBoundingClientRect();\n    var isPrevious = node.object === 'inline' ? x - rect.left < rect.left + rect.width - x : y - rect.top < rect.top + rect.height - y;\n    var text = node.getFirstText();\n\n    var _range = document.createRange();\n\n    if (isPrevious) {\n      var previousText = document.getPreviousText(text.key);\n\n      if (previousText) {\n        return _range.moveToEndOfNode(previousText);\n      }\n    }\n\n    var nextText = document.getNextText(text.key);\n    return nextText ? _range.moveToStartOfNode(nextText) : null;\n  } // Else resolve a range from the caret position where the drop occured.\n\n\n  var window = getWindow(target);\n  var native = void 0; // COMPAT: In Firefox, `caretRangeFromPoint` doesn't exist. (2016/07/25)\n\n  if (window.document.caretRangeFromPoint) {\n    native = window.document.caretRangeFromPoint(x, y);\n  } else if (window.document.caretPositionFromPoint) {\n    var position = window.document.caretPositionFromPoint(x, y);\n    native = window.document.createRange();\n    native.setStart(position.offsetNode, position.offset);\n    native.setEnd(position.offsetNode, position.offset);\n  } else if (window.document.body.createTextRange) {\n    // COMPAT: In IE, `caretRangeFromPoint` and\n    // `caretPositionFromPoint` don't exist. (2018/07/11)\n    native = window.document.body.createTextRange();\n\n    try {\n      native.moveToPoint(x, y);\n    } catch (error) {\n      // IE11 will raise an `unspecified error` if `moveToPoint` is\n      // called during a dropEvent.\n      return null;\n    }\n  } // Resolve a Slate range from the DOM range.\n\n\n  var range = findRange(native, editor);\n  if (!range) return null;\n  return range;\n}\n/**\n * Transfer types.\n *\n * @type {String}\n */\n\n\nvar FRAGMENT$1 = TRANSFER_TYPES.FRAGMENT;\nvar HTML$1 = TRANSFER_TYPES.HTML;\nvar NODE = TRANSFER_TYPES.NODE;\nvar RICH = TRANSFER_TYPES.RICH;\nvar TEXT$1 = TRANSFER_TYPES.TEXT;\n/**\n * Fragment matching regexp for HTML nodes.\n *\n * @type {RegExp}\n */\n\nvar FRAGMENT_MATCHER = / data-slate-fragment=\"([^\\s\"]+)\"/;\n/**\n * Get the transfer data from an `event`.\n *\n * @param {Event} event\n * @return {Object}\n */\n\nfunction getEventTransfer(event) {\n  // COMPAT: IE 11 doesn't populate nativeEvent with either\n  // dataTransfer or clipboardData. We'll need to use the base event\n  // object (2018/14/6)\n  if (!IS_IE && event.nativeEvent) {\n    event = event.nativeEvent;\n  }\n\n  var transfer = event.dataTransfer || event.clipboardData;\n  var fragment = getType(transfer, FRAGMENT$1);\n  var node = getType(transfer, NODE);\n  var html = getType(transfer, HTML$1);\n  var rich = getType(transfer, RICH);\n  var text = getType(transfer, TEXT$1);\n  var files = void 0; // If there isn't a fragment, but there is HTML, check to see if the HTML is\n  // actually an encoded fragment.\n\n  if (!fragment && html && ~html.indexOf(' data-slate-fragment=\"')) {\n    var matches = FRAGMENT_MATCHER.exec(html);\n\n    var _matches = slicedToArray(matches, 2),\n        full = _matches[0],\n        encoded = _matches[1]; // eslint-disable-line no-unused-vars\n\n\n    if (encoded) fragment = encoded;\n  } // COMPAT: Edge doesn't handle custom data types\n  // These will be embedded in text/plain in this case (2017/7/12)\n\n\n  if (text) {\n    var embeddedTypes = getEmbeddedTypes(text);\n    if (embeddedTypes[FRAGMENT$1]) fragment = embeddedTypes[FRAGMENT$1];\n    if (embeddedTypes[NODE]) node = embeddedTypes[NODE];\n    if (embeddedTypes[TEXT$1]) text = embeddedTypes[TEXT$1];\n  } // Decode a fragment or node if they exist.\n\n\n  if (fragment) fragment = Base64.deserializeNode(fragment);\n  if (node) node = Base64.deserializeNode(node); // COMPAT: Edge sometimes throws 'NotSupportedError'\n  // when accessing `transfer.items` (2017/7/12)\n\n  try {\n    // Get and normalize files if they exist.\n    if (transfer.items && transfer.items.length) {\n      files = Array.from(transfer.items).map(function (item) {\n        return item.kind === 'file' ? item.getAsFile() : null;\n      }).filter(function (exists) {\n        return exists;\n      });\n    } else if (transfer.files && transfer.files.length) {\n      files = Array.from(transfer.files);\n    }\n  } catch (err) {\n    if (transfer.files && transfer.files.length) {\n      files = Array.from(transfer.files);\n    }\n  } // Determine the type of the data.\n\n\n  var data = {\n    files: files,\n    fragment: fragment,\n    html: html,\n    node: node,\n    rich: rich,\n    text: text\n  };\n  data.type = getTransferType(data);\n  return data;\n}\n/**\n * Takes text input, checks whether contains embedded data\n * and returns object with original text +/- additional data\n *\n * @param {String} text\n * @return {Object}\n */\n\n\nfunction getEmbeddedTypes(text) {\n  var prefix = 'SLATE-DATA-EMBED::';\n\n  if (text.substring(0, prefix.length) !== prefix) {\n    return {\n      TEXT: text\n    };\n  } // Attempt to parse, if fails then just standard text/plain\n  // Otherwise, already had data embedded\n\n\n  try {\n    return JSON.parse(text.substring(prefix.length));\n  } catch (err) {\n    throw new Error('Unable to parse custom Slate drag event data.');\n  }\n}\n/**\n * Get the type of a transfer from its `data`.\n *\n * @param {Object} data\n * @return {String}\n */\n\n\nfunction getTransferType(data) {\n  if (data.fragment) return 'fragment';\n  if (data.node) return 'node'; // COMPAT: Microsoft Word adds an image of the selected text to the data.\n  // Since files are preferred over HTML or text, this would cause the type to\n  // be considered `files`. But it also adds rich text data so we can check\n  // for that and properly set the type to `html` or `text`. (2016/11/21)\n\n  if (data.rich && data.html) return 'html';\n  if (data.rich && data.text) return 'text';\n  if (data.files && data.files.length) return 'files';\n  if (data.html) return 'html';\n  if (data.text) return 'text';\n  return 'unknown';\n}\n/**\n * Get one of types `TYPES.FRAGMENT`, `TYPES.NODE`, `text/html`, `text/rtf` or\n * `text/plain` from transfers's `data` if possible, otherwise return null.\n *\n * @param {Object} transfer\n * @param {String} type\n * @return {String}\n */\n\n\nfunction getType(transfer, type) {\n  if (!transfer.types || !transfer.types.length) {\n    // COMPAT: In IE 11, there is no `types` field but `getData('Text')`\n    // is supported`. (2017/06/23)\n    return type === TEXT$1 ? transfer.getData('Text') || null : null;\n  } // COMPAT: In Edge, transfer.types doesn't respond to `indexOf`. (2017/10/25)\n\n\n  var types = Array.from(transfer.types);\n  return types.indexOf(type) !== -1 ? transfer.getData(type) || null : null;\n}\n/**\n * The default plain text transfer type.\n *\n * @type {String}\n */\n\n\nvar TEXT$2 = TRANSFER_TYPES.TEXT;\n/**\n * Set data with `type` and `content` on an `event`.\n *\n * COMPAT: In Edge, custom types throw errors, so embed all non-standard\n * types in text/plain compound object. (2017/7/12)\n *\n * @param {Event} event\n * @param {String} type\n * @param {String} content\n */\n\nfunction setEventTransfer(event, type, content) {\n  var mime = TRANSFER_TYPES[type.toUpperCase()];\n\n  if (!mime) {\n    throw new Error('Cannot set unknown transfer type \"' + mime + '\".');\n  }\n\n  if (event.nativeEvent) {\n    event = event.nativeEvent;\n  }\n\n  var transfer = event.dataTransfer || event.clipboardData;\n\n  try {\n    transfer.setData(mime, content); // COMPAT: Safari needs to have the 'text' (and not 'text/plain') value in dataTransfer\n    // to display the cursor while dragging internally.\n\n    transfer.setData('text', transfer.getData('text'));\n  } catch (err) {\n    var prefix = 'SLATE-DATA-EMBED::';\n    var text = transfer.getData(TEXT$2);\n    var obj = {}; // If the existing plain text data is prefixed, it's Slate JSON data.\n\n    if (text.substring(0, prefix.length) === prefix) {\n      try {\n        obj = JSON.parse(text.substring(prefix.length));\n      } catch (e) {\n        throw new Error('Failed to parse Slate data from `DataTransfer` object.');\n      }\n    } else {\n      // Otherwise, it's just set it as is.\n      obj[TEXT$2] = text;\n    }\n\n    obj[mime] = content;\n    var string = '' + prefix + JSON.stringify(obj);\n    transfer.setData(TEXT$2, string);\n  }\n}\n/**\n * Debug.\n *\n * @type {Function}\n */\n\n\nvar debug$1 = Debug('slate:after');\n/**\n * A plugin that adds the \"after\" browser-specific logic to the editor.\n *\n * @param {Object} options\n * @return {Object}\n */\n\nfunction AfterPlugin() {\n  var isDraggingInternally = null;\n  var isMouseDown = false;\n  /**\n   * On before input.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n  function onBeforeInput(event, editor, next) {\n    var value = editor.value;\n    var isSynthetic = !!event.nativeEvent; // If the event is synthetic, it's React's polyfill of `beforeinput` that\n    // isn't a true `beforeinput` event with meaningful information. It only\n    // gets triggered for character insertions, so we can just insert directly.\n\n    if (isSynthetic) {\n      event.preventDefault();\n      editor.insertText(event.data);\n      return next();\n    } // Otherwise, we can use the information in the `beforeinput` event to\n    // figure out the exact change that will occur, and prevent it.\n\n\n    var _event$getTargetRange = event.getTargetRanges(),\n        _event$getTargetRange2 = slicedToArray(_event$getTargetRange, 1),\n        targetRange = _event$getTargetRange2[0];\n\n    if (!targetRange) return next();\n    debug$1('onBeforeInput', {\n      event: event\n    });\n    event.preventDefault();\n    var document = value.document,\n        selection = value.selection;\n    var range = findRange(targetRange, editor);\n\n    switch (event.inputType) {\n      case 'deleteByDrag':\n      case 'deleteByCut':\n      case 'deleteContent':\n      case 'deleteContentBackward':\n      case 'deleteContentForward':\n        {\n          editor.deleteAtRange(range);\n          break;\n        }\n\n      case 'deleteWordBackward':\n        {\n          editor.deleteWordBackwardAtRange(range);\n          break;\n        }\n\n      case 'deleteWordForward':\n        {\n          editor.deleteWordForwardAtRange(range);\n          break;\n        }\n\n      case 'deleteSoftLineBackward':\n      case 'deleteHardLineBackward':\n        {\n          editor.deleteLineBackwardAtRange(range);\n          break;\n        }\n\n      case 'deleteSoftLineForward':\n      case 'deleteHardLineForward':\n        {\n          editor.deleteLineForwardAtRange(range);\n          break;\n        }\n\n      case 'insertLineBreak':\n      case 'insertParagraph':\n        {\n          var hasVoidParent = document.hasVoidParent(selection.start.path, editor);\n\n          if (hasVoidParent) {\n            editor.moveToStartOfNextText();\n          } else {\n            editor.splitBlockAtRange(range);\n          }\n\n          break;\n        }\n\n      case 'insertFromYank':\n      case 'insertReplacementText':\n      case 'insertText':\n        {\n          // COMPAT: `data` should have the text for the `insertText` input type\n          // and `dataTransfer` should have the text for the\n          // `insertReplacementText` input type, but Safari uses `insertText` for\n          // spell check replacements and sets `data` to `null`. (2018/08/09)\n          var text = event.data == null ? event.dataTransfer.getData('text/plain') : event.data;\n          if (text == null) break;\n          editor.insertTextAtRange(range, text, selection.marks); // If the text was successfully inserted, and the selection had marks\n          // on it, unset the selection's marks.\n\n          if (selection.marks && value.document !== editor.value.document) {\n            editor.select({\n              marks: null\n            });\n          }\n\n          break;\n        }\n    }\n\n    next();\n  }\n  /**\n   * On blur.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onBlur(event, editor, next) {\n    debug$1('onBlur', {\n      event: event\n    });\n    editor.blur();\n    next();\n  }\n  /**\n   * On click.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onClick(event, editor, next) {\n    if (editor.readOnly) return next();\n    var value = editor.value;\n    var document = value.document;\n    var node = findNode(event.target, editor);\n    if (!node) return next();\n    debug$1('onClick', {\n      event: event\n    });\n    var ancestors = document.getAncestors(node.key);\n    var isVoid = node && (editor.isVoid(node) || ancestors.some(function (a) {\n      return editor.isVoid(a);\n    }));\n\n    if (isVoid) {\n      // COMPAT: In Chrome & Safari, selections that are at the zero offset of\n      // an inline node will be automatically replaced to be at the last offset\n      // of a previous inline node, which screws us up, so we always want to set\n      // it to the end of the node. (2016/11/29)\n      editor.focus().moveToEndOfNode(node);\n    }\n\n    next();\n  }\n  /**\n   * On copy.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onCopy(event, editor, next) {\n    debug$1('onCopy', {\n      event: event\n    });\n    cloneFragment(event, editor);\n    next();\n  }\n  /**\n   * On cut.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onCut(event, editor, next) {\n    debug$1('onCut', {\n      event: event\n    }); // Once the fake cut content has successfully been added to the clipboard,\n    // delete the content in the current selection.\n\n    cloneFragment(event, editor, function () {\n      // If user cuts a void block node or a void inline node,\n      // manually removes it since selection is collapsed in this case.\n      var value = editor.value;\n      var endBlock = value.endBlock,\n          endInline = value.endInline,\n          selection = value.selection;\n      var isCollapsed = selection.isCollapsed;\n      var isVoidBlock = endBlock && editor.isVoid(endBlock) && isCollapsed;\n      var isVoidInline = endInline && editor.isVoid(endInline) && isCollapsed;\n\n      if (isVoidBlock) {\n        editor.removeNodeByKey(endBlock.key);\n      } else if (isVoidInline) {\n        editor.removeNodeByKey(endInline.key);\n      } else {\n        editor.delete();\n      }\n    });\n    next();\n  }\n  /**\n   * On drag end.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onDragEnd(event, editor, next) {\n    debug$1('onDragEnd', {\n      event: event\n    });\n    isDraggingInternally = null;\n    next();\n  }\n  /**\n   * On drag start.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onDragStart(event, editor, next) {\n    debug$1('onDragStart', {\n      event: event\n    });\n    isDraggingInternally = true;\n    var value = editor.value;\n    var document = value.document;\n    var node = findNode(event.target, editor);\n    var ancestors = document.getAncestors(node.key);\n    var isVoid = node && (editor.isVoid(node) || ancestors.some(function (a) {\n      return editor.isVoid(a);\n    }));\n    var selectionIncludesNode = value.blocks.some(function (block) {\n      return block.key === node.key;\n    }); // If a void block is dragged and is not selected, select it (necessary for local drags).\n\n    if (isVoid && !selectionIncludesNode) {\n      editor.moveToRangeOfNode(node);\n    }\n\n    var fragment = editor.value.fragment;\n    var encoded = Base64.serializeNode(fragment);\n    setEventTransfer(event, 'fragment', encoded);\n    next();\n  }\n  /**\n   * On drop.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onDrop(event, editor, next) {\n    var value = editor.value;\n    var document = value.document,\n        selection = value.selection;\n    var window = getWindow(event.target);\n    var target = getEventRange(event, editor);\n    if (!target) return next();\n    debug$1('onDrop', {\n      event: event\n    });\n    var transfer = getEventTransfer(event);\n    var type = transfer.type,\n        fragment = transfer.fragment,\n        text = transfer.text;\n    editor.focus(); // If the drag is internal and the target is after the selection, it\n    // needs to account for the selection's content being deleted.\n\n    if (isDraggingInternally && selection.end.key === target.end.key && selection.end.offset < target.end.offset) {\n      target = target.moveForward(selection.start.key === selection.end.key ? 0 - selection.end.offset + selection.start.offset : 0 - selection.end.offset);\n    }\n\n    if (isDraggingInternally) {\n      editor.delete();\n    }\n\n    editor.select(target);\n\n    if (type === 'text' || type === 'html') {\n      var _target = target,\n          anchor = _target.anchor;\n      var hasVoidParent = document.hasVoidParent(anchor.key, editor);\n\n      if (hasVoidParent) {\n        var n = document.getNode(anchor.key);\n\n        while (hasVoidParent) {\n          n = document.getNextText(n.key);\n          if (!n) break;\n          hasVoidParent = document.hasVoidParent(n.key, editor);\n        }\n\n        if (n) editor.moveToStartOfNode(n);\n      }\n\n      if (text) {\n        text.split('\\n').forEach(function (line, i) {\n          if (i > 0) editor.splitBlock();\n          editor.insertText(line);\n        });\n      }\n    }\n\n    if (type === 'fragment') {\n      editor.insertFragment(fragment);\n    } // COMPAT: React's onSelect event breaks after an onDrop event\n    // has fired in a node: https://github.com/facebook/react/issues/11379.\n    // Until this is fixed in React, we dispatch a mouseup event on that\n    // DOM node, since that will make it go back to normal.\n\n\n    var focusNode = document.getNode(target.focus.key);\n    var el = findDOMNode(focusNode, window);\n\n    if (el) {\n      el.dispatchEvent(new MouseEvent('mouseup', {\n        view: window,\n        bubbles: true,\n        cancelable: true\n      }));\n    }\n\n    next();\n  }\n  /**\n   * On focus.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onFocus(event, editor, next) {\n    debug$1('onFocus', {\n      event: event\n    }); // COMPAT: If the focus event is a mouse-based one, it will be shortly\n    // followed by a `selectionchange`, so we need to deselect here to prevent\n    // the old selection from being set by the `updateSelection` of `<Content>`,\n    // preventing the `selectionchange` from firing. (2018/11/07)\n\n    if (isMouseDown && !IS_IE && !IS_EDGE) {\n      editor.deselect().focus();\n    } else {\n      editor.focus();\n    }\n\n    next();\n  }\n  /**\n   * On input.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onInput(event, editor, next) {\n    debug$1('onInput');\n    var window = getWindow(event.target); // Get the selection point.\n\n    var selection = window.getSelection();\n    var anchorNode = selection.anchorNode;\n    setTextFromDomNode(window, editor, anchorNode);\n    setSelectionFromDOM(window, editor, selection);\n    next();\n  }\n  /**\n   * On key down.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onKeyDown(event, editor, next) {\n    debug$1('onKeyDown', {\n      event: event\n    });\n    var value = editor.value;\n    var document = value.document,\n        selection = value.selection;\n    var hasVoidParent = document.hasVoidParent(selection.start.path, editor); // COMPAT: In iOS, some of these hotkeys are handled in the\n    // `onNativeBeforeInput` handler of the `<Content>` component in order to\n    // preserve native autocorrect behavior, so they shouldn't be handled here.\n\n    if (Hotkeys.isSplitBlock(event) && !IS_IOS) {\n      return hasVoidParent ? editor.moveToStartOfNextText() : editor.splitBlock();\n    }\n\n    if (Hotkeys.isDeleteBackward(event) && !IS_IOS) {\n      return editor.deleteCharBackward();\n    }\n\n    if (Hotkeys.isDeleteForward(event) && !IS_IOS) {\n      return editor.deleteCharForward();\n    }\n\n    if (Hotkeys.isDeleteLineBackward(event)) {\n      return editor.deleteLineBackward();\n    }\n\n    if (Hotkeys.isDeleteLineForward(event)) {\n      return editor.deleteLineForward();\n    }\n\n    if (Hotkeys.isDeleteWordBackward(event)) {\n      return editor.deleteWordBackward();\n    }\n\n    if (Hotkeys.isDeleteWordForward(event)) {\n      return editor.deleteWordForward();\n    }\n\n    if (Hotkeys.isRedo(event)) {\n      return editor.redo();\n    }\n\n    if (Hotkeys.isUndo(event)) {\n      return editor.undo();\n    } // COMPAT: Certain browsers don't handle the selection updates properly. In\n    // Chrome, the selection isn't properly extended. And in Firefox, the\n    // selection isn't properly collapsed. (2017/10/17)\n\n\n    if (Hotkeys.isMoveLineBackward(event)) {\n      event.preventDefault();\n      return editor.moveToStartOfBlock();\n    }\n\n    if (Hotkeys.isMoveLineForward(event)) {\n      event.preventDefault();\n      return editor.moveToEndOfBlock();\n    }\n\n    if (Hotkeys.isExtendLineBackward(event)) {\n      event.preventDefault();\n      return editor.moveFocusToStartOfBlock();\n    }\n\n    if (Hotkeys.isExtendLineForward(event)) {\n      event.preventDefault();\n      return editor.moveFocusToEndOfBlock();\n    } // COMPAT: If a void node is selected, or a zero-width text node adjacent to\n    // an inline is selected, we need to handle these hotkeys manually because\n    // browsers won't know what to do.\n\n\n    if (Hotkeys.isMoveBackward(event)) {\n      event.preventDefault();\n\n      if (!selection.isCollapsed) {\n        return editor.moveToStart();\n      }\n\n      return editor.moveBackward();\n    }\n\n    if (Hotkeys.isMoveForward(event)) {\n      event.preventDefault();\n\n      if (!selection.isCollapsed) {\n        return editor.moveToEnd();\n      }\n\n      return editor.moveForward();\n    }\n\n    if (Hotkeys.isMoveWordBackward(event)) {\n      event.preventDefault();\n      return editor.moveWordBackward();\n    }\n\n    if (Hotkeys.isMoveWordForward(event)) {\n      event.preventDefault();\n      return editor.moveWordForward();\n    }\n\n    if (Hotkeys.isExtendBackward(event)) {\n      var previousText = value.previousText,\n          startText = value.startText;\n      var isPreviousInVoid = previousText && document.hasVoidParent(previousText.key, editor);\n\n      if (hasVoidParent || isPreviousInVoid || startText.text === '') {\n        event.preventDefault();\n        return editor.moveFocusBackward();\n      }\n    }\n\n    if (Hotkeys.isExtendForward(event)) {\n      var nextText = value.nextText,\n          _startText = value.startText;\n      var isNextInVoid = nextText && document.hasVoidParent(nextText.key, editor);\n\n      if (hasVoidParent || isNextInVoid || _startText.text === '') {\n        event.preventDefault();\n        return editor.moveFocusForward();\n      }\n    }\n\n    next();\n  }\n  /**\n   * On mouse down.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onMouseDown(event, editor, next) {\n    debug$1('onMouseDown', {\n      event: event\n    });\n    isMouseDown = true;\n    next();\n  }\n  /**\n   * On mouse up.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onMouseUp(event, editor, next) {\n    debug$1('onMouseUp', {\n      event: event\n    });\n    isMouseDown = false;\n    next();\n  }\n  /**\n   * On paste.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onPaste(event, editor, next) {\n    debug$1('onPaste', {\n      event: event\n    });\n    var value = editor.value;\n    var transfer = getEventTransfer(event);\n    var type = transfer.type,\n        fragment = transfer.fragment,\n        text = transfer.text;\n\n    if (type === 'fragment') {\n      editor.insertFragment(fragment);\n    }\n\n    if (type === 'text' || type === 'html') {\n      if (!text) return next();\n      var document = value.document,\n          selection = value.selection,\n          startBlock = value.startBlock;\n      if (editor.isVoid(startBlock)) return next();\n      var defaultBlock = startBlock;\n      var defaultMarks = document.getInsertMarksAtRange(selection);\n      var frag = Plain.deserialize(text, {\n        defaultBlock: defaultBlock,\n        defaultMarks: defaultMarks\n      }).document;\n      editor.insertFragment(frag);\n    }\n\n    next();\n  }\n  /**\n   * On select.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onSelect(event, editor, next) {\n    debug$1('onSelect', {\n      event: event\n    });\n    var window = getWindow(event.target);\n    var selection = window.getSelection();\n    setSelectionFromDOM(window, editor, selection); // COMPAT: reset the `isMouseDown` state here in case a `mouseup` event\n    // happens outside the editor. This is needed for `onFocus` handling.\n\n    isMouseDown = false;\n    next();\n  }\n  /**\n   * Return the plugin.\n   *\n   * @type {Object}\n   */\n\n\n  return {\n    onBeforeInput: onBeforeInput,\n    onBlur: onBlur,\n    onClick: onClick,\n    onCopy: onCopy,\n    onCut: onCut,\n    onDragEnd: onDragEnd,\n    onDragStart: onDragStart,\n    onDrop: onDrop,\n    onFocus: onFocus,\n    onInput: onInput,\n    onKeyDown: onKeyDown,\n    onMouseDown: onMouseDown,\n    onMouseUp: onMouseUp,\n    onPaste: onPaste,\n    onSelect: onSelect\n  };\n}\n/**\n * Debug.\n *\n * @type {Function}\n */\n\n\nvar debug$2 = Debug('slate:before');\n/**\n * A plugin that adds the \"before\" browser-specific logic to the editor.\n *\n * @return {Object}\n */\n\nfunction BeforePlugin() {\n  var activeElement = null;\n  var compositionCount = 0;\n  var isComposing = false;\n  var isCopying = false;\n  var isDragging = false;\n  /**\n   * On before input.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n  function onBeforeInput(event, editor, next) {\n    var isSynthetic = !!event.nativeEvent;\n    if (editor.readOnly) return; // COMPAT: If the browser supports Input Events Level 2, we will have\n    // attached a custom handler for the real `beforeinput` events, instead of\n    // allowing React's synthetic polyfill, so we need to ignore synthetics.\n\n    if (isSynthetic && HAS_INPUT_EVENTS_LEVEL_2) return;\n    debug$2('onBeforeInput', {\n      event: event\n    });\n    next();\n  }\n  /**\n   * On blur.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onBlur(event, editor, next) {\n    if (isCopying) return;\n    if (editor.readOnly) return;\n    var relatedTarget = event.relatedTarget,\n        target = event.target;\n    var window = getWindow(target); // COMPAT: If the current `activeElement` is still the previous one, this is\n    // due to the window being blurred when the tab itself becomes unfocused, so\n    // we want to abort early to allow to editor to stay focused when the tab\n    // becomes focused again.\n\n    if (activeElement === window.document.activeElement) return; // COMPAT: The `relatedTarget` can be null when the new focus target is not\n    // a \"focusable\" element (eg. a `<div>` without `tabindex` set).\n\n    if (relatedTarget) {\n      var el = ReactDOM.findDOMNode(editor); // COMPAT: The event should be ignored if the focus is returning to the\n      // editor from an embedded editable element (eg. an <input> element inside\n      // a void node).\n\n      if (relatedTarget === el) return; // COMPAT: The event should be ignored if the focus is moving from the\n      // editor to inside a void node's spacer element.\n\n      if (relatedTarget.hasAttribute('data-slate-spacer')) return; // COMPAT: The event should be ignored if the focus is moving to a non-\n      // editable section of an element that isn't a void node (eg. a list item\n      // of the check list example).\n\n      var node = findNode(relatedTarget, editor);\n      if (el.contains(relatedTarget) && node && !editor.isVoid(node)) return;\n    }\n\n    debug$2('onBlur', {\n      event: event\n    });\n    next();\n  }\n  /**\n   * On composition end.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onCompositionEnd(event, editor, next) {\n    var n = compositionCount; // The `count` check here ensures that if another composition starts\n    // before the timeout has closed out this one, we will abort unsetting the\n    // `isComposing` flag, since a composition is still in affect.\n\n    window.requestAnimationFrame(function () {\n      if (compositionCount > n) return;\n      isComposing = false;\n    });\n    debug$2('onCompositionEnd', {\n      event: event\n    });\n    next();\n  }\n  /**\n   * On click.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onClick(event, editor, next) {\n    debug$2('onClick', {\n      event: event\n    });\n    next();\n  }\n  /**\n   * On composition start.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onCompositionStart(event, editor, next) {\n    isComposing = true;\n    compositionCount++;\n    var value = editor.value;\n    var selection = value.selection;\n\n    if (!selection.isCollapsed) {\n      // https://github.com/ianstormtaylor/slate/issues/1879\n      // When composition starts and the current selection is not collapsed, the\n      // second composition key-down would drop the text wrapping <spans> which\n      // resulted on crash in content.updateSelection after composition ends\n      // (because it cannot find <span> nodes in DOM). This is a workaround that\n      // erases selection as soon as composition starts and preventing <spans>\n      // to be dropped.\n      editor.delete();\n    }\n\n    debug$2('onCompositionStart', {\n      event: event\n    });\n    next();\n  }\n  /**\n   * On copy.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onCopy(event, editor, next) {\n    var window = getWindow(event.target);\n    isCopying = true;\n    window.requestAnimationFrame(function () {\n      return isCopying = false;\n    });\n    debug$2('onCopy', {\n      event: event\n    });\n    next();\n  }\n  /**\n   * On cut.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onCut(event, editor, next) {\n    if (editor.readOnly) return;\n    var window = getWindow(event.target);\n    isCopying = true;\n    window.requestAnimationFrame(function () {\n      return isCopying = false;\n    });\n    debug$2('onCut', {\n      event: event\n    });\n    next();\n  }\n  /**\n   * On drag end.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onDragEnd(event, editor, next) {\n    isDragging = false;\n    debug$2('onDragEnd', {\n      event: event\n    });\n    next();\n  }\n  /**\n   * On drag enter.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onDragEnter(event, editor, next) {\n    debug$2('onDragEnter', {\n      event: event\n    });\n    next();\n  }\n  /**\n   * On drag exit.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onDragExit(event, editor, next) {\n    debug$2('onDragExit', {\n      event: event\n    });\n    next();\n  }\n  /**\n   * On drag leave.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onDragLeave(event, editor, next) {\n    debug$2('onDragLeave', {\n      event: event\n    });\n    next();\n  }\n  /**\n   * On drag over.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onDragOver(event, editor, next) {\n    // If the target is inside a void node, and only in this case,\n    // call `preventDefault` to signal that drops are allowed.\n    // When the target is editable, dropping is already allowed by\n    // default, and calling `preventDefault` hides the cursor.\n    var node = findNode(event.target, editor);\n    if (editor.isVoid(node)) event.preventDefault(); // COMPAT: IE won't call onDrop on contentEditables unless the\n    // default dragOver is prevented:\n    // https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/913982/\n    // (2018/07/11)\n\n    if (IS_IE) {\n      event.preventDefault();\n    } // If a drag is already in progress, don't do this again.\n\n\n    if (!isDragging) {\n      isDragging = true; // COMPAT: IE will raise an `unspecified error` if dropEffect is\n      // set. (2018/07/11)\n\n      if (!IS_IE) {\n        event.nativeEvent.dataTransfer.dropEffect = 'move';\n      }\n    }\n\n    debug$2('onDragOver', {\n      event: event\n    });\n    next();\n  }\n  /**\n   * On drag start.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onDragStart(event, editor, next) {\n    isDragging = true;\n    debug$2('onDragStart', {\n      event: event\n    });\n    next();\n  }\n  /**\n   * On drop.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onDrop(event, editor, next) {\n    if (editor.readOnly) return; // Prevent default so the DOM's value isn't corrupted.\n\n    event.preventDefault();\n    debug$2('onDrop', {\n      event: event\n    });\n    next();\n  }\n  /**\n   * On focus.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onFocus(event, editor, next) {\n    if (isCopying) return;\n    if (editor.readOnly) return;\n    var el = ReactDOM.findDOMNode(editor); // Save the new `activeElement`.\n\n    var window = getWindow(event.target);\n    activeElement = window.document.activeElement; // COMPAT: If the editor has nested editable elements, the focus can go to\n    // those elements. In Firefox, this must be prevented because it results in\n    // issues with keyboard navigation. (2017/03/30)\n\n    if (IS_FIREFOX && event.target !== el) {\n      el.focus();\n      return;\n    }\n\n    debug$2('onFocus', {\n      event: event\n    });\n    next();\n  }\n  /**\n   * On input.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onInput(event, editor, next) {\n    if (isComposing) return;\n    if (editor.value.selection.isBlurred) return;\n    debug$2('onInput', {\n      event: event\n    });\n    next();\n  }\n  /**\n   * On key down.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onKeyDown(event, editor, next) {\n    if (editor.readOnly) return; // When composing, we need to prevent all hotkeys from executing while\n    // typing. However, certain characters also move the selection before\n    // we're able to handle it, so prevent their default behavior.\n\n    if (isComposing) {\n      if (Hotkeys.isCompose(event)) event.preventDefault();\n      return;\n    } // Certain hotkeys have native editing behaviors in `contenteditable`\n    // elements which will editor the DOM and cause our value to be out of sync,\n    // so they need to always be prevented.\n\n\n    if (!IS_IOS && (Hotkeys.isBold(event) || Hotkeys.isDeleteBackward(event) || Hotkeys.isDeleteForward(event) || Hotkeys.isDeleteLineBackward(event) || Hotkeys.isDeleteLineForward(event) || Hotkeys.isDeleteWordBackward(event) || Hotkeys.isDeleteWordForward(event) || Hotkeys.isItalic(event) || Hotkeys.isRedo(event) || Hotkeys.isSplitBlock(event) || Hotkeys.isTransposeCharacter(event) || Hotkeys.isUndo(event))) {\n      event.preventDefault();\n    }\n\n    debug$2('onKeyDown', {\n      event: event\n    });\n    next();\n  }\n  /**\n   * On paste.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onPaste(event, editor, next) {\n    if (editor.readOnly) return; // Prevent defaults so the DOM state isn't corrupted.\n\n    event.preventDefault();\n    debug$2('onPaste', {\n      event: event\n    });\n    next();\n  }\n  /**\n   * On select.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onSelect(event, editor, next) {\n    if (isCopying) return;\n    if (isComposing) return;\n    if (editor.readOnly) return; // Save the new `activeElement`.\n\n    var window = getWindow(event.target);\n    activeElement = window.document.activeElement;\n    debug$2('onSelect', {\n      event: event\n    });\n    next();\n  }\n  /**\n   * Return the plugin.\n   *\n   * @type {Object}\n   */\n\n\n  return {\n    onBeforeInput: onBeforeInput,\n    onBlur: onBlur,\n    onClick: onClick,\n    onCompositionEnd: onCompositionEnd,\n    onCompositionStart: onCompositionStart,\n    onCopy: onCopy,\n    onCut: onCut,\n    onDragEnd: onDragEnd,\n    onDragEnter: onDragEnter,\n    onDragExit: onDragExit,\n    onDragLeave: onDragLeave,\n    onDragOver: onDragOver,\n    onDragStart: onDragStart,\n    onDrop: onDrop,\n    onFocus: onFocus,\n    onInput: onInput,\n    onKeyDown: onKeyDown,\n    onPaste: onPaste,\n    onSelect: onSelect\n  };\n}\n/**\n * A plugin that adds the browser-specific logic to the editor.\n *\n * @param {Object} options\n * @return {Object}\n */\n\n\nfunction DOMPlugin() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var _options$plugins = options.plugins,\n      plugins = _options$plugins === undefined ? [] : _options$plugins; // Add Android specific handling separately before it gets to the other\n  // plugins because it is specific (other browser don't need it) and finicky\n  // (it has to come before other plugins to work).\n\n  var beforeBeforePlugins = IS_ANDROID ? [AndroidPlugin()] : [];\n  var beforePlugin = BeforePlugin();\n  var afterPlugin = AfterPlugin();\n  return [].concat(beforeBeforePlugins, [beforePlugin], toConsumableArray(plugins), [afterPlugin]);\n}\n/**\n * Debugger.\n *\n * @type {Function}\n */\n\n\nvar debug$3 = Debug('slate:leaves');\n/**\n * Leaf.\n *\n * @type {Component}\n */\n\nvar Leaf = function (_React$Component) {\n  inherits(Leaf, _React$Component);\n\n  function Leaf() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    classCallCheck(this, Leaf);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = possibleConstructorReturn(this, (_ref = Leaf.__proto__ || Object.getPrototypeOf(Leaf)).call.apply(_ref, [this].concat(args))), _this), _initialiseProps.call(_this), _temp), possibleConstructorReturn(_this, _ret);\n  }\n  /**\n   * Property types.\n   *\n   * @type {Object}\n   */\n\n  /**\n   * Debug.\n   *\n   * @param {String} message\n   * @param {Mixed} ...args\n   */\n\n\n  createClass(Leaf, [{\n    key: 'shouldComponentUpdate',\n\n    /**\n     * Should component update?\n     *\n     * @param {Object} props\n     * @return {Boolean}\n     */\n    value: function shouldComponentUpdate(props) {\n      // If any of the regular properties have changed, re-render.\n      if (props.index !== this.props.index || props.marks !== this.props.marks || props.text !== this.props.text || props.parent !== this.props.parent) {\n        return true;\n      } // Otherwise, don't update.\n\n\n      return false;\n    }\n    /**\n     * Render the leaf.\n     *\n     * @return {Element}\n     */\n\n  }, {\n    key: 'render',\n    value: function render() {\n      this.debug('render', this);\n      var _props = this.props,\n          node = _props.node,\n          index = _props.index;\n      var offsetKey = OffsetKey.stringify({\n        key: node.key,\n        index: index\n      });\n      return React.createElement('span', {\n        'data-slate-leaf': true,\n        'data-offset-key': offsetKey\n      }, this.renderMarks());\n    }\n    /**\n     * Render all of the leaf's mark components.\n     *\n     * @return {Element}\n     */\n\n  }, {\n    key: 'renderMarks',\n    value: function renderMarks() {\n      var _props2 = this.props,\n          marks = _props2.marks,\n          node = _props2.node,\n          offset = _props2.offset,\n          text = _props2.text,\n          editor = _props2.editor;\n      var leaf = this.renderText();\n      var attributes = {\n        'data-slate-mark': true\n      };\n      return marks.reduce(function (children, mark) {\n        var props = {\n          editor: editor,\n          mark: mark,\n          marks: marks,\n          node: node,\n          offset: offset,\n          text: text,\n          children: children,\n          attributes: attributes\n        };\n        var element = editor.run('renderMark', props);\n        return element || children;\n      }, leaf);\n    }\n    /**\n     * Render the text content of the leaf, accounting for browsers.\n     *\n     * @return {Element}\n     */\n\n  }, {\n    key: 'renderText',\n    value: function renderText() {\n      var _props3 = this.props,\n          block = _props3.block,\n          node = _props3.node,\n          editor = _props3.editor,\n          parent = _props3.parent,\n          text = _props3.text,\n          index = _props3.index,\n          leaves = _props3.leaves; // COMPAT: Render text inside void nodes with a zero-width space.\n      // So the node can contain selection but the text is not visible.\n\n      if (editor.query('isVoid', parent)) {\n        return React.createElement('span', {\n          'data-slate-zero-width': 'z',\n          'data-slate-length': parent.text.length\n        }, \"\\uFEFF\");\n      } // COMPAT: If this is the last text node in an empty block, render a zero-\n      // width space that will convert into a line break when copying and pasting\n      // to support expected plain text.\n\n\n      if (text === '' && parent.object === 'block' && parent.text === '' && parent.nodes.last() === node) {\n        return React.createElement('span', {\n          'data-slate-zero-width': 'n',\n          'data-slate-length': 0\n        }, \"\\uFEFF\", React.createElement('br', null));\n      } // COMPAT: If the text is empty, it's because it's on the edge of an inline\n      // node, so we render a zero-width space so that the selection can be\n      // inserted next to it still.\n\n\n      if (text === '') {\n        return React.createElement('span', {\n          'data-slate-zero-width': 'z',\n          'data-slate-length': 0\n        }, \"\\uFEFF\");\n      } // COMPAT: Browsers will collapse trailing new lines at the end of blocks,\n      // so we need to add an extra trailing new lines to prevent that.\n\n\n      var lastText = block.getLastText();\n      var lastChar = text.charAt(text.length - 1);\n      var isLastText = node === lastText;\n      var isLastLeaf = index === leaves.size - 1;\n      if (isLastText && isLastLeaf && lastChar === '\\n') return React.createElement('span', {\n        'data-slate-content': true\n      }, text + '\\n'); // Otherwise, just return the content.\n\n      return React.createElement('span', {\n        'data-slate-content': true\n      }, text);\n    }\n  }]);\n  return Leaf;\n}(React.Component);\n/**\n * Export.\n *\n * @type {Component}\n */\n\n\nLeaf.propTypes = {\n  block: SlateTypes.block.isRequired,\n  editor: Types.object.isRequired,\n  index: Types.number.isRequired,\n  leaves: SlateTypes.leaves.isRequired,\n  marks: SlateTypes.marks.isRequired,\n  node: SlateTypes.node.isRequired,\n  offset: Types.number.isRequired,\n  parent: SlateTypes.node.isRequired,\n  text: Types.string.isRequired\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this2 = this;\n\n  this.debug = function (message) {\n    for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n      args[_key2 - 1] = arguments[_key2];\n    }\n\n    debug$3.apply(undefined, [message, _this2.props.node.key + '-' + _this2.props.index].concat(args));\n  };\n};\n/**\n * Debug.\n *\n * @type {Function}\n */\n\n\nvar debug$4 = Debug('slate:node');\n/**\n * Text.\n *\n * @type {Component}\n */\n\nvar Text = function (_React$Component) {\n  inherits(Text, _React$Component);\n\n  function Text() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    classCallCheck(this, Text);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = possibleConstructorReturn(this, (_ref = Text.__proto__ || Object.getPrototypeOf(Text)).call.apply(_ref, [this].concat(args))), _this), _initialiseProps$1.call(_this), _temp), possibleConstructorReturn(_this, _ret);\n  }\n  /**\n   * Property types.\n   *\n   * @type {Object}\n   */\n\n  /**\n   * Default prop types.\n   *\n   * @type {Object}\n   */\n\n  /**\n   * Debug.\n   *\n   * @param {String} message\n   * @param {Mixed} ...args\n   */\n\n  /**\n   * Should the node update?\n   *\n   * @param {Object} nextProps\n   * @param {Object} value\n   * @return {Boolean}\n   */\n\n\n  createClass(Text, [{\n    key: 'render',\n\n    /**\n     * Render.\n     *\n     * @return {Element}\n     */\n    value: function render() {\n      var _this2 = this;\n\n      this.debug('render', this);\n      var _props = this.props,\n          decorations = _props.decorations,\n          editor = _props.editor,\n          node = _props.node,\n          style = _props.style;\n      var value = editor.value;\n      var document = value.document;\n      var key = node.key;\n      var decs = decorations.filter(function (d) {\n        var start = d.start,\n            end = d.end; // If either of the decoration's keys match, include it.\n\n        if (start.key === key || end.key === key) return true; // Otherwise, if the decoration is in a single node, it's not ours.\n\n        if (start.key === end.key) return false;\n        var path = document.assertPath(key);\n        var startPath = start.path || document.assertPath(start.key);\n        var endPath = end.path || document.assertPath(end.key); // If the node's path is before the start path, ignore it.\n\n        if (PathUtils.compare(path, startPath) === -1) return false; // If the node's path is after the end path, ignore it.\n\n        if (PathUtils.compare(path, endPath) === 1) return false; // Otherwise, include it.\n\n        return true;\n      }); // PERF: Take advantage of cache by avoiding arguments\n\n      var leaves = decs.size === 0 ? node.getLeaves() : node.getLeaves(decs);\n      var offset = 0;\n      var children = leaves.map(function (leaf, i) {\n        var child = _this2.renderLeaf(leaves, leaf, i, offset);\n\n        offset += leaf.text.length;\n        return child;\n      });\n      return React.createElement('span', {\n        'data-key': key,\n        style: style\n      }, children);\n    }\n    /**\n     * Render a single leaf given a `leaf` and `offset`.\n     *\n     * @param {List<Leaf>} leaves\n     * @param {Leaf} leaf\n     * @param {Number} index\n     * @param {Number} offset\n     * @return {Element} leaf\n     */\n\n  }]);\n  return Text;\n}(React.Component);\n/**\n * Export.\n *\n * @type {Component}\n */\n\n\nText.propTypes = {\n  block: SlateTypes.block,\n  decorations: ImmutableTypes.list.isRequired,\n  editor: Types.object.isRequired,\n  node: SlateTypes.node.isRequired,\n  parent: SlateTypes.node.isRequired,\n  style: Types.object\n};\nText.defaultProps = {\n  style: null\n};\n\nvar _initialiseProps$1 = function _initialiseProps() {\n  var _this3 = this;\n\n  this.debug = function (message) {\n    for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n      args[_key2 - 1] = arguments[_key2];\n    }\n\n    var node = _this3.props.node;\n    var key = node.key;\n    debug$4.apply(undefined, [message, key + ' (text)'].concat(args));\n  };\n\n  this.shouldComponentUpdate = function (nextProps) {\n    var props = _this3.props;\n    var n = nextProps;\n    var p = props; // If the node has changed, update. PERF: There are cases where it will have\n    // changed, but it's properties will be exactly the same (eg. copy-paste)\n    // which this won't catch. But that's rare and not a drag on performance, so\n    // for simplicity we just let them through.\n\n    if (n.node !== p.node) return true; // If the node parent is a block node, and it was the last child of the\n    // block, re-render to cleanup extra `\\n`.\n\n    if (n.parent.object === 'block') {\n      var pLast = p.parent.nodes.last();\n      var nLast = n.parent.nodes.last();\n      if (p.node === pLast && n.node !== nLast) return true;\n    } // Re-render if the current decorations have changed.\n\n\n    if (!n.decorations.equals(p.decorations)) return true; // Otherwise, don't update.\n\n    return false;\n  };\n\n  this.renderLeaf = function (leaves, leaf, index, offset) {\n    var _props2 = _this3.props,\n        block = _props2.block,\n        node = _props2.node,\n        parent = _props2.parent,\n        editor = _props2.editor;\n    var text = leaf.text,\n        marks = leaf.marks;\n    return React.createElement(Leaf, {\n      key: node.key + '-' + index,\n      block: block,\n      editor: editor,\n      index: index,\n      marks: marks,\n      node: node,\n      offset: offset,\n      parent: parent,\n      leaves: leaves,\n      text: text\n    });\n  };\n};\n/**\n * Debug.\n *\n * @type {Function}\n */\n\n\nvar debug$5 = Debug('slate:void');\n/**\n * Void.\n *\n * @type {Component}\n */\n\nvar Void = function (_React$Component) {\n  inherits(Void, _React$Component);\n\n  function Void() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    classCallCheck(this, Void);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = possibleConstructorReturn(this, (_ref = Void.__proto__ || Object.getPrototypeOf(Void)).call.apply(_ref, [this].concat(args))), _this), _initialiseProps$2.call(_this), _temp), possibleConstructorReturn(_this, _ret);\n  }\n  /**\n   * Property types.\n   *\n   * @type {Object}\n   */\n\n  /**\n   * Debug.\n   *\n   * @param {String} message\n   * @param {Mixed} ...args\n   */\n\n\n  createClass(Void, [{\n    key: 'render',\n\n    /**\n     * Render.\n     *\n     * @return {Element}\n     */\n    value: function render() {\n      var props = this.props;\n      var children = props.children,\n          node = props.node,\n          readOnly = props.readOnly;\n      var Tag = node.object === 'block' ? 'div' : 'span';\n      var style = {\n        height: '0',\n        color: 'transparent',\n        outline: 'none',\n        position: 'absolute'\n      };\n      var spacer = React.createElement(Tag, {\n        'data-slate-spacer': true,\n        style: style\n      }, this.renderText());\n      var content = React.createElement(Tag, {\n        contentEditable: readOnly ? null : false\n      }, children);\n      this.debug('render', {\n        props: props\n      });\n      return React.createElement(Tag, {\n        'data-slate-void': true,\n        'data-key': node.key,\n        contentEditable: readOnly || node.object === 'block' ? null : false\n      }, readOnly ? null : spacer, content);\n    }\n    /**\n     * Render the void node's text node, which will catch the cursor when it the\n     * void node is navigated to with the arrow keys.\n     *\n     * Having this text node there means the browser continues to manage the\n     * selection natively, so it keeps track of the right offset when moving\n     * across the block.\n     *\n     * @return {Element}\n     */\n\n  }]);\n  return Void;\n}(React.Component);\n/**\n * Export.\n *\n * @type {Component}\n */\n\n\nVoid.propTypes = {\n  block: SlateTypes.block,\n  children: Types.any.isRequired,\n  editor: Types.object.isRequired,\n  node: SlateTypes.node.isRequired,\n  parent: SlateTypes.node.isRequired,\n  readOnly: Types.bool.isRequired\n};\n\nvar _initialiseProps$2 = function _initialiseProps() {\n  var _this2 = this;\n\n  this.debug = function (message) {\n    for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n      args[_key2 - 1] = arguments[_key2];\n    }\n\n    var node = _this2.props.node;\n    var key = node.key,\n        type = node.type;\n    var id = key + ' (' + type + ')';\n    debug$5.apply(undefined, [message, '' + id].concat(args));\n  };\n\n  this.renderText = function () {\n    var _props = _this2.props,\n        block = _props.block,\n        decorations = _props.decorations,\n        node = _props.node,\n        readOnly = _props.readOnly,\n        editor = _props.editor;\n    var child = node.getFirstText();\n    return React.createElement(Text, {\n      block: node.object === 'block' ? node : block,\n      decorations: decorations,\n      editor: editor,\n      key: child.key,\n      node: child,\n      parent: node,\n      readOnly: readOnly\n    });\n  };\n};\n/**\n * Split the decorations in lists of relevant decorations for each child.\n *\n * @param {Node} node\n * @param {List} decorations\n * @return {Array<List<Decoration>>}\n */\n\n\nfunction getChildrenDecorations(node, decorations) {\n  var activeDecorations = Set().asMutable();\n  var childrenDecorations = [];\n  orderChildDecorations(node, decorations).forEach(function (item) {\n    if (item.isRangeStart) {\n      // Item is a decoration start\n      activeDecorations.add(item.decoration);\n    } else if (item.isRangeEnd) {\n      // item is a decoration end\n      activeDecorations.remove(item.decoration);\n    } else {\n      // Item is a child node\n      childrenDecorations.push(activeDecorations.toList());\n    }\n  });\n  return childrenDecorations;\n}\n/**\n * Orders the children of provided node and its decoration endpoints (start, end)\n * so that decorations can be passed only to relevant children (see use in Node.render())\n *\n * @param {Node} node\n * @param {List} decorations\n * @return {Array<Item>}\n *\n * where type Item =\n * {\n *   child: Node,\n *   // Index of the child in its parent\n *   index: number\n * }\n * or {\n *   // True if this represents the start of the given decoration\n *   isRangeStart: boolean,\n *   // True if this represents the end of the given decoration\n *   isRangeEnd: boolean,\n *   decoration: Range\n * }\n */\n\n\nfunction orderChildDecorations(node, decorations) {\n  if (decorations.isEmpty()) {\n    return node.nodes.toArray().map(function (child, index) {\n      return {\n        child: child,\n        index: index\n      };\n    });\n  } // Map each key to its global order\n\n\n  var keyOrders = defineProperty({}, node.key, 0);\n  var globalOrder = 1;\n  node.forEachDescendant(function (child) {\n    keyOrders[child.key] = globalOrder;\n    globalOrder = globalOrder + 1;\n  });\n  var childNodes = node.nodes.toArray();\n  var endPoints = childNodes.map(function (child, index) {\n    return {\n      child: child,\n      index: index,\n      order: keyOrders[child.key]\n    };\n  });\n  decorations.forEach(function (decoration) {\n    // Range start.\n    // A rangeStart should be before the child containing its startKey, in order\n    // to consider it active before going down the child.\n    var startKeyOrder = keyOrders[decoration.start.key];\n    var containingChildOrder = startKeyOrder === undefined ? 0 : getContainingChildOrder(childNodes, keyOrders, startKeyOrder);\n    endPoints.push({\n      isRangeStart: true,\n      order: containingChildOrder - 0.5,\n      decoration: decoration\n    }); // Range end.\n\n    var endKeyOrder = (keyOrders[decoration.end.key] || globalOrder) + 0.5;\n    endPoints.push({\n      isRangeEnd: true,\n      order: endKeyOrder,\n      decoration: decoration\n    });\n  });\n  return endPoints.sort(function (a, b) {\n    return a.order > b.order ? 1 : -1;\n  });\n}\n/*\n * Returns the key order of the child right before the given order.\n */\n\n\nfunction getContainingChildOrder(children, keyOrders, order) {\n  // Find the first child that is after the given key\n  var nextChildIndex = children.findIndex(function (child) {\n    return order < keyOrders[child.key];\n  });\n\n  if (nextChildIndex <= 0) {\n    return 0;\n  }\n\n  var containingChild = children[nextChildIndex - 1];\n  return keyOrders[containingChild.key];\n}\n/**\n * Debug.\n *\n * @type {Function}\n */\n\n\nvar debug$6 = Debug('slate:node');\n/**\n * Node.\n *\n * @type {Component}\n */\n\nvar Node$1 = function (_React$Component) {\n  inherits(Node$$1, _React$Component);\n\n  function Node$$1() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    classCallCheck(this, Node$$1);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = possibleConstructorReturn(this, (_ref = Node$$1.__proto__ || Object.getPrototypeOf(Node$$1)).call.apply(_ref, [this].concat(args))), _this), _initialiseProps$3.call(_this), _temp), possibleConstructorReturn(_this, _ret);\n  }\n  /**\n   * Property types.\n   *\n   * @type {Object}\n   */\n\n  /**\n   * Debug.\n   *\n   * @param {String} message\n   * @param {Mixed} ...args\n   */\n\n\n  createClass(Node$$1, [{\n    key: 'shouldComponentUpdate',\n\n    /**\n     * Should the node update?\n     *\n     * @param {Object} nextProps\n     * @param {Object} value\n     * @return {Boolean}\n     */\n    value: function shouldComponentUpdate(nextProps) {\n      var props = this.props;\n      var editor = props.editor;\n      var shouldUpdate = editor.run('shouldNodeComponentUpdate', props, nextProps);\n      var n = nextProps;\n      var p = props; // If the `Component` has a custom logic to determine whether the component\n      // needs to be updated or not, return true if it returns true. If it returns\n      // false, we need to ignore it, because it shouldn't be allowed it.\n\n      if (shouldUpdate != null) {\n        if (shouldUpdate) {\n          return true;\n        }\n\n        warning(shouldUpdate !== false, \"Returning false in `shouldNodeComponentUpdate` does not disable Slate's internal `shouldComponentUpdate` logic. If you want to prevent updates, use React's `shouldComponentUpdate` instead.\");\n      } // If the `readOnly` status has changed, re-render in case there is any\n      // user-land logic that depends on it, like nested editable contents.\n\n\n      if (n.readOnly !== p.readOnly) return true; // If the node has changed, update. PERF: There are cases where it will have\n      // changed, but it's properties will be exactly the same (eg. copy-paste)\n      // which this won't catch. But that's rare and not a drag on performance, so\n      // for simplicity we just let them through.\n\n      if (n.node !== p.node) return true; // If the selection value of the node or of some of its children has changed,\n      // re-render in case there is any user-land logic depends on it to render.\n      // if the node is selected update it, even if it was already selected: the\n      // selection value of some of its children could have been changed and they\n      // need to be rendered again.\n\n      if (n.isSelected || p.isSelected) return true;\n      if (n.isFocused || p.isFocused) return true; // If the decorations have changed, update.\n\n      if (!n.decorations.equals(p.decorations)) return true; // Otherwise, don't update.\n\n      return false;\n    }\n    /**\n     * Render.\n     *\n     * @return {Element}\n     */\n\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      this.debug('render', this);\n      var _props = this.props,\n          editor = _props.editor,\n          isSelected = _props.isSelected,\n          isFocused = _props.isFocused,\n          node = _props.node,\n          decorations = _props.decorations,\n          parent = _props.parent,\n          readOnly = _props.readOnly;\n      var value = editor.value;\n      var selection = value.selection;\n      var indexes = node.getSelectionIndexes(selection, isSelected);\n      var decs = decorations.concat(node.getDecorations(editor));\n      var childrenDecorations = getChildrenDecorations(node, decs);\n      var children = [];\n      node.nodes.forEach(function (child, i) {\n        var isChildSelected = !!indexes && indexes.start <= i && i < indexes.end;\n        children.push(_this2.renderNode(child, isChildSelected, childrenDecorations[i]));\n      }); // Attributes that the developer must mix into the element in their\n      // custom node renderer component.\n\n      var attributes = {\n        'data-key': node.key // If it's a block node with inline children, add the proper `dir` attribute\n        // for text direction.\n\n      };\n\n      if (node.isLeafBlock()) {\n        var direction = node.getTextDirection();\n        if (direction === 'rtl') attributes.dir = 'rtl';\n      }\n\n      var props = {\n        key: node.key,\n        editor: editor,\n        isFocused: isFocused,\n        isSelected: isSelected,\n        node: node,\n        parent: parent,\n        readOnly: readOnly\n      };\n      var element = editor.run('renderNode', _extends({}, props, {\n        attributes: attributes,\n        children: children\n      }));\n      return editor.query('isVoid', node) ? React.createElement(Void, this.props, element) : element;\n    }\n    /**\n     * Render a `child` node.\n     *\n     * @param {Node} child\n     * @param {Boolean} isSelected\n     * @param {Array<Decoration>} decorations\n     * @return {Element}\n     */\n\n  }]);\n  return Node$$1;\n}(React.Component);\n/**\n * Export.\n *\n * @type {Component}\n */\n\n\nNode$1.propTypes = {\n  block: SlateTypes.block,\n  decorations: ImmutableTypes.list.isRequired,\n  editor: Types.object.isRequired,\n  isFocused: Types.bool.isRequired,\n  isSelected: Types.bool.isRequired,\n  node: SlateTypes.node.isRequired,\n  parent: SlateTypes.node.isRequired,\n  readOnly: Types.bool.isRequired\n};\n\nvar _initialiseProps$3 = function _initialiseProps() {\n  var _this3 = this;\n\n  this.debug = function (message) {\n    for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n      args[_key2 - 1] = arguments[_key2];\n    }\n\n    var node = _this3.props.node;\n    var key = node.key,\n        type = node.type;\n    debug$6.apply(undefined, [message, key + ' (' + type + ')'].concat(args));\n  };\n\n  this.renderNode = function (child, isSelected, decorations) {\n    var _props2 = _this3.props,\n        block = _props2.block,\n        editor = _props2.editor,\n        node = _props2.node,\n        readOnly = _props2.readOnly,\n        isFocused = _props2.isFocused;\n    var Component = child.object === 'text' ? Text : Node$1;\n    return React.createElement(Component, {\n      block: node.object === 'block' ? node : block,\n      decorations: decorations,\n      editor: editor,\n      isSelected: isSelected,\n      isFocused: isFocused && isSelected,\n      key: child.key,\n      node: child,\n      parent: node,\n      readOnly: readOnly\n    });\n  };\n};\n/**\n * Find a native DOM selection point from a Slate `point`.\n *\n * @param {Point} point\n * @param {Window} win (optional)\n * @return {Object|Null}\n */\n\n\nfunction findDOMPoint(point) {\n  var win = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : window;\n  var el = findDOMNode(point.key, win);\n  var start = 0; // For each leaf, we need to isolate its content, which means filtering to its\n  // direct text and zero-width spans. (We have to filter out any other siblings\n  // that may have been rendered alongside them.)\n\n  var texts = Array.from(el.querySelectorAll('[data-slate-content], [data-slate-zero-width]'));\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = texts[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var text = _step.value;\n      var node = text.childNodes[0];\n      var domLength = node.textContent.length;\n      var slateLength = domLength;\n\n      if (text.hasAttribute('data-slate-length')) {\n        slateLength = parseInt(text.getAttribute('data-slate-length'), 10);\n      }\n\n      var end = start + slateLength;\n\n      if (point.offset <= end) {\n        var offset = Math.min(domLength, Math.max(0, point.offset - start));\n        return {\n          node: node,\n          offset: offset\n        };\n      }\n\n      start = end;\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  return null;\n}\n/**\n * Find a native DOM range Slate `range`.\n *\n * @param {Range} range\n * @param {Window} win (optional)\n * @return {Object|Null}\n */\n\n\nfunction findDOMRange(range) {\n  var win = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : window;\n  var anchor = range.anchor,\n      focus = range.focus,\n      isBackward$$1 = range.isBackward,\n      isCollapsed = range.isCollapsed;\n  var domAnchor = findDOMPoint(anchor, win);\n  var domFocus = isCollapsed ? domAnchor : findDOMPoint(focus, win);\n  if (!domAnchor || !domFocus) return null;\n  var r = win.document.createRange();\n  var start = isBackward$$1 ? domFocus : domAnchor;\n  var end = isBackward$$1 ? domAnchor : domFocus;\n  r.setStart(start.node, start.offset);\n  r.setEnd(end.node, end.offset);\n  return r;\n}\n/**\n * CSS overflow values that would cause scrolling.\n *\n * @type {Array}\n */\n\n\nvar OVERFLOWS = ['auto', 'overlay', 'scroll'];\n/**\n * Detect whether we are running IOS version 11\n */\n\nvar IS_IOS_11 = IS_IOS && !!window.navigator.userAgent.match(/os 11_/i);\n/**\n * Find the nearest parent with scrolling, or window.\n *\n * @param {el} Element\n */\n\nfunction findScrollContainer(el, window) {\n  var parent = el.parentNode;\n  var scroller = void 0;\n\n  while (!scroller) {\n    if (!parent.parentNode) break;\n    var style = window.getComputedStyle(parent);\n    var overflowY = style.overflowY;\n\n    if (OVERFLOWS.includes(overflowY)) {\n      scroller = parent;\n      break;\n    }\n\n    parent = parent.parentNode;\n  } // COMPAT: Because Chrome does not allow doucment.body.scrollTop, we're\n  // assuming that window.scrollTo() should be used if the scrollable element\n  // turns out to be document.body or document.documentElement. This will work\n  // unless body is intentionally set to scrollable by restricting its height\n  // (e.g. height: 100vh).\n\n\n  if (!scroller) {\n    return window.document.body;\n  }\n\n  return scroller;\n}\n/**\n * Scroll the current selection's focus point into view if needed.\n *\n * @param {Selection} selection\n */\n\n\nfunction scrollToSelection(selection) {\n  if (IS_IOS_11) return;\n  if (!selection.anchorNode) return;\n  var window = getWindow(selection.anchorNode);\n  var scroller = findScrollContainer(selection.anchorNode, window);\n  var isWindow = scroller === window.document.body || scroller === window.document.documentElement;\n  var backward = isBackward(selection);\n  var range = selection.getRangeAt(0).cloneRange();\n  range.collapse(backward);\n  var cursorRect = range.getBoundingClientRect(); // COMPAT: range.getBoundingClientRect() returns 0s in Safari when range is\n  // collapsed. Expanding the range by 1 is a relatively effective workaround\n  // for vertical scroll, although horizontal may be off by 1 character.\n  // https://bugs.webkit.org/show_bug.cgi?id=138949\n  // https://bugs.chromium.org/p/chromium/issues/detail?id=435438\n\n  if (IS_SAFARI) {\n    if (range.collapsed && cursorRect.top === 0 && cursorRect.height === 0) {\n      if (range.startOffset === 0) {\n        range.setEnd(range.endContainer, 1);\n      } else {\n        range.setStart(range.startContainer, range.startOffset - 1);\n      }\n\n      cursorRect = range.getBoundingClientRect();\n\n      if (cursorRect.top === 0 && cursorRect.height === 0) {\n        if (range.getClientRects().length) {\n          cursorRect = range.getClientRects()[0];\n        }\n      }\n    }\n  }\n\n  var width = void 0;\n  var height = void 0;\n  var yOffset = void 0;\n  var xOffset = void 0;\n  var scrollerTop = 0;\n  var scrollerLeft = 0;\n  var scrollerBordersY = 0;\n  var scrollerBordersX = 0;\n  var scrollerPaddingTop = 0;\n  var scrollerPaddingBottom = 0;\n  var scrollerPaddingLeft = 0;\n  var scrollerPaddingRight = 0;\n\n  if (isWindow) {\n    var innerWidth = window.innerWidth,\n        innerHeight = window.innerHeight,\n        pageYOffset = window.pageYOffset,\n        pageXOffset = window.pageXOffset;\n    width = innerWidth;\n    height = innerHeight;\n    yOffset = pageYOffset;\n    xOffset = pageXOffset;\n  } else {\n    var offsetWidth = scroller.offsetWidth,\n        offsetHeight = scroller.offsetHeight,\n        scrollTop = scroller.scrollTop,\n        scrollLeft = scroller.scrollLeft;\n\n    var _window$getComputedSt = window.getComputedStyle(scroller),\n        borderTopWidth = _window$getComputedSt.borderTopWidth,\n        borderBottomWidth = _window$getComputedSt.borderBottomWidth,\n        borderLeftWidth = _window$getComputedSt.borderLeftWidth,\n        borderRightWidth = _window$getComputedSt.borderRightWidth,\n        paddingTop = _window$getComputedSt.paddingTop,\n        paddingBottom = _window$getComputedSt.paddingBottom,\n        paddingLeft = _window$getComputedSt.paddingLeft,\n        paddingRight = _window$getComputedSt.paddingRight;\n\n    var scrollerRect = scroller.getBoundingClientRect();\n    width = offsetWidth;\n    height = offsetHeight;\n    scrollerTop = scrollerRect.top + parseInt(borderTopWidth, 10);\n    scrollerLeft = scrollerRect.left + parseInt(borderLeftWidth, 10);\n    scrollerBordersY = parseInt(borderTopWidth, 10) + parseInt(borderBottomWidth, 10);\n    scrollerBordersX = parseInt(borderLeftWidth, 10) + parseInt(borderRightWidth, 10);\n    scrollerPaddingTop = parseInt(paddingTop, 10);\n    scrollerPaddingBottom = parseInt(paddingBottom, 10);\n    scrollerPaddingLeft = parseInt(paddingLeft, 10);\n    scrollerPaddingRight = parseInt(paddingRight, 10);\n    yOffset = scrollTop;\n    xOffset = scrollLeft;\n  }\n\n  var cursorTop = cursorRect.top + yOffset - scrollerTop;\n  var cursorLeft = cursorRect.left + xOffset - scrollerLeft;\n  var x = xOffset;\n  var y = yOffset;\n\n  if (cursorLeft < xOffset) {\n    // selection to the left of viewport\n    x = cursorLeft - scrollerPaddingLeft;\n  } else if (cursorLeft + cursorRect.width + scrollerBordersX > xOffset + width) {\n    // selection to the right of viewport\n    x = cursorLeft + scrollerBordersX + scrollerPaddingRight - width;\n  }\n\n  if (cursorTop < yOffset) {\n    // selection above viewport\n    y = cursorTop - scrollerPaddingTop;\n  } else if (cursorTop + cursorRect.height + scrollerBordersY > yOffset + height) {\n    // selection below viewport\n    y = cursorTop + scrollerBordersY + scrollerPaddingBottom + cursorRect.height - height;\n  }\n\n  if (isWindow) {\n    window.scrollTo(x, y);\n  } else {\n    scroller.scrollTop = y;\n    scroller.scrollLeft = x;\n  }\n}\n\nvar FIREFOX_NODE_TYPE_ACCESS_ERROR = /Permission denied to access property \"nodeType\"/;\n/**\n * Debug.\n *\n * @type {Function}\n */\n\nvar debug$7 = Debug('slate:content');\n/**\n * Separate debug to easily see when the DOM has updated either by render or\n * changing selection.\n *\n * @type {Function}\n */\n\ndebug$7.update = Debug('slate:update');\n/**\n * Content.\n *\n * @type {Component}\n */\n\nvar Content = function (_React$Component) {\n  inherits(Content, _React$Component);\n\n  function Content() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    classCallCheck(this, Content);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = possibleConstructorReturn(this, (_ref = Content.__proto__ || Object.getPrototypeOf(Content)).call.apply(_ref, [this].concat(args))), _this), _this.tmp = {\n      isUpdatingSelection: false\n      /**\n       * Create a set of bound event handlers.\n       *\n       * @type {Object}\n       */\n\n    }, _this.handlers = EVENT_HANDLERS.reduce(function (obj, handler) {\n      obj[handler] = function (event) {\n        return _this.onEvent(handler, event);\n      };\n\n      return obj;\n    }, {}), _this.updateSelection = function () {\n      var editor = _this.props.editor;\n      var value = editor.value;\n      var selection = value.selection;\n      var isBackward$$1 = selection.isBackward;\n      var window = getWindow(_this.element);\n      var native = window.getSelection();\n      var activeElement = window.document.activeElement;\n\n      if (debug$7.enabled) {\n        debug$7.update('updateSelection', {\n          selection: selection.toJSON()\n        });\n      } // COMPAT: In Firefox, there's a but where `getSelection` can return `null`.\n      // https://bugzilla.mozilla.org/show_bug.cgi?id=827585 (2018/11/07)\n\n\n      if (!native) {\n        return;\n      }\n\n      var rangeCount = native.rangeCount,\n          anchorNode = native.anchorNode;\n      var updated = false; // If the Slate selection is blurred, but the DOM's active element is still\n      // the editor, we need to blur it.\n\n      if (selection.isBlurred && activeElement === _this.element) {\n        _this.element.blur();\n\n        updated = true;\n      } // If the Slate selection is unset, but the DOM selection has a range\n      // selected in the editor, we need to remove the range.\n\n\n      if (selection.isUnset && rangeCount && _this.isInEditor(anchorNode)) {\n        removeAllRanges(native);\n        updated = true;\n      } // If the Slate selection is focused, but the DOM's active element is not\n      // the editor, we need to focus it. We prevent scrolling because we handle\n      // scrolling to the correct selection.\n\n\n      if (selection.isFocused && activeElement !== _this.element) {\n        _this.element.focus({\n          preventScroll: true\n        });\n\n        updated = true;\n      } // Otherwise, figure out which DOM nodes should be selected...\n\n\n      if (selection.isFocused && selection.isSet) {\n        var current = !!rangeCount && native.getRangeAt(0);\n        var range = findDOMRange(selection, window);\n\n        if (!range) {\n          warning(false, 'Unable to find a native DOM range from the current selection.');\n          return;\n        }\n\n        var startContainer = range.startContainer,\n            startOffset = range.startOffset,\n            endContainer = range.endContainer,\n            endOffset = range.endOffset; // If the new range matches the current selection, there is nothing to fix.\n        // COMPAT: The native `Range` object always has it's \"start\" first and \"end\"\n        // last in the DOM. It has no concept of \"backwards/forwards\", so we have\n        // to check both orientations here. (2017/10/31)\n\n        if (current) {\n          if (startContainer === current.startContainer && startOffset === current.startOffset && endContainer === current.endContainer && endOffset === current.endOffset || startContainer === current.endContainer && startOffset === current.endOffset && endContainer === current.startContainer && endOffset === current.startOffset) {\n            return;\n          }\n        } // Otherwise, set the `isUpdatingSelection` flag and update the selection.\n\n\n        updated = true;\n        _this.tmp.isUpdatingSelection = true;\n        removeAllRanges(native); // COMPAT: IE 11 does not support `setBaseAndExtent`. (2018/11/07)\n\n        if (native.setBaseAndExtent) {\n          // COMPAT: Since the DOM range has no concept of backwards/forwards\n          // we need to check and do the right thing here.\n          if (isBackward$$1) {\n            native.setBaseAndExtent(range.endContainer, range.endOffset, range.startContainer, range.startOffset);\n          } else {\n            native.setBaseAndExtent(range.startContainer, range.startOffset, range.endContainer, range.endOffset);\n          }\n        } else {\n          native.addRange(range);\n        } // Scroll to the selection, in case it's out of view.\n\n\n        scrollToSelection(native); // Then unset the `isUpdatingSelection` flag after a delay, to ensure that\n        // it is still set when selection-related events from updating it fire.\n\n        setTimeout(function () {\n          // COMPAT: In Firefox, it's not enough to create a range, you also need\n          // to focus the contenteditable element too. (2016/11/16)\n          if (IS_FIREFOX && _this.element) {\n            _this.element.focus();\n          }\n\n          _this.tmp.isUpdatingSelection = false;\n        });\n      }\n\n      if (updated && debug$7.enabled) {\n        debug$7('updateSelection', {\n          selection: selection,\n          native: native,\n          activeElement: activeElement\n        });\n        debug$7.update('updateSelection-applied', {\n          selection: selection\n        });\n      }\n    }, _this.ref = function (element) {\n      _this.element = element;\n    }, _this.isInEditor = function (target) {\n      var _this2 = _this,\n          element = _this2.element;\n      var el = void 0;\n\n      try {\n        // COMPAT: In Firefox, sometimes the node can be comment which doesn't\n        // have .closest and it crashes.\n        if (target.nodeType === 8) {\n          return false;\n        } // COMPAT: Text nodes don't have `isContentEditable` property. So, when\n        // `target` is a text node use its parent node for check.\n\n\n        el = target.nodeType === 3 ? target.parentNode : target;\n      } catch (err) {\n        // COMPAT: In Firefox, `target.nodeType` will throw an error if target is\n        // originating from an internal \"restricted\" element (e.g. a stepper\n        // arrow on a number input)\n        // see github.com/ianstormtaylor/slate/issues/1819\n        if (IS_FIREFOX && FIREFOX_NODE_TYPE_ACCESS_ERROR.test(err.message)) {\n          return false;\n        }\n\n        throw err;\n      }\n\n      return el.isContentEditable && (el === element || el.closest('[data-slate-editor]') === element);\n    }, _this.onNativeSelectionChange = throttle(function (event) {\n      if (_this.props.readOnly) return;\n      var window = getWindow(event.target);\n      var activeElement = window.document.activeElement;\n      if (activeElement !== _this.element) return;\n\n      _this.props.onEvent('onSelect', event);\n    }, 100), _this.renderNode = function (child, isSelected, decorations) {\n      var _this$props = _this.props,\n          editor = _this$props.editor,\n          readOnly = _this$props.readOnly;\n      var value = editor.value;\n      var document = value.document,\n          selection = value.selection;\n      var isFocused = selection.isFocused;\n      return React.createElement(Node$1, {\n        block: null,\n        editor: editor,\n        decorations: decorations,\n        isSelected: isSelected,\n        isFocused: isFocused && isSelected,\n        key: child.key,\n        node: child,\n        parent: document,\n        readOnly: readOnly\n      });\n    }, _temp), possibleConstructorReturn(_this, _ret);\n  }\n  /**\n   * Property types.\n   *\n   * @type {Object}\n   */\n\n  /**\n   * Default properties.\n   *\n   * @type {Object}\n   */\n\n  /**\n   * Temporary values.\n   *\n   * @type {Object}\n   */\n\n\n  createClass(Content, [{\n    key: 'componentDidMount',\n\n    /**\n     * When the editor first mounts in the DOM we need to:\n     *\n     *   - Add native DOM event listeners.\n     *   - Update the selection, in case it starts focused.\n     */\n    value: function componentDidMount() {\n      var window = getWindow(this.element);\n      window.document.addEventListener('selectionchange', this.onNativeSelectionChange); // COMPAT: Restrict scope of `beforeinput` to clients that support the\n      // Input Events Level 2 spec, since they are preventable events.\n\n      if (HAS_INPUT_EVENTS_LEVEL_2) {\n        this.element.addEventListener('beforeinput', this.handlers.onBeforeInput);\n      }\n\n      this.updateSelection();\n    }\n    /**\n     * When unmounting, remove DOM event listeners.\n     */\n\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      var window = getWindow(this.element);\n\n      if (window) {\n        window.document.removeEventListener('selectionchange', this.onNativeSelectionChange);\n      }\n\n      if (HAS_INPUT_EVENTS_LEVEL_2) {\n        this.element.removeEventListener('beforeinput', this.handlers.onBeforeInput);\n      }\n    }\n    /**\n     * On update, update the selection.\n     */\n\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate() {\n      debug$7.update('componentDidUpdate');\n      this.updateSelection();\n    }\n    /**\n     * Update the native DOM selection to reflect the internal model.\n     */\n\n    /**\n     * The React ref method to set the root content element locally.\n     *\n     * @param {Element} element\n     */\n\n    /**\n     * Check if an event `target` is fired from within the contenteditable\n     * element. This should be false for edits happening in non-contenteditable\n     * children, such as void nodes and other nested Slate editors.\n     *\n     * @param {Element} target\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'onEvent',\n\n    /**\n     * On `event` with `handler`.\n     *\n     * @param {String} handler\n     * @param {Event} event\n     */\n    value: function onEvent(handler, event) {\n      debug$7('onEvent', handler); // Ignore `onBlur`, `onFocus` and `onSelect` events generated\n      // programmatically while updating selection.\n\n      if (this.tmp.isUpdatingSelection && (handler === 'onSelect' || handler === 'onBlur' || handler === 'onFocus')) {\n        return;\n      } // COMPAT: There are situations where a select event will fire with a new\n      // native selection that resolves to the same internal position. In those\n      // cases we don't need to trigger any changes, since our internal model is\n      // already up to date, but we do want to update the native selection again\n      // to make sure it is in sync. (2017/10/16)\n      //\n      // ANDROID: The updateSelection causes issues in Android when you are\n      // at the end of a block. The selection ends up to the left of the inserted\n      // character instead of to the right. This behavior continues even if\n      // you enter more than one character. (2019/01/03)\n\n\n      if (!IS_ANDROID && handler === 'onSelect') {\n        var editor = this.props.editor;\n        var value = editor.value;\n        var selection = value.selection;\n        var window = getWindow(event.target);\n        var native = window.getSelection();\n        var range = findRange(native, editor);\n\n        if (range && range.equals(selection.toRange())) {\n          this.updateSelection();\n          return;\n        }\n      } // Don't handle drag and drop events coming from embedded editors.\n\n\n      if (handler === 'onDragEnd' || handler === 'onDragEnter' || handler === 'onDragExit' || handler === 'onDragLeave' || handler === 'onDragOver' || handler === 'onDragStart' || handler === 'onDrop') {\n        var closest = event.target.closest('[data-slate-editor]');\n\n        if (closest !== this.element) {\n          return;\n        }\n      } // Some events require being in editable in the editor, so if the event\n      // target isn't, ignore them.\n\n\n      if (handler === 'onBeforeInput' || handler === 'onBlur' || handler === 'onCompositionEnd' || handler === 'onCompositionStart' || handler === 'onCopy' || handler === 'onCut' || handler === 'onFocus' || handler === 'onInput' || handler === 'onKeyDown' || handler === 'onKeyUp' || handler === 'onPaste' || handler === 'onSelect') {\n        if (!this.isInEditor(event.target)) {\n          return;\n        }\n      }\n\n      this.props.onEvent(handler, event);\n    }\n    /**\n     * On native `selectionchange` event, trigger the `onSelect` handler. This is\n     * needed to account for React's `onSelect` being non-standard and not firing\n     * until after a selection has been released. This causes issues in situations\n     * where another change happens while a selection is being made.\n     *\n     * @param {Event} event\n     */\n\n  }, {\n    key: 'render',\n\n    /**\n     * Render the editor content.\n     *\n     * @return {Element}\n     */\n    value: function render() {\n      var _this3 = this;\n\n      var props = this.props,\n          handlers = this.handlers;\n      var id = props.id,\n          className = props.className,\n          readOnly = props.readOnly,\n          editor = props.editor,\n          tabIndex = props.tabIndex,\n          role = props.role,\n          tagName = props.tagName,\n          spellCheck = props.spellCheck;\n      var value = editor.value;\n      var Container = tagName;\n      var document = value.document,\n          selection = value.selection,\n          decorations = value.decorations;\n      var indexes = document.getSelectionIndexes(selection);\n      var decs = document.getDecorations(editor).concat(decorations);\n      var childrenDecorations = getChildrenDecorations(document, decs);\n      var children = document.nodes.toArray().map(function (child, i) {\n        var isSelected = !!indexes && indexes.start <= i && i < indexes.end;\n        return _this3.renderNode(child, isSelected, childrenDecorations[i]);\n      });\n\n      var style = _extends({\n        // Prevent the default outline styles.\n        outline: 'none',\n        // Preserve adjacent whitespace and new lines.\n        whiteSpace: 'pre-wrap',\n        // Allow words to break if they are too long.\n        wordWrap: 'break-word'\n      }, readOnly ? {} : {\n        WebkitUserModify: 'read-write-plaintext-only'\n      }, props.style);\n\n      debug$7('render', {\n        props: props\n      });\n\n      if (debug$7.enabled) {\n        debug$7.update('render', {\n          text: value.document.text,\n          selection: value.selection.toJSON(),\n          value: value.toJSON()\n        });\n      }\n\n      return React.createElement(Container, _extends({}, handlers, {\n        'data-slate-editor': true,\n        ref: this.ref,\n        'data-key': document.key,\n        contentEditable: readOnly ? null : true,\n        suppressContentEditableWarning: true,\n        id: id,\n        className: className,\n        autoCorrect: props.autoCorrect ? 'on' : 'off',\n        spellCheck: spellCheck,\n        style: style,\n        role: readOnly ? null : role || 'textbox',\n        tabIndex: tabIndex // COMPAT: The Grammarly Chrome extension works by changing the DOM out\n        // from under `contenteditable` elements, which leads to weird behaviors\n        // so we have to disable it like this. (2017/04/24)\n        ,\n        'data-gramm': false\n      }), children);\n    }\n    /**\n     * Render a `child` node of the document.\n     *\n     * @param {Node} child\n     * @param {Boolean} isSelected\n     * @return {Element}\n     */\n\n  }]);\n  return Content;\n}(React.Component);\n/**\n * Export.\n *\n * @type {Component}\n */\n\n\nContent.propTypes = {\n  autoCorrect: Types.bool.isRequired,\n  className: Types.string,\n  editor: Types.object.isRequired,\n  id: Types.string,\n  readOnly: Types.bool.isRequired,\n  role: Types.string,\n  spellCheck: Types.bool.isRequired,\n  style: Types.object,\n  tabIndex: Types.number,\n  tagName: Types.string\n};\nContent.defaultProps = {\n  style: {},\n  tagName: 'div'\n};\n/**\n * Props that can be defined by plugins.\n *\n * @type {Array}\n */\n\nvar PROPS = [].concat(toConsumableArray(EVENT_HANDLERS), ['commands', 'decorateNode', 'queries', 'renderEditor', 'renderMark', 'renderNode', 'schema']);\n/**\n * A plugin that adds the React-specific rendering logic to the editor.\n *\n * @param {Object} options\n * @return {Object}\n */\n\nfunction ReactPlugin() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var placeholder = options.placeholder,\n      _options$plugins = options.plugins,\n      plugins = _options$plugins === undefined ? [] : _options$plugins;\n  /**\n   * Decorate node.\n   *\n   * @param {Object} node\n   * @param {Editor} editor\n   * @param {Function} next\n   * @return {Array}\n   */\n\n  function decorateNode(node, editor, next) {\n    return [];\n  }\n  /**\n   * Render editor.\n   *\n   * @param {Object} props\n   * @param {Editor} editor\n   * @param {Function} next\n   * @return {Element}\n   */\n\n\n  function renderEditor(props, editor, next) {\n    return React.createElement(Content, {\n      autoCorrect: props.autoCorrect,\n      className: props.className,\n      editor: editor,\n      id: props.id,\n      onEvent: function onEvent(handler, event) {\n        return editor.run(handler, event);\n      },\n      readOnly: props.readOnly,\n      role: props.role,\n      spellCheck: props.spellCheck,\n      style: props.style,\n      tabIndex: props.tabIndex,\n      tagName: props.tagName\n    });\n  }\n  /**\n   * Render node.\n   *\n   * @param {Object} props\n   * @param {Editor} editor\n   * @param {Function} next\n   * @return {Element}\n   */\n\n\n  function renderNode(props, editor, next) {\n    var attributes = props.attributes,\n        children = props.children,\n        node = props.node;\n    var object = node.object;\n    if (object !== 'block' && object !== 'inline') return null;\n    var Tag = object === 'block' ? 'div' : 'span';\n    var style = {\n      position: 'relative'\n    };\n    return React.createElement(Tag, _extends({}, attributes, {\n      style: style\n    }), children);\n  }\n  /**\n   * Return the plugins.\n   *\n   * @type {Array}\n   */\n\n\n  var ret = [];\n  var editorPlugin = PROPS.reduce(function (memo, prop) {\n    if (prop in options) memo[prop] = options[prop];\n    return memo;\n  }, {});\n  ret.push(DOMPlugin({\n    plugins: [editorPlugin].concat(toConsumableArray(plugins))\n  }));\n\n  if (placeholder) {\n    ret.push(PlaceholderPlugin({\n      placeholder: placeholder,\n      when: function when(editor, node) {\n        return node.object === 'document' && node.text === '' && node.nodes.size === 1 && node.getTexts().size === 1;\n      }\n    }));\n  }\n\n  ret.push({\n    decorateNode: decorateNode,\n    renderEditor: renderEditor,\n    renderNode: renderNode\n  });\n  return ret;\n}\n/**\n * Debug.\n *\n * @type {Function}\n */\n\n\nvar debug$8 = Debug('slate:editor');\n/**\n * Editor.\n *\n * @type {Component}\n */\n\nvar Editor$1 = function (_React$Component) {\n  inherits(Editor$$1, _React$Component);\n\n  function Editor$$1() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    classCallCheck(this, Editor$$1);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = possibleConstructorReturn(this, (_ref = Editor$$1.__proto__ || Object.getPrototypeOf(Editor$$1)).call.apply(_ref, [this].concat(args))), _this), _this.state = {\n      value: _this.props.defaultValue\n      /**\n       * Temporary values.\n       *\n       * @type {Object}\n       */\n\n    }, _this.tmp = {\n      mounted: false,\n      change: null,\n      resolves: 0,\n      updates: 0\n      /**\n       * When the component first mounts, flush a queued change if one exists.\n       */\n\n    }, _this.resolveController = memoizeOne(function () {\n      warning(_this.tmp.resolves < 5 || _this.tmp.resolves !== _this.tmp.updates, 'A Slate <Editor> component is re-resolving the `plugins`, `schema`, `commands`, `queries` or `placeholder` prop on each update, which leads to poor performance. This is often due to passing in a new references for these props with each render by declaring them inline in your render function. Do not do this! Declare them outside your render function, or memoize them instead.');\n      _this.tmp.resolves++;\n      var react = ReactPlugin(_extends({}, _this.props, {\n        value: _this.props.value || _this.state.value\n      }));\n\n      var onChange = function onChange(change) {\n        if (_this.tmp.mounted) {\n          _this.handleChange(change);\n        } else {\n          _this.tmp.change = change;\n        }\n      };\n\n      _this.controller = new Editor({\n        plugins: [react],\n        onChange: onChange\n      }, {\n        controller: _this,\n        construct: false\n      });\n\n      _this.controller.run('onConstruct');\n    }), _temp), possibleConstructorReturn(_this, _ret);\n  }\n  /**\n   * Property types.\n   *\n   * @type {Object}\n   */\n\n  /**\n   * Default properties.\n   *\n   * @type {Object}\n   */\n\n  /**\n   * Initial state.\n   *\n   * @type {Object}\n   */\n\n\n  createClass(Editor$$1, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.tmp.mounted = true;\n      this.tmp.updates++;\n\n      if (this.props.autoFocus) {\n        this.focus();\n      }\n\n      if (this.tmp.change) {\n        this.handleChange(this.tmp.change);\n        this.tmp.change = null;\n      }\n    }\n    /**\n     * When the component updates, flush a queued change if one exists.\n     */\n\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate() {\n      this.tmp.updates++;\n\n      if (this.tmp.change) {\n        this.handleChange(this.tmp.change);\n        this.tmp.change = null;\n      }\n    }\n    /**\n     * When the component unmounts, make sure async commands don't trigger react updates.\n     */\n\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.tmp.mounted = false;\n    }\n    /**\n     * Render the editor.\n     *\n     * @return {Element}\n     */\n\n  }, {\n    key: 'render',\n    value: function render() {\n      debug$8('render', this);\n\n      var props = _extends({}, this.props, {\n        editor: this // Re-resolve the controller if needed based on memoized props.\n\n      });\n\n      var commands = props.commands,\n          placeholder = props.placeholder,\n          plugins = props.plugins,\n          queries = props.queries,\n          schema = props.schema;\n      this.resolveController(plugins, schema, commands, queries, placeholder); // Set the current props on the controller.\n\n      var options = props.options,\n          readOnly = props.readOnly,\n          valueFromProps = props.value;\n      var valueFromState = this.state.value;\n      var value = valueFromProps || valueFromState;\n      this.controller.setReadOnly(readOnly);\n      this.controller.setValue(value, options); // Render the editor's children with the controller.\n\n      var children = this.controller.run('renderEditor', _extends({}, props, {\n        value: value\n      }));\n      return children;\n    }\n    /**\n     * Resolve an editor controller from the passed-in props. This method takes\n     * all of the props as individual arguments to be able to properly memoize\n     * against anything that could change and invalidate the old editor.\n     *\n     * @param {Array} plugins\n     * @param {Object} schema\n     * @param {Object} commands\n     * @param {Object} queries\n     * @param {String} placeholder\n     * @return {Editor}\n     */\n\n  }, {\n    key: 'handleChange',\n    value: function handleChange(change) {\n      var onChange = this.props.onChange;\n      var value = this.state.value;\n\n      if (value) {\n        // Syncing value inside this component since parent does not want control of it (defaultValue was used)\n        this.setState({\n          value: change.value\n        });\n      }\n\n      onChange(change);\n    }\n    /**\n     * Mimic the API of the `Editor` controller, so that this component instance\n     * can be passed in its place to plugins.\n     */\n\n  }, {\n    key: 'applyOperation',\n    value: function applyOperation() {\n      var _controller;\n\n      return (_controller = this.controller).applyOperation.apply(_controller, arguments);\n    }\n  }, {\n    key: 'command',\n    value: function command() {\n      var _controller2;\n\n      return (_controller2 = this.controller).command.apply(_controller2, arguments);\n    }\n  }, {\n    key: 'hasCommand',\n    value: function hasCommand() {\n      var _controller3;\n\n      return (_controller3 = this.controller).hasCommand.apply(_controller3, arguments);\n    }\n  }, {\n    key: 'hasQuery',\n    value: function hasQuery() {\n      var _controller4;\n\n      return (_controller4 = this.controller).hasQuery.apply(_controller4, arguments);\n    }\n  }, {\n    key: 'normalize',\n    value: function normalize() {\n      var _controller5;\n\n      return (_controller5 = this.controller).normalize.apply(_controller5, arguments);\n    }\n  }, {\n    key: 'query',\n    value: function query() {\n      var _controller6;\n\n      return (_controller6 = this.controller).query.apply(_controller6, arguments);\n    }\n  }, {\n    key: 'registerCommand',\n    value: function registerCommand() {\n      var _controller7;\n\n      return (_controller7 = this.controller).registerCommand.apply(_controller7, arguments);\n    }\n  }, {\n    key: 'registerQuery',\n    value: function registerQuery() {\n      var _controller8;\n\n      return (_controller8 = this.controller).registerQuery.apply(_controller8, arguments);\n    }\n  }, {\n    key: 'run',\n    value: function run() {\n      var _controller9;\n\n      return (_controller9 = this.controller).run.apply(_controller9, arguments);\n    }\n  }, {\n    key: 'withoutNormalizing',\n    value: function withoutNormalizing() {\n      var _controller10;\n\n      return (_controller10 = this.controller).withoutNormalizing.apply(_controller10, arguments);\n    }\n    /**\n     * Deprecated.\n     */\n\n  }, {\n    key: 'call',\n    value: function call() {\n      var _controller11;\n\n      return (_controller11 = this.controller).call.apply(_controller11, arguments);\n    }\n  }, {\n    key: 'change',\n    value: function change() {\n      var _controller12;\n\n      return (_controller12 = this.controller).change.apply(_controller12, arguments);\n    }\n  }, {\n    key: 'onChange',\n    value: function onChange() {\n      var _controller13;\n\n      return (_controller13 = this.controller).onChange.apply(_controller13, arguments);\n    }\n  }, {\n    key: 'applyOperations',\n    value: function applyOperations() {\n      var _controller14;\n\n      return (_controller14 = this.controller).applyOperations.apply(_controller14, arguments);\n    }\n  }, {\n    key: 'setOperationFlag',\n    value: function setOperationFlag() {\n      var _controller15;\n\n      return (_controller15 = this.controller).setOperationFlag.apply(_controller15, arguments);\n    }\n  }, {\n    key: 'getFlag',\n    value: function getFlag() {\n      var _controller16;\n\n      return (_controller16 = this.controller).getFlag.apply(_controller16, arguments);\n    }\n  }, {\n    key: 'unsetOperationFlag',\n    value: function unsetOperationFlag() {\n      var _controller17;\n\n      return (_controller17 = this.controller).unsetOperationFlag.apply(_controller17, arguments);\n    }\n  }, {\n    key: 'withoutNormalization',\n    value: function withoutNormalization() {\n      var _controller18;\n\n      return (_controller18 = this.controller).withoutNormalization.apply(_controller18, arguments);\n    }\n  }, {\n    key: 'operations',\n    get: function get$$1() {\n      return this.controller.operations;\n    }\n  }, {\n    key: 'readOnly',\n    get: function get$$1() {\n      return this.controller.readOnly;\n    }\n  }, {\n    key: 'value',\n    get: function get$$1() {\n      return this.controller.value;\n    }\n  }, {\n    key: 'editor',\n    get: function get$$1() {\n      return this.controller.editor;\n    }\n  }, {\n    key: 'schema',\n    get: function get$$1() {\n      invariant(false, 'As of Slate 0.42, the `editor.schema` property no longer exists, and its functionality has been folded into the editor itself. Use the `editor` instead.');\n    }\n  }, {\n    key: 'stack',\n    get: function get$$1() {\n      invariant(false, 'As of Slate 0.42, the `editor.stack` property no longer exists, and its functionality has been folded into the editor itself. Use the `editor` instead.');\n    }\n  }]);\n  return Editor$$1;\n}(React.Component);\n/**\n * Export.\n *\n * @type {Component}\n */\n\n\nEditor$1.propTypes = _extends({\n  autoCorrect: Types.bool,\n  autoFocus: Types.bool,\n  className: Types.string,\n  defaultValue: SlateTypes.value,\n  id: Types.string,\n  onChange: Types.func,\n  options: Types.object,\n  placeholder: Types.any,\n  plugins: Types.array,\n  readOnly: Types.bool,\n  role: Types.string,\n  schema: Types.object,\n  spellCheck: Types.bool,\n  style: Types.object,\n  tabIndex: Types.number,\n  value: SlateTypes.value\n}, EVENT_HANDLERS.reduce(function (obj, handler) {\n  obj[handler] = Types.func;\n  return obj;\n}, {}));\nEditor$1.defaultProps = {\n  autoFocus: false,\n  autoCorrect: true,\n  onChange: function onChange() {},\n  options: {},\n  placeholder: '',\n  plugins: [],\n  readOnly: false,\n  schema: {},\n  spellCheck: true\n};\nvar index = {\n  Editor: Editor$1,\n  cloneFragment: cloneFragment,\n  findDOMNode: findDOMNode,\n  findDOMRange: findDOMRange,\n  findNode: findNode,\n  findRange: findRange,\n  getEventRange: getEventRange,\n  getEventTransfer: getEventTransfer,\n  setEventTransfer: setEventTransfer,\n  ReactPlugin: ReactPlugin\n};\nexport default index;\nexport { Editor$1 as Editor, cloneFragment, findDOMNode, findDOMRange, findNode, findRange, getEventRange, getEventTransfer, setEventTransfer, ReactPlugin };","\"use strict\";\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n  createDebug.debug = createDebug;\n  createDebug.default = createDebug;\n  createDebug.coerce = coerce;\n  createDebug.disable = disable;\n  createDebug.enable = enable;\n  createDebug.enabled = enabled;\n  createDebug.humanize = require('ms');\n  Object.keys(env).forEach(function (key) {\n    createDebug[key] = env[key];\n  });\n  /**\n  * Active `debug` instances.\n  */\n\n  createDebug.instances = [];\n  /**\n  * The currently active debug mode names, and names to skip.\n  */\n\n  createDebug.names = [];\n  createDebug.skips = [];\n  /**\n  * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n  *\n  * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n  */\n\n  createDebug.formatters = {};\n  /**\n  * Selects a color for a debug namespace\n  * @param {String} namespace The namespace string for the for the debug instance to be colored\n  * @return {Number|String} An ANSI color code for the given namespace\n  * @api private\n  */\n\n  function selectColor(namespace) {\n    var hash = 0;\n\n    for (var i = 0; i < namespace.length; i++) {\n      hash = (hash << 5) - hash + namespace.charCodeAt(i);\n      hash |= 0; // Convert to 32bit integer\n    }\n\n    return createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n  }\n\n  createDebug.selectColor = selectColor;\n  /**\n  * Create a debugger with the given `namespace`.\n  *\n  * @param {String} namespace\n  * @return {Function}\n  * @api public\n  */\n\n  function createDebug(namespace) {\n    var prevTime;\n\n    function debug() {\n      // Disabled?\n      if (!debug.enabled) {\n        return;\n      }\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      var self = debug; // Set `diff` timestamp\n\n      var curr = Number(new Date());\n      var ms = curr - (prevTime || curr);\n      self.diff = ms;\n      self.prev = prevTime;\n      self.curr = curr;\n      prevTime = curr;\n      args[0] = createDebug.coerce(args[0]);\n\n      if (typeof args[0] !== 'string') {\n        // Anything else let's inspect with %O\n        args.unshift('%O');\n      } // Apply any `formatters` transformations\n\n\n      var index = 0;\n      args[0] = args[0].replace(/%([a-zA-Z%])/g, function (match, format) {\n        // If we encounter an escaped % then don't increase the array index\n        if (match === '%%') {\n          return match;\n        }\n\n        index++;\n        var formatter = createDebug.formatters[format];\n\n        if (typeof formatter === 'function') {\n          var val = args[index];\n          match = formatter.call(self, val); // Now we need to remove `args[index]` since it's inlined in the `format`\n\n          args.splice(index, 1);\n          index--;\n        }\n\n        return match;\n      }); // Apply env-specific formatting (colors, etc.)\n\n      createDebug.formatArgs.call(self, args);\n      var logFn = self.log || createDebug.log;\n      logFn.apply(self, args);\n    }\n\n    debug.namespace = namespace;\n    debug.enabled = createDebug.enabled(namespace);\n    debug.useColors = createDebug.useColors();\n    debug.color = selectColor(namespace);\n    debug.destroy = destroy;\n    debug.extend = extend; // Debug.formatArgs = formatArgs;\n    // debug.rawLog = rawLog;\n    // env-specific initialization logic for debug instances\n\n    if (typeof createDebug.init === 'function') {\n      createDebug.init(debug);\n    }\n\n    createDebug.instances.push(debug);\n    return debug;\n  }\n\n  function destroy() {\n    var index = createDebug.instances.indexOf(this);\n\n    if (index !== -1) {\n      createDebug.instances.splice(index, 1);\n      return true;\n    }\n\n    return false;\n  }\n\n  function extend(namespace, delimiter) {\n    return createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n  }\n  /**\n  * Enables a debug mode by namespaces. This can include modes\n  * separated by a colon and wildcards.\n  *\n  * @param {String} namespaces\n  * @api public\n  */\n\n\n  function enable(namespaces) {\n    createDebug.save(namespaces);\n    createDebug.names = [];\n    createDebug.skips = [];\n    var i;\n    var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n    var len = split.length;\n\n    for (i = 0; i < len; i++) {\n      if (!split[i]) {\n        // ignore empty strings\n        continue;\n      }\n\n      namespaces = split[i].replace(/\\*/g, '.*?');\n\n      if (namespaces[0] === '-') {\n        createDebug.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n      } else {\n        createDebug.names.push(new RegExp('^' + namespaces + '$'));\n      }\n    }\n\n    for (i = 0; i < createDebug.instances.length; i++) {\n      var instance = createDebug.instances[i];\n      instance.enabled = createDebug.enabled(instance.namespace);\n    }\n  }\n  /**\n  * Disable debug output.\n  *\n  * @api public\n  */\n\n\n  function disable() {\n    createDebug.enable('');\n  }\n  /**\n  * Returns true if the given mode name is enabled, false otherwise.\n  *\n  * @param {String} name\n  * @return {Boolean}\n  * @api public\n  */\n\n\n  function enabled(name) {\n    if (name[name.length - 1] === '*') {\n      return true;\n    }\n\n    var i;\n    var len;\n\n    for (i = 0, len = createDebug.skips.length; i < len; i++) {\n      if (createDebug.skips[i].test(name)) {\n        return false;\n      }\n    }\n\n    for (i = 0, len = createDebug.names.length; i < len; i++) {\n      if (createDebug.names[i].test(name)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n  /**\n  * Coerce `val`.\n  *\n  * @param {Mixed} val\n  * @return {Mixed}\n  * @api private\n  */\n\n\n  function coerce(val) {\n    if (val instanceof Error) {\n      return val.stack || val.message;\n    }\n\n    return val;\n  }\n\n  createDebug.enable(createDebug.load());\n  return createDebug;\n}\n\nmodule.exports = setup;","import isPlainObject from 'is-plain-object';\nimport { Map, List, Record, Set, OrderedSet, is, Stack } from 'immutable';\nimport warning from 'tiny-warning';\nimport invariant from 'tiny-invariant';\nimport Debug from 'debug';\nimport { reverse } from 'esrever';\nimport pick from 'lodash/pick';\nimport omit from 'lodash/omit';\nimport direction from 'direction';\n/**\n * An auto-incrementing index for generating keys.\n *\n * @type {Number}\n */\n\nvar n = void 0;\n/**\n * The global key generating function.\n *\n * @type {Function}\n */\n\nvar generate = void 0;\n/**\n * Create a key, using a provided key if available.\n *\n * @param {String|Void} key\n * @return {String}\n */\n\nfunction create(key) {\n  if (key == null) {\n    return generate();\n  }\n\n  if (typeof key === 'string') {\n    return key;\n  }\n\n  throw new Error('Keys must be strings, but you passed: ' + key);\n}\n/**\n * Set a different unique ID generating `function`.\n *\n * @param {Function} func\n */\n\n\nfunction setGenerator(func) {\n  generate = func;\n}\n/**\n * Reset the key generating function to its initial state.\n */\n\n\nfunction resetGenerator() {\n  n = 0;\n\n  generate = function generate() {\n    return '' + n++;\n  };\n}\n/**\n * Set the initial state.\n */\n\n\nresetGenerator();\n/**\n * Export.\n *\n * @type {Object}\n */\n\nvar KeyUtils = {\n  create: create,\n  setGenerator: setGenerator,\n  resetGenerator: resetGenerator\n};\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar classCallCheck = function classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar defineProperty = function defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n};\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar inherits = function inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\nvar objectWithoutProperties = function objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n};\n\nvar possibleConstructorReturn = function possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\nvar slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\nvar toConsumableArray = function toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n};\n\nvar Data = function () {\n  function Data() {\n    classCallCheck(this, Data);\n  }\n\n  createClass(Data, null, [{\n    key: 'create',\n\n    /**\n     * Create a new `Data` with `attrs`.\n     *\n     * @param {Object|Data|Map} attrs\n     * @return {Data} data\n     */\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Map.isMap(attrs)) {\n        return attrs;\n      }\n\n      if (isPlainObject(attrs)) {\n        return Data.fromJSON(attrs);\n      }\n\n      throw new Error('`Data.create` only accepts objects or maps, but you passed it: ' + attrs);\n    }\n    /**\n     * Create a `Data` from a JSON `object`.\n     *\n     * @param {Object} object\n     * @return {Data}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(object) {\n      return new Map(object);\n    }\n    /**\n     * Alias `fromJS`.\n     */\n\n  }]);\n  return Data;\n}();\n/**\n * Export.\n *\n * @type {Object}\n */\n\n\nData.fromJS = Data.fromJSON;\nvar DEFAULTS = {\n  data: undefined,\n  key: undefined,\n  nodes: undefined\n  /**\n   * Document.\n   *\n   * @type {Document}\n   */\n\n};\n\nvar Document = function (_Record) {\n  inherits(Document, _Record);\n\n  function Document() {\n    classCallCheck(this, Document);\n    return possibleConstructorReturn(this, (Document.__proto__ || Object.getPrototypeOf(Document)).apply(this, arguments));\n  }\n\n  createClass(Document, [{\n    key: 'toJSON',\n\n    /**\n     * Return a JSON representation of the document.\n     *\n     * @param {Object} options\n     * @return {Object}\n     */\n    value: function toJSON() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var object = {\n        object: this.object,\n        data: this.data.toJSON(),\n        nodes: this.nodes.toArray().map(function (n) {\n          return n.toJSON(options);\n        })\n      };\n\n      if (options.preserveKeys) {\n        object.key = this.key;\n      }\n\n      return object;\n    }\n  }], [{\n    key: 'create',\n\n    /**\n     * Create a new `Document` with `attrs`.\n     *\n     * @param {Object|Array|List|Text} attrs\n     * @return {Document}\n     */\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Document.isDocument(attrs)) {\n        return attrs;\n      }\n\n      if (List.isList(attrs) || Array.isArray(attrs)) {\n        attrs = {\n          nodes: attrs\n        };\n      }\n\n      if (isPlainObject(attrs)) {\n        return Document.fromJSON(attrs);\n      }\n\n      throw new Error('`Document.create` only accepts objects, arrays, lists or documents, but you passed it: ' + attrs);\n    }\n    /**\n     * Create a `Document` from a JSON `object`.\n     *\n     * @param {Object|Document} object\n     * @return {Document}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(object) {\n      if (Document.isDocument(object)) {\n        return object;\n      }\n\n      var _object$data = object.data,\n          data = _object$data === undefined ? {} : _object$data,\n          _object$key = object.key,\n          key = _object$key === undefined ? KeyUtils.create() : _object$key,\n          _object$nodes = object.nodes,\n          nodes = _object$nodes === undefined ? [] : _object$nodes;\n      var document = new Document({\n        key: key,\n        data: new Map(data),\n        nodes: Node.createList(nodes)\n      });\n      return document;\n    }\n  }]);\n  return Document;\n}(Record(DEFAULTS));\n/**\n * Export.\n *\n * @type {Document}\n */\n\n\nvar DEFAULTS$1 = {\n  data: undefined,\n  key: undefined,\n  nodes: undefined,\n  type: undefined\n  /**\n   * Inline.\n   *\n   * @type {Inline}\n   */\n\n};\n\nvar Inline = function (_Record) {\n  inherits(Inline, _Record);\n\n  function Inline() {\n    classCallCheck(this, Inline);\n    return possibleConstructorReturn(this, (Inline.__proto__ || Object.getPrototypeOf(Inline)).apply(this, arguments));\n  }\n\n  createClass(Inline, [{\n    key: 'toJSON',\n\n    /**\n     * Return a JSON representation of the inline.\n     *\n     * @param {Object} options\n     * @return {Object}\n     */\n    value: function toJSON() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var object = {\n        object: this.object,\n        type: this.type,\n        data: this.data.toJSON(),\n        nodes: this.nodes.toArray().map(function (n) {\n          return n.toJSON(options);\n        })\n      };\n\n      if (options.preserveKeys) {\n        object.key = this.key;\n      }\n\n      return object;\n    }\n  }], [{\n    key: 'create',\n\n    /**\n     * Create a new `Inline` with `attrs`.\n     *\n     * @param {Object|String|Inline} attrs\n     * @return {Inline}\n     */\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Inline.isInline(attrs)) {\n        return attrs;\n      }\n\n      if (typeof attrs === 'string') {\n        attrs = {\n          type: attrs\n        };\n      }\n\n      if (isPlainObject(attrs)) {\n        return Inline.fromJSON(attrs);\n      }\n\n      throw new Error('`Inline.create` only accepts objects, strings or inlines, but you passed it: ' + attrs);\n    }\n    /**\n     * Create a list of `Inlines` from an array.\n     *\n     * @param {Array<Inline|Object>|List<Inline|Object>} elements\n     * @return {List<Inline>}\n     */\n\n  }, {\n    key: 'createList',\n    value: function createList() {\n      var elements = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      if (List.isList(elements) || Array.isArray(elements)) {\n        var list = new List(elements.map(Inline.create));\n        return list;\n      }\n\n      throw new Error('`Inline.createList` only accepts arrays or lists, but you passed it: ' + elements);\n    }\n    /**\n     * Create a `Inline` from a JSON `object`.\n     *\n     * @param {Object|Inline} object\n     * @return {Inline}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(object) {\n      if (Inline.isInline(object)) {\n        return object;\n      }\n\n      var _object$data = object.data,\n          data = _object$data === undefined ? {} : _object$data,\n          _object$key = object.key,\n          key = _object$key === undefined ? KeyUtils.create() : _object$key,\n          _object$nodes = object.nodes,\n          nodes = _object$nodes === undefined ? [] : _object$nodes,\n          type = object.type;\n\n      if (typeof type !== 'string') {\n        throw new Error('`Inline.fromJS` requires a `type` string.');\n      }\n\n      var inline = new Inline({\n        key: key,\n        type: type,\n        data: new Map(data),\n        nodes: Node.createList(nodes)\n      });\n      return inline;\n    }\n    /**\n     * Check if `any` is a list of inlines.\n     *\n     * @param {Any} any\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isInlineList',\n    value: function isInlineList(any) {\n      return List.isList(any) && any.every(function (item) {\n        return Inline.isInline(item);\n      });\n    }\n  }]);\n  return Inline;\n}(Record(DEFAULTS$1));\n/**\n * Export.\n *\n * @type {Inline}\n */\n\n\nvar DEFAULTS$2 = {\n  data: undefined,\n  type: undefined\n  /**\n   * Mark.\n   *\n   * @type {Mark}\n   */\n\n};\n\nvar Mark = function (_Record) {\n  inherits(Mark, _Record);\n\n  function Mark() {\n    classCallCheck(this, Mark);\n    return possibleConstructorReturn(this, (Mark.__proto__ || Object.getPrototypeOf(Mark)).apply(this, arguments));\n  }\n\n  createClass(Mark, [{\n    key: 'toJSON',\n\n    /**\n     * Return a JSON representation of the mark.\n     *\n     * @return {Object}\n     */\n    value: function toJSON() {\n      var object = {\n        object: this.object,\n        type: this.type,\n        data: this.data.toJSON()\n      };\n      return object;\n    }\n  }], [{\n    key: 'create',\n\n    /**\n     * Create a new `Mark` with `attrs`.\n     *\n     * @param {Object|Mark} attrs\n     * @return {Mark}\n     */\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Mark.isMark(attrs)) {\n        return attrs;\n      }\n\n      if (typeof attrs === 'string') {\n        attrs = {\n          type: attrs\n        };\n      }\n\n      if (isPlainObject(attrs)) {\n        return Mark.fromJSON(attrs);\n      }\n\n      throw new Error('`Mark.create` only accepts objects, strings or marks, but you passed it: ' + attrs);\n    }\n    /**\n     * Create a set of marks.\n     *\n     * @param {Array<Object|Mark>} elements\n     * @return {Set<Mark>}\n     */\n\n  }, {\n    key: 'createSet',\n    value: function createSet(elements) {\n      if (Set.isSet(elements) || Array.isArray(elements)) {\n        var marks = new Set(elements.map(Mark.create));\n        return marks;\n      }\n\n      if (elements == null) {\n        return Set();\n      }\n\n      throw new Error('`Mark.createSet` only accepts sets, arrays or null, but you passed it: ' + elements);\n    }\n    /**\n     * Create a dictionary of settable mark properties from `attrs`.\n     *\n     * @param {Object|String|Mark} attrs\n     * @return {Object}\n     */\n\n  }, {\n    key: 'createProperties',\n    value: function createProperties() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Mark.isMark(attrs)) {\n        return {\n          data: attrs.data,\n          type: attrs.type\n        };\n      }\n\n      if (typeof attrs === 'string') {\n        return {\n          type: attrs\n        };\n      }\n\n      if (isPlainObject(attrs)) {\n        var props = {};\n        if ('type' in attrs) props.type = attrs.type;\n        if ('data' in attrs) props.data = Data.create(attrs.data);\n        return props;\n      }\n\n      throw new Error('`Mark.createProperties` only accepts objects, strings or marks, but you passed it: ' + attrs);\n    }\n    /**\n     * Create a `Mark` from a JSON `object`.\n     *\n     * @param {Object} object\n     * @return {Mark}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(object) {\n      var _object$data = object.data,\n          data = _object$data === undefined ? {} : _object$data,\n          type = object.type;\n\n      if (typeof type !== 'string') {\n        throw new Error('`Mark.fromJS` requires a `type` string.');\n      }\n\n      var mark = new Mark({\n        type: type,\n        data: new Map(data)\n      });\n      return mark;\n    }\n    /**\n     * Check if `any` is a set of marks.\n     *\n     * @param {Any} any\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isMarkSet',\n    value: function isMarkSet(any) {\n      return Set.isSet(any) && any.every(function (item) {\n        return Mark.isMark(item);\n      });\n    }\n  }]);\n  return Mark;\n}(Record(DEFAULTS$2));\n/**\n * Export.\n *\n * @type {Mark}\n */\n\n\nvar DEFAULTS$3 = {\n  marks: undefined,\n  text: undefined\n  /**\n   * Leaf.\n   *\n   * @type {Leaf}\n   */\n\n};\n\nvar Leaf = function (_Record) {\n  inherits(Leaf, _Record);\n\n  function Leaf() {\n    classCallCheck(this, Leaf);\n    return possibleConstructorReturn(this, (Leaf.__proto__ || Object.getPrototypeOf(Leaf)).apply(this, arguments));\n  }\n\n  createClass(Leaf, [{\n    key: 'updateMark',\n\n    /**\n     * Update a `mark` at leaf, replace with newMark\n     *\n     * @param {Mark} mark\n     * @param {Mark} newMark\n     * @returns {Leaf}\n     */\n    value: function updateMark(mark, newMark) {\n      var marks = this.marks;\n      if (newMark.equals(mark)) return this;\n      if (!marks.has(mark)) return this;\n      var newMarks = marks.withMutations(function (collection) {\n        collection.remove(mark).add(newMark);\n      });\n      return this.set('marks', newMarks);\n    }\n    /**\n     * Add a `mark` to the leaf.\n     *\n     * @param {Mark} mark\n     * @returns {Text}\n     */\n\n  }, {\n    key: 'addMark',\n    value: function addMark(mark) {\n      var marks = this.marks;\n      return this.set('marks', marks.add(mark));\n    }\n    /**\n     * Add a `set` of marks to the leaf.\n     *\n     * @param {Set<Mark>} set\n     * @returns {Text}\n     */\n\n  }, {\n    key: 'addMarks',\n    value: function addMarks(set$$1) {\n      var marks = this.marks;\n      return this.set('marks', marks.union(set$$1));\n    }\n    /**\n     * Insert a text `string` into the leaf at `offset`.\n     *\n     * @param {Number} offset\n     * @param {String} string\n     * @return {Leaf}\n     */\n\n  }, {\n    key: 'insertText',\n    value: function insertText(offset, string) {\n      var text = this.text;\n      var next = text.slice(0, offset) + string + text.slice(offset);\n      return this.set('text', next);\n    }\n    /**\n     * Remove a `mark` from the leaf.\n     *\n     * @param {Mark} mark\n     * @returns {Text}\n     */\n\n  }, {\n    key: 'removeMark',\n    value: function removeMark(mark) {\n      var marks = this.marks;\n      return this.set('marks', marks.remove(mark));\n    }\n    /**\n     * Return a JSON representation of the leaf.\n     *\n     * @return {Object}\n     */\n\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      var object = {\n        object: this.object,\n        text: this.text,\n        marks: this.marks.toArray().map(function (m) {\n          return m.toJSON();\n        })\n      };\n      return object;\n    }\n  }], [{\n    key: 'create',\n\n    /**\n     * Create a new `Leaf` with `attrs`.\n     *\n     * @param {Object|Leaf} attrs\n     * @return {Leaf}\n     */\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Leaf.isLeaf(attrs)) {\n        return attrs;\n      }\n\n      if (typeof attrs === 'string') {\n        attrs = {\n          text: attrs\n        };\n      }\n\n      if (isPlainObject(attrs)) {\n        return Leaf.fromJSON(attrs);\n      }\n\n      throw new Error('`Leaf.create` only accepts objects, strings or leaves, but you passed it: ' + attrs);\n    }\n    /**\n     * Create a valid List of `Leaf` from `leaves`\n     *\n     * @param {List<Leaf>} leaves\n     * @return {List<Leaf>}\n     */\n\n  }, {\n    key: 'createLeaves',\n    value: function createLeaves(leaves) {\n      if (leaves.size <= 1) return leaves;\n      var invalid = false; // TODO: we can make this faster with [List] and then flatten\n\n      var result = List().withMutations(function (cache) {\n        // Search from the leaves left end to find invalid node;\n        leaves.findLast(function (leaf, index) {\n          var firstLeaf = cache.first(); // If the first leaf of cache exist, check whether the first leaf is connectable with the current leaf\n\n          if (firstLeaf) {\n            // If marks equals, then the two leaves can be connected\n            if (firstLeaf.marks.equals(leaf.marks)) {\n              invalid = true;\n              cache.set(0, firstLeaf.set('text', '' + leaf.text + firstLeaf.text));\n              return;\n            } // If the cached leaf is empty, drop the empty leaf with the upcoming leaf\n\n\n            if (firstLeaf.text === '') {\n              invalid = true;\n              cache.set(0, leaf);\n              return;\n            } // If the current leaf is empty, drop the leaf\n\n\n            if (leaf.text === '') {\n              invalid = true;\n              return;\n            }\n          }\n\n          cache.unshift(leaf);\n        });\n      });\n      if (!invalid) return leaves;\n      return result;\n    }\n    /**\n     * Split a list of leaves to two lists; if the leaves are valid leaves, the returned leaves are also valid\n     * Corner Cases:\n     *   1. if offset is smaller than 0, then return [List(), leaves]\n     *   2. if offset is bigger than the text length, then return [leaves, List()]\n     *\n     * @param {List<Leaf> leaves\n     * @return {Array<List<Leaf>>}\n     */\n\n  }, {\n    key: 'splitLeaves',\n    value: function splitLeaves(leaves, offset) {\n      if (offset < 0) return [List(), leaves];\n\n      if (leaves.size === 0) {\n        return [List(), List()];\n      }\n\n      var endOffset = 0;\n      var index = -1;\n      var left = void 0,\n          right = void 0;\n      leaves.find(function (leaf) {\n        index++;\n        var startOffset = endOffset;\n        var text = leaf.text;\n        endOffset += text.length;\n        if (endOffset < offset) return false;\n        if (startOffset > offset) return false;\n        var length = offset - startOffset;\n        left = leaf.set('text', text.slice(0, length));\n        right = leaf.set('text', text.slice(length));\n        return true;\n      });\n      if (!left) return [leaves, List()];\n\n      if (left.text === '') {\n        if (index === 0) {\n          return [List.of(left), leaves];\n        }\n\n        return [leaves.take(index), leaves.skip(index)];\n      }\n\n      if (right.text === '') {\n        if (index === leaves.size - 1) {\n          return [leaves, List.of(right)];\n        }\n\n        return [leaves.take(index + 1), leaves.skip(index + 1)];\n      }\n\n      return [leaves.take(index).push(left), leaves.skip(index + 1).unshift(right)];\n    }\n    /**\n     * Create a `Leaf` list from `attrs`.\n     *\n     * @param {Array<Leaf|Object>|List<Leaf|Object>} attrs\n     * @return {List<Leaf>}\n     */\n\n  }, {\n    key: 'createList',\n    value: function createList() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      if (List.isList(attrs) || Array.isArray(attrs)) {\n        var list = new List(attrs.map(Leaf.create));\n        return list;\n      }\n\n      throw new Error('`Leaf.createList` only accepts arrays or lists, but you passed it: ' + attrs);\n    }\n    /**\n     * Create a `Leaf` from a JSON `object`.\n     *\n     * @param {Object} object\n     * @return {Leaf}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(object) {\n      var _object$text = object.text,\n          text = _object$text === undefined ? '' : _object$text,\n          _object$marks = object.marks,\n          marks = _object$marks === undefined ? [] : _object$marks;\n      var leaf = new Leaf({\n        text: text,\n        marks: Set(marks.map(Mark.fromJSON))\n      });\n      return leaf;\n    }\n    /**\n     * Check if `any` is a list of leaves.\n     *\n     * @param {Any} any\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isLeafList',\n    value: function isLeafList(any) {\n      return List.isList(any) && any.every(function (item) {\n        return Leaf.isLeaf(item);\n      });\n    }\n  }]);\n  return Leaf;\n}(Record(DEFAULTS$3));\n/**\n * Export.\n *\n * @type {Leaf}\n */\n\n/* global WeakMap, Map, Symbol */\n\n/**\n * GLOBAL: True if memoization should is enabled.\n *\n * @type {Boolean}\n */\n\n\nvar ENABLED = true;\n/**\n * The leaf node of a cache tree. Used to support variable argument length. A\n * unique object, so that native Maps will key it by reference.\n *\n * @type {Symbol}\n */\n\nvar LEAF = Symbol('LEAF');\n/**\n * The node of a cache tree for a WeakMap to store cache visited by objects\n *\n * @type {Symbol}\n */\n\nvar STORE_KEY = Symbol('STORE_KEY');\n/**\n * Values to represent a memoized undefined and null value. Allows efficient value\n * retrieval using Map.get only.\n *\n * @type {Symbol}\n */\n\nvar UNDEFINED = Symbol('undefined');\nvar NULL = Symbol('null');\n/**\n * Default value for unset keys in native Maps\n *\n * @type {Undefined}\n */\n\nvar UNSET = undefined;\n/**\n * Global Store for all cached values\n *\n * @type {WeakMap}\n */\n\nvar memoizeStore = new WeakMap();\n/**\n * Memoize all of the `properties` on a `object`.\n *\n * @param {Object} object\n * @param {Array} properties\n * @return {Record}\n */\n\nfunction memoize(object, properties) {\n  var _loop = function _loop(property) {\n    var original = object[property];\n\n    if (!original) {\n      throw new Error('Object does not have a property named \"' + property + '\".');\n    }\n\n    object[property] = function () {\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      } // If memoization is disabled, call into the original method.\n\n\n      if (!ENABLED) return original.apply(this, args);\n\n      if (!memoizeStore.has(this)) {\n        memoizeStore.set(this, {\n          noArgs: {},\n          hasArgs: {}\n        });\n      }\n\n      var _memoizeStore$get = memoizeStore.get(this),\n          noArgs = _memoizeStore$get.noArgs,\n          hasArgs = _memoizeStore$get.hasArgs;\n\n      var takesArguments = args.length !== 0;\n      var cachedValue = void 0;\n      var keys = void 0;\n\n      if (takesArguments) {\n        keys = [property].concat(args);\n        cachedValue = getIn(hasArgs, keys);\n      } else {\n        cachedValue = noArgs[property];\n      } // If we've got a result already, return it.\n\n\n      if (cachedValue !== UNSET) {\n        return cachedValue === UNDEFINED ? undefined : cachedValue;\n      } // Otherwise calculate what it should be once and cache it.\n\n\n      var value = original.apply(this, args);\n      var v = value === undefined ? UNDEFINED : value;\n\n      if (takesArguments) {\n        setIn(hasArgs, keys, v);\n      } else {\n        noArgs[property] = v;\n      }\n\n      return value;\n    };\n  };\n\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = properties[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var property = _step.value;\n\n      _loop(property);\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n}\n/**\n * Get a value at a key path in a tree of Map.\n *\n * If not set, returns UNSET.\n * If the set value is undefined, returns UNDEFINED.\n *\n * @param {Map} map\n * @param {Array} keys\n * @return {Any|UNSET|UNDEFINED}\n */\n\n\nfunction getIn(map, keys) {\n  var _iteratorNormalCompletion2 = true;\n  var _didIteratorError2 = false;\n  var _iteratorError2 = undefined;\n\n  try {\n    for (var _iterator2 = keys[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n      var key = _step2.value;\n\n      if (key === undefined) {\n        key = UNDEFINED;\n      } else if (key == null) {\n        key = NULL;\n      }\n\n      if ((typeof key === 'undefined' ? 'undefined' : _typeof(key)) === 'object') {\n        map = map[STORE_KEY] && map[STORE_KEY].get(key);\n      } else {\n        map = map[key];\n      }\n\n      if (map === UNSET) return UNSET;\n    }\n  } catch (err) {\n    _didIteratorError2 = true;\n    _iteratorError2 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion2 && _iterator2.return) {\n        _iterator2.return();\n      }\n    } finally {\n      if (_didIteratorError2) {\n        throw _iteratorError2;\n      }\n    }\n  }\n\n  return map[LEAF];\n}\n/**\n * Set a value at a key path in a tree of Map, creating Maps on the go.\n *\n * @param {Map} map\n * @param {Array} keys\n * @param {Any} value\n * @return {Map}\n */\n\n\nfunction setIn(map, keys, value) {\n  var child = map;\n  var _iteratorNormalCompletion3 = true;\n  var _didIteratorError3 = false;\n  var _iteratorError3 = undefined;\n\n  try {\n    for (var _iterator3 = keys[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n      var key = _step3.value;\n\n      if (key === undefined) {\n        key = UNDEFINED;\n      } else if (key == null) {\n        key = NULL;\n      }\n\n      if ((typeof key === 'undefined' ? 'undefined' : _typeof(key)) !== 'object') {\n        if (!child[key]) {\n          child[key] = {};\n        }\n\n        child = child[key];\n        continue;\n      }\n\n      if (!child[STORE_KEY]) {\n        child[STORE_KEY] = new WeakMap();\n      }\n\n      if (!child[STORE_KEY].has(key)) {\n        var newChild = {};\n        child[STORE_KEY].set(key, newChild);\n        child = newChild;\n        continue;\n      }\n\n      child = child[STORE_KEY].get(key);\n    } // The whole path has been created, so set the value to the bottom most map.\n\n  } catch (err) {\n    _didIteratorError3 = true;\n    _iteratorError3 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion3 && _iterator3.return) {\n        _iterator3.return();\n      }\n    } finally {\n      if (_didIteratorError3) {\n        throw _iteratorError3;\n      }\n    }\n  }\n\n  child[LEAF] = value;\n  return map;\n}\n/**\n * In DEV mode, clears the previously memoized values, globally.\n *\n * @return {Void}\n */\n\n\nfunction resetMemoization() {\n  memoizeStore = new WeakMap();\n}\n/**\n * In DEV mode, enable or disable the use of memoize values, globally.\n *\n * @param {Boolean} enabled\n * @return {Void}\n */\n\n\nfunction useMemoization(enabled) {\n  ENABLED = enabled;\n}\n/**\n * Export.\n *\n * @type {Object}\n */\n\n\nvar DEFAULTS$4 = {\n  leaves: undefined,\n  key: undefined\n  /**\n   * Text.\n   *\n   * @type {Text}\n   */\n\n};\n\nvar Text = function (_Record) {\n  inherits(Text, _Record);\n\n  function Text() {\n    classCallCheck(this, Text);\n    return possibleConstructorReturn(this, (Text.__proto__ || Object.getPrototypeOf(Text)).apply(this, arguments));\n  }\n\n  createClass(Text, [{\n    key: 'searchLeafAtOffset',\n\n    /**\n     * Find the 'first' leaf at offset; By 'first' the alorighthm prefers `endOffset === offset` than `startOffset === offset`\n     * Corner Cases:\n     *   1. if offset is negative, return the first leaf;\n     *   2. if offset is larger than text length, the leaf is null, startOffset, endOffset and index is of the last leaf\n     *\n     * @param {number}\n     * @returns {Object}\n     *   @property {number} startOffset\n     *   @property {number} endOffset\n     *   @property {number} index\n     *   @property {Leaf} leaf\n     */\n    value: function searchLeafAtOffset(offset) {\n      var endOffset = 0;\n      var startOffset = 0;\n      var index = -1;\n      var leaf = this.leaves.find(function (l) {\n        index++;\n        startOffset = endOffset;\n        endOffset = startOffset + l.text.length;\n        return endOffset >= offset;\n      });\n      return {\n        leaf: leaf,\n        endOffset: endOffset,\n        index: index,\n        startOffset: startOffset\n      };\n    }\n    /**\n     * Add a `mark` at `index` and `length`.\n     *\n     * @param {Number} index\n     * @param {Number} length\n     * @param {Mark} mark\n     * @return {Text}\n     */\n\n  }, {\n    key: 'addMark',\n    value: function addMark(index, length, mark) {\n      var marks = Set.of(mark);\n      return this.addMarks(index, length, marks);\n    }\n    /**\n     * Add a `set` of marks at `index` and `length`.\n     * Corner Cases:\n     *   1. If empty text, and if length === 0 and index === 0, will make sure the text contain an empty leaf with the given mark.\n     *\n     * @param {Number} index\n     * @param {Number} length\n     * @param {Set<Mark>} set\n     * @return {Text}\n     */\n\n  }, {\n    key: 'addMarks',\n    value: function addMarks(index, length, set$$1) {\n      if (this.text === '' && length === 0 && index === 0) {\n        var _leaves = this.leaves;\n\n        var first = _leaves.first();\n\n        if (!first) {\n          return this.set('leaves', List.of(Leaf.fromJSON({\n            text: '',\n            marks: set$$1\n          })));\n        }\n\n        var newFirst = first.addMarks(set$$1);\n        if (newFirst === first) return this;\n        return this.set('leaves', List.of(newFirst));\n      }\n\n      if (this.text === '') return this;\n      if (length === 0) return this;\n      if (index >= this.text.length) return this;\n\n      var _Leaf$splitLeaves = Leaf.splitLeaves(this.leaves, index),\n          _Leaf$splitLeaves2 = slicedToArray(_Leaf$splitLeaves, 2),\n          before = _Leaf$splitLeaves2[0],\n          bundle = _Leaf$splitLeaves2[1];\n\n      var _Leaf$splitLeaves3 = Leaf.splitLeaves(bundle, length),\n          _Leaf$splitLeaves4 = slicedToArray(_Leaf$splitLeaves3, 2),\n          middle = _Leaf$splitLeaves4[0],\n          after = _Leaf$splitLeaves4[1];\n\n      var leaves = before.concat(middle.map(function (x) {\n        return x.addMarks(set$$1);\n      }), after);\n      return this.setLeaves(leaves);\n    }\n    /**\n     * Derive the leaves for a list of `decorations`.\n     *\n     * @param {List} decorations (optional)\n     * @return {List<Leaf>}\n     */\n\n  }, {\n    key: 'getLeaves',\n    value: function getLeaves(decorations) {\n      var leaves = this.leaves; // PERF: We can exit early without decorations.\n\n      if (!decorations || decorations.size === 0) return leaves; // HACK: We shouldn't need this, because text nodes should never be in a\n      // position of not having any leaves...\n\n      if (leaves.size === 0) {\n        var marks = decorations.map(function (d) {\n          return d.mark;\n        });\n        var leaf = Leaf.create({\n          marks: marks\n        });\n        return List([leaf]);\n      } // HACK: this shouldn't be necessary, because the loop below should handle\n      // the `0` case without failures. It may already even, not sure.\n\n\n      if (this.text.length === 0) {\n        var _marks = decorations.map(function (d) {\n          return d.mark;\n        });\n\n        var _leaf = Leaf.create({\n          marks: _marks\n        });\n\n        return List([_leaf]);\n      }\n\n      var key = this.key,\n          text = this.text;\n      decorations.forEach(function (dec) {\n        var start = dec.start,\n            end = dec.end,\n            mark = dec.mark;\n        var hasStart = start.key === key;\n        var hasEnd = end.key === key;\n\n        if (hasStart && hasEnd) {\n          var index = hasStart ? start.offset : 0;\n          var length = hasEnd ? end.offset - index : text.length - index;\n          if (length < 1) return;\n          if (index >= text.length) return;\n\n          if (index !== 0 || length < text.length) {\n            var _Leaf$splitLeaves5 = Leaf.splitLeaves(leaves, index),\n                _Leaf$splitLeaves6 = slicedToArray(_Leaf$splitLeaves5, 2),\n                before = _Leaf$splitLeaves6[0],\n                bundle = _Leaf$splitLeaves6[1];\n\n            var _Leaf$splitLeaves7 = Leaf.splitLeaves(bundle, length),\n                _Leaf$splitLeaves8 = slicedToArray(_Leaf$splitLeaves7, 2),\n                middle = _Leaf$splitLeaves8[0],\n                after = _Leaf$splitLeaves8[1];\n\n            leaves = before.concat(middle.map(function (x) {\n              return x.addMark(mark);\n            }), after);\n            return;\n          }\n        }\n\n        leaves = leaves.map(function (x) {\n          return x.addMark(mark);\n        });\n      });\n      if (leaves === this.leaves) return leaves;\n      return Leaf.createLeaves(leaves);\n    }\n    /**\n     * Get all of the active marks on between two offsets\n     * Corner Cases:\n     *   1. if startOffset is equal or bigger than endOffset, then return Set();\n     *   2. If no text is selected between start and end, then return Set()\n     *\n     * @return {Set<Mark>}\n     */\n\n  }, {\n    key: 'getActiveMarksBetweenOffsets',\n    value: function getActiveMarksBetweenOffsets(startOffset, endOffset) {\n      if (startOffset <= 0 && endOffset >= this.text.length) {\n        return this.getActiveMarks();\n      }\n\n      if (startOffset >= endOffset) return Set(); // For empty text in a paragraph, use getActiveMarks;\n\n      if (this.text === '') return this.getActiveMarks();\n      var result = null;\n      var leafEnd = 0;\n      this.leaves.forEach(function (leaf) {\n        var leafStart = leafEnd;\n        leafEnd = leafStart + leaf.text.length;\n        if (leafEnd <= startOffset) return;\n        if (leafStart >= endOffset) return false;\n\n        if (!result) {\n          result = leaf.marks;\n          return;\n        }\n\n        result = result.intersect(leaf.marks);\n        if (result && result.size === 0) return false;\n        return false;\n      });\n      return result || Set();\n    }\n    /**\n     * Get all of the active marks on the text\n     *\n     * @return {Set<Mark>}\n     */\n\n  }, {\n    key: 'getActiveMarks',\n    value: function getActiveMarks() {\n      var _this2 = this;\n\n      if (this.leaves.size === 0) return Set();\n      var result = this.leaves.first().marks;\n      if (result.size === 0) return result;\n      return result.toOrderedSet().withMutations(function (x) {\n        _this2.leaves.forEach(function (c) {\n          x.intersect(c.marks);\n          if (x.size === 0) return false;\n        });\n      });\n    }\n    /**\n     * Get all of the marks on between two offsets\n     * Corner Cases:\n     *   1. if startOffset is equal or bigger than endOffset, then return Set();\n     *   2. If no text is selected between start and end, then return Set()\n     *\n     * @return {OrderedSet<Mark>}\n     */\n\n  }, {\n    key: 'getMarksBetweenOffsets',\n    value: function getMarksBetweenOffsets(startOffset, endOffset) {\n      if (startOffset <= 0 && endOffset >= this.text.length) {\n        return this.getMarks();\n      }\n\n      if (startOffset >= endOffset) return Set(); // For empty text in a paragraph, use getActiveMarks;\n\n      if (this.text === '') return this.getActiveMarks();\n      var result = null;\n      var leafEnd = 0;\n      this.leaves.forEach(function (leaf) {\n        var leafStart = leafEnd;\n        leafEnd = leafStart + leaf.text.length;\n        if (leafEnd <= startOffset) return;\n        if (leafStart >= endOffset) return false;\n\n        if (!result) {\n          result = leaf.marks;\n          return;\n        }\n\n        result = result.union(leaf.marks);\n      });\n      return result || Set();\n    }\n    /**\n     * Get all of the marks on the text.\n     *\n     * @return {OrderedSet<Mark>}\n     */\n\n  }, {\n    key: 'getMarks',\n    value: function getMarks() {\n      var array = this.getMarksAsArray();\n      return new OrderedSet(array);\n    }\n    /**\n     * Get all of the marks on the text as an array\n     *\n     * @return {Array}\n     */\n\n  }, {\n    key: 'getMarksAsArray',\n    value: function getMarksAsArray() {\n      if (this.leaves.size === 0) return [];\n      var first = this.leaves.first().marks;\n      if (this.leaves.size === 1) return first.toArray();\n      var result = [];\n      this.leaves.forEach(function (leaf) {\n        result.push(leaf.marks.toArray());\n      });\n      return Array.prototype.concat.apply(first.toArray(), result);\n    }\n    /**\n     * Get the marks on the text at `index`.\n     * Corner Cases:\n     *   1. if no text is before the index, and index !== 0, then return Set()\n     *   2. (for insert after split node or mark at range) if index === 0, and text === '', then return the leaf.marks\n     *   3. if index === 0, text !== '', return Set()\n     *\n     *\n     * @param {Number} index\n     * @return {Set<Mark>}\n     */\n\n  }, {\n    key: 'getMarksAtIndex',\n    value: function getMarksAtIndex(index) {\n      var _searchLeafAtOffset = this.searchLeafAtOffset(index),\n          leaf = _searchLeafAtOffset.leaf;\n\n      if (!leaf) return Set();\n      return leaf.marks;\n    }\n    /**\n     * Insert `text` at `index`.\n     *\n     * @param {Numbder} offset\n     * @param {String} text\n     * @param {Set} marks (optional)\n     * @return {Text}\n     */\n\n  }, {\n    key: 'insertText',\n    value: function insertText(offset, text, marks) {\n      if (this.text === '') {\n        return this.set('leaves', List.of(Leaf.create({\n          text: text,\n          marks: marks\n        })));\n      }\n\n      if (text.length === 0) return this;\n      if (!marks) marks = Set();\n\n      var _searchLeafAtOffset2 = this.searchLeafAtOffset(offset),\n          startOffset = _searchLeafAtOffset2.startOffset,\n          leaf = _searchLeafAtOffset2.leaf,\n          index = _searchLeafAtOffset2.index;\n\n      var delta = offset - startOffset;\n      var beforeText = leaf.text.slice(0, delta);\n      var afterText = leaf.text.slice(delta);\n      var leaves = this.leaves;\n\n      if (leaf.marks.equals(marks)) {\n        return this.set('leaves', leaves.set(index, leaf.set('text', beforeText + text + afterText)));\n      }\n\n      var nextLeaves = leaves.splice(index, 1, leaf.set('text', beforeText), Leaf.create({\n        text: text,\n        marks: marks\n      }), leaf.set('text', afterText));\n      return this.setLeaves(nextLeaves);\n    }\n    /**\n     * Remove a `mark` at `index` and `length`.\n     *\n     * @param {Number} index\n     * @param {Number} length\n     * @param {Mark} mark\n     * @return {Text}\n     */\n\n  }, {\n    key: 'removeMark',\n    value: function removeMark(index, length, mark) {\n      if (this.text === '' && index === 0 && length === 0) {\n        var first = this.leaves.first();\n        if (!first) return this;\n        var newFirst = first.removeMark(mark);\n        if (newFirst === first) return this;\n        return this.set('leaves', List.of(newFirst));\n      }\n\n      if (length <= 0) return this;\n      if (index >= this.text.length) return this;\n\n      var _Leaf$splitLeaves9 = Leaf.splitLeaves(this.leaves, index),\n          _Leaf$splitLeaves10 = slicedToArray(_Leaf$splitLeaves9, 2),\n          before = _Leaf$splitLeaves10[0],\n          bundle = _Leaf$splitLeaves10[1];\n\n      var _Leaf$splitLeaves11 = Leaf.splitLeaves(bundle, length),\n          _Leaf$splitLeaves12 = slicedToArray(_Leaf$splitLeaves11, 2),\n          middle = _Leaf$splitLeaves12[0],\n          after = _Leaf$splitLeaves12[1];\n\n      var leaves = before.concat(middle.map(function (x) {\n        return x.removeMark(mark);\n      }), after);\n      return this.setLeaves(leaves);\n    }\n    /**\n     * Remove text from the text node at `start` for `length`.\n     *\n     * @param {Number} start\n     * @param {Number} length\n     * @return {Text}\n     */\n\n  }, {\n    key: 'removeText',\n    value: function removeText(start, length) {\n      if (length <= 0) return this;\n      if (start >= this.text.length) return this; // PERF: For simple backspace, we can operate directly on the leaf\n\n      if (length === 1) {\n        var _searchLeafAtOffset3 = this.searchLeafAtOffset(start + 1),\n            leaf = _searchLeafAtOffset3.leaf,\n            index = _searchLeafAtOffset3.index,\n            startOffset = _searchLeafAtOffset3.startOffset;\n\n        var offset = start - startOffset;\n\n        if (leaf) {\n          if (leaf.text.length === 1) {\n            var _leaves2 = this.leaves.remove(index);\n\n            return this.setLeaves(_leaves2);\n          }\n\n          var beforeText = leaf.text.slice(0, offset);\n          var afterText = leaf.text.slice(offset + length);\n          var text = beforeText + afterText;\n\n          if (text.length > 0) {\n            return this.set('leaves', this.leaves.set(index, leaf.set('text', text)));\n          }\n        }\n      }\n\n      var _Leaf$splitLeaves13 = Leaf.splitLeaves(this.leaves, start),\n          _Leaf$splitLeaves14 = slicedToArray(_Leaf$splitLeaves13, 2),\n          before = _Leaf$splitLeaves14[0],\n          bundle = _Leaf$splitLeaves14[1];\n\n      var after = Leaf.splitLeaves(bundle, length)[1];\n      var leaves = Leaf.createLeaves(before.concat(after));\n\n      if (leaves.size === 1) {\n        var first = leaves.first();\n\n        if (first.text === '') {\n          return this.set('leaves', List.of(first.set('marks', this.getActiveMarks())));\n        }\n      }\n\n      return this.set('leaves', leaves);\n    }\n    /**\n     * Return a JSON representation of the text.\n     *\n     * @param {Object} options\n     * @return {Object}\n     */\n\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var object = {\n        object: this.object,\n        leaves: this.getLeaves().toArray().map(function (r) {\n          return r.toJSON();\n        })\n      };\n\n      if (options.preserveKeys) {\n        object.key = this.key;\n      }\n\n      return object;\n    }\n    /**\n     * Update a `mark` at `index` and `length` with `properties`.\n     *\n     * @param {Number} index\n     * @param {Number} length\n     * @param {Object} properties\n     * @param {Object} newProperties\n     * @return {Text}\n     */\n\n  }, {\n    key: 'updateMark',\n    value: function updateMark(index, length, properties, newProperties) {\n      var mark = Mark.create(properties);\n      var newMark = mark.merge(newProperties);\n\n      if (this.text === '' && length === 0 && index === 0) {\n        var _leaves3 = this.leaves;\n\n        var first = _leaves3.first();\n\n        if (!first) return this;\n        var newFirst = first.updateMark(mark, newMark);\n        if (newFirst === first) return this;\n        return this.set('leaves', List.of(newFirst));\n      }\n\n      if (length <= 0) return this;\n      if (index >= this.text.length) return this;\n\n      var _Leaf$splitLeaves15 = Leaf.splitLeaves(this.leaves, index),\n          _Leaf$splitLeaves16 = slicedToArray(_Leaf$splitLeaves15, 2),\n          before = _Leaf$splitLeaves16[0],\n          bundle = _Leaf$splitLeaves16[1];\n\n      var _Leaf$splitLeaves17 = Leaf.splitLeaves(bundle, length),\n          _Leaf$splitLeaves18 = slicedToArray(_Leaf$splitLeaves17, 2),\n          middle = _Leaf$splitLeaves18[0],\n          after = _Leaf$splitLeaves18[1];\n\n      var leaves = before.concat(middle.map(function (x) {\n        return x.updateMark(mark, newMark);\n      }), after);\n      return this.setLeaves(leaves);\n    }\n    /**\n     * Split this text and return two different texts\n     * @param {Number} position\n     * @returns {Array<Text>}\n     */\n\n  }, {\n    key: 'splitText',\n    value: function splitText(offset) {\n      var splitted = Leaf.splitLeaves(this.leaves, offset);\n      var one = this.set('leaves', splitted[0]);\n      var two = this.set('leaves', splitted[1]).regenerateKey();\n      return [one, two];\n    }\n    /**\n     * merge this text and another text at the end\n     * @param {Text} text\n     * @returns {Text}\n     */\n\n  }, {\n    key: 'mergeText',\n    value: function mergeText(text) {\n      var leaves = this.leaves.concat(text.leaves);\n      return this.setLeaves(leaves);\n    }\n    /**\n     * Set leaves with normalized `leaves`\n     *\n     * @param {List} leaves\n     * @returns {Text}\n     */\n\n  }, {\n    key: 'setLeaves',\n    value: function setLeaves(leaves) {\n      leaves = Leaf.createLeaves(leaves);\n\n      if (leaves.size === 1) {\n        var first = leaves.first();\n\n        if (!first.marks || first.marks.size === 0) {\n          if (first.text === '') {\n            return this.set('leaves', List([Leaf.create()]));\n          }\n        }\n      }\n\n      if (leaves.size === 0) {\n        leaves = leaves.push(Leaf.create());\n      }\n\n      return this.set('leaves', leaves);\n    }\n  }], [{\n    key: 'create',\n\n    /**\n     * Create a new `Text` with `attrs`.\n     *\n     * @param {Object|Array|List|String|Text} attrs\n     * @return {Text}\n     */\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n\n      if (Text.isText(attrs)) {\n        return attrs;\n      }\n\n      if (typeof attrs === 'string') {\n        attrs = {\n          leaves: [{\n            text: attrs\n          }]\n        };\n      }\n\n      if (isPlainObject(attrs)) {\n        if (attrs.text) {\n          var _attrs = attrs,\n              text = _attrs.text,\n              marks = _attrs.marks,\n              key = _attrs.key;\n          attrs = {\n            key: key,\n            leaves: [{\n              text: text,\n              marks: marks\n            }]\n          };\n        }\n\n        return Text.fromJSON(attrs);\n      }\n\n      throw new Error('`Text.create` only accepts objects, arrays, strings or texts, but you passed it: ' + attrs);\n    }\n    /**\n     * Create a list of `Texts` from `elements`.\n     *\n     * @param {Array<Text|Object>|List<Text|Object>} elements\n     * @return {List<Text>}\n     */\n\n  }, {\n    key: 'createList',\n    value: function createList() {\n      var elements = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      if (List.isList(elements) || Array.isArray(elements)) {\n        var list = new List(elements.map(Text.create));\n        return list;\n      }\n\n      throw new Error('`Text.createList` only accepts arrays or lists, but you passed it: ' + elements);\n    }\n    /**\n     * Create a `Text` from a JSON `object`.\n     *\n     * @param {Object|Text} object\n     * @return {Text}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(object) {\n      if (Text.isText(object)) {\n        return object;\n      }\n\n      var _object$key = object.key,\n          key = _object$key === undefined ? KeyUtils.create() : _object$key;\n      var leaves = object.leaves;\n\n      if (!leaves) {\n        if (object.ranges) {\n          warning(false, 'As of slate@0.27.0, the `ranges` property of Slate objects has been renamed to `leaves`.');\n          leaves = object.ranges;\n        } else {\n          leaves = List();\n        }\n      }\n\n      if (Array.isArray(leaves)) {\n        leaves = List(leaves.map(function (x) {\n          return Leaf.create(x);\n        }));\n      } else if (List.isList(leaves)) {\n        leaves = leaves.map(function (x) {\n          return Leaf.create(x);\n        });\n      } else {\n        throw new Error('leaves must be either Array or Immutable.List');\n      }\n\n      if (leaves.size === 0) {\n        leaves = leaves.push(Leaf.create());\n      }\n\n      var node = new Text({\n        leaves: Leaf.createLeaves(leaves),\n        key: key\n      });\n      return node;\n    }\n    /**\n     * Check if `any` is a list of texts.\n     *\n     * @param {Any} any\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isTextList',\n    value: function isTextList(any) {\n      return List.isList(any) && any.every(function (item) {\n        return Text.isText(item);\n      });\n    }\n  }]);\n  return Text;\n}(Record(DEFAULTS$4));\n/**\n * Memoize read methods.\n */\n\n\nmemoize(Text.prototype, ['getActiveMarks', 'getMarks', 'getMarksAsArray']);\n/**\n * Export.\n *\n * @type {Text}\n */\n\nvar Node = function () {\n  function Node() {\n    classCallCheck(this, Node);\n  }\n\n  createClass(Node, null, [{\n    key: 'create',\n\n    /**\n     * Create a new `Node` with `attrs`.\n     *\n     * @param {Object|Node} attrs\n     * @return {Node}\n     */\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Node.isNode(attrs)) {\n        return attrs;\n      }\n\n      if (isPlainObject(attrs)) {\n        var object = attrs.object;\n\n        if (!object && attrs.kind) {\n          warning(false, 'As of slate@0.32.0, the `kind` property of Slate objects has been renamed to `object`.');\n          object = attrs.kind;\n        }\n\n        switch (object) {\n          case 'block':\n            return Block.create(attrs);\n\n          case 'document':\n            return Document.create(attrs);\n\n          case 'inline':\n            return Inline.create(attrs);\n\n          case 'text':\n            return Text.create(attrs);\n\n          default:\n            {\n              throw new Error('`Node.create` requires a `object` string.');\n            }\n        }\n      }\n\n      throw new Error('`Node.create` only accepts objects or nodes but you passed it: ' + attrs);\n    }\n    /**\n     * Create a list of `Nodes` from an array.\n     *\n     * @param {Array<Object|Node>} elements\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'createList',\n    value: function createList() {\n      var elements = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      if (List.isList(elements) || Array.isArray(elements)) {\n        var list = List(elements.map(Node.create));\n        return list;\n      }\n\n      throw new Error('`Node.createList` only accepts lists or arrays, but you passed it: ' + elements);\n    }\n    /**\n     * Create a dictionary of settable node properties from `attrs`.\n     *\n     * @param {Object|String|Node} attrs\n     * @return {Object}\n     */\n\n  }, {\n    key: 'createProperties',\n    value: function createProperties() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Block.isBlock(attrs) || Inline.isInline(attrs)) {\n        return {\n          data: attrs.data,\n          type: attrs.type\n        };\n      }\n\n      if (typeof attrs === 'string') {\n        return {\n          type: attrs\n        };\n      }\n\n      if (isPlainObject(attrs)) {\n        var props = {};\n        if ('type' in attrs) props.type = attrs.type;\n        if ('data' in attrs) props.data = Data.create(attrs.data);\n        return props;\n      }\n\n      throw new Error('`Node.createProperties` only accepts objects, strings, blocks or inlines, but you passed it: ' + attrs);\n    }\n    /**\n     * Create a `Node` from a JSON `value`.\n     *\n     * @param {Object} value\n     * @return {Node}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(value) {\n      var object = value.object;\n\n      if (!object && value.kind) {\n        warning(false, 'As of slate@0.32.0, the `kind` property of Slate objects has been renamed to `object`.');\n        object = value.kind;\n      }\n\n      switch (object) {\n        case 'block':\n          return Block.fromJSON(value);\n\n        case 'document':\n          return Document.fromJSON(value);\n\n        case 'inline':\n          return Inline.fromJSON(value);\n\n        case 'text':\n          return Text.fromJSON(value);\n\n        default:\n          {\n            throw new Error('`Node.fromJSON` requires an `object` of either \\'block\\', \\'document\\', \\'inline\\' or \\'text\\', but you passed: ' + value);\n          }\n      }\n    }\n    /**\n     * Check if `any` is a `Node`.\n     *\n     * @param {Any} any\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isNode',\n    value: function isNode(any) {\n      return Block.isBlock(any) || Document.isDocument(any) || Inline.isInline(any) || Text.isText(any);\n    }\n    /**\n     * Check if `any` is a list of nodes.\n     *\n     * @param {Any} any\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isNodeList',\n    value: function isNodeList(any) {\n      return List.isList(any) && any.every(function (item) {\n        return Node.isNode(item);\n      });\n    }\n  }]);\n  return Node;\n}();\n/**\n * Export.\n *\n * @type {Object}\n */\n\n\nvar DEFAULTS$5 = {\n  data: undefined,\n  key: undefined,\n  nodes: undefined,\n  type: undefined\n  /**\n   * Block.\n   *\n   * @type {Block}\n   */\n\n};\n\nvar Block = function (_Record) {\n  inherits(Block, _Record);\n\n  function Block() {\n    classCallCheck(this, Block);\n    return possibleConstructorReturn(this, (Block.__proto__ || Object.getPrototypeOf(Block)).apply(this, arguments));\n  }\n\n  createClass(Block, [{\n    key: 'toJSON',\n\n    /**\n     * Return a JSON representation of the block.\n     *\n     * @param {Object} options\n     * @return {Object}\n     */\n    value: function toJSON() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var object = {\n        object: this.object,\n        type: this.type,\n        data: this.data.toJSON(),\n        nodes: this.nodes.toArray().map(function (n) {\n          return n.toJSON(options);\n        })\n      };\n\n      if (options.preserveKeys) {\n        object.key = this.key;\n      }\n\n      return object;\n    }\n  }], [{\n    key: 'create',\n\n    /**\n     * Create a new `Block` from `attrs`.\n     *\n     * @param {Object|String|Block} attrs\n     * @return {Block}\n     */\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Block.isBlock(attrs)) {\n        return attrs;\n      }\n\n      if (typeof attrs === 'string') {\n        attrs = {\n          type: attrs\n        };\n      }\n\n      if (isPlainObject(attrs)) {\n        return Block.fromJSON(attrs);\n      }\n\n      throw new Error('`Block.create` only accepts objects, strings or blocks, but you passed it: ' + attrs);\n    }\n    /**\n     * Create a list of `Blocks` from `attrs`.\n     *\n     * @param {Array<Block|Object>|List<Block|Object>} attrs\n     * @return {List<Block>}\n     */\n\n  }, {\n    key: 'createList',\n    value: function createList() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      if (List.isList(attrs) || Array.isArray(attrs)) {\n        var list = new List(attrs.map(Block.create));\n        return list;\n      }\n\n      throw new Error('`Block.createList` only accepts arrays or lists, but you passed it: ' + attrs);\n    }\n    /**\n     * Create a `Block` from a JSON `object`.\n     *\n     * @param {Object|Block} object\n     * @return {Block}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(object) {\n      if (Block.isBlock(object)) {\n        return object;\n      }\n\n      var _object$data = object.data,\n          data = _object$data === undefined ? {} : _object$data,\n          _object$key = object.key,\n          key = _object$key === undefined ? KeyUtils.create() : _object$key,\n          _object$nodes = object.nodes,\n          nodes = _object$nodes === undefined ? [] : _object$nodes,\n          type = object.type;\n\n      if (typeof type !== 'string') {\n        throw new Error('`Block.fromJSON` requires a `type` string.');\n      }\n\n      var block = new Block({\n        key: key,\n        type: type,\n        data: Map(data),\n        nodes: Node.createList(nodes)\n      });\n      return block;\n    }\n    /**\n     * Check if `any` is a block list.\n     *\n     * @param {Any} any\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isBlockList',\n    value: function isBlockList(any) {\n      return List.isList(any) && any.every(function (item) {\n        return Block.isBlock(item);\n      });\n    }\n  }]);\n  return Block;\n}(Record(DEFAULTS$5));\n/**\n * Export.\n *\n * @type {Block}\n */\n\n\nfunction compare(path, target) {\n  var m = min(path, target);\n\n  for (var i = 0; i < m; i++) {\n    var pv = path.get(i);\n    var tv = target.get(i); // If the path's value is ever less than the target's, it's before.\n\n    if (pv < tv) return -1; // If the target's value is ever less than the path's, it's after.\n\n    if (pv > tv) return 1;\n  } // Paths should now be equal, otherwise something is wrong\n\n\n  return path.size === target.size ? 0 : null;\n}\n/**\n * Create a path from `attrs`.\n *\n * @param {Array|List} attrs\n * @return {List}\n */\n\n\nfunction create$1(attrs) {\n  if (attrs == null) {\n    return null;\n  }\n\n  if (List.isList(attrs)) {\n    return attrs;\n  }\n\n  if (Array.isArray(attrs)) {\n    return List(attrs);\n  }\n\n  throw new Error('Paths can only be created from arrays or lists, but you passed: ' + attrs);\n}\n/**\n * Crop paths `a` and `b` to an equal size, defaulting to the shortest.\n *\n * @param {List} a\n * @param {List} b\n */\n\n\nfunction crop(a, b) {\n  var size = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : min(a, b);\n  var ca = a.slice(0, size);\n  var cb = b.slice(0, size);\n  return [ca, cb];\n}\n/**\n * Decrement a `path` by `n` at `index`, defaulting to the last index.\n *\n * @param {List} path\n * @param {Number} n\n * @param {Number} index\n */\n\n\nfunction decrement(path) {\n  var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  var index = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : path.size - 1;\n  return increment(path, 0 - n, index);\n}\n/**\n * Get all ancestor paths of th given path.\n *\n * @param {List} path\n * @returns {List}\n */\n\n\nfunction getAncestors(path) {\n  var ancestors = List().withMutations(function (list) {\n    for (var i = 0; i < path.size; i++) {\n      list.push(path.slice(0, i));\n    }\n  });\n  return ancestors;\n}\n/**\n * Increment a `path` by `n` at `index`, defaulting to the last index.\n *\n * @param {List} path\n * @param {Number} n\n * @param {Number} index\n */\n\n\nfunction increment(path) {\n  var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  var index = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : path.size - 1;\n  var value = path.get(index);\n  var newValue = value + n;\n  var newPath = path.set(index, newValue);\n  return newPath;\n}\n/**\n * Is a `path` above another `target` path?\n *\n * @param {List} path\n * @param {List} target\n * @return {Boolean}\n */\n\n\nfunction isAbove(path, target) {\n  var _crop = crop(path, target),\n      _crop2 = slicedToArray(_crop, 2),\n      p = _crop2[0],\n      t = _crop2[1];\n\n  return path.size < target.size && compare(p, t) === 0;\n}\n/**\n * Is a `path` after another `target` path in a document?\n *\n * @param {List} path\n * @param {List} target\n * @return {Boolean}\n */\n\n\nfunction isAfter(path, target) {\n  var _crop3 = crop(path, target),\n      _crop4 = slicedToArray(_crop3, 2),\n      p = _crop4[0],\n      t = _crop4[1];\n\n  return compare(p, t) === 1;\n}\n/**\n * Is a `path` before another `target` path in a document?\n *\n * @param {List} path\n * @param {List} target\n * @return {Boolean}\n */\n\n\nfunction isBefore(path, target) {\n  var _crop5 = crop(path, target),\n      _crop6 = slicedToArray(_crop5, 2),\n      p = _crop6[0],\n      t = _crop6[1];\n\n  return compare(p, t) === -1;\n}\n/**\n * Is a `path` equal to another `target` path in a document?\n *\n * @param {List} path\n * @param {List} target\n * @return {Boolean}\n */\n\n\nfunction isEqual(path, target) {\n  return path.equals(target);\n}\n/**\n * Is a `path` older than a `target` path? Meaning that it ends as an older\n * sibling of one of the indexes in the target.\n *\n * @param {List} path\n * @param {List} target\n * @return {Boolean}\n */\n\n\nfunction isOlder(path, target) {\n  var index = path.size - 1;\n\n  var _crop7 = crop(path, target, index),\n      _crop8 = slicedToArray(_crop7, 2),\n      p = _crop8[0],\n      t = _crop8[1];\n\n  var pl = path.get(index);\n  var tl = target.get(index);\n  return isEqual(p, t) && pl > tl;\n}\n/**\n * Is a `path` a sibling of a `target` path?\n *\n * @param {List} path\n * @param {List} target\n * @return {Boolean}\n */\n\n\nfunction isSibling(path, target) {\n  if (path.size !== target.size) return false;\n  var p = path.butLast();\n  var t = target.butLast();\n  return p.equals(t);\n}\n/**\n * Is a `path` younger than a `target` path? Meaning that it ends as a younger\n * sibling of one of the indexes in the target.\n *\n * @param {List} path\n * @param {List} target\n * @return {Boolean}\n */\n\n\nfunction isYounger(path, target) {\n  var index = path.size - 1;\n\n  var _crop9 = crop(path, target, index),\n      _crop10 = slicedToArray(_crop9, 2),\n      p = _crop10[0],\n      t = _crop10[1];\n\n  var pl = path.get(index);\n  var tl = target.get(index);\n  return isEqual(p, t) && pl < tl;\n}\n/**\n * Lift a `path` to refer to its parent.\n *\n * @param {List} path\n * @return {List}\n */\n\n\nfunction lift(path) {\n  var parent = path.slice(0, -1);\n  return parent;\n}\n/**\n * Drop a `path`, returning the path from the first child.\n *\n * @param {List} path\n * @return {List}\n */\n\n\nfunction drop(path) {\n  var relative = path.slice(1);\n  return relative;\n}\n/**\n * Get the maximum length of paths `a` and `b`.\n *\n * @param {List} path\n * @param {List} path\n * @return {Number}\n */\n\n\nfunction max(a, b) {\n  var n = Math.max(a.size, b.size);\n  return n;\n}\n/**\n * Get the minimum length of paths `a` and `b`.\n *\n * @param {List} path\n * @param {List} path\n * @return {Number}\n */\n\n\nfunction min(a, b) {\n  var n = Math.min(a.size, b.size);\n  return n;\n}\n/**\n * Get the common ancestor path of path `a` and path `b`.\n *\n * @param {List} a\n * @param {List} b\n * @return {List}\n */\n\n\nfunction relate(a, b) {\n  var array = [];\n\n  for (var i = 0; i < a.size && i < b.size; i++) {\n    var av = a.get(i);\n    var bv = b.get(i); // If the values aren't equal, they've diverged and don't share an ancestor.\n\n    if (av !== bv) break; // Otherwise, the current value is still a common ancestor.\n\n    array.push(av);\n  }\n\n  var path = create$1(array);\n  return path;\n}\n/**\n * Transform a `path` by an `operation`, adjusting it to stay current.\n *\n * @param {List} path\n * @param {Operation} operation\n * @return {List<List>}\n */\n\n\nfunction transform(path, operation) {\n  var type = operation.type,\n      position = operation.position,\n      p = operation.path;\n\n  if (type === 'add_mark' || type === 'insert_text' || type === 'remove_mark' || type === 'remove_text' || type === 'set_mark' || type === 'set_node' || type === 'set_selection' || type === 'set_value' || path.size === 0) {\n    return List([path]);\n  }\n\n  var pIndex = p.size - 1;\n  var pEqual = isEqual(p, path);\n  var pYounger = isYounger(p, path);\n  var pAbove = isAbove(p, path);\n\n  if (type === 'insert_node') {\n    if (pEqual || pYounger || pAbove) {\n      path = increment(path, 1, pIndex);\n    }\n  }\n\n  if (type === 'remove_node') {\n    if (pYounger) {\n      path = decrement(path, 1, pIndex);\n    } else if (pEqual || pAbove) {\n      path = [];\n    }\n  }\n\n  if (type === 'merge_node') {\n    if (pEqual || pYounger) {\n      path = decrement(path, 1, pIndex);\n    } else if (pAbove) {\n      path = decrement(path, 1, pIndex);\n      path = increment(path, position, pIndex + 1);\n    }\n  }\n\n  if (type === 'split_node') {\n    if (pEqual) {\n      path = [path, increment(path)];\n    } else if (pYounger) {\n      path = increment(path, 1, pIndex);\n    } else if (pAbove) {\n      if (path.get(pIndex + 1) >= position) {\n        path = increment(path, 1, pIndex);\n        path = decrement(path, position, pIndex + 1);\n      }\n    }\n  }\n\n  if (type === 'move_node') {\n    var np = operation.newPath;\n\n    if (isEqual(p, np)) {\n      return List([path]);\n    }\n\n    if (pAbove || pEqual) {\n      // We are comparing something that was moved\n      // The new path is unaffected unless the old path was the left-sibling of an ancestor\n      if (isYounger(p, np) && p.size < np.size) {\n        path = decrement(np, 1, min(np, p) - 1).concat(path.slice(p.size));\n      } else {\n        path = np.concat(path.slice(p.size));\n      }\n    } else {\n      // This is equivalent logic to remove_node for path\n      if (pYounger) {\n        path = decrement(path, 1, pIndex);\n      } // This is the equivalent logic to insert_node for newPath\n\n\n      if (isYounger(np, path) || isEqual(np, path) || isAbove(np, path)) {\n        path = increment(path, 1, np.size - 1);\n      }\n    }\n  }\n\n  var paths = Array.isArray(path) ? path : [path];\n  return List(paths);\n}\n/**\n * Export.\n *\n * @type {Object}\n */\n\n\nvar PathUtils = {\n  compare: compare,\n  create: create$1,\n  crop: crop,\n  decrement: decrement,\n  getAncestors: getAncestors,\n  increment: increment,\n  isAbove: isAbove,\n  isAfter: isAfter,\n  isBefore: isBefore,\n  isEqual: isEqual,\n  isOlder: isOlder,\n  isSibling: isSibling,\n  isYounger: isYounger,\n  lift: lift,\n  drop: drop,\n  max: max,\n  min: min,\n  relate: relate,\n  transform: transform\n};\nvar DEFAULTS$6 = {\n  key: undefined,\n  offset: undefined,\n  path: undefined\n  /**\n   * Point.\n   *\n   * @type {Point}\n   */\n\n};\n\nvar Point = function (_Record) {\n  inherits(Point, _Record);\n\n  function Point() {\n    classCallCheck(this, Point);\n    return possibleConstructorReturn(this, (Point.__proto__ || Object.getPrototypeOf(Point)).apply(this, arguments));\n  }\n\n  createClass(Point, [{\n    key: 'isAfterPoint',\n\n    /**\n     * Check whether the point is after another `point`.\n     *\n     * @return {Boolean}\n     */\n    value: function isAfterPoint(point) {\n      if (this.isUnset) return false;\n      var is$$1 = this.key === point.key && this.offset > point.offset || PathUtils.compare(this.path, point.path) === 1;\n      return is$$1;\n    }\n    /**\n     * Check whether the point is after a `range`.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isAfterRange',\n    value: function isAfterRange(range) {\n      if (this.isUnset) return false;\n      var is$$1 = this.isAfterPoint(range.end);\n      return is$$1;\n    }\n    /**\n     * Check whether the point is at the end of a `range`.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isAtEndOfRange',\n    value: function isAtEndOfRange(range) {\n      if (this.isUnset) return false;\n      var is$$1 = this.equals(range.end);\n      return is$$1;\n    }\n    /**\n     * Check whether the point is at the start of a `range`.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isAtStartOfRange',\n    value: function isAtStartOfRange(range) {\n      if (this.isUnset) return false;\n      var is$$1 = this.equals(range.start);\n      return is$$1;\n    }\n    /**\n     * Check whether the point is before another `point`.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isBeforePoint',\n    value: function isBeforePoint(point) {\n      if (this.isUnset) return false;\n      var is$$1 = this.key === point.key && this.offset < point.offset || PathUtils.compare(this.path, point.path) === -1;\n      return is$$1;\n    }\n    /**\n     * Check whether the point is before a `range`.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isBeforeRange',\n    value: function isBeforeRange(range) {\n      if (this.isUnset) return false;\n      var is$$1 = this.isBeforePoint(range.start);\n      return is$$1;\n    }\n    /**\n     * Check whether the point is inside a `range`.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isInRange',\n    value: function isInRange(range) {\n      if (this.isUnset) return false;\n      var is$$1 = this.equals(range.start) || this.equals(range.end) || this.isAfterPoint(range.start) && this.isBeforePoint(range.end);\n      return is$$1;\n    }\n    /**\n     * Check whether the point is at the end of a `node`.\n     *\n     * @param {Node} node\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isAtEndOfNode',\n    value: function isAtEndOfNode(node) {\n      if (this.isUnset) return false;\n      var last = node.getLastText();\n      var is$$1 = this.key === last.key && this.offset === last.text.length;\n      return is$$1;\n    }\n    /**\n     * Check whether the point is at the start of a `node`.\n     *\n     * @param {Node} node\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isAtStartOfNode',\n    value: function isAtStartOfNode(node) {\n      if (this.isUnset) return false; // PERF: Do a check for a `0` offset first since it's quickest.\n\n      if (this.offset !== 0) return false;\n      var first = node.getFirstText();\n      var is$$1 = this.key === first.key;\n      return is$$1;\n    }\n    /**\n     * Check whether the point is in a `node`.\n     *\n     * @param {Node} node\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isInNode',\n    value: function isInNode(node) {\n      if (this.isUnset) return false;\n      if (node.object === 'text' && node.key === this.key) return true;\n      if (node.hasNode(this.key)) return true;\n      return false;\n    }\n    /**\n     * Move the point's offset backward `n` characters.\n     *\n     * @param {Number} n (optional)\n     * @return {Point}\n     */\n\n  }, {\n    key: 'moveBackward',\n    value: function moveBackward() {\n      var n = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n      if (n === 0) return this;\n      if (n < 0) return this.moveForward(-n);\n      var point = this.setOffset(this.offset - n);\n      return point;\n    }\n    /**\n     * Move the point's offset forward `n` characters.\n     *\n     * @param {Number} n (optional)\n     * @return {Point}\n     */\n\n  }, {\n    key: 'moveForward',\n    value: function moveForward() {\n      var n = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n      if (n === 0) return this;\n      if (n < 0) return this.moveBackward(-n);\n      var point = this.setOffset(this.offset + n);\n      return point;\n    }\n    /**\n     * Move the point's anchor point to a new `path` and `offset`.\n     *\n     * Optionally, the `path` can be a key string, or omitted entirely in which\n     * case it would be the offset number.\n     *\n     * @param {List|String|Number} path\n     * @param {Number} offset\n     * @return {Point}\n     */\n\n  }, {\n    key: 'moveTo',\n    value: function moveTo(path) {\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var key = this.key;\n\n      if (typeof path === 'number') {\n        offset = path;\n        path = this.path;\n      } else if (typeof path === 'string') {\n        key = path;\n        path = key === this.key ? this.path : null;\n      } else {\n        key = path.equals(this.path) ? this.key : null;\n      }\n\n      var point = this.merge({\n        key: key,\n        path: path,\n        offset: offset\n      });\n      return point;\n    }\n    /**\n     * Move the point's anchor point to the start of a `node`.\n     *\n     * @param {Node} node\n     * @return {Point}\n     */\n\n  }, {\n    key: 'moveToStartOfNode',\n    value: function moveToStartOfNode(node) {\n      var first = node.getFirstText();\n      var point = this.moveTo(first.key, 0);\n      return point;\n    }\n    /**\n     * Move the point's anchor point to the end of a `node`.\n     *\n     * @param {Node} node\n     * @return {Point}\n     */\n\n  }, {\n    key: 'moveToEndOfNode',\n    value: function moveToEndOfNode(node) {\n      var last = node.getLastText();\n      var point = this.moveTo(last.key, last.text.length);\n      return point;\n    }\n    /**\n     * Normalize the point relative to a `node`, ensuring that its key and path\n     * reference a text node, or that it gets unset.\n     *\n     * @param {Node} node\n     * @return {Point}\n     */\n\n  }, {\n    key: 'normalize',\n    value: function normalize(node) {\n      // If both the key and path are null, there's no reference to a node, so\n      // make sure it is entirely unset.\n      if (this.key == null && this.path == null) {\n        return this.setOffset(null);\n      }\n\n      var key = this.key,\n          offset = this.offset,\n          path = this.path; // PERF: this function gets called a lot.\n      // to avoid creating the key -> path lookup table, we attempt to look up by path first.\n\n      var target = path && node.getNode(path);\n\n      if (!target) {\n        target = node.getNode(key);\n\n        if (target) {\n          // There is a misalignment of path and key\n          var _point = this.merge({\n            path: node.getPath(key)\n          });\n\n          return _point;\n        }\n      }\n\n      if (!target) {\n        warning(false, \"A point's `path` or `key` invalid and was reset!\");\n        var text = node.getFirstText();\n        if (!text) return Point.create();\n\n        var _point2 = this.merge({\n          key: text.key,\n          offset: 0,\n          path: node.getPath(text.key)\n        });\n\n        return _point2;\n      }\n\n      if (target.object !== 'text') {\n        warning(false, 'A point should not reference a non-text node!');\n\n        var _text = target.getTextAtOffset(offset);\n\n        var before = target.getOffset(_text.key);\n\n        var _point3 = this.merge({\n          offset: offset - before,\n          key: _text.key,\n          path: node.getPath(_text.key)\n        });\n\n        return _point3;\n      }\n\n      if (target && path && key && key !== target.key) {\n        warning(false, \"A point's `key` did not match its `path`!\"); // TODO: if we look up by path above and it differs by key, do we want to reset it to looking up by key?\n      }\n\n      var point = this.merge({\n        key: target.key,\n        path: path == null ? node.getPath(target.key) : path,\n        offset: offset == null ? 0 : Math.min(offset, target.text.length)\n      });\n      return point;\n    }\n    /**\n     * Set the point's key to a new `key`.\n     *\n     * @param {String} key\n     * @return {Point}\n     */\n\n  }, {\n    key: 'setKey',\n    value: function setKey(key) {\n      if (key != null) {\n        key = KeyUtils.create(key);\n      }\n\n      var point = this.set('key', key);\n      return point;\n    }\n    /**\n     * Set the point's offset to a new `offset`.\n     *\n     * @param {Number} offset\n     * @return {Point}\n     */\n\n  }, {\n    key: 'setOffset',\n    value: function setOffset(offset) {\n      var point = this.set('offset', offset);\n      return point;\n    }\n    /**\n     * Set the point's path to a new `path`.\n     *\n     * @param {List|Array} path\n     * @return {Point}\n     */\n\n  }, {\n    key: 'setPath',\n    value: function setPath(path) {\n      if (path != null) {\n        path = PathUtils.create(path);\n      }\n\n      var point = this.set('path', path);\n      return point;\n    }\n    /**\n     * Return a JSON representation of the point.\n     *\n     * @param {Object} options\n     * @return {Object}\n     */\n\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var object = {\n        object: this.object,\n        key: this.key,\n        offset: this.offset,\n        path: this.path && this.path.toArray()\n      };\n\n      if (!options.preserveKeys) {\n        delete object.key;\n      }\n\n      return object;\n    }\n    /**\n     * Unset the point.\n     *\n     * @return {Point}\n     */\n\n  }, {\n    key: 'unset',\n    value: function unset() {\n      return this.merge({\n        key: null,\n        offset: null,\n        path: null\n      });\n    }\n  }, {\n    key: 'isSet',\n\n    /**\n     * Check whether all properties of the point are set.\n     *\n     * @return {Boolean}\n     */\n    get: function get$$1() {\n      return this.key != null && this.offset != null && this.path != null;\n    }\n    /**\n     * Check whether any property of the point is not set.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isUnset',\n    get: function get$$1() {\n      return !this.isSet;\n    }\n  }], [{\n    key: 'create',\n\n    /**\n     * Create a new `Point` with `attrs`.\n     *\n     * @param {Object|Point} attrs\n     * @return {Point}\n     */\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Point.isPoint(attrs)) {\n        return attrs;\n      }\n\n      if (isPlainObject(attrs)) {\n        return Point.fromJSON(attrs);\n      }\n\n      throw new Error('`Point.create` only accepts objects or points, but you passed it: ' + attrs);\n    }\n    /**\n     * Create a dictionary of settable point properties from `attrs`.\n     *\n     * @param {Object|Point} attrs\n     * @return {Object}\n     */\n\n  }, {\n    key: 'createProperties',\n    value: function createProperties() {\n      var a = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Point.isPoint(a)) {\n        return {\n          key: a.key,\n          offset: a.offset,\n          path: a.path\n        };\n      }\n\n      if (isPlainObject(a)) {\n        var p = {};\n        if ('key' in a) p.key = a.key;\n        if ('offset' in a) p.offset = a.offset;\n        if ('path' in a) p.path = PathUtils.create(a.path); // If only a path is set, or only a key is set, ensure that the other is\n        // set to null so that it can be normalized back to the right value.\n        // Otherwise we won't realize that the path and key don't match anymore.\n\n        if ('path' in a && !('key' in a)) p.key = null;\n        if ('key' in a && !('path' in a)) p.path = null;\n        return p;\n      }\n\n      throw new Error('`Point.createProperties` only accepts objects or points, but you passed it: ' + a);\n    }\n    /**\n     * Create a `Point` from a JSON `object`.\n     *\n     * @param {Object} object\n     * @return {Point}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(object) {\n      var _object$key = object.key,\n          key = _object$key === undefined ? null : _object$key,\n          _object$offset = object.offset,\n          offset = _object$offset === undefined ? null : _object$offset,\n          _object$path = object.path,\n          path = _object$path === undefined ? null : _object$path;\n      var point = new Point({\n        key: key,\n        offset: offset,\n        path: PathUtils.create(path)\n      });\n      return point;\n    }\n  }]);\n  return Point;\n}(Record(DEFAULTS$6));\n/**\n * Export.\n *\n * @type {Point}\n */\n\n\nvar DEFAULTS$7 = {\n  anchor: undefined,\n  focus: undefined,\n  mark: undefined\n  /**\n   * Decoration.\n   *\n   * @type {Decoration}\n   */\n\n};\n\nvar Decoration = function (_Record) {\n  inherits(Decoration, _Record);\n\n  function Decoration() {\n    classCallCheck(this, Decoration);\n    return possibleConstructorReturn(this, (Decoration.__proto__ || Object.getPrototypeOf(Decoration)).apply(this, arguments));\n  }\n\n  createClass(Decoration, [{\n    key: 'setProperties',\n\n    /**\n     * Set new `properties` on the decoration.\n     *\n     * @param {Object|Range|Selection} properties\n     * @return {Range}\n     */\n    value: function setProperties(properties) {\n      properties = Decoration.createProperties(properties);\n      var _properties = properties,\n          anchor = _properties.anchor,\n          focus = _properties.focus,\n          mark = _properties.mark;\n      var props = {};\n\n      if (anchor) {\n        props.anchor = Point.create(anchor);\n      }\n\n      if (focus) {\n        props.focus = Point.create(focus);\n      }\n\n      if (mark) {\n        props.mark = Mark.create(mark);\n      }\n\n      var decoration = this.merge(props);\n      return decoration;\n    }\n    /**\n     * Return a JSON representation of the decoration.\n     *\n     * @param {Object} options\n     * @return {Object}\n     */\n\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var object = {\n        object: this.object,\n        anchor: this.anchor.toJSON(options),\n        focus: this.focus.toJSON(options),\n        mark: this.mark.toJSON(options)\n      };\n      return object;\n    }\n  }], [{\n    key: 'create',\n\n    /**\n     * Create a new `Decoration` with `attrs`.\n     *\n     * @param {Object|Decoration} attrs\n     * @return {Decoration}\n     */\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Decoration.isDecoration(attrs)) {\n        return attrs;\n      }\n\n      if (Range.isRange(attrs)) {\n        return Decoration.fromJSON(Range.createProperties(attrs));\n      }\n\n      if (isPlainObject(attrs)) {\n        return Decoration.fromJSON(attrs);\n      }\n\n      throw new Error('`Decoration.create` only accepts objects or decorations, but you passed it: ' + attrs);\n    }\n    /**\n     * Create a list of `Ranges` from `elements`.\n     *\n     * @param {Array<Decoration|Object>|List<Decoration|Object>} elements\n     * @return {List<Decoration>}\n     */\n\n  }, {\n    key: 'createList',\n    value: function createList() {\n      var elements = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      if (List.isList(elements) || Array.isArray(elements)) {\n        var list = new List(elements.map(Decoration.create));\n        return list;\n      }\n\n      throw new Error('`Decoration.createList` only accepts arrays or lists, but you passed it: ' + elements);\n    }\n    /**\n     * Create a dictionary of settable decoration properties from `attrs`.\n     *\n     * @param {Object|String|Decoration} attrs\n     * @return {Object}\n     */\n\n  }, {\n    key: 'createProperties',\n    value: function createProperties() {\n      var a = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Decoration.isDecoration(a)) {\n        return {\n          anchor: Point.createProperties(a.anchor),\n          focus: Point.createProperties(a.focus),\n          mark: Mark.create(a.mark)\n        };\n      }\n\n      if (isPlainObject(a)) {\n        var p = {};\n        if ('anchor' in a) p.anchor = Point.create(a.anchor);\n        if ('focus' in a) p.focus = Point.create(a.focus);\n        if ('mark' in a) p.mark = Mark.create(a.mark);\n        return p;\n      }\n\n      throw new Error('`Decoration.createProperties` only accepts objects or decorations, but you passed it: ' + a);\n    }\n    /**\n     * Create a `Decoration` from a JSON `object`.\n     *\n     * @param {Object} object\n     * @return {Decoration}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(object) {\n      var anchor = object.anchor,\n          focus = object.focus,\n          mark = object.mark;\n\n      if (!mark) {\n        throw new Error('Decorations must be created with a `mark`, but you passed: ' + JSON.stringify(object));\n      }\n\n      var decoration = new Decoration({\n        anchor: Point.fromJSON(anchor || {}),\n        focus: Point.fromJSON(focus || {}),\n        mark: Mark.fromJSON(mark)\n      });\n      return decoration;\n    }\n  }]);\n  return Decoration;\n}(Record(DEFAULTS$7));\n/**\n * Export.\n *\n * @type {Decoration}\n */\n\n/**\n * Slate-specific object types.\n *\n * @type {Object}\n */\n\n\nvar TYPES = {\n  block: '@@__SLATE_BLOCK__@@',\n  change: '@@__SLATE_CHANGE__@@',\n  decoration: '@@__SLATE_DECORATION__@@',\n  document: '@@__SLATE_DOCUMENT__@@',\n  editor: '@@__SLATE_EDITOR__@@',\n  inline: '@@__SLATE_INLINE__@@',\n  mark: '@@__SLATE_MARK__@@',\n  operation: '@@__SLATE_OPERATION__@@',\n  point: '@@__SLATE_POINT__@@',\n  range: '@@__SLATE_RANGE__@@',\n  selection: '@@__SLATE_SELECTION__@@',\n  text: '@@__SLATE_TEXT__@@',\n  value: '@@__SLATE_VALUE__@@'\n  /**\n   * Determine whether a `value` is of `type`.\n   *\n   * @param {string} type\n   * @param {any} value\n   * @return {boolean}\n   */\n\n};\n\nfunction isObject(type, value) {\n  return !!(value && value[TYPES[type]]);\n}\n\nvar DEFAULTS$8 = {\n  anchor: undefined,\n  focus: undefined\n  /**\n   * Range.\n   *\n   * @type {Range}\n   */\n\n};\n\nvar Range = function (_Record) {\n  inherits(Range, _Record);\n\n  function Range() {\n    classCallCheck(this, Range);\n    return possibleConstructorReturn(this, (Range.__proto__ || Object.getPrototypeOf(Range)).apply(this, arguments));\n  }\n\n  createClass(Range, [{\n    key: 'toJSON',\n\n    /**\n     * Return a JSON representation of the range.\n     *\n     * @param {Object} options\n     * @return {Object}\n     */\n    value: function toJSON() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var object = {\n        object: this.object,\n        anchor: this.anchor.toJSON(options),\n        focus: this.focus.toJSON(options)\n      };\n      return object;\n    }\n  }], [{\n    key: 'create',\n\n    /**\n     * Create a new `Range` with `attrs`.\n     *\n     * @param {Object|Range} attrs\n     * @return {Range}\n     */\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Range.isRange(attrs)) {\n        if (attrs.object === 'range') {\n          return attrs;\n        } else {\n          return Range.fromJSON(Range.createProperties(attrs));\n        }\n      }\n\n      if (isPlainObject(attrs)) {\n        return Range.fromJSON(attrs);\n      }\n\n      throw new Error('`Range.create` only accepts objects or ranges, but you passed it: ' + attrs);\n    }\n    /**\n     * Create a list of `Ranges` from `elements`.\n     *\n     * @param {Array<Range|Object>|List<Range|Object>} elements\n     * @return {List<Range>}\n     */\n\n  }, {\n    key: 'createList',\n    value: function createList() {\n      var elements = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      if (List.isList(elements) || Array.isArray(elements)) {\n        var list = new List(elements.map(Range.create));\n        return list;\n      }\n\n      throw new Error('`Range.createList` only accepts arrays or lists, but you passed it: ' + elements);\n    }\n    /**\n     * Create a dictionary of settable range properties from `attrs`.\n     *\n     * @param {Object|String|Range} attrs\n     * @return {Object}\n     */\n\n  }, {\n    key: 'createProperties',\n    value: function createProperties() {\n      var a = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Range.isRange(a)) {\n        return {\n          anchor: Point.createProperties(a.anchor),\n          focus: Point.createProperties(a.focus)\n        };\n      }\n\n      if (isPlainObject(a)) {\n        var p = {};\n        if ('anchor' in a) p.anchor = Point.create(a.anchor);\n        if ('focus' in a) p.focus = Point.create(a.focus);\n        return p;\n      }\n\n      throw new Error('`Range.createProperties` only accepts objects, decorations, ranges or selections, but you passed it: ' + a);\n    }\n    /**\n     * Create a `Range` from a JSON `object`.\n     *\n     * @param {Object} object\n     * @return {Range}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(object) {\n      var anchor = object.anchor,\n          focus = object.focus;\n      var range = new Range({\n        anchor: Point.fromJSON(anchor || {}),\n        focus: Point.fromJSON(focus || {})\n      });\n      return range;\n    }\n    /**\n     * Check if a `value` is a `Range`, or is range-like.\n     *\n     * @param {Any} value\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isRange',\n    value: function isRange(value) {\n      return isObject('range', value) || Decoration.isDecoration(value) || Selection.isSelection(value);\n    }\n  }]);\n  return Range;\n}(Record(DEFAULTS$8));\n/**\n * Export.\n *\n * @type {Range}\n */\n\n\nvar DEFAULTS$9 = {\n  anchor: undefined,\n  focus: undefined,\n  isFocused: undefined,\n  marks: undefined\n  /**\n   * Selection.\n   *\n   * @type {Selection}\n   */\n\n};\n\nvar Selection = function (_Record) {\n  inherits(Selection, _Record);\n\n  function Selection() {\n    classCallCheck(this, Selection);\n    return possibleConstructorReturn(this, (Selection.__proto__ || Object.getPrototypeOf(Selection)).apply(this, arguments));\n  }\n\n  createClass(Selection, [{\n    key: 'setIsFocused',\n\n    /**\n     * Set the `isFocused` property to a new `value`.\n     *\n     * @param {Boolean} value\n     * @return {Selection}\n     */\n    value: function setIsFocused(value) {\n      var selection = this.set('isFocused', value);\n      return selection;\n    }\n    /**\n     * Set the `marks` property to a new set of `marks`.\n     *\n     * @param {Set} marks\n     * @return {Selection}\n     */\n\n  }, {\n    key: 'setMarks',\n    value: function setMarks(marks) {\n      var selection = this.set('marks', marks);\n      return selection;\n    }\n    /**\n     * Set new `properties` on the selection.\n     *\n     * @param {Object|Range|Selection} properties\n     * @return {Range}\n     */\n\n  }, {\n    key: 'setProperties',\n    value: function setProperties(properties) {\n      properties = Selection.createProperties(properties);\n      var _properties = properties,\n          anchor = _properties.anchor,\n          focus = _properties.focus,\n          props = objectWithoutProperties(_properties, ['anchor', 'focus']);\n\n      if (anchor) {\n        props.anchor = Point.create(anchor);\n      }\n\n      if (focus) {\n        props.focus = Point.create(focus);\n      }\n\n      var selection = this.merge(props);\n      return selection;\n    }\n    /**\n     * Return a JSON representation of the selection.\n     *\n     * @param {Object} options\n     * @return {Object}\n     */\n\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var object = {\n        object: this.object,\n        anchor: this.anchor.toJSON(options),\n        focus: this.focus.toJSON(options),\n        isFocused: this.isFocused,\n        marks: this.marks == null ? null : this.marks.toArray().map(function (m) {\n          return m.toJSON();\n        })\n      };\n      return object;\n    }\n  }, {\n    key: 'isBlurred',\n\n    /**\n     * Check whether the selection is blurred.\n     *\n     * @return {Boolean}\n     */\n    get: function get$$1() {\n      return !this.isFocused;\n    }\n  }], [{\n    key: 'create',\n\n    /**\n     * Create a new `Selection` with `attrs`.\n     *\n     * @param {Object|Selection} attrs\n     * @return {Selection}\n     */\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Selection.isSelection(attrs)) {\n        return attrs;\n      }\n\n      if (Range.isRange(attrs)) {\n        return Selection.fromJSON(Range.createProperties(attrs));\n      }\n\n      if (isPlainObject(attrs)) {\n        return Selection.fromJSON(attrs);\n      }\n\n      throw new Error('`Selection.create` only accepts objects, ranges or selections, but you passed it: ' + attrs);\n    }\n    /**\n     * Create a dictionary of settable selection properties from `attrs`.\n     *\n     * @param {Object|String|Selection} attrs\n     * @return {Object}\n     */\n\n  }, {\n    key: 'createProperties',\n    value: function createProperties() {\n      var a = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Selection.isSelection(a)) {\n        return {\n          anchor: Point.createProperties(a.anchor),\n          focus: Point.createProperties(a.focus),\n          isFocused: a.isFocused,\n          marks: a.marks\n        };\n      }\n\n      if (Range.isRange(a)) {\n        return {\n          anchor: Point.createProperties(a.anchor),\n          focus: Point.createProperties(a.focus)\n        };\n      }\n\n      if (isPlainObject(a)) {\n        var p = {};\n        if ('anchor' in a) p.anchor = Point.create(a.anchor);\n        if ('focus' in a) p.focus = Point.create(a.focus);\n        if ('isFocused' in a) p.isFocused = a.isFocused;\n        if ('marks' in a) p.marks = a.marks == null ? null : Mark.createSet(a.marks);\n        return p;\n      }\n\n      throw new Error('`Selection.createProperties` only accepts objects, ranges or selections, but you passed it: ' + a);\n    }\n    /**\n     * Create a `Selection` from a JSON `object`.\n     *\n     * @param {Object} object\n     * @return {Selection}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(object) {\n      var anchor = object.anchor,\n          focus = object.focus,\n          _object$isFocused = object.isFocused,\n          isFocused = _object$isFocused === undefined ? false : _object$isFocused,\n          _object$marks = object.marks,\n          marks = _object$marks === undefined ? null : _object$marks;\n      var selection = new Selection({\n        anchor: Point.fromJSON(anchor || {}),\n        focus: Point.fromJSON(focus || {}),\n        isFocused: isFocused,\n        marks: marks == null ? null : new Set(marks.map(Mark.fromJSON))\n      });\n      return selection;\n    }\n  }]);\n  return Selection;\n}(Record(DEFAULTS$9));\n/**\n * Export.\n *\n * @type {Selection}\n */\n\n\nvar DEFAULTS$10 = {\n  data: undefined,\n  decorations: undefined,\n  document: undefined,\n  selection: undefined\n  /**\n   * Value.\n   *\n   * @type {Value}\n   */\n\n};\n\nvar Value = function (_Record) {\n  inherits(Value, _Record);\n\n  function Value() {\n    classCallCheck(this, Value);\n    return possibleConstructorReturn(this, (Value.__proto__ || Object.getPrototypeOf(Value)).apply(this, arguments));\n  }\n\n  createClass(Value, [{\n    key: 'addMark',\n\n    /**\n     * Add mark to text at `offset` and `length` in node by `path`.\n     *\n     * @param {List|String} path\n     * @param {Number} offset\n     * @param {Number} length\n     * @param {Mark} mark\n     * @return {Value}\n     */\n    value: function addMark(path, offset, length, mark) {\n      var value = this;\n      var _value = value,\n          document = _value.document;\n      document = document.addMark(path, offset, length, mark);\n      value = this.set('document', document);\n      return value;\n    }\n    /**\n     * Insert a `node`.\n     *\n     * @param {List|String} path\n     * @param {Node} node\n     * @return {Value}\n     */\n\n  }, {\n    key: 'insertNode',\n    value: function insertNode(path, node) {\n      var value = this;\n      var _value2 = value,\n          document = _value2.document;\n      document = document.insertNode(path, node);\n      value = value.set('document', document);\n      value = value.mapRanges(function (range) {\n        return range.updatePoints(function (point) {\n          return point.setPath(null);\n        });\n      });\n      return value;\n    }\n    /**\n     * Insert `text` at `offset` in node by `path`.\n     *\n     * @param {List|String} path\n     * @param {Number} offset\n     * @param {String} text\n     * @param {Set} marks\n     * @return {Value}\n     */\n\n  }, {\n    key: 'insertText',\n    value: function insertText(path, offset, text, marks) {\n      var value = this;\n      var _value3 = value,\n          document = _value3.document;\n      var node = document.assertNode(path);\n      document = document.insertText(path, offset, text, marks);\n      value = value.set('document', document);\n      value = value.mapRanges(function (range) {\n        return range.updatePoints(function (point) {\n          return point.key === node.key && point.offset >= offset ? point.setOffset(point.offset + text.length) : point;\n        });\n      });\n      return value;\n    }\n    /**\n     * Merge a node backwards its previous sibling.\n     *\n     * @param {List|Key} path\n     * @return {Value}\n     */\n\n  }, {\n    key: 'mergeNode',\n    value: function mergeNode(path) {\n      var value = this;\n      var _value4 = value,\n          document = _value4.document;\n      var newDocument = document.mergeNode(path);\n      path = document.resolvePath(path);\n      var withPath = PathUtils.decrement(path);\n      var one = document.getNode(withPath);\n      var two = document.getNode(path);\n      value = value.set('document', newDocument);\n      value = value.mapRanges(function (range) {\n        if (two.object === 'text') {\n          var max = one.text.length;\n\n          if (range.anchor.key === two.key) {\n            range = range.moveAnchorTo(one.key, max + range.anchor.offset);\n          }\n\n          if (range.focus.key === two.key) {\n            range = range.moveFocusTo(one.key, max + range.focus.offset);\n          }\n        }\n\n        range = range.updatePoints(function (point) {\n          return point.setPath(null);\n        });\n        return range;\n      });\n      return value;\n    }\n    /**\n     * Move a node by `path` to `newPath`.\n     *\n     * A `newIndex` can be provided when move nodes by `key`, to account for not\n     * being able to have a key for a location in the tree that doesn't exist yet.\n     *\n     * @param {List|Key} path\n     * @param {List|Key} newPath\n     * @param {Number} newIndex\n     * @return {Value}\n     */\n\n  }, {\n    key: 'moveNode',\n    value: function moveNode(path, newPath) {\n      var newIndex = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var value = this;\n      var _value5 = value,\n          document = _value5.document;\n      document = document.moveNode(path, newPath, newIndex);\n      value = value.set('document', document);\n      value = value.mapRanges(function (range) {\n        return range.updatePoints(function (point) {\n          return point.setPath(null);\n        });\n      });\n      return value;\n    }\n    /**\n     * Remove mark from text at `offset` and `length` in node.\n     *\n     * @param {List|String} path\n     * @param {Number} offset\n     * @param {Number} length\n     * @param {Mark} mark\n     * @return {Value}\n     */\n\n  }, {\n    key: 'removeMark',\n    value: function removeMark(path, offset, length, mark) {\n      var value = this;\n      var _value6 = value,\n          document = _value6.document;\n      document = document.removeMark(path, offset, length, mark);\n      value = this.set('document', document);\n      return value;\n    }\n    /**\n     * Remove a node by `path`.\n     *\n     * @param {List|String} path\n     * @return {Value}\n     */\n\n  }, {\n    key: 'removeNode',\n    value: function removeNode(path) {\n      var value = this;\n      var _value7 = value,\n          document = _value7.document;\n      var node = document.assertNode(path);\n      var first = node.object === 'text' ? node : node.getFirstText() || node;\n      var last = node.object === 'text' ? node : node.getLastText() || node;\n      var prev = document.getPreviousText(first.key);\n      var next = document.getNextText(last.key);\n      document = document.removeNode(path);\n      value = value.set('document', document);\n      value = value.mapRanges(function (range) {\n        var _range = range,\n            start = _range.start,\n            end = _range.end;\n\n        if (node.hasNode(start.key)) {\n          range = prev ? range.moveStartTo(prev.key, prev.text.length) : next ? range.moveStartTo(next.key, 0) : range.unset();\n        }\n\n        if (node.hasNode(end.key)) {\n          range = prev ? range.moveEndTo(prev.key, prev.text.length) : next ? range.moveEndTo(next.key, 0) : range.unset();\n        }\n\n        range = range.updatePoints(function (point) {\n          return point.setPath(null);\n        });\n        return range;\n      });\n      return value;\n    }\n    /**\n     * Remove `text` at `offset` in node by `path`.\n     *\n     * @param {List|Key} path\n     * @param {Number} offset\n     * @param {String} text\n     * @return {Value}\n     */\n\n  }, {\n    key: 'removeText',\n    value: function removeText(path, offset, text) {\n      var value = this;\n      var _value8 = value,\n          document = _value8.document;\n      var node = document.assertNode(path);\n      document = document.removeText(path, offset, text);\n      value = value.set('document', document);\n      var length = text.length;\n      var start = offset;\n      var end = offset + length;\n      value = value.mapRanges(function (range) {\n        return range.updatePoints(function (point) {\n          if (point.key !== node.key) {\n            return point;\n          }\n\n          if (point.offset >= end) {\n            return point.setOffset(point.offset - length);\n          }\n\n          if (point.offset > start) {\n            return point.setOffset(start);\n          }\n\n          return point;\n        });\n      });\n      return value;\n    }\n    /**\n     * Set `properties` on a node.\n     *\n     * @param {List|String} path\n     * @param {Object} properties\n     * @return {Value}\n     */\n\n  }, {\n    key: 'setNode',\n    value: function setNode(path, properties) {\n      var value = this;\n      var _value9 = value,\n          document = _value9.document;\n      document = document.setNode(path, properties);\n      value = value.set('document', document);\n      return value;\n    }\n    /**\n     * Set `properties` on `mark` on text at `offset` and `length` in node.\n     *\n     * @param {List|String} path\n     * @param {Number} offset\n     * @param {Number} length\n     * @param {Mark} mark\n     * @param {Object} properties\n     * @return {Value}\n     */\n\n  }, {\n    key: 'setMark',\n    value: function setMark(path, offset, length, mark, properties) {\n      var value = this;\n      var _value10 = value,\n          document = _value10.document;\n      document = document.setMark(path, offset, length, mark, properties);\n      value = value.set('document', document);\n      return value;\n    }\n    /**\n     * Set `properties` on the value.\n     *\n     * @param {Object} properties\n     * @return {Value}\n     */\n\n  }, {\n    key: 'setProperties',\n    value: function setProperties(properties) {\n      var value = this;\n      var _value11 = value,\n          document = _value11.document;\n      var data = properties.data,\n          decorations = properties.decorations;\n      var props = {};\n\n      if (data) {\n        props.data = data;\n      }\n\n      if (decorations) {\n        props.decorations = decorations.map(function (d) {\n          return d.isSet ? d : document.resolveDecoration(d);\n        });\n      }\n\n      value = value.merge(props);\n      return value;\n    }\n    /**\n     * Set `properties` on the selection.\n     *\n     * @param {Value} value\n     * @param {Operation} operation\n     * @return {Value}\n     */\n\n  }, {\n    key: 'setSelection',\n    value: function setSelection(properties) {\n      var value = this;\n      var _value12 = value,\n          document = _value12.document,\n          selection = _value12.selection;\n      var next = selection.setProperties(properties);\n      selection = document.resolveSelection(next);\n      value = value.set('selection', selection);\n      return value;\n    }\n    /**\n     * Split a node by `path` at `position` with optional `properties` to apply\n     * to the newly split node.\n     *\n     * @param {List|String} path\n     * @param {Number} position\n     * @param {Object} properties\n     * @return {Value}\n     */\n\n  }, {\n    key: 'splitNode',\n    value: function splitNode(path, position, properties) {\n      var value = this;\n      var _value13 = value,\n          document = _value13.document;\n      var newDocument = document.splitNode(path, position, properties);\n      var node = document.assertNode(path);\n      value = value.set('document', newDocument);\n      value = value.mapRanges(function (range) {\n        var next = newDocument.getNextText(node.key);\n        var _range2 = range,\n            start = _range2.start,\n            end = _range2.end; // If the start was after the split, move it to the next node.\n\n        if (node.key === start.key && position <= start.offset) {\n          range = range.moveStartTo(next.key, start.offset - position);\n        } // If the end was after the split, move it to the next node.\n\n\n        if (node.key === end.key && position <= end.offset) {\n          range = range.moveEndTo(next.key, end.offset - position);\n        }\n\n        range = range.updatePoints(function (point) {\n          return point.setPath(null);\n        });\n        return range;\n      });\n      return value;\n    }\n    /**\n     * Map all range objects to apply adjustments with an `iterator`.\n     *\n     * @param {Function} iterator\n     * @return {Value}\n     */\n\n  }, {\n    key: 'mapRanges',\n    value: function mapRanges(iterator) {\n      var value = this;\n      var _value14 = value,\n          document = _value14.document,\n          selection = _value14.selection,\n          decorations = _value14.decorations;\n      var sel = selection.isSet ? iterator(selection) : selection;\n      if (!sel) sel = selection.unset();\n      if (sel !== selection) sel = document.createSelection(sel);\n      value = value.set('selection', sel);\n      var decs = decorations.map(function (decoration) {\n        var n = decoration.isSet ? iterator(decoration) : decoration;\n        if (n && n !== decoration) n = document.createDecoration(n);\n        return n;\n      });\n      decs = decs.filter(function (decoration) {\n        return !!decoration;\n      });\n      value = value.set('decorations', decs);\n      return value;\n    }\n    /**\n     * Return a JSON representation of the value.\n     *\n     * @param {Object} options\n     * @return {Object}\n     */\n\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var object = {\n        object: this.object,\n        document: this.document.toJSON(options)\n      };\n\n      if (options.preserveData) {\n        object.data = this.data.toJSON(options);\n      }\n\n      if (options.preserveDecorations) {\n        object.decorations = this.decorations.toArray().map(function (d) {\n          return d.toJSON(options);\n        });\n      }\n\n      if (options.preserveSelection) {\n        object.selection = this.selection.toJSON(options);\n      }\n\n      return object;\n    }\n    /**\n     * Deprecated.\n     */\n\n  }, {\n    key: 'change',\n    value: function change() {\n      invariant(false, 'As of Slate 0.42.0, value object are no longer schema-aware, and the `value.change()` method is no longer available. Use the `editor.change()` method on the new `Editor` controller instead.');\n    }\n  }, {\n    key: 'startBlock',\n\n    /**\n     * Get the current start text node's closest block parent.\n     *\n     * @return {Block}\n     */\n    get: function get$$1() {\n      return this.selection.start.key && this.document.getClosestBlock(this.selection.start.key);\n    }\n    /**\n     * Get the current end text node's closest block parent.\n     *\n     * @return {Block}\n     */\n\n  }, {\n    key: 'endBlock',\n    get: function get$$1() {\n      return this.selection.end.key && this.document.getClosestBlock(this.selection.end.key);\n    }\n    /**\n     * Get the current anchor text node's closest block parent.\n     *\n     * @return {Block}\n     */\n\n  }, {\n    key: 'anchorBlock',\n    get: function get$$1() {\n      return this.selection.anchor.key && this.document.getClosestBlock(this.selection.anchor.key);\n    }\n    /**\n     * Get the current focus text node's closest block parent.\n     *\n     * @return {Block}\n     */\n\n  }, {\n    key: 'focusBlock',\n    get: function get$$1() {\n      return this.selection.focus.key && this.document.getClosestBlock(this.selection.focus.key);\n    }\n    /**\n     * Get the current start text node's closest inline parent.\n     *\n     * @return {Inline}\n     */\n\n  }, {\n    key: 'startInline',\n    get: function get$$1() {\n      return this.selection.start.key && this.document.getClosestInline(this.selection.start.key);\n    }\n    /**\n     * Get the current end text node's closest inline parent.\n     *\n     * @return {Inline}\n     */\n\n  }, {\n    key: 'endInline',\n    get: function get$$1() {\n      return this.selection.end.key && this.document.getClosestInline(this.selection.end.key);\n    }\n    /**\n     * Get the current anchor text node's closest inline parent.\n     *\n     * @return {Inline}\n     */\n\n  }, {\n    key: 'anchorInline',\n    get: function get$$1() {\n      return this.selection.anchor.key && this.document.getClosestInline(this.selection.anchor.key);\n    }\n    /**\n     * Get the current focus text node's closest inline parent.\n     *\n     * @return {Inline}\n     */\n\n  }, {\n    key: 'focusInline',\n    get: function get$$1() {\n      return this.selection.focus.key && this.document.getClosestInline(this.selection.focus.key);\n    }\n    /**\n     * Get the current start text node.\n     *\n     * @return {Text}\n     */\n\n  }, {\n    key: 'startText',\n    get: function get$$1() {\n      return this.selection.start.key && this.document.getDescendant(this.selection.start.key);\n    }\n    /**\n     * Get the current end node.\n     *\n     * @return {Text}\n     */\n\n  }, {\n    key: 'endText',\n    get: function get$$1() {\n      return this.selection.end.key && this.document.getDescendant(this.selection.end.key);\n    }\n    /**\n     * Get the current anchor node.\n     *\n     * @return {Text}\n     */\n\n  }, {\n    key: 'anchorText',\n    get: function get$$1() {\n      return this.selection.anchor.key && this.document.getDescendant(this.selection.anchor.key);\n    }\n    /**\n     * Get the current focus node.\n     *\n     * @return {Text}\n     */\n\n  }, {\n    key: 'focusText',\n    get: function get$$1() {\n      return this.selection.focus.key && this.document.getDescendant(this.selection.focus.key);\n    }\n    /**\n     * Get the next block node.\n     *\n     * @return {Block}\n     */\n\n  }, {\n    key: 'nextBlock',\n    get: function get$$1() {\n      return this.selection.end.key && this.document.getNextBlock(this.selection.end.key);\n    }\n    /**\n     * Get the previous block node.\n     *\n     * @return {Block}\n     */\n\n  }, {\n    key: 'previousBlock',\n    get: function get$$1() {\n      return this.selection.start.key && this.document.getPreviousBlock(this.selection.start.key);\n    }\n    /**\n     * Get the next inline node.\n     *\n     * @return {Inline}\n     */\n\n  }, {\n    key: 'nextInline',\n    get: function get$$1() {\n      return this.selection.end.key && this.document.getNextInline(this.selection.end.key);\n    }\n    /**\n     * Get the previous inline node.\n     *\n     * @return {Inline}\n     */\n\n  }, {\n    key: 'previousInline',\n    get: function get$$1() {\n      return this.selection.start.key && this.document.getPreviousInline(this.selection.start.key);\n    }\n    /**\n     * Get the next text node.\n     *\n     * @return {Text}\n     */\n\n  }, {\n    key: 'nextText',\n    get: function get$$1() {\n      return this.selection.end.key && this.document.getNextText(this.selection.end.key);\n    }\n    /**\n     * Get the previous text node.\n     *\n     * @return {Text}\n     */\n\n  }, {\n    key: 'previousText',\n    get: function get$$1() {\n      return this.selection.start.key && this.document.getPreviousText(this.selection.start.key);\n    }\n    /**\n     * Get the marks of the current selection.\n     *\n     * @return {Set<Mark>}\n     */\n\n  }, {\n    key: 'marks',\n    get: function get$$1() {\n      return this.selection.isUnset ? new Set() : this.selection.marks || this.document.getMarksAtRange(this.selection);\n    }\n    /**\n     * Get the active marks of the current selection.\n     *\n     * @return {Set<Mark>}\n     */\n\n  }, {\n    key: 'activeMarks',\n    get: function get$$1() {\n      return this.selection.isUnset ? new Set() : this.selection.marks || this.document.getActiveMarksAtRange(this.selection);\n    }\n    /**\n     * Get the block nodes in the current selection.\n     *\n     * @return {List<Block>}\n     */\n\n  }, {\n    key: 'blocks',\n    get: function get$$1() {\n      return this.selection.isUnset ? new List() : this.document.getLeafBlocksAtRange(this.selection);\n    }\n    /**\n     * Get the fragment of the current selection.\n     *\n     * @return {Document}\n     */\n\n  }, {\n    key: 'fragment',\n    get: function get$$1() {\n      return this.selection.isUnset ? Document.create() : this.document.getFragmentAtRange(this.selection);\n    }\n    /**\n     * Get the bottom-most inline nodes in the current selection.\n     *\n     * @return {List<Inline>}\n     */\n\n  }, {\n    key: 'inlines',\n    get: function get$$1() {\n      return this.selection.isUnset ? new List() : this.document.getLeafInlinesAtRange(this.selection);\n    }\n    /**\n     * Get the text nodes in the current selection.\n     *\n     * @return {List<Text>}\n     */\n\n  }, {\n    key: 'texts',\n    get: function get$$1() {\n      return this.selection.isUnset ? new List() : this.document.getTextsAtRange(this.selection);\n    }\n  }, {\n    key: 'history',\n    get: function get$$1() {\n      invariant(false, 'As of Slate 0.42.0, the `value.history` model no longer exists, and the history is stored in `value.data` instead using plugins.');\n    }\n  }], [{\n    key: 'create',\n\n    /**\n     * Create a new `Value` with `attrs`.\n     *\n     * @param {Object|Value} attrs\n     * @param {Object} options\n     * @return {Value}\n     */\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      if (Value.isValue(attrs)) {\n        return attrs;\n      }\n\n      if (isPlainObject(attrs)) {\n        return Value.fromJSON(attrs, options);\n      }\n\n      throw new Error('`Value.create` only accepts objects or values, but you passed it: ' + attrs);\n    }\n    /**\n     * Create a dictionary of settable value properties from `attrs`.\n     *\n     * @param {Object|Value} attrs\n     * @return {Object}\n     */\n\n  }, {\n    key: 'createProperties',\n    value: function createProperties() {\n      var a = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Value.isValue(a)) {\n        return {\n          data: a.data,\n          decorations: a.decorations\n        };\n      }\n\n      if (isPlainObject(a)) {\n        var p = {};\n        if ('data' in a) p.data = Data.create(a.data);\n        if ('decorations' in a) p.decorations = Decoration.createList(a.decorations);\n        return p;\n      }\n\n      throw new Error('`Value.createProperties` only accepts objects or values, but you passed it: ' + a);\n    }\n    /**\n     * Create a `Value` from a JSON `object`.\n     *\n     * @param {Object} object\n     * @param {Object} options\n     *   @property {Boolean} normalize\n     *   @property {Array} plugins\n     * @return {Value}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(object) {\n      var _object$data = object.data,\n          data = _object$data === undefined ? {} : _object$data,\n          _object$decorations = object.decorations,\n          decorations = _object$decorations === undefined ? [] : _object$decorations,\n          _object$document = object.document,\n          document = _object$document === undefined ? {} : _object$document,\n          _object$selection = object.selection,\n          selection = _object$selection === undefined ? {} : _object$selection;\n      data = Data.fromJSON(data);\n      document = Document.fromJSON(document);\n      selection = document.createSelection(selection);\n      decorations = List(decorations.map(function (d) {\n        return Decoration.fromJSON(d);\n      }));\n\n      if (selection.isUnset) {\n        var text = document.getFirstText();\n        if (text) selection = selection.moveToStartOfNode(text);\n        selection = document.createSelection(selection);\n      }\n\n      var value = new Value({\n        data: data,\n        decorations: decorations,\n        document: document,\n        selection: selection\n      });\n      return value;\n    }\n  }]);\n  return Value;\n}(Record(DEFAULTS$10));\n/**\n * Export.\n */\n\n\nvar debug = Debug('slate:operation:apply');\n/**\n * Apply an `op` to a `value`.\n *\n * @param {Value} value\n * @param {Object|Operation} op\n * @return {Value} value\n */\n\nfunction applyOperation(value, op) {\n  op = Operation.create(op);\n  var _op = op,\n      type = _op.type;\n  debug(type, op);\n\n  switch (type) {\n    case 'add_mark':\n      {\n        var _op2 = op,\n            path = _op2.path,\n            offset = _op2.offset,\n            length = _op2.length,\n            mark = _op2.mark;\n        var next = value.addMark(path, offset, length, mark);\n        return next;\n      }\n\n    case 'insert_node':\n      {\n        var _op3 = op,\n            _path = _op3.path,\n            node = _op3.node;\n\n        var _next = value.insertNode(_path, node);\n\n        return _next;\n      }\n\n    case 'insert_text':\n      {\n        var _op4 = op,\n            _path2 = _op4.path,\n            _offset = _op4.offset,\n            text = _op4.text,\n            marks = _op4.marks;\n\n        var _next2 = value.insertText(_path2, _offset, text, marks);\n\n        return _next2;\n      }\n\n    case 'merge_node':\n      {\n        var _op5 = op,\n            _path3 = _op5.path;\n\n        var _next3 = value.mergeNode(_path3);\n\n        return _next3;\n      }\n\n    case 'move_node':\n      {\n        var _op6 = op,\n            _path4 = _op6.path,\n            newPath = _op6.newPath;\n\n        if (PathUtils.isEqual(_path4, newPath)) {\n          return value;\n        }\n\n        var _next4 = value.moveNode(_path4, newPath);\n\n        return _next4;\n      }\n\n    case 'remove_mark':\n      {\n        var _op7 = op,\n            _path5 = _op7.path,\n            _offset2 = _op7.offset,\n            _length = _op7.length,\n            _mark = _op7.mark;\n\n        var _next5 = value.removeMark(_path5, _offset2, _length, _mark);\n\n        return _next5;\n      }\n\n    case 'remove_node':\n      {\n        var _op8 = op,\n            _path6 = _op8.path;\n\n        var _next6 = value.removeNode(_path6);\n\n        return _next6;\n      }\n\n    case 'remove_text':\n      {\n        var _op9 = op,\n            _path7 = _op9.path,\n            _offset3 = _op9.offset,\n            _text = _op9.text;\n\n        var _next7 = value.removeText(_path7, _offset3, _text);\n\n        return _next7;\n      }\n\n    case 'set_mark':\n      {\n        var _op10 = op,\n            _path8 = _op10.path,\n            _offset4 = _op10.offset,\n            _length2 = _op10.length,\n            properties = _op10.properties,\n            newProperties = _op10.newProperties;\n\n        var _next8 = value.setMark(_path8, _offset4, _length2, properties, newProperties);\n\n        return _next8;\n      }\n\n    case 'set_node':\n      {\n        var _op11 = op,\n            _path9 = _op11.path,\n            _newProperties = _op11.newProperties;\n\n        var _next9 = value.setNode(_path9, _newProperties);\n\n        return _next9;\n      }\n\n    case 'set_selection':\n      {\n        var _op12 = op,\n            _newProperties2 = _op12.newProperties;\n\n        var _next10 = value.setSelection(_newProperties2);\n\n        return _next10;\n      }\n\n    case 'set_value':\n      {\n        var _op13 = op,\n            _newProperties3 = _op13.newProperties;\n\n        var _next11 = value.setProperties(_newProperties3);\n\n        return _next11;\n      }\n\n    case 'split_node':\n      {\n        var _op14 = op,\n            _path10 = _op14.path,\n            position = _op14.position,\n            _properties = _op14.properties;\n\n        var _next12 = value.splitNode(_path10, position, _properties);\n\n        return _next12;\n      }\n\n    default:\n      {\n        throw new Error('Unknown operation type: \"' + type + '\".');\n      }\n  }\n}\n/**\n * Export.\n *\n * @type {Function}\n */\n\n\nvar debug$1 = Debug('slate:operation:invert');\n/**\n * Invert an `op`.\n *\n * @param {Object} op\n * @return {Object}\n */\n\nfunction invertOperation(op) {\n  op = Operation.create(op);\n  var _op = op,\n      type = _op.type;\n  debug$1(type, op);\n\n  switch (type) {\n    case 'insert_node':\n      {\n        var inverse = op.set('type', 'remove_node');\n        return inverse;\n      }\n\n    case 'remove_node':\n      {\n        var _inverse = op.set('type', 'insert_node');\n\n        return _inverse;\n      }\n\n    case 'move_node':\n      {\n        var _op2 = op,\n            newPath = _op2.newPath,\n            path = _op2.path;\n\n        if (PathUtils.isEqual(newPath, path)) {\n          return op;\n        } // Get the true path that the moved node ended up at\n\n\n        var inversePath = PathUtils.transform(path, op).first(); // Get the true path we are trying to move back to\n        // We transform the right-sibling of the path\n        // This will end up at the operation.path most of the time\n        // But if the newPath is a left-sibling or left-ancestor-sibling, this will account for it\n\n        var transformedSibling = PathUtils.transform(PathUtils.increment(path), op).first();\n\n        var _inverse2 = op.set('path', inversePath).set('newPath', transformedSibling);\n\n        return _inverse2;\n      }\n\n    case 'merge_node':\n      {\n        var _op3 = op,\n            _path = _op3.path;\n\n        var _inversePath = PathUtils.decrement(_path);\n\n        var _inverse3 = op.set('type', 'split_node').set('path', _inversePath);\n\n        return _inverse3;\n      }\n\n    case 'split_node':\n      {\n        var _op4 = op,\n            _path2 = _op4.path;\n\n        var _inversePath2 = PathUtils.increment(_path2);\n\n        var _inverse4 = op.set('type', 'merge_node').set('path', _inversePath2);\n\n        return _inverse4;\n      }\n\n    case 'set_node':\n    case 'set_value':\n    case 'set_selection':\n    case 'set_mark':\n      {\n        var _op5 = op,\n            properties = _op5.properties,\n            newProperties = _op5.newProperties;\n\n        var _inverse5 = op.set('properties', newProperties).set('newProperties', properties);\n\n        return _inverse5;\n      }\n\n    case 'insert_text':\n      {\n        var _inverse6 = op.set('type', 'remove_text');\n\n        return _inverse6;\n      }\n\n    case 'remove_text':\n      {\n        var _inverse7 = op.set('type', 'insert_text');\n\n        return _inverse7;\n      }\n\n    case 'add_mark':\n      {\n        var _inverse8 = op.set('type', 'remove_mark');\n\n        return _inverse8;\n      }\n\n    case 'remove_mark':\n      {\n        var _inverse9 = op.set('type', 'add_mark');\n\n        return _inverse9;\n      }\n\n    default:\n      {\n        throw new Error('Unknown operation type: \"' + type + '\".');\n      }\n  }\n}\n/**\n * Export.\n *\n * @type {Function}\n */\n\n\nvar OPERATION_ATTRIBUTES = {\n  add_mark: ['path', 'offset', 'length', 'mark', 'data'],\n  insert_node: ['path', 'node', 'data'],\n  insert_text: ['path', 'offset', 'text', 'marks', 'data'],\n  merge_node: ['path', 'position', 'properties', 'target', 'data'],\n  move_node: ['path', 'newPath', 'data'],\n  remove_mark: ['path', 'offset', 'length', 'mark', 'data'],\n  remove_node: ['path', 'node', 'data'],\n  remove_text: ['path', 'offset', 'text', 'marks', 'data'],\n  set_mark: ['path', 'offset', 'length', 'properties', 'newProperties', 'data'],\n  set_node: ['path', 'properties', 'newProperties', 'data'],\n  set_selection: ['properties', 'newProperties', 'data'],\n  set_value: ['properties', 'newProperties', 'data'],\n  split_node: ['path', 'position', 'properties', 'target', 'data']\n  /**\n   * Default properties.\n   *\n   * @type {Object}\n   */\n\n};\nvar DEFAULTS$11 = {\n  length: undefined,\n  mark: undefined,\n  marks: undefined,\n  newPath: undefined,\n  node: undefined,\n  offset: undefined,\n  path: undefined,\n  position: undefined,\n  properties: undefined,\n  newProperties: undefined,\n  target: undefined,\n  text: undefined,\n  type: undefined,\n  data: undefined\n  /**\n   * Operation.\n   *\n   * @type {Operation}\n   */\n\n};\n\nvar Operation = function (_Record) {\n  inherits(Operation, _Record);\n\n  function Operation() {\n    classCallCheck(this, Operation);\n    return possibleConstructorReturn(this, (Operation.__proto__ || Object.getPrototypeOf(Operation)).apply(this, arguments));\n  }\n\n  createClass(Operation, [{\n    key: 'apply',\n\n    /**\n     * Apply the operation to a `value`.\n     *\n     * @param {Value} value\n     * @return {Value}\n     */\n    value: function apply(value) {\n      var next = applyOperation(value, this);\n      return next;\n    }\n    /**\n     * Invert the operation.\n     *\n     * @return {Operation}\n     */\n\n  }, {\n    key: 'invert',\n    value: function invert() {\n      var inverted = invertOperation(this);\n      return inverted;\n    }\n    /**\n     * Return a JSON representation of the operation.\n     *\n     * @param {Object} options\n     * @return {Object}\n     */\n\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      var object = this.object,\n          type = this.type;\n      var json = {\n        object: object,\n        type: type\n      };\n      var ATTRIBUTES = OPERATION_ATTRIBUTES[type];\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = ATTRIBUTES[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var key = _step.value;\n          var value = this[key];\n\n          if (key === 'mark' || key === 'marks' || key === 'node' || key === 'path' || key === 'newPath') {\n            value = value.toJSON();\n          }\n\n          if (key === 'properties' && type === 'merge_node') {\n            var v = {};\n            if ('data' in value) v.data = value.data.toJS();\n            if ('type' in value) v.type = value.type;\n            value = v;\n          }\n\n          if ((key === 'properties' || key === 'newProperties') && type === 'set_mark') {\n            var _v = {};\n            if ('data' in value) _v.data = value.data.toJS();\n            if ('type' in value) _v.type = value.type;\n            value = _v;\n          }\n\n          if ((key === 'properties' || key === 'newProperties') && type === 'set_node') {\n            var _v2 = {};\n            if ('data' in value) _v2.data = value.data.toJS();\n            if ('type' in value) _v2.type = value.type;\n            value = _v2;\n          }\n\n          if ((key === 'properties' || key === 'newProperties') && type === 'set_selection') {\n            var _v3 = {};\n            if ('anchor' in value) _v3.anchor = value.anchor.toJSON();\n            if ('focus' in value) _v3.focus = value.focus.toJSON();\n            if ('isFocused' in value) _v3.isFocused = value.isFocused;\n            if ('marks' in value) _v3.marks = value.marks && value.marks.toJSON();\n            value = _v3;\n          }\n\n          if ((key === 'properties' || key === 'newProperties') && type === 'set_value') {\n            var _v4 = {};\n            if ('data' in value) _v4.data = value.data.toJS();\n            if ('decorations' in value) _v4.decorations = value.decorations.toJS();\n            value = _v4;\n          }\n\n          if (key === 'properties' && type === 'split_node') {\n            var _v5 = {};\n            if ('data' in value) _v5.data = value.data.toJS();\n            if ('type' in value) _v5.type = value.type;\n            value = _v5;\n          }\n\n          if (key === 'data') {\n            value = value.toJSON();\n          }\n\n          json[key] = value;\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return json;\n    }\n  }], [{\n    key: 'create',\n\n    /**\n     * Create a new `Operation` with `attrs`.\n     *\n     * @param {Object|Array|List|String|Operation} attrs\n     * @return {Operation}\n     */\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Operation.isOperation(attrs)) {\n        return attrs;\n      }\n\n      if (isPlainObject(attrs)) {\n        return Operation.fromJSON(attrs);\n      }\n\n      throw new Error('`Operation.create` only accepts objects or operations, but you passed it: ' + attrs);\n    }\n    /**\n     * Create a list of `Operations` from `elements`.\n     *\n     * @param {Array<Operation|Object>|List<Operation|Object>} elements\n     * @return {List<Operation>}\n     */\n\n  }, {\n    key: 'createList',\n    value: function createList() {\n      var elements = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      if (List.isList(elements) || Array.isArray(elements)) {\n        var list = new List(elements.map(Operation.create));\n        return list;\n      }\n\n      throw new Error('`Operation.createList` only accepts arrays or lists, but you passed it: ' + elements);\n    }\n    /**\n     * Create a `Operation` from a JSON `object`.\n     *\n     * @param {Object|Operation} object\n     * @return {Operation}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(object) {\n      if (Operation.isOperation(object)) {\n        return object;\n      }\n\n      var type = object.type;\n      var ATTRIBUTES = OPERATION_ATTRIBUTES[type];\n      var attrs = {\n        type: type\n      };\n\n      if (!ATTRIBUTES) {\n        throw new Error('`Operation.fromJSON` was passed an unrecognized operation type: \"' + type + '\"');\n      }\n\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = ATTRIBUTES[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var key = _step2.value;\n          var v = object[key]; // Default `data` to an empty object.\n\n          if (key === 'data' && v === undefined) {\n            v = {};\n          }\n\n          if (v === undefined) {\n            throw new Error('`Operation.fromJSON` was passed a \"' + type + '\" operation without the required \"' + key + '\" attribute.');\n          }\n\n          if (key === 'path' || key === 'newPath') {\n            v = PathUtils.create(v);\n          }\n\n          if (key === 'mark') {\n            v = Mark.create(v);\n          }\n\n          if (key === 'marks' && v != null) {\n            v = Mark.createSet(v);\n          }\n\n          if (key === 'node') {\n            v = Node.create(v);\n          }\n\n          if (key === 'properties' && type === 'merge_node') {\n            v = Node.createProperties(v);\n          }\n\n          if ((key === 'properties' || key === 'newProperties') && type === 'set_mark') {\n            v = Mark.createProperties(v);\n          }\n\n          if ((key === 'properties' || key === 'newProperties') && type === 'set_node') {\n            v = Node.createProperties(v);\n          }\n\n          if ((key === 'properties' || key === 'newProperties') && type === 'set_selection') {\n            v = Selection.createProperties(v);\n          }\n\n          if ((key === 'properties' || key === 'newProperties') && type === 'set_value') {\n            v = Value.createProperties(v);\n          }\n\n          if (key === 'properties' && type === 'split_node') {\n            v = Node.createProperties(v);\n          }\n\n          if (key === 'data') {\n            v = Map(v);\n          }\n\n          attrs[key] = v;\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      var node = new Operation(attrs);\n      return node;\n    }\n    /**\n     * Check if `any` is a list of operations.\n     *\n     * @param {Any} any\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isOperationList',\n    value: function isOperationList(any) {\n      return List.isList(any) && any.every(function (item) {\n        return Operation.isOperation(item);\n      });\n    }\n  }]);\n  return Operation;\n}(Record(DEFAULTS$11));\n/**\n * Export.\n *\n * @type {Operation}\n */\n\n\nvar DEFAULTS$12 = {\n  operations: undefined,\n  value: undefined\n  /**\n   * Change.\n   *\n   * @type {Change}\n   */\n\n};\n\nvar Change = function (_Record) {\n  inherits(Change, _Record);\n\n  function Change() {\n    classCallCheck(this, Change);\n    return possibleConstructorReturn(this, (Change.__proto__ || Object.getPrototypeOf(Change)).apply(this, arguments));\n  }\n\n  createClass(Change, [{\n    key: 'toJSON',\n\n    /**\n     * Return a JSON representation of the change.\n     *\n     * @param {Object} options\n     * @return {Object}\n     */\n    value: function toJSON() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var object = {\n        object: this.object,\n        value: this.value.toJSON(options),\n        operations: this.operations.toArray().map(function (o) {\n          return o.toJSON(options);\n        })\n      };\n      return object;\n    }\n  }], [{\n    key: 'create',\n\n    /**\n     * Create a new `Change` with `attrs`.\n     *\n     * @param {Object|Change} attrs\n     * @return {Change}\n     */\n    value: function create() {\n      var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (Change.isChange(attrs)) {\n        return attrs;\n      }\n\n      if (isPlainObject(attrs)) {\n        return Change.fromJSON(attrs);\n      }\n\n      throw new Error('`Change.create` only accepts objects or changes, but you passed it: ' + attrs);\n    }\n    /**\n     * Create a `Change` from a JSON `object`.\n     *\n     * @param {Object} object\n     * @return {Change}\n     */\n\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(object) {\n      var value = object.value,\n          _object$operations = object.operations,\n          operations = _object$operations === undefined ? [] : _object$operations;\n      var change = new Change({\n        value: Value.create(value),\n        operations: Operation.createList(operations)\n      });\n      return change;\n    }\n  }]);\n  return Change;\n}(Record(DEFAULTS$12));\n/**\n * Export.\n *\n * @type {Change}\n */\n\n/**\n * A plugin that adds a set of commands to the editor.\n *\n * @param {Object} commands\n * @return {Object}\n */\n\n\nfunction CommandsPlugin() {\n  var commands = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  /**\n   * On command, if it exists in our list of commands, call it.\n   *\n   * @param {Object} command\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n  function onCommand(command, editor, next) {\n    var type = command.type,\n        args = command.args;\n    var fn = commands[type];\n    if (!fn) return next();\n    editor.command.apply(editor, [fn].concat(toConsumableArray(args)));\n  }\n  /**\n   * On construct, register all the commands.\n   *\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onConstruct(editor, next) {\n    for (var command in commands) {\n      editor.registerCommand(command);\n    }\n\n    return next();\n  }\n  /**\n   * Return the plugin.\n   *\n   * @type {Object}\n   */\n\n\n  return {\n    onCommand: onCommand,\n    onConstruct: onConstruct\n  };\n}\n/**\n * Export.\n *\n * @type {Object}\n */\n\n\nvar SURROGATE_START = 0xd800;\nvar SURROGATE_END = 0xdfff;\n/**\n * A regex to match space characters.\n *\n * @type {RegExp}\n */\n\nvar SPACE = /\\s/;\n/**\n * A regex to match chameleon characters, that count as word characters as long\n * as they are inside of a word.\n *\n * @type {RegExp}\n */\n\nvar CHAMELEON = /['\\u2018\\u2019]/;\n/**\n * A regex that matches punctuation.\n *\n * @type {RegExp}\n */\n\nvar PUNCTUATION = /[\\u0021-\\u0023\\u0025-\\u002A\\u002C-\\u002F\\u003A\\u003B\\u003F\\u0040\\u005B-\\u005D\\u005F\\u007B\\u007D\\u00A1\\u00A7\\u00AB\\u00B6\\u00B7\\u00BB\\u00BF\\u037E\\u0387\\u055A-\\u055F\\u0589\\u058A\\u05BE\\u05C0\\u05C3\\u05C6\\u05F3\\u05F4\\u0609\\u060A\\u060C\\u060D\\u061B\\u061E\\u061F\\u066A-\\u066D\\u06D4\\u0700-\\u070D\\u07F7-\\u07F9\\u0830-\\u083E\\u085E\\u0964\\u0965\\u0970\\u0AF0\\u0DF4\\u0E4F\\u0E5A\\u0E5B\\u0F04-\\u0F12\\u0F14\\u0F3A-\\u0F3D\\u0F85\\u0FD0-\\u0FD4\\u0FD9\\u0FDA\\u104A-\\u104F\\u10FB\\u1360-\\u1368\\u1400\\u166D\\u166E\\u169B\\u169C\\u16EB-\\u16ED\\u1735\\u1736\\u17D4-\\u17D6\\u17D8-\\u17DA\\u1800-\\u180A\\u1944\\u1945\\u1A1E\\u1A1F\\u1AA0-\\u1AA6\\u1AA8-\\u1AAD\\u1B5A-\\u1B60\\u1BFC-\\u1BFF\\u1C3B-\\u1C3F\\u1C7E\\u1C7F\\u1CC0-\\u1CC7\\u1CD3\\u2010-\\u2027\\u2030-\\u2043\\u2045-\\u2051\\u2053-\\u205E\\u207D\\u207E\\u208D\\u208E\\u2329\\u232A\\u2768-\\u2775\\u27C5\\u27C6\\u27E6-\\u27EF\\u2983-\\u2998\\u29D8-\\u29DB\\u29FC\\u29FD\\u2CF9-\\u2CFC\\u2CFE\\u2CFF\\u2D70\\u2E00-\\u2E2E\\u2E30-\\u2E3B\\u3001-\\u3003\\u3008-\\u3011\\u3014-\\u301F\\u3030\\u303D\\u30A0\\u30FB\\uA4FE\\uA4FF\\uA60D-\\uA60F\\uA673\\uA67E\\uA6F2-\\uA6F7\\uA874-\\uA877\\uA8CE\\uA8CF\\uA8F8-\\uA8FA\\uA92E\\uA92F\\uA95F\\uA9C1-\\uA9CD\\uA9DE\\uA9DF\\uAA5C-\\uAA5F\\uAADE\\uAADF\\uAAF0\\uAAF1\\uABEB\\uFD3E\\uFD3F\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE61\\uFE63\\uFE68\\uFE6A\\uFE6B\\uFF01-\\uFF03\\uFF05-\\uFF0A\\uFF0C-\\uFF0F\\uFF1A\\uFF1B\\uFF1F\\uFF20\\uFF3B-\\uFF3D\\uFF3F\\uFF5B\\uFF5D\\uFF5F-\\uFF65]/;\n/**\n * Is a character `code` in a surrogate character.\n *\n * @param {Number} code\n * @return {Boolean}\n */\n\nfunction isSurrogate(code) {\n  return SURROGATE_START <= code && code <= SURROGATE_END;\n}\n/**\n * Is a character a word character? Needs the `remaining` characters too.\n *\n * @param {String} char\n * @param {String|Void} remaining\n * @return {Boolean}\n */\n\n\nfunction isWord(char, remaining) {\n  if (SPACE.test(char)) return false; // If it's a chameleon character, recurse to see if the next one is or not.\n\n  if (CHAMELEON.test(char)) {\n    var next = remaining.charAt(0);\n    var length = getCharLength(next);\n    next = remaining.slice(0, length);\n    var rest = remaining.slice(length);\n    if (isWord(next, rest)) return true;\n  }\n\n  if (PUNCTUATION.test(char)) return false;\n  return true;\n}\n/**\n * Get the length of a `character`.\n *\n * @param {String} char\n * @return {Number}\n */\n\n\nfunction getCharLength(char) {\n  return isSurrogate(char.charCodeAt(0)) ? 2 : 1;\n}\n/**\n * Get the offset to the end of the first character in `text`.\n *\n * @param {String} text\n * @return {Number}\n */\n\n\nfunction getCharOffset(text) {\n  var char = text.charAt(0);\n  return getCharLength(char);\n}\n/**\n * Get the offset to the end of the character before an `offset` in `text`.\n *\n * @param {String} text\n * @param {Number} offset\n * @return {Number}\n */\n\n\nfunction getCharOffsetBackward(text, offset) {\n  text = text.slice(0, offset);\n  text = reverse(text);\n  return getCharOffset(text);\n}\n/**\n * Get the offset to the end of the character after an `offset` in `text`.\n *\n * @param {String} text\n * @param {Number} offset\n * @return {Number}\n */\n\n\nfunction getCharOffsetForward(text, offset) {\n  text = text.slice(offset);\n  return getCharOffset(text);\n}\n/**\n * Get the offset to the end of the first word in `text`.\n *\n * @param {String} text\n * @return {Number}\n */\n\n\nfunction getWordOffset(text) {\n  var length = 0;\n  var i = 0;\n  var started = false;\n  var char = void 0;\n\n  while (char = text.charAt(i)) {\n    var l = getCharLength(char);\n    char = text.slice(i, i + l);\n    var rest = text.slice(i + l);\n\n    if (isWord(char, rest)) {\n      started = true;\n      length += l;\n    } else if (!started) {\n      length += l;\n    } else {\n      break;\n    }\n\n    i += l;\n  }\n\n  return length;\n}\n/**\n * Get the offset to the end of the word before an `offset` in `text`.\n *\n * @param {String} text\n * @param {Number} offset\n * @return {Number}\n */\n\n\nfunction getWordOffsetBackward(text, offset) {\n  text = text.slice(0, offset);\n  text = reverse(text);\n  var o = getWordOffset(text);\n  return o;\n}\n/**\n * Get the offset to the end of the word after an `offset` in `text`.\n *\n * @param {String} text\n * @param {Number} offset\n * @return {Number}\n */\n\n\nfunction getWordOffsetForward(text, offset) {\n  text = text.slice(offset);\n  var o = getWordOffset(text);\n  return o;\n}\n/**\n * Export.\n *\n * @type {Object}\n */\n\n\nvar TextUtils = {\n  getCharLength: getCharLength,\n  getCharOffset: getCharOffset,\n  getCharOffsetBackward: getCharOffsetBackward,\n  getCharOffsetForward: getCharOffsetForward,\n  getWordOffset: getWordOffset,\n  getWordOffsetBackward: getWordOffsetBackward,\n  getWordOffsetForward: getWordOffsetForward,\n  isSurrogate: isSurrogate,\n  isWord: isWord\n};\n\nfunction deleteExpandedAtRange(editor, range) {\n  if (range.isExpanded) {\n    editor.deleteAtRange(range);\n  }\n\n  var value = editor.value;\n  var document = value.document;\n  var _range = range,\n      start = _range.start,\n      end = _range.end;\n\n  if (document.hasDescendant(start.key)) {\n    range = range.moveToStart();\n  } else {\n    range = range.moveTo(end.key, 0).normalize(document);\n  }\n\n  return range;\n}\n/**\n * Commands.\n *\n * @type {Object}\n */\n\n\nvar Commands$1 = {};\n/**\n * Add a new `mark` to the characters at `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Mixed} mark\n */\n\nCommands$1.addMarkAtRange = function (editor, range, mark) {\n  if (range.isCollapsed) return;\n  var value = editor.value;\n  var document = value.document;\n  var start = range.start,\n      end = range.end;\n  var texts = document.getTextsAtRange(range);\n  editor.withoutNormalizing(function () {\n    texts.forEach(function (node) {\n      var key = node.key;\n      var index = 0;\n      var length = node.text.length;\n      if (key === start.key) index = start.offset;\n      if (key === end.key) length = end.offset;\n      if (key === start.key && key === end.key) length = end.offset - start.offset;\n      editor.addMarkByKey(key, index, length, mark);\n    });\n  });\n};\n/**\n * Add a list of `marks` to the characters at `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Array<Mixed>} mark\n */\n\n\nCommands$1.addMarksAtRange = function (editor, range, marks) {\n  marks.forEach(function (mark) {\n    return editor.addMarkAtRange(range, mark);\n  });\n};\n/**\n * Delete everything in a `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n */\n\n\nCommands$1.deleteAtRange = function (editor, range) {\n  // Snapshot the selection, which creates an extra undo save point, so that\n  // when you undo a delete, the expanded selection will be retained.\n  editor.snapshotSelection();\n  var value = editor.value;\n  var start = range.start,\n      end = range.end;\n  var startKey = start.key;\n  var startOffset = start.offset;\n  var endKey = end.key;\n  var endOffset = end.offset;\n  var document = value.document;\n  var isStartVoid = document.hasVoidParent(startKey, editor);\n  var isEndVoid = document.hasVoidParent(endKey, editor);\n  var startBlock = document.getClosestBlock(startKey);\n  var endBlock = document.getClosestBlock(endKey); // Check if we have a \"hanging\" selection case where the even though the\n  // selection extends into the start of the end node, we actually want to\n  // ignore that for UX reasons.\n\n  var isHanging = startOffset === 0 && endOffset === 0 && isStartVoid === false && startKey === startBlock.getFirstText().key && endKey === endBlock.getFirstText().key; // If it's a hanging selection, nudge it back to end in the previous text.\n\n  if (isHanging && isEndVoid) {\n    var prevText = document.getPreviousText(endKey);\n    endKey = prevText.key;\n    endOffset = prevText.text.length;\n    isEndVoid = document.hasVoidParent(endKey, editor);\n  }\n\n  editor.withoutNormalizing(function () {\n    // If the start node is inside a void node, remove the void node and update\n    // the starting point to be right after it, continuously until the start point\n    // is not a void, or until the entire range is handled.\n    while (isStartVoid) {\n      var startVoid = document.getClosestVoid(startKey, editor);\n      var nextText = document.getNextText(startKey);\n      editor.removeNodeByKey(startVoid.key); // If the start and end keys are the same, we're done.\n\n      if (startKey === endKey) return; // If there is no next text node, we're done.\n\n      if (!nextText) return; // Continue...\n\n      document = editor.value.document;\n      startKey = nextText.key;\n      startOffset = 0;\n      isStartVoid = document.hasVoidParent(startKey, editor);\n    } // If the end node is inside a void node, do the same thing but backwards. But\n    // we don't need any aborting checks because if we've gotten this far there\n    // must be a non-void node that will exit the loop.\n\n\n    while (isEndVoid) {\n      var endVoid = document.getClosestVoid(endKey, editor);\n\n      var _prevText = document.getPreviousText(endKey);\n\n      editor.removeNodeByKey(endVoid.key); // Continue...\n\n      document = editor.value.document;\n      endKey = _prevText.key;\n      endOffset = _prevText.text.length;\n      isEndVoid = document.hasVoidParent(endKey, editor);\n    } // If the start and end key are the same, and it was a hanging selection, we\n    // can just remove the entire block.\n\n\n    if (startKey === endKey && isHanging) {\n      editor.removeNodeByKey(startBlock.key);\n      return;\n    } else if (startKey === endKey) {\n      // Otherwise, if it wasn't hanging, we're inside a single text node, so we can\n      // simply remove the text in the range.\n      var index = startOffset;\n      var length = endOffset - startOffset;\n      editor.removeTextByKey(startKey, index, length);\n      return;\n    } else {\n      // Otherwise, we need to recursively remove text and nodes inside the start\n      // block after the start offset and inside the end block before the end\n      // offset. Then remove any blocks that are in between the start and end\n      // blocks. Then finally merge the start and end nodes.\n      startBlock = document.getClosestBlock(startKey);\n      endBlock = document.getClosestBlock(endKey);\n      var startText = document.getNode(startKey);\n      var endText = document.getNode(endKey);\n      var startLength = startText.text.length - startOffset;\n      var endLength = endOffset;\n      var ancestor = document.getCommonAncestor(startKey, endKey);\n      var startChild = ancestor.getFurthestAncestor(startKey);\n      var endChild = ancestor.getFurthestAncestor(endKey);\n      var startParent = document.getParent(startBlock.key);\n      var startParentIndex = startParent.nodes.indexOf(startBlock);\n      var endParentIndex = startParent.nodes.indexOf(endBlock);\n      var child = void 0; // Iterate through all of the nodes in the tree after the start text node\n      // but inside the end child, and remove them.\n\n      child = startText;\n\n      while (child.key !== startChild.key) {\n        var parent = document.getParent(child.key);\n\n        var _index = parent.nodes.indexOf(child);\n\n        var afters = parent.nodes.slice(_index + 1);\n        afters.reverse().forEach(function (node) {\n          editor.removeNodeByKey(node.key);\n        });\n        child = parent;\n      } // Remove all of the middle children.\n\n\n      var startChildIndex = ancestor.nodes.indexOf(startChild);\n      var endChildIndex = ancestor.nodes.indexOf(endChild);\n      var middles = ancestor.nodes.slice(startChildIndex + 1, endChildIndex);\n      middles.reverse().forEach(function (node) {\n        editor.removeNodeByKey(node.key);\n      }); // Remove the nodes before the end text node in the tree.\n\n      child = endText;\n\n      while (child.key !== endChild.key) {\n        var _parent = document.getParent(child.key);\n\n        var _index2 = _parent.nodes.indexOf(child);\n\n        var befores = _parent.nodes.slice(0, _index2);\n\n        befores.reverse().forEach(function (node) {\n          editor.removeNodeByKey(node.key);\n        });\n        child = _parent;\n      } // Remove any overlapping text content from the leaf text nodes.\n\n\n      if (startLength !== 0) {\n        editor.removeTextByKey(startKey, startOffset, startLength);\n      }\n\n      if (endLength !== 0) {\n        editor.removeTextByKey(endKey, 0, endOffset);\n      } // If the start and end blocks aren't the same, move and merge the end block\n      // into the start block.\n\n\n      if (startBlock.key !== endBlock.key) {\n        document = editor.value.document;\n        var lonely = document.getFurthestOnlyChildAncestor(endBlock.key); // Move the end block to be right after the start block.\n\n        if (endParentIndex !== startParentIndex + 1) {\n          editor.moveNodeByKey(endBlock.key, startParent.key, startParentIndex + 1);\n        } // If the selection is hanging, just remove the start block, otherwise\n        // merge the end block into it.\n\n\n        if (isHanging) {\n          editor.removeNodeByKey(startBlock.key);\n        } else {\n          editor.mergeNodeByKey(endBlock.key);\n        } // If nested empty blocks are left over above the end block, remove them.\n\n\n        if (lonely) {\n          editor.removeNodeByKey(lonely.key);\n        }\n      }\n    }\n  });\n};\n/**\n * Delete backward `n` characters at a `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Number} n (optional)\n */\n\n\nCommands$1.deleteBackwardAtRange = function (editor, range) {\n  var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n  if (n === 0) return;\n  var value = editor.value;\n  var document = value.document;\n  var _range2 = range,\n      start = _range2.start,\n      focus = _range2.focus; // If the range is expanded, perform a regular delete instead.\n\n  if (range.isExpanded) {\n    editor.deleteAtRange(range);\n    return;\n  }\n\n  var voidParent = document.getClosestVoid(start.key, editor); // If there is a void parent, delete it.\n\n  if (voidParent) {\n    editor.removeNodeByKey(voidParent.key);\n    return;\n  } // If the range is at the start of the document, abort.\n\n\n  if (start.isAtStartOfNode(document)) {\n    return;\n  }\n\n  var block = document.getClosestBlock(start.key); // PERF: If the closest block is empty, remove it. This is just a shortcut,\n  // since merging it would result in the same outcome.\n\n  if (document.nodes.size !== 1 && block && block.text === '' && block.nodes.size === 1) {\n    editor.removeNodeByKey(block.key);\n    return;\n  } // If the range is at the start of the text node, we need to figure out what\n  // is behind it to know how to delete...\n\n\n  var text = document.getDescendant(start.key);\n\n  if (start.isAtStartOfNode(text)) {\n    var prev = document.getPreviousText(text.key);\n    var inline = document.getClosestInline(text.key); // If the range is at the start of the inline node, and previous text node\n    // is empty, take the text node before that, or \"prevBlock\" would be the\n    // same node as \"block\"\n\n    if (inline && prev.text === '') {\n      prev = document.getPreviousText(prev.key);\n    }\n\n    var prevBlock = document.getClosestBlock(prev.key);\n    var prevVoid = document.getClosestVoid(prev.key, editor); // If the previous text node has a void parent, remove it.\n\n    if (prevVoid) {\n      editor.removeNodeByKey(prevVoid.key);\n      return;\n    } // If we're deleting by one character and the previous text node is not\n    // inside the current block, we need to merge the two blocks together.\n\n\n    if (n === 1 && prevBlock !== block) {\n      range = range.moveAnchorTo(prev.key, prev.text.length);\n      editor.deleteAtRange(range);\n      return;\n    }\n  } // If the focus offset is farther than the number of characters to delete,\n  // just remove the characters backwards inside the current node.\n\n\n  if (n < focus.offset) {\n    range = range.moveFocusBackward(n);\n    editor.deleteAtRange(range);\n    return;\n  } // Otherwise, we need to see how many nodes backwards to go.\n\n\n  var node = text;\n  var offset = 0;\n  var traversed = focus.offset;\n\n  while (n > traversed) {\n    node = document.getPreviousText(node.key);\n    var next = traversed + node.text.length;\n\n    if (n <= next) {\n      offset = next - n;\n      break;\n    } else {\n      traversed = next;\n    }\n  }\n\n  range = range.moveAnchorTo(node.key, offset);\n  editor.deleteAtRange(range);\n};\n/**\n * Delete backward until the character boundary at a `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n */\n\n\nCommands$1.deleteCharBackwardAtRange = function (editor, range) {\n  if (range.isExpanded) {\n    editor.deleteAtRange(range);\n    return;\n  }\n\n  var value = editor.value;\n  var document = value.document;\n  var start = range.start;\n  var startBlock = document.getClosestBlock(start.key);\n  var offset = startBlock.getOffset(start.key);\n  var o = offset + start.offset;\n  var text = startBlock.text;\n  var n = TextUtils.getCharOffsetBackward(text, o);\n  editor.deleteBackwardAtRange(range, n);\n};\n/**\n * Delete forward until the character boundary at a `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n */\n\n\nCommands$1.deleteCharForwardAtRange = function (editor, range) {\n  if (range.isExpanded) {\n    editor.deleteAtRange(range);\n    return;\n  }\n\n  var value = editor.value;\n  var document = value.document;\n  var start = range.start;\n  var startBlock = document.getClosestBlock(start.key);\n  var offset = startBlock.getOffset(start.key);\n  var o = offset + start.offset;\n  var text = startBlock.text;\n  var n = TextUtils.getCharOffsetForward(text, o);\n  editor.deleteForwardAtRange(range, n);\n};\n/**\n * Delete forward `n` characters at a `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Number} n (optional)\n */\n\n\nCommands$1.deleteForwardAtRange = function (editor, range) {\n  var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n  if (n === 0) return;\n  var value = editor.value;\n  var document = value.document;\n  var _range3 = range,\n      start = _range3.start,\n      focus = _range3.focus; // If the range is expanded, perform a regular delete instead.\n\n  if (range.isExpanded) {\n    editor.deleteAtRange(range);\n    return;\n  }\n\n  var voidParent = document.getClosestVoid(start.key, editor); // If the node has a void parent, delete it.\n\n  if (voidParent) {\n    editor.removeNodeByKey(voidParent.key);\n    return;\n  }\n\n  var block = document.getClosestBlock(start.key); // If the closest is not void, but empty, remove it\n\n  if (block && !editor.isVoid(block) && block.text === '' && document.nodes.size !== 1) {\n    var nextBlock = document.getNextBlock(block.key);\n    editor.removeNodeByKey(block.key);\n\n    if (nextBlock && nextBlock.key) {\n      editor.moveToStartOfNode(nextBlock);\n    }\n\n    return;\n  } // If the range is at the start of the document, abort.\n\n\n  if (start.isAtEndOfNode(document)) {\n    return;\n  } // If the range is at the start of the text node, we need to figure out what\n  // is behind it to know how to delete...\n\n\n  var text = document.getDescendant(start.key);\n\n  if (start.isAtEndOfNode(text)) {\n    var next = document.getNextText(text.key);\n\n    var _nextBlock = document.getClosestBlock(next.key);\n\n    var nextVoid = document.getClosestVoid(next.key, editor); // If the next text node has a void parent, remove it.\n\n    if (nextVoid) {\n      editor.removeNodeByKey(nextVoid.key);\n      return;\n    } // If we're deleting by one character and the previous text node is not\n    // inside the current block, we need to merge the two blocks together.\n\n\n    if (n === 1 && _nextBlock !== block) {\n      range = range.moveFocusTo(next.key, 0);\n      editor.deleteAtRange(range);\n      return;\n    }\n  } // If the remaining characters to the end of the node is greater than or equal\n  // to the number of characters to delete, just remove the characters forwards\n  // inside the current node.\n\n\n  if (n <= text.text.length - focus.offset) {\n    range = range.moveFocusForward(n);\n    editor.deleteAtRange(range);\n    return;\n  } // Otherwise, we need to see how many nodes forwards to go.\n\n\n  var node = text;\n  var offset = focus.offset;\n  var traversed = text.text.length - focus.offset;\n\n  while (n > traversed) {\n    node = document.getNextText(node.key);\n\n    var _next = traversed + node.text.length;\n\n    if (n <= _next) {\n      offset = n - traversed;\n      break;\n    } else {\n      traversed = _next;\n    }\n  }\n\n  range = range.moveFocusTo(node.key, offset);\n  editor.deleteAtRange(range);\n};\n/**\n * Delete backward until the line boundary at a `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n */\n\n\nCommands$1.deleteLineBackwardAtRange = function (editor, range) {\n  if (range.isExpanded) {\n    editor.deleteAtRange(range);\n    return;\n  }\n\n  var value = editor.value;\n  var document = value.document;\n  var start = range.start;\n  var startBlock = document.getClosestBlock(start.key);\n  var offset = startBlock.getOffset(start.key);\n  var o = offset + start.offset;\n  editor.deleteBackwardAtRange(range, o);\n};\n/**\n * Delete forward until the line boundary at a `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n */\n\n\nCommands$1.deleteLineForwardAtRange = function (editor, range) {\n  if (range.isExpanded) {\n    editor.deleteAtRange(range);\n    return;\n  }\n\n  var value = editor.value;\n  var document = value.document;\n  var start = range.start;\n  var startBlock = document.getClosestBlock(start.key);\n  var offset = startBlock.getOffset(start.key);\n  var o = offset + start.offset;\n  editor.deleteForwardAtRange(range, startBlock.text.length - o);\n};\n/**\n * Delete backward until the word boundary at a `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n */\n\n\nCommands$1.deleteWordBackwardAtRange = function (editor, range) {\n  if (range.isExpanded) {\n    editor.deleteAtRange(range);\n    return;\n  }\n\n  var value = editor.value;\n  var document = value.document;\n  var start = range.start;\n  var startBlock = document.getClosestBlock(start.key);\n  var offset = startBlock.getOffset(start.key);\n  var o = offset + start.offset;\n  var text = startBlock.text;\n  var n = o === 0 ? 1 : TextUtils.getWordOffsetBackward(text, o);\n  editor.deleteBackwardAtRange(range, n);\n};\n/**\n * Delete forward until the word boundary at a `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n */\n\n\nCommands$1.deleteWordForwardAtRange = function (editor, range) {\n  if (range.isExpanded) {\n    editor.deleteAtRange(range);\n    return;\n  }\n\n  var value = editor.value;\n  var document = value.document;\n  var start = range.start;\n  var startBlock = document.getClosestBlock(start.key);\n  var offset = startBlock.getOffset(start.key);\n  var o = offset + start.offset;\n  var text = startBlock.text;\n  var wordOffset = TextUtils.getWordOffsetForward(text, o);\n  var n = wordOffset === 0 ? 1 : wordOffset;\n  editor.deleteForwardAtRange(range, n);\n};\n/**\n * Insert a `block` node at `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Block|String|Object} block\n */\n\n\nCommands$1.insertBlockAtRange = function (editor, range, block) {\n  range = deleteExpandedAtRange(editor, range);\n  block = Block.create(block);\n  var value = editor.value;\n  var document = value.document;\n  var _range4 = range,\n      start = _range4.start;\n  var startKey = start.key;\n  var startOffset = start.offset;\n  var startBlock = document.getClosestBlock(startKey);\n  var startInline = document.getClosestInline(startKey);\n  var parent = document.getParent(startBlock.key);\n  var index = parent.nodes.indexOf(startBlock);\n\n  if (editor.isVoid(startBlock)) {\n    var extra = start.isAtEndOfNode(startBlock) ? 1 : 0;\n    editor.insertNodeByKey(parent.key, index + extra, block);\n  } else if (!startInline && startBlock.text === '') {\n    editor.insertNodeByKey(parent.key, index + 1, block);\n  } else if (start.isAtStartOfNode(startBlock)) {\n    editor.insertNodeByKey(parent.key, index, block);\n  } else if (start.isAtEndOfNode(startBlock)) {\n    editor.insertNodeByKey(parent.key, index + 1, block);\n  } else {\n    if (startInline && editor.isVoid(startInline)) {\n      var atEnd = start.isAtEndOfNode(startInline);\n      var siblingText = atEnd ? document.getNextText(startKey) : document.getPreviousText(startKey);\n      var splitRange = atEnd ? range.moveToStartOfNode(siblingText) : range.moveToEndOfNode(siblingText);\n      startKey = splitRange.start.key;\n      startOffset = splitRange.start.offset;\n    }\n\n    editor.withoutNormalizing(function () {\n      editor.splitDescendantsByKey(startBlock.key, startKey, startOffset);\n      editor.insertNodeByKey(parent.key, index + 1, block);\n    });\n  }\n};\n/**\n * Insert a `fragment` at a `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Document} fragment\n */\n\n\nCommands$1.insertFragmentAtRange = function (editor, range, fragment) {\n  editor.withoutNormalizing(function () {\n    range = deleteExpandedAtRange(editor, range); // If the fragment is empty, there's nothing to do after deleting.\n\n    if (!fragment.nodes.size) return; // Regenerate the keys for all of the fragments nodes, so that they're\n    // guaranteed not to collide with the existing keys in the document. Otherwise\n    // they will be rengerated automatically and we won't have an easy way to\n    // reference them.\n\n    fragment = fragment.mapDescendants(function (child) {\n      return child.regenerateKey();\n    }); // Calculate a few things...\n\n    var _range5 = range,\n        start = _range5.start;\n    var value = editor.value;\n    var document = value.document;\n    var startText = document.getDescendant(start.key);\n    var startBlock = document.getClosestBlock(startText.key);\n    var startChild = startBlock.getFurthestAncestor(startText.key);\n    var isAtStart = start.isAtStartOfNode(startBlock);\n    var parent = document.getParent(startBlock.key);\n    var index = parent.nodes.indexOf(startBlock);\n    var blocks = fragment.getBlocks();\n    var firstChild = fragment.nodes.first();\n    var lastChild = fragment.nodes.last();\n    var firstBlock = blocks.first();\n    var lastBlock = blocks.last();\n    var insertionNode = findInsertionNode(fragment, document, startBlock.key); // If the fragment only contains a void block, use `insertBlock` instead.\n\n    if (firstBlock === lastBlock && editor.isVoid(firstBlock)) {\n      editor.insertBlockAtRange(range, firstBlock);\n      return;\n    } // If inserting the entire fragment and it starts or ends with a single\n    // nested block, e.g. a table, we do not merge it with existing blocks.\n\n\n    if (insertionNode === fragment && (firstChild.hasBlockChildren() || lastChild.hasBlockChildren())) {\n      fragment.nodes.reverse().forEach(function (node) {\n        editor.insertBlockAtRange(range, node);\n      });\n      return;\n    } // If the first and last block aren't the same, we need to insert all of the\n    // nodes after the insertion node's first block at the index.\n\n\n    if (firstBlock !== lastBlock) {\n      var lonelyParent = insertionNode.getFurthest(firstBlock.key, function (p) {\n        return p.nodes.size === 1;\n      });\n      var lonelyChild = lonelyParent || firstBlock;\n      var startIndex = parent.nodes.indexOf(startBlock);\n      var excludingLonelyChild = insertionNode.removeNode(lonelyChild.key);\n      excludingLonelyChild.nodes.forEach(function (node, i) {\n        var newIndex = startIndex + i + 1;\n        editor.insertNodeByKey(parent.key, newIndex, node);\n      });\n    } // Check if we need to split the node.\n\n\n    if (start.offset !== 0) {\n      editor.splitDescendantsByKey(startChild.key, start.key, start.offset);\n    } // Update our variables with the new value.\n\n\n    document = editor.value.document;\n    startText = document.getDescendant(start.key);\n    startBlock = document.getClosestBlock(start.key);\n    startChild = startBlock.getFurthestAncestor(startText.key); // If the first and last block aren't the same, we need to move any of the\n    // starting block's children after the split into the last block of the\n    // fragment, which has already been inserted.\n\n    if (firstBlock !== lastBlock) {\n      var nextChild = isAtStart ? startChild : startBlock.getNextSibling(startChild.key);\n      var nextNodes = nextChild ? startBlock.nodes.skipUntil(function (n) {\n        return n.key === nextChild.key;\n      }) : List();\n      var lastIndex = lastBlock.nodes.size;\n      nextNodes.forEach(function (node, i) {\n        var newIndex = lastIndex + i;\n        editor.moveNodeByKey(node.key, lastBlock.key, newIndex);\n      });\n    } // If the starting block is empty, we replace it entirely with the first block\n    // of the fragment, since this leads to a more expected behavior for the user.\n\n\n    if (!editor.isVoid(startBlock) && startBlock.text === '' && !startBlock.findDescendant(function (n) {\n      return editor.isVoid(n);\n    })) {\n      editor.removeNodeByKey(startBlock.key);\n      editor.insertNodeByKey(parent.key, index, firstBlock);\n    } else {\n      // Otherwise, we maintain the starting block, and insert all of the first\n      // block's inline nodes into it at the split point.\n      var inlineChild = startBlock.getFurthestAncestor(startText.key);\n      var inlineIndex = startBlock.nodes.indexOf(inlineChild);\n      firstBlock.nodes.forEach(function (inline, i) {\n        var o = start.offset === 0 ? 0 : 1;\n        var newIndex = inlineIndex + i + o;\n        editor.insertNodeByKey(startBlock.key, newIndex, inline);\n      });\n    }\n  });\n};\n\nvar findInsertionNode = function findInsertionNode(fragment, document, startKey) {\n  var hasSingleNode = function hasSingleNode(object) {\n    if (!object || object.object === 'text') return;\n    return object.nodes.size === 1;\n  };\n\n  var firstNode = function firstNode(object) {\n    return object && object.nodes.first();\n  };\n\n  var node = fragment;\n\n  if (hasSingleNode(fragment)) {\n    var fragmentInner = firstNode(fragment);\n\n    var matches = function matches(documentNode) {\n      return documentNode.type === fragmentInner.type;\n    };\n\n    var documentInner = document.getFurthest(startKey, matches);\n    if (documentInner === document.getParent(startKey)) node = fragmentInner;\n\n    while (hasSingleNode(fragmentInner) && hasSingleNode(documentInner)) {\n      fragmentInner = firstNode(fragmentInner);\n      documentInner = firstNode(documentInner);\n\n      if (fragmentInner.type === documentInner.type) {\n        node = fragmentInner;\n      } else {\n        break;\n      }\n    }\n  }\n\n  return node;\n};\n/**\n * Insert an `inline` node at `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Inline|String|Object} inline\n */\n\n\nCommands$1.insertInlineAtRange = function (editor, range, inline) {\n  inline = Inline.create(inline);\n  editor.withoutNormalizing(function () {\n    range = deleteExpandedAtRange(editor, range);\n    var value = editor.value;\n    var document = value.document;\n    var _range6 = range,\n        start = _range6.start;\n    var parent = document.getParent(start.key);\n    var startText = document.assertDescendant(start.key);\n    var index = parent.nodes.indexOf(startText);\n    if (editor.isVoid(parent)) return;\n    editor.splitNodeByKey(start.key, start.offset);\n    editor.insertNodeByKey(parent.key, index + 1, inline);\n  });\n};\n/**\n * Insert `text` at a `range`, with optional `marks`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {String} text\n * @param {Set<Mark>} marks (optional)\n */\n\n\nCommands$1.insertTextAtRange = function (editor, range, text, marks) {\n  range = deleteExpandedAtRange(editor, range);\n  var value = editor.value;\n  var document = value.document;\n  var _range7 = range,\n      start = _range7.start;\n  var offset = start.offset;\n  var parent = document.getParent(start.key);\n\n  if (editor.isVoid(parent)) {\n    return;\n  }\n\n  editor.insertTextByKey(start.key, offset, text, marks);\n};\n/**\n * Remove an existing `mark` to the characters at `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Mark|String} mark (optional)\n */\n\n\nCommands$1.removeMarkAtRange = function (editor, range, mark) {\n  if (range.isCollapsed) return;\n  var value = editor.value;\n  var document = value.document;\n  var texts = document.getTextsAtRange(range);\n  var start = range.start,\n      end = range.end;\n  editor.withoutNormalizing(function () {\n    texts.forEach(function (node) {\n      var key = node.key;\n      var index = 0;\n      var length = node.text.length;\n      if (key === start.key) index = start.offset;\n      if (key === end.key) length = end.offset;\n      if (key === start.key && key === end.key) length = end.offset - start.offset;\n      editor.removeMarkByKey(key, index, length, mark);\n    });\n  });\n};\n/**\n * Set the `properties` of block nodes in a `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Object|String} properties\n */\n\n\nCommands$1.setBlocksAtRange = function (editor, range, properties) {\n  var value = editor.value;\n  var document = value.document;\n  var blocks = document.getLeafBlocksAtRange(range);\n  var start = range.start,\n      end = range.end,\n      isCollapsed = range.isCollapsed;\n  var isStartVoid = document.hasVoidParent(start.key, editor);\n  var startBlock = document.getClosestBlock(start.key);\n  var endBlock = document.getClosestBlock(end.key); // Check if we have a \"hanging\" selection case where the even though the\n  // selection extends into the start of the end node, we actually want to\n  // ignore that for UX reasons.\n\n  var isHanging = isCollapsed === false && start.offset === 0 && end.offset === 0 && isStartVoid === false && start.key === startBlock.getFirstText().key && end.key === endBlock.getFirstText().key; // If it's a hanging selection, ignore the last block.\n\n  var sets = isHanging ? blocks.slice(0, -1) : blocks;\n  editor.withoutNormalizing(function () {\n    sets.forEach(function (block) {\n      editor.setNodeByKey(block.key, properties);\n    });\n  });\n};\n/**\n * Set the `properties` of inline nodes in a `range`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Object|String} properties\n */\n\n\nCommands$1.setInlinesAtRange = function (editor, range, properties) {\n  var value = editor.value;\n  var document = value.document;\n  var inlines = document.getLeafInlinesAtRange(range);\n  editor.withoutNormalizing(function () {\n    inlines.forEach(function (inline) {\n      editor.setNodeByKey(inline.key, properties);\n    });\n  });\n};\n/**\n * Split the block nodes at a `range`, to optional `height`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Number} height (optional)\n */\n\n\nCommands$1.splitBlockAtRange = function (editor, range) {\n  var height = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n  range = deleteExpandedAtRange(editor, range);\n  var _range8 = range,\n      start = _range8.start,\n      end = _range8.end;\n  var value = editor.value;\n  var _value = value,\n      document = _value.document;\n  var node = document.assertDescendant(start.key);\n  var parent = document.getClosestBlock(node.key);\n  var h = 0;\n\n  while (parent && parent.object === 'block' && h < height) {\n    node = parent;\n    parent = document.getClosestBlock(parent.key);\n    h++;\n  }\n\n  editor.withoutNormalizing(function () {\n    editor.splitDescendantsByKey(node.key, start.key, start.offset);\n    value = editor.value;\n    document = value.document;\n\n    if (range.isExpanded) {\n      if (range.isBackward) range = range.flip();\n      var nextBlock = document.getNextBlock(node.key);\n      range = range.moveAnchorToStartOfNode(nextBlock);\n      range = range.setFocus(range.focus.setPath(null));\n\n      if (start.key === end.key) {\n        range = range.moveFocusTo(range.anchor.key, end.offset - start.offset);\n      }\n\n      range = document.resolveRange(range);\n      editor.deleteAtRange(range);\n    }\n  });\n};\n/**\n * Split the inline nodes at a `range`, to optional `height`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Number} height (optional)\n */\n\n\nCommands$1.splitInlineAtRange = function (editor, range) {\n  var height = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : Infinity;\n  range = deleteExpandedAtRange(editor, range);\n  var _range9 = range,\n      start = _range9.start;\n  var value = editor.value;\n  var document = value.document;\n  var node = document.assertDescendant(start.key);\n  var parent = document.getClosestInline(node.key);\n  var h = 0;\n\n  while (parent && parent.object === 'inline' && h < height) {\n    node = parent;\n    parent = document.getClosestInline(parent.key);\n    h++;\n  }\n\n  editor.splitDescendantsByKey(node.key, start.key, start.offset);\n};\n/**\n * Add or remove a `mark` from the characters at `range`, depending on whether\n * it's already there.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Mixed} mark\n */\n\n\nCommands$1.toggleMarkAtRange = function (editor, range, mark) {\n  if (range.isCollapsed) return;\n  mark = Mark.create(mark);\n  var value = editor.value;\n  var document = value.document;\n  var marks = document.getActiveMarksAtRange(range);\n  var exists = marks.some(function (m) {\n    return m.equals(mark);\n  });\n\n  if (exists) {\n    editor.removeMarkAtRange(range, mark);\n  } else {\n    editor.addMarkAtRange(range, mark);\n  }\n};\n/**\n * Unwrap all of the block nodes in a `range` from a block with `properties`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {String|Object} properties\n */\n\n\nCommands$1.unwrapBlockAtRange = function (editor, range, properties) {\n  properties = Node.createProperties(properties);\n  var value = editor.value;\n  var document = value.document;\n  var blocks = document.getLeafBlocksAtRange(range);\n  var wrappers = blocks.map(function (block) {\n    return document.getClosest(block.key, function (parent) {\n      if (parent.object !== 'block') return false;\n      if (properties.type != null && parent.type !== properties.type) return false;\n      if (properties.data != null && !parent.data.isSuperset(properties.data)) return false;\n      return true;\n    });\n  }).filter(function (exists) {\n    return exists;\n  }).toOrderedSet().toList();\n  editor.withoutNormalizing(function () {\n    wrappers.forEach(function (block) {\n      var first = block.nodes.first();\n      var last = block.nodes.last();\n      var parent = editor.value.document.getParent(block.key);\n      var index = parent.nodes.indexOf(block);\n      var children = block.nodes.filter(function (child) {\n        return blocks.some(function (b) {\n          return child === b || child.hasDescendant(b.key);\n        });\n      });\n      var firstMatch = children.first();\n      var lastMatch = children.last();\n\n      if (first === firstMatch && last === lastMatch) {\n        block.nodes.forEach(function (child, i) {\n          editor.moveNodeByKey(child.key, parent.key, index + i);\n        });\n        editor.removeNodeByKey(block.key);\n      } else if (last === lastMatch) {\n        block.nodes.skipUntil(function (n) {\n          return n === firstMatch;\n        }).forEach(function (child, i) {\n          editor.moveNodeByKey(child.key, parent.key, index + 1 + i);\n        });\n      } else if (first === firstMatch) {\n        block.nodes.takeUntil(function (n) {\n          return n === lastMatch;\n        }).push(lastMatch).forEach(function (child, i) {\n          editor.moveNodeByKey(child.key, parent.key, index + i);\n        });\n      } else {\n        var firstText = firstMatch.getFirstText();\n        editor.splitDescendantsByKey(block.key, firstText.key, 0);\n        document = editor.value.document;\n        children.forEach(function (child, i) {\n          if (i === 0) {\n            var extra = child;\n            child = document.getNextBlock(child.key);\n            editor.removeNodeByKey(extra.key);\n          }\n\n          editor.moveNodeByKey(child.key, parent.key, index + 1 + i);\n        });\n      }\n    });\n  });\n};\n/**\n * Unwrap the inline nodes in a `range` from an inline with `properties`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {String|Object} properties\n */\n\n\nCommands$1.unwrapInlineAtRange = function (editor, range, properties) {\n  properties = Node.createProperties(properties);\n  var value = editor.value;\n  var document = value.document;\n  var texts = document.getTextsAtRange(range);\n  var inlines = texts.map(function (text) {\n    return document.getClosest(text.key, function (parent) {\n      if (parent.object !== 'inline') return false;\n      if (properties.type != null && parent.type !== properties.type) return false;\n      if (properties.data != null && !parent.data.isSuperset(properties.data)) return false;\n      return true;\n    });\n  }).filter(function (exists) {\n    return exists;\n  }).toOrderedSet().toList();\n  editor.withoutNormalizing(function () {\n    inlines.forEach(function (inline) {\n      var parent = editor.value.document.getParent(inline.key);\n      var index = parent.nodes.indexOf(inline);\n      inline.nodes.forEach(function (child, i) {\n        editor.moveNodeByKey(child.key, parent.key, index + i);\n      });\n      editor.removeNodeByKey(inline.key);\n    });\n  });\n};\n/**\n * Wrap all of the blocks in a `range` in a new `block`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Block|Object|String} block\n */\n\n\nCommands$1.wrapBlockAtRange = function (editor, range, block) {\n  block = Block.create(block);\n  block = block.set('nodes', block.nodes.clear());\n  var value = editor.value;\n  var document = value.document;\n  var blocks = document.getLeafBlocksAtRange(range);\n  var firstblock = blocks.first();\n  var lastblock = blocks.last();\n  var parent = void 0,\n      siblings = void 0,\n      index = void 0; // If there is only one block in the selection then we know the parent and\n  // siblings.\n\n  if (blocks.length === 1) {\n    parent = document.getParent(firstblock.key);\n    siblings = blocks;\n  } else {\n    // Determine closest shared parent to all blocks in selection.\n    parent = document.getClosest(firstblock.key, function (p1) {\n      return !!document.getClosest(lastblock.key, function (p2) {\n        return p1 === p2;\n      });\n    });\n  } // If no shared parent could be found then the parent is the document.\n\n\n  if (parent == null) parent = document; // Create a list of direct children siblings of parent that fall in the\n  // selection.\n\n  if (siblings == null) {\n    var indexes = parent.nodes.reduce(function (ind, node, i) {\n      if (node === firstblock || node.hasDescendant(firstblock.key)) ind[0] = i;\n      if (node === lastblock || node.hasDescendant(lastblock.key)) ind[1] = i;\n      return ind;\n    }, []);\n    index = indexes[0];\n    siblings = parent.nodes.slice(indexes[0], indexes[1] + 1);\n  } // Get the index to place the new wrapped node at.\n\n\n  if (index == null) {\n    index = parent.nodes.indexOf(siblings.first());\n  }\n\n  editor.withoutNormalizing(function () {\n    // Inject the new block node into the parent.\n    editor.insertNodeByKey(parent.key, index, block); // Move the sibling nodes into the new block node.\n\n    siblings.forEach(function (node, i) {\n      editor.moveNodeByKey(node.key, block.key, i);\n    });\n  });\n};\n/**\n * Wrap the text and inlines in a `range` in a new `inline`.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {Inline|Object|String} inline\n */\n\n\nCommands$1.wrapInlineAtRange = function (editor, range, inline) {\n  var value = editor.value;\n  var document = value.document;\n  var start = range.start,\n      end = range.end;\n\n  if (range.isCollapsed) {\n    // Wrapping an inline void\n    var inlineParent = document.getClosestInline(start.key);\n\n    if (!inlineParent) {\n      return;\n    }\n\n    if (!editor.isVoid(inlineParent)) {\n      return;\n    }\n\n    return editor.wrapInlineByKey(inlineParent.key, inline);\n  }\n\n  inline = Inline.create(inline);\n  inline = inline.set('nodes', inline.nodes.clear());\n  var blocks = document.getLeafBlocksAtRange(range);\n  var startBlock = document.getClosestBlock(start.key);\n  var endBlock = document.getClosestBlock(end.key);\n  var startInline = document.getClosestInline(start.key);\n  var endInline = document.getClosestInline(end.key);\n  var startChild = startBlock.getFurthestAncestor(start.key);\n  var endChild = endBlock.getFurthestAncestor(end.key);\n  editor.withoutNormalizing(function () {\n    if (!startInline || startInline !== endInline) {\n      editor.splitDescendantsByKey(endChild.key, end.key, end.offset);\n      editor.splitDescendantsByKey(startChild.key, start.key, start.offset);\n    }\n\n    document = editor.value.document;\n    startBlock = document.getDescendant(startBlock.key);\n    endBlock = document.getDescendant(endBlock.key);\n    startChild = startBlock.getFurthestAncestor(start.key);\n    endChild = endBlock.getFurthestAncestor(end.key);\n    var startIndex = startBlock.nodes.indexOf(startChild);\n    var endIndex = endBlock.nodes.indexOf(endChild);\n\n    if (startInline && startInline === endInline) {\n      var text = startBlock.getTextsAtRange(range).get(0).splitText(start.offset)[1].splitText(end.offset - start.offset)[0];\n      inline = inline.set('nodes', List([text]));\n      editor.insertInlineAtRange(range, inline);\n      var inlinekey = inline.getFirstText().key;\n      var rng = {\n        anchor: {\n          key: inlinekey,\n          offset: 0\n        },\n        focus: {\n          key: inlinekey,\n          offset: end.offset - start.offset\n        },\n        isFocused: true\n      };\n      editor.select(rng);\n    } else if (startBlock === endBlock) {\n      document = editor.value.document;\n      startBlock = document.getClosestBlock(start.key);\n      startChild = startBlock.getFurthestAncestor(start.key);\n      var startInner = document.getNextSibling(startChild.key);\n      var startInnerIndex = startBlock.nodes.indexOf(startInner);\n      var endInner = start.key === end.key ? startInner : startBlock.getFurthestAncestor(end.key);\n      var inlines = startBlock.nodes.skipUntil(function (n) {\n        return n === startInner;\n      }).takeUntil(function (n) {\n        return n === endInner;\n      }).push(endInner);\n      var node = inline.regenerateKey();\n      editor.insertNodeByKey(startBlock.key, startInnerIndex, node);\n      inlines.forEach(function (child, i) {\n        editor.moveNodeByKey(child.key, node.key, i);\n      });\n    } else {\n      var startInlines = startBlock.nodes.slice(startIndex + 1);\n      var endInlines = endBlock.nodes.slice(0, endIndex + 1);\n      var startNode = inline.regenerateKey();\n      var endNode = inline.regenerateKey();\n      editor.insertNodeByKey(startBlock.key, startIndex + 1, startNode);\n      editor.insertNodeByKey(endBlock.key, endIndex, endNode);\n      startInlines.forEach(function (child, i) {\n        editor.moveNodeByKey(child.key, startNode.key, i);\n      });\n      endInlines.forEach(function (child, i) {\n        editor.moveNodeByKey(child.key, endNode.key, i);\n      });\n      blocks.slice(1, -1).forEach(function (block) {\n        var node = inline.regenerateKey();\n        editor.insertNodeByKey(block.key, 0, node);\n        block.nodes.forEach(function (child, i) {\n          editor.moveNodeByKey(child.key, node.key, i);\n        });\n      });\n    }\n  });\n};\n/**\n * Wrap the text in a `range` in a prefix/suffix.\n *\n * @param {Editor} editor\n * @param {Range} range\n * @param {String} prefix\n * @param {String} suffix (optional)\n */\n\n\nCommands$1.wrapTextAtRange = function (editor, range, prefix) {\n  var suffix = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : prefix;\n  var start = range.start,\n      end = range.end;\n  var startRange = range.moveToStart();\n  var endRange = range.moveToEnd();\n\n  if (start.key === end.key) {\n    endRange = endRange.moveForward(prefix.length);\n  }\n\n  editor.withoutNormalizing(function () {\n    editor.insertTextAtRange(startRange, prefix, []);\n    editor.insertTextAtRange(endRange, suffix, []);\n  });\n};\n/**\n * Export.\n *\n * @type {Object}\n */\n\n\nvar Commands$2 = {};\n/**\n * Add mark to text at `offset` and `length` in node by `path`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Number} offset\n * @param {Number} length\n * @param {Mixed} mark\n */\n\nCommands$2.addMarkByPath = function (editor, path, offset, length, mark) {\n  mark = Mark.create(mark);\n  var value = editor.value;\n  var document = value.document;\n  var node = document.assertNode(path);\n  var leaves = node.getLeaves();\n  var operations = [];\n  var bx = offset;\n  var by = offset + length;\n  var o = 0;\n  leaves.forEach(function (leaf) {\n    var ax = o;\n    var ay = ax + leaf.text.length;\n    o += leaf.text.length; // If the leaf doesn't overlap with the operation, continue on.\n\n    if (ay < bx || by < ax) return; // If the leaf already has the mark, continue on.\n\n    if (leaf.marks.has(mark)) return; // Otherwise, determine which offset and characters overlap.\n\n    var start = Math.max(ax, bx);\n    var end = Math.min(ay, by);\n    operations.push({\n      type: 'add_mark',\n      path: path,\n      offset: start,\n      length: end - start,\n      mark: mark\n    });\n  });\n  operations.forEach(function (op) {\n    return editor.applyOperation(op);\n  });\n};\n/**\n * Insert a `fragment` at `index` in a node by `path`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Number} index\n * @param {Fragment} fragment\n */\n\n\nCommands$2.insertFragmentByPath = function (editor, path, index, fragment) {\n  fragment.nodes.forEach(function (node, i) {\n    editor.insertNodeByPath(path, index + i, node);\n  });\n};\n/**\n * Insert a `node` at `index` in a node by `path`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Number} index\n * @param {Node} node\n */\n\n\nCommands$2.insertNodeByPath = function (editor, path, index, node) {\n  editor.applyOperation({\n    type: 'insert_node',\n    path: path.concat(index),\n    node: node\n  });\n};\n/**\n * Insert `text` at `offset` in node by `path`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Number} offset\n * @param {String} text\n * @param {Set<Mark>} marks (optional)\n */\n\n\nCommands$2.insertTextByPath = function (editor, path, offset, text, marks) {\n  var value = editor.value;\n  var decorations = value.decorations,\n      document = value.document;\n  var node = document.assertNode(path);\n  marks = marks || node.getMarksAtIndex(offset);\n  var updated = false;\n  var key = node.key;\n  var decs = decorations.filter(function (dec) {\n    var start = dec.start,\n        end = dec.end,\n        mark = dec.mark;\n    var isAtomic = editor.isAtomic(mark);\n    if (!isAtomic) return true;\n    if (start.key !== key) return true;\n\n    if (start.offset < offset && (end.key !== key || end.offset > offset)) {\n      updated = true;\n      return false;\n    }\n\n    return true;\n  });\n\n  if (updated) {\n    editor.setDecorations(decs);\n  }\n\n  editor.applyOperation({\n    type: 'insert_text',\n    path: path,\n    offset: offset,\n    text: text,\n    marks: marks\n  });\n};\n/**\n * Merge a node by `path` with the previous node.\n *\n * @param {Editor} editor\n * @param {Array} path\n */\n\n\nCommands$2.mergeNodeByPath = function (editor, path) {\n  var value = editor.value;\n  var document = value.document;\n  var original = document.getDescendant(path);\n  var previous = document.getPreviousSibling(path);\n\n  if (!previous) {\n    throw new Error('Unable to merge node with path \"' + path + '\", because it has no previous sibling.');\n  }\n\n  var position = previous.object === 'text' ? previous.text.length : previous.nodes.size;\n  editor.applyOperation({\n    type: 'merge_node',\n    path: path,\n    position: position,\n    // for undos to succeed we only need the type and data because\n    // these are the only properties that get changed in the merge operation\n    properties: {\n      type: original.type,\n      data: original.data\n    },\n    target: null\n  });\n};\n/**\n * Move a node by `path` to a new parent by `newParentPath` and `newIndex`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {String} newParentPath\n * @param {Number} newIndex\n */\n\n\nCommands$2.moveNodeByPath = function (editor, path, newParentPath, newIndex) {\n  // If the operation path and newParentPath are the same,\n  // this should be considered a NOOP\n  if (PathUtils.isEqual(path, newParentPath)) {\n    return editor;\n  }\n\n  var newPath = newParentPath.concat(newIndex);\n\n  if (PathUtils.isEqual(path, newPath)) {\n    return editor;\n  }\n\n  editor.applyOperation({\n    type: 'move_node',\n    path: path,\n    newPath: newPath\n  });\n};\n/**\n * Remove mark from text at `offset` and `length` in node by `path`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Number} offset\n * @param {Number} length\n * @param {Mark} mark\n */\n\n\nCommands$2.removeMarkByPath = function (editor, path, offset, length, mark) {\n  mark = Mark.create(mark);\n  var value = editor.value;\n  var document = value.document;\n  var node = document.assertNode(path);\n  var leaves = node.getLeaves();\n  var operations = [];\n  var bx = offset;\n  var by = offset + length;\n  var o = 0;\n  leaves.forEach(function (leaf) {\n    var ax = o;\n    var ay = ax + leaf.text.length;\n    o += leaf.text.length; // If the leaf doesn't overlap with the operation, continue on.\n\n    if (ay < bx || by < ax) return; // If the leaf already has the mark, continue on.\n\n    if (!leaf.marks.has(mark)) return; // Otherwise, determine which offset and characters overlap.\n\n    var start = Math.max(ax, bx);\n    var end = Math.min(ay, by);\n    operations.push({\n      type: 'remove_mark',\n      path: path,\n      offset: start,\n      length: end - start,\n      mark: mark\n    });\n  });\n  operations.forEach(function (op) {\n    return editor.applyOperation(op);\n  });\n};\n/**\n * Remove all `marks` from node by `path`.\n *\n * @param {Editor} editor\n * @param {Array} path\n */\n\n\nCommands$2.removeAllMarksByPath = function (editor, path) {\n  var state = editor.state;\n  var document = state.document;\n  var node = document.assertNode(path);\n  var texts = node.object === 'text' ? [node] : node.getTextsAsArray();\n  texts.forEach(function (text) {\n    text.getMarksAsArray().forEach(function (mark) {\n      editor.removeMarkByKey(text.key, 0, text.text.length, mark);\n    });\n  });\n};\n/**\n * Remove a node by `path`.\n *\n * @param {Editor} editor\n * @param {Array} path\n */\n\n\nCommands$2.removeNodeByPath = function (editor, path) {\n  var value = editor.value;\n  var document = value.document;\n  var node = document.assertNode(path);\n  editor.applyOperation({\n    type: 'remove_node',\n    path: path,\n    node: node\n  });\n};\n/**\n * Remove text at `offset` and `length` in node by `path`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Number} offset\n * @param {Number} length\n */\n\n\nCommands$2.removeTextByPath = function (editor, path, offset, length) {\n  var value = editor.value;\n  var decorations = value.decorations,\n      document = value.document;\n  var node = document.assertNode(path);\n  var leaves = node.getLeaves();\n  var text = node.text;\n  var updated = false;\n  var key = node.key;\n  var from = offset;\n  var to = offset + length;\n  var decs = decorations.filter(function (dec) {\n    var start = dec.start,\n        end = dec.end,\n        mark = dec.mark;\n    var isAtomic = editor.isAtomic(mark);\n    if (!isAtomic) return true;\n    if (start.key !== key) return true;\n\n    if (start.offset < from && (end.key !== key || end.offset > from)) {\n      updated = true;\n      return false;\n    }\n\n    if (start.offset < to && (end.key !== key || end.offset > to)) {\n      updated = true;\n      return null;\n    }\n\n    return true;\n  });\n\n  if (updated) {\n    editor.setDecorations(decs);\n  }\n\n  var removals = [];\n  var bx = offset;\n  var by = offset + length;\n  var o = 0;\n  leaves.forEach(function (leaf) {\n    var ax = o;\n    var ay = ax + leaf.text.length;\n    o += leaf.text.length; // If the leaf doesn't overlap with the removal, continue on.\n\n    if (ay < bx || by < ax) return; // Otherwise, determine which offset and characters overlap.\n\n    var start = Math.max(ax, bx);\n    var end = Math.min(ay, by);\n    var string = text.slice(start, end);\n    removals.push({\n      type: 'remove_text',\n      path: path,\n      offset: start,\n      text: string,\n      marks: leaf.marks\n    });\n  }); // Apply in reverse order, so subsequent removals don't impact previous ones.\n\n  removals.reverse().forEach(function (op) {\n    return editor.applyOperation(op);\n  });\n};\n/**\n`* Replace a `node` with another `node`\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Object|Node} node\n */\n\n\nCommands$2.replaceNodeByPath = function (editor, path, newNode) {\n  newNode = Node.create(newNode);\n  var index = path.last();\n  var parentPath = PathUtils.lift(path);\n  editor.withoutNormalizing(function () {\n    editor.removeNodeByPath(path);\n    editor.insertNodeByPath(parentPath, index, newNode);\n  });\n};\n/**\n * Replace A Length of Text with another string or text\n * @param {Editor} editor\n * @param {String} key\n * @param {Number} offset\n * @param {Number} length\n * @param {string} text\n * @param {Set<Mark>} marks (optional)\n */\n\n\nCommands$2.replaceTextByPath = function (editor, path, offset, length, text, marks) {\n  var document = editor.value.document;\n  var node = document.assertNode(path);\n\n  if (length + offset > node.text.length) {\n    length = node.text.length - offset;\n  }\n\n  var range = document.createRange({\n    anchor: {\n      path: path,\n      offset: offset\n    },\n    focus: {\n      path: path,\n      offset: offset + length\n    }\n  });\n  var activeMarks = document.getActiveMarksAtRange(range);\n  editor.withoutNormalizing(function () {\n    editor.removeTextByPath(path, offset, length);\n\n    if (!marks) {\n      // Do not use mark at index when marks and activeMarks are both empty\n      marks = activeMarks ? activeMarks : [];\n    } else if (activeMarks) {\n      // Do not use `has` because we may want to reset marks like font-size with\n      // an updated data;\n      activeMarks = activeMarks.filter(function (activeMark) {\n        return !marks.find(function (m) {\n          return activeMark.type === m.type;\n        });\n      });\n      marks = activeMarks.merge(marks);\n    }\n\n    editor.insertTextByPath(path, offset, text, marks);\n  });\n};\n/**\n * Set `newProperties` on mark on text at `offset` and `length` in node by `path`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Number} offset\n * @param {Number} length\n * @param {Object|Mark} properties\n * @param {Object} newProperties\n */\n\n\nCommands$2.setMarkByPath = function (editor, path, offset, length, properties, newProperties) {\n  // we call Mark.create() here because we need the complete previous mark instance\n  properties = Mark.create(properties);\n  newProperties = Mark.createProperties(newProperties);\n  editor.applyOperation({\n    type: 'set_mark',\n    path: path,\n    offset: offset,\n    length: length,\n    properties: properties,\n    newProperties: newProperties\n  });\n};\n/**\n * Set `properties` on a node by `path`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Object|String} newProperties\n */\n\n\nCommands$2.setNodeByPath = function (editor, path, newProperties) {\n  var value = editor.value;\n  var document = value.document;\n  var node = document.assertNode(path);\n  newProperties = Node.createProperties(newProperties);\n  var prevProperties = pick(node, Object.keys(newProperties));\n  editor.applyOperation({\n    type: 'set_node',\n    path: path,\n    properties: prevProperties,\n    newProperties: newProperties\n  });\n};\n/**\n * Insert `text` at `offset` in node by `path`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {String} text\n * @param {Set<Mark>} marks (optional)\n */\n\n\nCommands$2.setTextByPath = function (editor, path, text, marks) {\n  var value = editor.value;\n  var document = value.document;\n  var node = document.assertNode(path);\n  var end = node.text.length;\n  editor.replaceTextByPath(path, 0, end, text, marks);\n};\n/**\n * Split a node by `path` at `position`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Number} position\n * @param {Object} options\n */\n\n\nCommands$2.splitNodeByPath = function (editor, path, position) {\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  var _options$target = options.target,\n      target = _options$target === undefined ? null : _options$target;\n  var value = editor.value;\n  var document = value.document;\n  var node = document.getDescendant(path);\n  editor.applyOperation({\n    type: 'split_node',\n    path: path,\n    position: position,\n    target: target,\n    properties: {\n      type: node.type,\n      data: node.data\n    }\n  });\n};\n/**\n * Split a node deeply down the tree by `path`, `textPath` and `textOffset`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Array} textPath\n * @param {Number} textOffset\n */\n\n\nCommands$2.splitDescendantsByPath = function (editor, path, textPath, textOffset) {\n  if (path.equals(textPath)) {\n    editor.splitNodeByPath(textPath, textOffset);\n    return;\n  }\n\n  var value = editor.value;\n  var document = value.document;\n  var node = document.assertNode(path);\n  var text = document.assertNode(textPath);\n  var ancestors = document.getAncestors(textPath);\n  var nodes = ancestors.skipUntil(function (a) {\n    return a.key === node.key;\n  }).reverse().unshift(text);\n  var previous = void 0;\n  var index = void 0;\n  editor.withoutNormalizing(function () {\n    nodes.forEach(function (n) {\n      var prevIndex = index == null ? null : index;\n      index = previous ? n.nodes.indexOf(previous) + 1 : textOffset;\n      previous = n;\n      editor.splitNodeByKey(n.key, index, {\n        target: prevIndex\n      });\n    });\n  });\n};\n/**\n * Unwrap content from an inline parent with `properties`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Object|String} properties\n */\n\n\nCommands$2.unwrapInlineByPath = function (editor, path, properties) {\n  var value = editor.value;\n  var document = value.document,\n      selection = value.selection;\n  var node = document.assertNode(path);\n  var first = node.getFirstText();\n  var last = node.getLastText();\n  var range = selection.moveToRangeOfNode(first, last);\n  editor.unwrapInlineAtRange(range, properties);\n};\n/**\n * Unwrap content from a block parent with `properties`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Object|String} properties\n */\n\n\nCommands$2.unwrapBlockByPath = function (editor, path, properties) {\n  var value = editor.value;\n  var document = value.document,\n      selection = value.selection;\n  var node = document.assertNode(path);\n  var first = node.getFirstText();\n  var last = node.getLastText();\n  var range = selection.moveToRangeOfNode(first, last);\n  editor.unwrapBlockAtRange(range, properties);\n};\n/**\n * Unwrap a single node from its parent.\n *\n * If the node is surrounded with siblings, its parent will be\n * split. If the node is the only child, the parent is removed, and\n * simply replaced by the node itself.  Cannot unwrap a root node.\n *\n * @param {Editor} editor\n * @param {Array} path\n */\n\n\nCommands$2.unwrapNodeByPath = function (editor, path) {\n  var value = editor.value;\n  var document = value.document;\n  document.assertNode(path);\n  var parentPath = PathUtils.lift(path);\n  var parent = document.assertNode(parentPath);\n  var index = path.last();\n  var parentIndex = parentPath.last();\n  var grandPath = PathUtils.lift(parentPath);\n  var isFirst = index === 0;\n  var isLast = index === parent.nodes.size - 1;\n  editor.withoutNormalizing(function () {\n    if (parent.nodes.size === 1) {\n      editor.moveNodeByPath(path, grandPath, parentIndex + 1);\n      editor.removeNodeByPath(parentPath);\n    } else if (isFirst) {\n      editor.moveNodeByPath(path, grandPath, parentIndex);\n    } else if (isLast) {\n      editor.moveNodeByPath(path, grandPath, parentIndex + 1);\n    } else {\n      var updatedPath = PathUtils.increment(path, 1, parentPath.size - 1);\n      updatedPath = updatedPath.set(updatedPath.size - 1, 0);\n      editor.splitNodeByPath(parentPath, index);\n      editor.moveNodeByPath(updatedPath, grandPath, parentIndex + 1);\n    }\n  });\n};\n/**\n * Unwrap all of the children of a node, by removing the node and replacing it\n * with the children in the tree.\n *\n * @param {Editor} editor\n * @param {Array} path\n */\n\n\nCommands$2.unwrapChildrenByPath = function (editor, path) {\n  path = PathUtils.create(path);\n  var value = editor.value;\n  var document = value.document;\n  var node = document.assertNode(path);\n  var parentPath = PathUtils.lift(path);\n  var index = path.last();\n  var nodes = node.nodes;\n  editor.withoutNormalizing(function () {\n    nodes.reverse().forEach(function (child, i) {\n      var childIndex = nodes.size - i - 1;\n      var childPath = path.push(childIndex);\n      editor.moveNodeByPath(childPath, parentPath, index + 1);\n    });\n    editor.removeNodeByPath(path);\n  });\n};\n/**\n * Wrap a node in a block with `properties`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Block|Object|String} block\n */\n\n\nCommands$2.wrapBlockByPath = function (editor, path, block) {\n  block = Block.create(block);\n  block = block.set('nodes', block.nodes.clear());\n  var parentPath = PathUtils.lift(path);\n  var index = path.last();\n  var newPath = PathUtils.increment(path);\n  editor.withoutNormalizing(function () {\n    editor.insertNodeByPath(parentPath, index, block);\n    editor.moveNodeByPath(newPath, path, 0);\n  });\n};\n/**\n * Wrap a node in an inline with `properties`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Block|Object|String} inline\n */\n\n\nCommands$2.wrapInlineByPath = function (editor, path, inline) {\n  inline = Inline.create(inline);\n  inline = inline.set('nodes', inline.nodes.clear());\n  var parentPath = PathUtils.lift(path);\n  var index = path.last();\n  var newPath = PathUtils.increment(path);\n  editor.withoutNormalizing(function () {\n    editor.insertNodeByPath(parentPath, index, inline);\n    editor.moveNodeByPath(newPath, path, 0);\n  });\n};\n/**\n * Wrap a node by `path` with `node`.\n *\n * @param {Editor} editor\n * @param {Array} path\n * @param {Node|Object} node\n */\n\n\nCommands$2.wrapNodeByPath = function (editor, path, node) {\n  node = Node.create(node);\n\n  if (node.object === 'block') {\n    editor.wrapBlockByPath(path, node);\n  } else if (node.object === 'inline') {\n    editor.wrapInlineByPath(path, node);\n  }\n};\n/**\n * Mix in `*ByKey` variants.\n */\n\n\nvar COMMANDS = ['addMark', 'insertFragment', 'insertNode', 'insertText', 'mergeNode', 'removeAllMarks', 'removeMark', 'removeNode', 'removeText', 'replaceNode', 'replaceText', 'setMark', 'setNode', 'setText', 'splitNode', 'unwrapBlock', 'unwrapChildren', 'unwrapInline', 'unwrapNode', 'wrapBlock', 'wrapInline', 'wrapNode'];\n\nvar _loop = function _loop(method) {\n  Commands$2[method + 'ByKey'] = function (editor, key) {\n    for (var _len3 = arguments.length, args = Array(_len3 > 2 ? _len3 - 2 : 0), _key3 = 2; _key3 < _len3; _key3++) {\n      args[_key3 - 2] = arguments[_key3];\n    }\n\n    var value = editor.value;\n    var document = value.document;\n    var path = document.assertPath(key);\n    editor[method + 'ByPath'].apply(editor, [path].concat(args));\n  };\n};\n\nvar _iteratorNormalCompletion = true;\nvar _didIteratorError = false;\nvar _iteratorError = undefined;\n\ntry {\n  for (var _iterator = COMMANDS[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n    var method = _step.value;\n\n    _loop(method);\n  } // Moving nodes takes two keys, so it's slightly different.\n\n} catch (err) {\n  _didIteratorError = true;\n  _iteratorError = err;\n} finally {\n  try {\n    if (!_iteratorNormalCompletion && _iterator.return) {\n      _iterator.return();\n    }\n  } finally {\n    if (_didIteratorError) {\n      throw _iteratorError;\n    }\n  }\n}\n\nCommands$2.moveNodeByKey = function (editor, key, newKey) {\n  for (var _len = arguments.length, args = Array(_len > 3 ? _len - 3 : 0), _key = 3; _key < _len; _key++) {\n    args[_key - 3] = arguments[_key];\n  }\n\n  var value = editor.value;\n  var document = value.document;\n  var path = document.assertPath(key);\n  var newPath = document.assertPath(newKey);\n  editor.moveNodeByPath.apply(editor, [path, newPath].concat(args));\n}; // Splitting descendants takes two keys, so it's slightly different.\n\n\nCommands$2.splitDescendantsByKey = function (editor, key, textKey) {\n  for (var _len2 = arguments.length, args = Array(_len2 > 3 ? _len2 - 3 : 0), _key2 = 3; _key2 < _len2; _key2++) {\n    args[_key2 - 3] = arguments[_key2];\n  }\n\n  var value = editor.value;\n  var document = value.document;\n  var path = document.assertPath(key);\n  var textPath = document.assertPath(textKey);\n  editor.splitDescendantsByPath.apply(editor, [path, textPath].concat(args));\n};\n/**\n * Export.\n *\n * @type {Object}\n */\n\n\nvar Commands$3 = {};\n/**\n * Save an `operation` into the history.\n *\n * @param {Editor} editor\n * @param {Object} operation\n */\n\nCommands$3.save = function (editor, operation) {\n  var operations = editor.operations,\n      value = editor.value;\n  var data = value.data;\n  var _editor$tmp = editor.tmp,\n      save = _editor$tmp.save,\n      merge = _editor$tmp.merge;\n  if (save === false) return;\n  var undos = data.get('undos') || List();\n  var lastBatch = undos.last();\n  var lastOperation = lastBatch && lastBatch.last(); // If `merge` is non-commital, and this is not the first operation in a new\n  // editor, then merge, otherwise merge based on the last operation.\n\n  if (merge == null) {\n    if (operations.size !== 0) {\n      merge = true;\n    } else {\n      merge = shouldMerge(operation, lastOperation);\n    }\n  } // If the `merge` flag is true, add the operation to the last batch.\n\n\n  if (merge && lastBatch) {\n    var batch = lastBatch.push(operation);\n    undos = undos.pop();\n    undos = undos.push(batch);\n  } else {\n    // Otherwise, create a new batch with the operation.\n    var _batch = List([operation]);\n\n    undos = undos.push(_batch);\n  } // Constrain the history to 100 entries for memory's sake.\n\n\n  if (undos.size > 100) {\n    undos = undos.takeLast(100);\n  } // Clear the redos and update the history.\n\n\n  editor.withoutSaving(function () {\n    var redos = List();\n    var newData = data.set('undos', undos).set('redos', redos);\n    editor.setData(newData);\n  });\n};\n/**\n * Redo to the next value in the history.\n *\n * @param {Editor} editor\n */\n\n\nCommands$3.redo = function (editor) {\n  var value = editor.value;\n  var data = value.data;\n  var redos = data.get('redos') || List();\n  var undos = data.get('undos') || List();\n  var batch = redos.last();\n  if (!batch) return;\n  editor.withoutSaving(function () {\n    editor.withoutNormalizing(function () {\n      // Replay the batch of operations.\n      batch.forEach(function (op) {\n        var _op = op,\n            type = _op.type,\n            properties = _op.properties; // When the operation mutates the selection, omit its `isFocused` value to\n        // prevent the editor focus from changing during redoing.\n\n        if (type === 'set_selection') {\n          op = op.set('properties', omit(properties, 'isFocused'));\n        }\n\n        editor.applyOperation(op);\n      }); // Shift the next value into the undo stack.\n\n      redos = redos.pop();\n      undos = undos.push(batch);\n      var newData = data.set('undos', undos).set('redos', redos);\n      editor.setData(newData);\n    });\n  });\n};\n/**\n * Undo the previous operations in the history.\n *\n * @param {Editor} editor\n */\n\n\nCommands$3.undo = function (editor) {\n  var value = editor.value;\n  var data = value.data;\n  var redos = data.get('redos') || List();\n  var undos = data.get('undos') || List();\n  var batch = undos.last();\n  if (!batch) return;\n  editor.withoutSaving(function () {\n    editor.withoutNormalizing(function () {\n      // Replay the inverse of the previous operations.\n      batch.slice().reverse().map(function (op) {\n        return op.invert();\n      }).forEach(function (inverse) {\n        var _inverse = inverse,\n            type = _inverse.type,\n            properties = _inverse.properties; // When the operation mutates the selection, omit its `isFocused` value to\n        // prevent the editor focus from changing during undoing.\n\n        if (type === 'set_selection') {\n          inverse = inverse.set('properties', omit(properties, 'isFocused'));\n        }\n\n        editor.applyOperation(inverse);\n      }); // Shift the previous operations into the redo stack.\n\n      redos = redos.push(batch);\n      undos = undos.pop();\n      var newData = data.set('undos', undos).set('redos', redos);\n      editor.setData(newData);\n    });\n  });\n};\n/**\n * Apply a series of changes inside a synchronous `fn`, without merging any of\n * the new operations into previous save point in the history.\n *\n * @param {Editor} editor\n * @param {Function} fn\n */\n\n\nCommands$3.withoutMerging = function (editor, fn) {\n  var value = editor.tmp.merge;\n  editor.tmp.merge = false;\n  fn(editor);\n  editor.tmp.merge = value;\n};\n/**\n * Apply a series of changes inside a synchronous `fn`, without saving any of\n * their operations into the history.\n *\n * @param {Editor} editor\n * @param {Function} fn\n */\n\n\nCommands$3.withoutSaving = function (editor, fn) {\n  var value = editor.tmp.save;\n  editor.tmp.save = false;\n  fn(editor);\n  editor.tmp.save = value;\n};\n/**\n * Check whether to merge a new operation `o` into the previous operation `p`.\n *\n * @param {Object} o\n * @param {Object} p\n * @return {Boolean}\n */\n\n\nfunction shouldMerge(o, p) {\n  if (!p) return false;\n  var merge = o.type === 'set_selection' && p.type === 'set_selection' || o.type === 'insert_text' && p.type === 'insert_text' && o.offset === p.offset + p.text.length && o.path.equals(p.path) || o.type === 'remove_text' && p.type === 'remove_text' && o.offset + o.text.length === p.offset && o.path.equals(p.path);\n  return merge;\n}\n/**\n * Export.\n *\n * @type {Object}\n */\n\n\nvar Commands$4 = {};\n\nCommands$4.blur = function (editor) {\n  editor.select({\n    isFocused: false\n  });\n};\n\nCommands$4.deselect = function (editor) {\n  var range = Selection.create();\n  editor.select(range);\n};\n\nCommands$4.focus = function (editor) {\n  editor.select({\n    isFocused: true\n  });\n};\n\nCommands$4.flip = function (editor) {\n  editor.command(proxy, 'flip');\n};\n\nCommands$4.moveAnchorBackward = function (editor) {\n  for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    args[_key - 1] = arguments[_key];\n  }\n\n  editor.command.apply(editor, [pointBackward, 'anchor'].concat(args));\n};\n\nCommands$4.moveAnchorWordBackward = function (editor) {\n  for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n    args[_key2 - 1] = arguments[_key2];\n  }\n\n  editor.command.apply(editor, [pointWordBackward, 'anchor'].concat(args));\n};\n\nCommands$4.moveAnchorForward = function (editor) {\n  for (var _len3 = arguments.length, args = Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n    args[_key3 - 1] = arguments[_key3];\n  }\n\n  editor.command.apply(editor, [pointForward, 'anchor'].concat(args));\n};\n\nCommands$4.moveAnchorWordForward = function (editor) {\n  for (var _len4 = arguments.length, args = Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n    args[_key4 - 1] = arguments[_key4];\n  }\n\n  editor.command.apply(editor, [pointWordForward, 'anchor'].concat(args));\n};\n\nCommands$4.moveAnchorTo = function (editor) {\n  for (var _len5 = arguments.length, args = Array(_len5 > 1 ? _len5 - 1 : 0), _key5 = 1; _key5 < _len5; _key5++) {\n    args[_key5 - 1] = arguments[_key5];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveAnchorTo'].concat(args));\n};\n\nCommands$4.moveAnchorToEndOfBlock = function (editor) {\n  editor.command(pointEdgeObject, 'anchor', 'end', 'block');\n};\n\nCommands$4.moveAnchorToEndOfInline = function (editor) {\n  editor.command(pointEdgeObject, 'anchor', 'end', 'inline');\n};\n\nCommands$4.moveAnchorToEndOfDocument = function (editor) {\n  editor.moveAnchorToEndOfNode(editor.value.document).moveToAnchor();\n};\n\nCommands$4.moveAnchorToEndOfNextBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'anchor', 'end', 'next', 'block');\n};\n\nCommands$4.moveAnchorToEndOfNextInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'anchor', 'end', 'next', 'inline');\n};\n\nCommands$4.moveAnchorToEndOfNextText = function (editor) {\n  editor.command(pointEdgeSideObject, 'anchor', 'end', 'next', 'text');\n};\n\nCommands$4.moveAnchorToEndOfNode = function (editor) {\n  for (var _len6 = arguments.length, args = Array(_len6 > 1 ? _len6 - 1 : 0), _key6 = 1; _key6 < _len6; _key6++) {\n    args[_key6 - 1] = arguments[_key6];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveAnchorToEndOfNode'].concat(args));\n};\n\nCommands$4.moveAnchorToEndOfPreviousBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'anchor', 'end', 'previous', 'block');\n};\n\nCommands$4.moveAnchorToEndOfPreviousInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'anchor', 'end', 'previous', 'inline');\n};\n\nCommands$4.moveAnchorToEndOfPreviousText = function (editor) {\n  editor.command(pointEdgeSideObject, 'anchor', 'end', 'previous', 'text');\n};\n\nCommands$4.moveAnchorToEndOfText = function (editor) {\n  editor.command(pointEdgeObject, 'anchor', 'end', 'text');\n};\n\nCommands$4.moveAnchorToStartOfBlock = function (editor) {\n  editor.command(pointEdgeObject, 'anchor', 'start', 'block');\n};\n\nCommands$4.moveAnchorToStartOfDocument = function (editor) {\n  editor.moveAnchorToStartOfNode(editor.value.document).moveToAnchor();\n};\n\nCommands$4.moveAnchorToStartOfInline = function (editor) {\n  editor.command(pointEdgeObject, 'anchor', 'start', 'inline');\n};\n\nCommands$4.moveAnchorToStartOfNextBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'anchor', 'start', 'next', 'block');\n};\n\nCommands$4.moveAnchorToStartOfNextInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'anchor', 'start', 'next', 'inline');\n};\n\nCommands$4.moveAnchorToStartOfNextText = function (editor) {\n  editor.command(pointEdgeSideObject, 'anchor', 'start', 'next', 'text');\n};\n\nCommands$4.moveAnchorToStartOfNode = function (editor) {\n  for (var _len7 = arguments.length, args = Array(_len7 > 1 ? _len7 - 1 : 0), _key7 = 1; _key7 < _len7; _key7++) {\n    args[_key7 - 1] = arguments[_key7];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveAnchorToStartOfNode'].concat(args));\n};\n\nCommands$4.moveAnchorToStartOfPreviousBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'anchor', 'start', 'previous', 'block');\n};\n\nCommands$4.moveAnchorToStartOfPreviousInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'anchor', 'start', 'previous', 'inline');\n};\n\nCommands$4.moveAnchorToStartOfPreviousText = function (editor) {\n  editor.command(pointEdgeSideObject, 'anchor', 'start', 'previous', 'text');\n};\n\nCommands$4.moveAnchorToStartOfText = function (editor) {\n  editor.command(pointEdgeObject, 'anchor', 'start', 'text');\n};\n\nCommands$4.moveBackward = function (editor) {\n  var _editor$moveAnchorBac;\n\n  for (var _len8 = arguments.length, args = Array(_len8 > 1 ? _len8 - 1 : 0), _key8 = 1; _key8 < _len8; _key8++) {\n    args[_key8 - 1] = arguments[_key8];\n  }\n\n  (_editor$moveAnchorBac = editor.moveAnchorBackward.apply(editor, args)).moveFocusBackward.apply(_editor$moveAnchorBac, args);\n};\n\nCommands$4.moveWordBackward = function (editor) {\n  for (var _len9 = arguments.length, args = Array(_len9 > 1 ? _len9 - 1 : 0), _key9 = 1; _key9 < _len9; _key9++) {\n    args[_key9 - 1] = arguments[_key9];\n  }\n\n  editor.moveFocusWordBackward.apply(editor, args).moveToFocus();\n};\n\nCommands$4.moveEndBackward = function (editor) {\n  for (var _len10 = arguments.length, args = Array(_len10 > 1 ? _len10 - 1 : 0), _key10 = 1; _key10 < _len10; _key10++) {\n    args[_key10 - 1] = arguments[_key10];\n  }\n\n  editor.command.apply(editor, [pointBackward, 'end'].concat(args));\n};\n\nCommands$4.moveEndWordBackward = function (editor) {\n  for (var _len11 = arguments.length, args = Array(_len11 > 1 ? _len11 - 1 : 0), _key11 = 1; _key11 < _len11; _key11++) {\n    args[_key11 - 1] = arguments[_key11];\n  }\n\n  editor.command.apply(editor, [pointWordBackward, 'end'].concat(args));\n};\n\nCommands$4.moveEndForward = function (editor) {\n  for (var _len12 = arguments.length, args = Array(_len12 > 1 ? _len12 - 1 : 0), _key12 = 1; _key12 < _len12; _key12++) {\n    args[_key12 - 1] = arguments[_key12];\n  }\n\n  editor.command.apply(editor, [pointForward, 'end'].concat(args));\n};\n\nCommands$4.moveEndWordForward = function (editor) {\n  for (var _len13 = arguments.length, args = Array(_len13 > 1 ? _len13 - 1 : 0), _key13 = 1; _key13 < _len13; _key13++) {\n    args[_key13 - 1] = arguments[_key13];\n  }\n\n  editor.command.apply(editor, [pointWordForward, 'end'].concat(args));\n};\n\nCommands$4.moveEndTo = function (editor) {\n  for (var _len14 = arguments.length, args = Array(_len14 > 1 ? _len14 - 1 : 0), _key14 = 1; _key14 < _len14; _key14++) {\n    args[_key14 - 1] = arguments[_key14];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveEndTo'].concat(args));\n};\n\nCommands$4.moveEndToEndOfBlock = function (editor) {\n  editor.command(pointEdgeObject, 'end', 'end', 'block');\n};\n\nCommands$4.moveEndToEndOfDocument = function (editor) {\n  editor.moveEndToEndOfNode(editor.value.document).moveToEnd();\n};\n\nCommands$4.moveEndToEndOfInline = function (editor) {\n  editor.command(pointEdgeObject, 'end', 'end', 'inline');\n};\n\nCommands$4.moveEndToEndOfNextBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'end', 'end', 'next', 'block');\n};\n\nCommands$4.moveEndToEndOfNextInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'end', 'end', 'next', 'inline');\n};\n\nCommands$4.moveEndToEndOfNextText = function (editor) {\n  editor.command(pointEdgeSideObject, 'end', 'end', 'next', 'text');\n};\n\nCommands$4.moveEndToEndOfNode = function (editor) {\n  for (var _len15 = arguments.length, args = Array(_len15 > 1 ? _len15 - 1 : 0), _key15 = 1; _key15 < _len15; _key15++) {\n    args[_key15 - 1] = arguments[_key15];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveEndToEndOfNode'].concat(args));\n};\n\nCommands$4.moveEndToEndOfPreviousBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'end', 'end', 'previous', 'block');\n};\n\nCommands$4.moveEndToEndOfPreviousInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'end', 'end', 'previous', 'inline');\n};\n\nCommands$4.moveEndToEndOfPreviousText = function (editor) {\n  editor.command(pointEdgeSideObject, 'end', 'end', 'previous', 'text');\n};\n\nCommands$4.moveEndToEndOfText = function (editor) {\n  editor.command(pointEdgeObject, 'end', 'end', 'text');\n};\n\nCommands$4.moveEndToStartOfBlock = function (editor) {\n  editor.command(pointEdgeObject, 'end', 'start', 'block');\n};\n\nCommands$4.moveEndToStartOfDocument = function (editor) {\n  editor.moveEndToStartOfNode(editor.value.document).moveToEnd();\n};\n\nCommands$4.moveEndToStartOfInline = function (editor) {\n  editor.command(pointEdgeObject, 'end', 'start', 'inline');\n};\n\nCommands$4.moveEndToStartOfNextBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'end', 'start', 'next', 'block');\n};\n\nCommands$4.moveEndToStartOfNextInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'end', 'start', 'next', 'inline');\n};\n\nCommands$4.moveEndToStartOfNextText = function (editor) {\n  editor.command(pointEdgeSideObject, 'end', 'start', 'next', 'text');\n};\n\nCommands$4.moveEndToStartOfNode = function (editor) {\n  for (var _len16 = arguments.length, args = Array(_len16 > 1 ? _len16 - 1 : 0), _key16 = 1; _key16 < _len16; _key16++) {\n    args[_key16 - 1] = arguments[_key16];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveEndToStartOfNode'].concat(args));\n};\n\nCommands$4.moveEndToStartOfPreviousBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'end', 'start', 'previous', 'block');\n};\n\nCommands$4.moveEndToStartOfPreviousInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'end', 'start', 'previous', 'inline');\n};\n\nCommands$4.moveEndToStartOfPreviousText = function (editor) {\n  editor.command(pointEdgeSideObject, 'end', 'start', 'previous', 'text');\n};\n\nCommands$4.moveEndToStartOfText = function (editor) {\n  editor.command(pointEdgeObject, 'end', 'start', 'text');\n};\n\nCommands$4.moveFocusBackward = function (editor) {\n  for (var _len17 = arguments.length, args = Array(_len17 > 1 ? _len17 - 1 : 0), _key17 = 1; _key17 < _len17; _key17++) {\n    args[_key17 - 1] = arguments[_key17];\n  }\n\n  editor.command.apply(editor, [pointBackward, 'focus'].concat(args));\n};\n\nCommands$4.moveFocusWordBackward = function (editor) {\n  for (var _len18 = arguments.length, args = Array(_len18 > 1 ? _len18 - 1 : 0), _key18 = 1; _key18 < _len18; _key18++) {\n    args[_key18 - 1] = arguments[_key18];\n  }\n\n  editor.command.apply(editor, [pointWordBackward, 'focus'].concat(args));\n};\n\nCommands$4.moveFocusForward = function (editor) {\n  for (var _len19 = arguments.length, args = Array(_len19 > 1 ? _len19 - 1 : 0), _key19 = 1; _key19 < _len19; _key19++) {\n    args[_key19 - 1] = arguments[_key19];\n  }\n\n  editor.command.apply(editor, [pointForward, 'focus'].concat(args));\n};\n\nCommands$4.moveFocusWordForward = function (editor) {\n  for (var _len20 = arguments.length, args = Array(_len20 > 1 ? _len20 - 1 : 0), _key20 = 1; _key20 < _len20; _key20++) {\n    args[_key20 - 1] = arguments[_key20];\n  }\n\n  editor.command.apply(editor, [pointWordForward, 'focus'].concat(args));\n};\n\nCommands$4.moveFocusTo = function (editor) {\n  for (var _len21 = arguments.length, args = Array(_len21 > 1 ? _len21 - 1 : 0), _key21 = 1; _key21 < _len21; _key21++) {\n    args[_key21 - 1] = arguments[_key21];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveFocusTo'].concat(args));\n};\n\nCommands$4.moveFocusToEndOfBlock = function (editor) {\n  editor.command(pointEdgeObject, 'focus', 'end', 'block');\n};\n\nCommands$4.moveFocusToEndOfDocument = function (editor) {\n  editor.moveFocusToEndOfNode(editor.value.document).moveToFocus();\n};\n\nCommands$4.moveFocusToEndOfInline = function (editor) {\n  editor.command(pointEdgeObject, 'focus', 'end', 'inline');\n};\n\nCommands$4.moveFocusToEndOfNextBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'focus', 'end', 'next', 'block');\n};\n\nCommands$4.moveFocusToEndOfNextInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'focus', 'end', 'next', 'inline');\n};\n\nCommands$4.moveFocusToEndOfNextText = function (editor) {\n  editor.command(pointEdgeSideObject, 'focus', 'end', 'next', 'text');\n};\n\nCommands$4.moveFocusToEndOfNode = function (editor) {\n  for (var _len22 = arguments.length, args = Array(_len22 > 1 ? _len22 - 1 : 0), _key22 = 1; _key22 < _len22; _key22++) {\n    args[_key22 - 1] = arguments[_key22];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveFocusToEndOfNode'].concat(args));\n};\n\nCommands$4.moveFocusToEndOfPreviousBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'focus', 'end', 'previous', 'block');\n};\n\nCommands$4.moveFocusToEndOfPreviousInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'focus', 'end', 'previous', 'inline');\n};\n\nCommands$4.moveFocusToEndOfPreviousText = function (editor) {\n  editor.command(pointEdgeSideObject, 'focus', 'end', 'previous', 'text');\n};\n\nCommands$4.moveFocusToEndOfText = function (editor) {\n  editor.command(pointEdgeObject, 'focus', 'end', 'text');\n};\n\nCommands$4.moveFocusToStartOfBlock = function (editor) {\n  editor.command(pointEdgeObject, 'focus', 'start', 'block');\n};\n\nCommands$4.moveFocusToStartOfDocument = function (editor) {\n  editor.moveFocusToStartOfNode(editor.value.document).moveToFocus();\n};\n\nCommands$4.moveFocusToStartOfInline = function (editor) {\n  editor.command(pointEdgeObject, 'focus', 'start', 'inline');\n};\n\nCommands$4.moveFocusToStartOfNextBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'focus', 'start', 'next', 'block');\n};\n\nCommands$4.moveFocusToStartOfNextInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'focus', 'start', 'next', 'inline');\n};\n\nCommands$4.moveFocusToStartOfNextText = function (editor) {\n  editor.command(pointEdgeSideObject, 'focus', 'start', 'next', 'text');\n};\n\nCommands$4.moveFocusToStartOfNode = function (editor) {\n  for (var _len23 = arguments.length, args = Array(_len23 > 1 ? _len23 - 1 : 0), _key23 = 1; _key23 < _len23; _key23++) {\n    args[_key23 - 1] = arguments[_key23];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveFocusToStartOfNode'].concat(args));\n};\n\nCommands$4.moveFocusToStartOfPreviousBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'focus', 'start', 'previous', 'block');\n};\n\nCommands$4.moveFocusToStartOfPreviousInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'focus', 'start', 'previous', 'inline');\n};\n\nCommands$4.moveFocusToStartOfPreviousText = function (editor) {\n  editor.command(pointEdgeSideObject, 'focus', 'start', 'previous', 'text');\n};\n\nCommands$4.moveFocusToStartOfText = function (editor) {\n  editor.command(pointEdgeObject, 'focus', 'start', 'text');\n};\n\nCommands$4.moveForward = function (editor) {\n  var _editor$moveAnchorFor;\n\n  for (var _len24 = arguments.length, args = Array(_len24 > 1 ? _len24 - 1 : 0), _key24 = 1; _key24 < _len24; _key24++) {\n    args[_key24 - 1] = arguments[_key24];\n  }\n\n  (_editor$moveAnchorFor = editor.moveAnchorForward.apply(editor, args)).moveFocusForward.apply(_editor$moveAnchorFor, args);\n};\n\nCommands$4.moveWordForward = function (editor) {\n  var _editor$moveFocusWord;\n\n  for (var _len25 = arguments.length, args = Array(_len25 > 1 ? _len25 - 1 : 0), _key25 = 1; _key25 < _len25; _key25++) {\n    args[_key25 - 1] = arguments[_key25];\n  }\n\n  (_editor$moveFocusWord = editor.moveFocusWordForward.apply(editor, args)).moveToFocus.apply(_editor$moveFocusWord, args);\n};\n\nCommands$4.moveStartBackward = function (editor) {\n  for (var _len26 = arguments.length, args = Array(_len26 > 1 ? _len26 - 1 : 0), _key26 = 1; _key26 < _len26; _key26++) {\n    args[_key26 - 1] = arguments[_key26];\n  }\n\n  editor.command.apply(editor, [pointBackward, 'start'].concat(args));\n};\n\nCommands$4.moveStartWordBackward = function (editor) {\n  for (var _len27 = arguments.length, args = Array(_len27 > 1 ? _len27 - 1 : 0), _key27 = 1; _key27 < _len27; _key27++) {\n    args[_key27 - 1] = arguments[_key27];\n  }\n\n  editor.command.apply(editor, [pointWordBackward, 'start'].concat(args));\n};\n\nCommands$4.moveStartForward = function (editor) {\n  for (var _len28 = arguments.length, args = Array(_len28 > 1 ? _len28 - 1 : 0), _key28 = 1; _key28 < _len28; _key28++) {\n    args[_key28 - 1] = arguments[_key28];\n  }\n\n  editor.command.apply(editor, [pointForward, 'start'].concat(args));\n};\n\nCommands$4.moveStartWordForward = function (editor) {\n  for (var _len29 = arguments.length, args = Array(_len29 > 1 ? _len29 - 1 : 0), _key29 = 1; _key29 < _len29; _key29++) {\n    args[_key29 - 1] = arguments[_key29];\n  }\n\n  editor.command.apply(editor, [pointWordForward, 'start'].concat(args));\n};\n\nCommands$4.moveStartTo = function (editor) {\n  for (var _len30 = arguments.length, args = Array(_len30 > 1 ? _len30 - 1 : 0), _key30 = 1; _key30 < _len30; _key30++) {\n    args[_key30 - 1] = arguments[_key30];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveStartTo'].concat(args));\n};\n\nCommands$4.moveStartToEndOfBlock = function (editor) {\n  editor.command(pointEdgeObject, 'start', 'end', 'block');\n};\n\nCommands$4.moveStartToEndOfDocument = function (editor) {\n  editor.moveStartToEndOfNode(editor.value.document).moveToStart();\n};\n\nCommands$4.moveStartToEndOfInline = function (editor) {\n  editor.command(pointEdgeObject, 'start', 'end', 'inline');\n};\n\nCommands$4.moveStartToEndOfNextBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'start', 'end', 'next', 'block');\n};\n\nCommands$4.moveStartToEndOfNextInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'start', 'end', 'next', 'inline');\n};\n\nCommands$4.moveStartToEndOfNextText = function (editor) {\n  editor.command(pointEdgeSideObject, 'start', 'end', 'next', 'text');\n};\n\nCommands$4.moveStartToEndOfNode = function (editor) {\n  for (var _len31 = arguments.length, args = Array(_len31 > 1 ? _len31 - 1 : 0), _key31 = 1; _key31 < _len31; _key31++) {\n    args[_key31 - 1] = arguments[_key31];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveStartToEndOfNode'].concat(args));\n};\n\nCommands$4.moveStartToEndOfPreviousBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'start', 'end', 'previous', 'block');\n};\n\nCommands$4.moveStartToEndOfPreviousInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'start', 'end', 'previous', 'inline');\n};\n\nCommands$4.moveStartToEndOfPreviousText = function (editor) {\n  editor.command(pointEdgeSideObject, 'start', 'end', 'previous', 'text');\n};\n\nCommands$4.moveStartToEndOfText = function (editor) {\n  editor.command(pointEdgeObject, 'start', 'end', 'text');\n};\n\nCommands$4.moveStartToStartOfBlock = function (editor) {\n  editor.command(pointEdgeObject, 'start', 'start', 'block');\n};\n\nCommands$4.moveStartToStartOfDocument = function (editor) {\n  editor.moveStartToStartOfNode(editor.value.document).moveToStart();\n};\n\nCommands$4.moveStartToStartOfInline = function (editor) {\n  editor.command(pointEdgeObject, 'start', 'start', 'inline');\n};\n\nCommands$4.moveStartToStartOfNextBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'start', 'start', 'next', 'block');\n};\n\nCommands$4.moveStartToStartOfNextInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'start', 'start', 'next', 'inline');\n};\n\nCommands$4.moveStartToStartOfNextText = function (editor) {\n  editor.command(pointEdgeSideObject, 'start', 'start', 'next', 'text');\n};\n\nCommands$4.moveStartToStartOfNode = function (editor) {\n  for (var _len32 = arguments.length, args = Array(_len32 > 1 ? _len32 - 1 : 0), _key32 = 1; _key32 < _len32; _key32++) {\n    args[_key32 - 1] = arguments[_key32];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveStartToStartOfNode'].concat(args));\n};\n\nCommands$4.moveStartToStartOfPreviousBlock = function (editor) {\n  editor.command(pointEdgeSideObject, 'start', 'start', 'previous', 'block');\n};\n\nCommands$4.moveStartToStartOfPreviousInline = function (editor) {\n  editor.command(pointEdgeSideObject, 'start', 'start', 'previous', 'inline');\n};\n\nCommands$4.moveStartToStartOfPreviousText = function (editor) {\n  editor.command(pointEdgeSideObject, 'start', 'start', 'previous', 'text');\n};\n\nCommands$4.moveStartToStartOfText = function (editor) {\n  editor.command(pointEdgeObject, 'start', 'start', 'text');\n};\n\nCommands$4.moveTo = function (editor) {\n  for (var _len33 = arguments.length, args = Array(_len33 > 1 ? _len33 - 1 : 0), _key33 = 1; _key33 < _len33; _key33++) {\n    args[_key33 - 1] = arguments[_key33];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveTo'].concat(args));\n};\n\nCommands$4.moveToAnchor = function (editor) {\n  editor.command(proxy, 'moveToAnchor');\n};\n\nCommands$4.moveToEnd = function (editor) {\n  editor.command(proxy, 'moveToEnd');\n};\n\nCommands$4.moveToEndOfBlock = function (editor) {\n  editor.moveEndToEndOfBlock().moveToEnd();\n};\n\nCommands$4.moveToEndOfDocument = function (editor) {\n  editor.moveEndToEndOfNode(editor.value.document).moveToEnd();\n};\n\nCommands$4.moveToEndOfInline = function (editor) {\n  editor.moveEndToEndOfInline().moveToEnd();\n};\n\nCommands$4.moveToEndOfNextBlock = function (editor) {\n  editor.moveEndToEndOfNextBlock().moveToEnd();\n};\n\nCommands$4.moveToEndOfNextInline = function (editor) {\n  editor.moveEndToEndOfNextInline().moveToEnd();\n};\n\nCommands$4.moveToEndOfNextText = function (editor) {\n  editor.moveEndToEndOfNextText().moveToEnd();\n};\n\nCommands$4.moveToEndOfNode = function (editor) {\n  for (var _len34 = arguments.length, args = Array(_len34 > 1 ? _len34 - 1 : 0), _key34 = 1; _key34 < _len34; _key34++) {\n    args[_key34 - 1] = arguments[_key34];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveToEndOfNode'].concat(args));\n};\n\nCommands$4.moveToEndOfPreviousBlock = function (editor) {\n  editor.moveStartToEndOfPreviousBlock().moveToStart();\n};\n\nCommands$4.moveToEndOfPreviousInline = function (editor) {\n  editor.moveStartToEndOfPreviousInline().moveToStart();\n};\n\nCommands$4.moveToEndOfPreviousText = function (editor) {\n  editor.moveStartToEndOfPreviousText().moveToStart();\n};\n\nCommands$4.moveToEndOfText = function (editor) {\n  editor.moveEndToEndOfText().moveToEnd();\n};\n\nCommands$4.moveToFocus = function (editor) {\n  editor.command(proxy, 'moveToFocus');\n};\n\nCommands$4.moveToRangeOfDocument = function (editor) {\n  editor.moveToRangeOfNode(editor.value.document);\n};\n\nCommands$4.moveToRangeOfNode = function (editor) {\n  for (var _len35 = arguments.length, args = Array(_len35 > 1 ? _len35 - 1 : 0), _key35 = 1; _key35 < _len35; _key35++) {\n    args[_key35 - 1] = arguments[_key35];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveToRangeOfNode'].concat(args));\n};\n\nCommands$4.moveToStart = function (editor) {\n  editor.command(proxy, 'moveToStart');\n};\n\nCommands$4.moveToStartOfBlock = function (editor) {\n  editor.moveStartToStartOfBlock().moveToStart();\n};\n\nCommands$4.moveToStartOfDocument = function (editor) {\n  editor.moveStartToStartOfNode(editor.value.document).moveToStart();\n};\n\nCommands$4.moveToStartOfInline = function (editor) {\n  editor.moveStartToStartOfInline().moveToStart();\n};\n\nCommands$4.moveToStartOfNextBlock = function (editor) {\n  editor.moveEndToStartOfNextBlock().moveToEnd();\n};\n\nCommands$4.moveToStartOfNextInline = function (editor) {\n  editor.moveEndToStartOfNextInline().moveToEnd();\n};\n\nCommands$4.moveToStartOfNextText = function (editor) {\n  editor.moveEndToStartOfNextText().moveToEnd();\n};\n\nCommands$4.moveToStartOfNode = function (editor) {\n  for (var _len36 = arguments.length, args = Array(_len36 > 1 ? _len36 - 1 : 0), _key36 = 1; _key36 < _len36; _key36++) {\n    args[_key36 - 1] = arguments[_key36];\n  }\n\n  editor.command.apply(editor, [proxy, 'moveToStartOfNode'].concat(args));\n};\n\nCommands$4.moveToStartOfPreviousBlock = function (editor) {\n  editor.moveStartToStartOfPreviousBlock().moveToStart();\n};\n\nCommands$4.moveToStartOfPreviousInline = function (editor) {\n  editor.moveStartToStartOfPreviousInline().moveToStart();\n};\n\nCommands$4.moveToStartOfPreviousText = function (editor) {\n  editor.moveStartToStartOfPreviousText().moveToStart();\n};\n\nCommands$4.moveToStartOfText = function (editor) {\n  editor.moveStartToStartOfText().moveToStart();\n};\n\nCommands$4.select = function (editor, properties) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  properties = Selection.createProperties(properties);\n  var _options$snapshot = options.snapshot,\n      snapshot = _options$snapshot === undefined ? false : _options$snapshot;\n  var value = editor.value;\n  var document = value.document,\n      selection = value.selection;\n  var newProperties = {};\n  var next = selection.setProperties(properties);\n  next = document.resolveSelection(next); // Re-compute the properties, to ensure that we get their normalized values.\n\n  properties = pick(next, Object.keys(properties)); // Remove any properties that are already equal to the current selection. And\n  // create a dictionary of the previous values for all of the properties that\n  // are being changed, for the inverse operation.\n\n  for (var k in properties) {\n    if (snapshot === true || !is(properties[k], selection[k])) {\n      newProperties[k] = properties[k];\n    }\n  } // If the selection moves, clear any marks, unless the new selection\n  // properties change the marks in some way.\n\n\n  if (selection.marks && !newProperties.marks && (newProperties.anchor || newProperties.focus)) {\n    newProperties.marks = null;\n  } // If there are no new properties to set, abort to avoid extra operations.\n\n\n  if (Object.keys(newProperties).length === 0) {\n    return;\n  } // TODO: for some reason toJSON() is required here (it breaks selections between blocks)? - 2018-10-10\n\n\n  var prevProperties = pick(selection.toJSON(), Object.keys(newProperties));\n  editor.applyOperation({\n    type: 'set_selection',\n    value: value,\n    properties: prevProperties,\n    newProperties: newProperties\n  }, snapshot ? {\n    skip: false,\n    merge: false\n  } : {});\n};\n\nCommands$4.setAnchor = function (editor) {\n  for (var _len37 = arguments.length, args = Array(_len37 > 1 ? _len37 - 1 : 0), _key37 = 1; _key37 < _len37; _key37++) {\n    args[_key37 - 1] = arguments[_key37];\n  }\n\n  editor.command.apply(editor, [proxy, 'setAnchor'].concat(args));\n};\n\nCommands$4.setEnd = function (editor) {\n  for (var _len38 = arguments.length, args = Array(_len38 > 1 ? _len38 - 1 : 0), _key38 = 1; _key38 < _len38; _key38++) {\n    args[_key38 - 1] = arguments[_key38];\n  }\n\n  editor.command.apply(editor, [proxy, 'setEnd'].concat(args));\n};\n\nCommands$4.setFocus = function (editor) {\n  for (var _len39 = arguments.length, args = Array(_len39 > 1 ? _len39 - 1 : 0), _key39 = 1; _key39 < _len39; _key39++) {\n    args[_key39 - 1] = arguments[_key39];\n  }\n\n  editor.command.apply(editor, [proxy, 'setFocus'].concat(args));\n};\n\nCommands$4.setStart = function (editor) {\n  for (var _len40 = arguments.length, args = Array(_len40 > 1 ? _len40 - 1 : 0), _key40 = 1; _key40 < _len40; _key40++) {\n    args[_key40 - 1] = arguments[_key40];\n  }\n\n  editor.command.apply(editor, [proxy, 'setStart'].concat(args));\n};\n\nCommands$4.snapshotSelection = function (editor) {\n  editor.withoutMerging(function () {\n    editor.select(editor.value.selection, {\n      snapshot: true\n    });\n  });\n};\n/**\n * Helpers.\n */\n\n\nfunction proxy(editor, method) {\n  var _editor$value$selecti;\n\n  for (var _len41 = arguments.length, args = Array(_len41 > 2 ? _len41 - 2 : 0), _key41 = 2; _key41 < _len41; _key41++) {\n    args[_key41 - 2] = arguments[_key41];\n  }\n\n  var range = (_editor$value$selecti = editor.value.selection)[method].apply(_editor$value$selecti, args);\n\n  editor.select(range);\n}\n\nfunction pointEdgeObject(editor, point, edge, object) {\n  var Point = point.slice(0, 1).toUpperCase() + point.slice(1);\n  var Edge = edge.slice(0, 1).toUpperCase() + edge.slice(1);\n  var Object = object.slice(0, 1).toUpperCase() + object.slice(1);\n  var method = 'move' + Point + 'To' + Edge + 'OfNode';\n  var getNode = object === 'text' ? 'getNode' : 'getClosest' + Object;\n  var value = editor.value;\n  var document = value.document,\n      selection = value.selection;\n  var p = selection[point];\n  var node = document[getNode](p.key);\n  if (!node) return;\n  editor[method](node);\n}\n\nfunction pointEdgeSideObject(editor, point, edge, side, object) {\n  var Point = point.slice(0, 1).toUpperCase() + point.slice(1);\n  var Edge = edge.slice(0, 1).toUpperCase() + edge.slice(1);\n  var Side = side.slice(0, 1).toUpperCase() + side.slice(1);\n  var Object = object.slice(0, 1).toUpperCase() + object.slice(1);\n  var method = 'move' + Point + 'To' + Edge + 'OfNode';\n  var getNode = object === 'text' ? 'getNode' : 'getClosest' + Object;\n  var getDirectionNode = 'get' + Side + Object;\n  var value = editor.value;\n  var document = value.document,\n      selection = value.selection;\n  var p = selection[point];\n  var node = document[getNode](p.key);\n  if (!node) return;\n  var target = document[getDirectionNode](node.key);\n  if (!target) return;\n  editor[method](target);\n}\n\nfunction pointBackward(editor, point) {\n  var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n  if (n === 0) return;\n  if (n < 0) return pointForward(editor, point, -n);\n  var Point = point.slice(0, 1).toUpperCase() + point.slice(1);\n  var value = editor.value;\n  var document = value.document,\n      selection = value.selection;\n  var p = selection[point];\n  var hasVoidParent = document.hasVoidParent(p.path, editor); // what is this?\n\n  if (!hasVoidParent && p.offset - n >= 0) {\n    var range = selection['move' + Point + 'Backward'](n);\n    editor.select(range);\n    return;\n  }\n\n  var previous = document.getPreviousText(p.path);\n  if (!previous) return;\n  var block = document.getClosestBlock(p.path);\n  var isInBlock = block.hasNode(previous.key);\n  var isPreviousInVoid = previous && document.hasVoidParent(previous.key, editor);\n  editor['move' + Point + 'ToEndOfNode'](previous); // when is this called?\n\n  if (!hasVoidParent && !isPreviousInVoid && isInBlock) {\n    var _range = editor.value.selection['move' + Point + 'Backward'](n);\n\n    editor.select(_range);\n  }\n}\n\nfunction pointForward(editor, point) {\n  var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n  if (n === 0) return;\n  if (n < 0) return pointBackward(editor, point, -n);\n  var Point = point.slice(0, 1).toUpperCase() + point.slice(1);\n  var value = editor.value;\n  var document = value.document,\n      selection = value.selection;\n  var p = selection[point];\n  var text = document.getNode(p.path);\n  var hasVoidParent = document.hasVoidParent(p.path, editor); // what is this?\n\n  if (!hasVoidParent && p.offset + n <= text.text.length) {\n    var range = selection['move' + Point + 'Forward'](n);\n    editor.select(range);\n    return;\n  }\n\n  var next = document.getNextText(p.path);\n  if (!next) return;\n  var block = document.getClosestBlock(p.path);\n  var isInBlock = block.hasNode(next.key);\n  var isNextInVoid = document.hasVoidParent(next.key, editor);\n  editor['move' + Point + 'ToStartOfNode'](next); // when is this called?\n\n  if (!hasVoidParent && !isNextInVoid && isInBlock) {\n    var _range2 = editor.value.selection['move' + Point + 'Forward'](n);\n\n    editor.select(_range2);\n  }\n}\n\nfunction pointWordBackward(editor, pointName) {\n  var value = editor.value;\n  var document = value.document,\n      selection = value.selection;\n  var point = selection[pointName];\n  var block = document.getClosestBlock(point.key);\n  var offset = block.getOffset(point.key);\n  var o = offset + point.offset;\n  var text = block.text;\n  var n = TextUtils.getWordOffsetBackward(text, o);\n  editor.command(pointBackward, pointName, n > 0 ? n : 1);\n}\n\nfunction pointWordForward(editor, pointName) {\n  var value = editor.value;\n  var document = value.document,\n      selection = value.selection;\n  var point = selection[pointName];\n  var block = document.getClosestBlock(point.key);\n  var offset = block.getOffset(point.key);\n  var o = offset + point.offset;\n  var text = block.text;\n  var n = TextUtils.getWordOffsetForward(text, o);\n  editor.command(pointForward, pointName, n > 0 ? n : 1);\n}\n\nvar Commands$5 = {};\n/**\n * Set `properties` on the value.\n *\n * @param {Editor} editor\n * @param {Object|Value} properties\n */\n\nCommands$5.setData = function (editor) {\n  var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var value = editor.value;\n  var newProperties = Value.createProperties({\n    data: data\n  });\n  var prevProperties = pick(value, Object.keys(newProperties));\n  editor.applyOperation({\n    type: 'set_value',\n    properties: prevProperties,\n    newProperties: newProperties\n  });\n};\n/**\n * Set `properties` on the value.\n *\n * @param {Editor} editor\n * @param {Object|Value} properties\n */\n\n\nCommands$5.setDecorations = function (editor) {\n  var decorations = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var value = editor.value;\n  var newProperties = Value.createProperties({\n    decorations: decorations\n  });\n  var prevProperties = pick(value, Object.keys(newProperties));\n  editor.applyOperation({\n    type: 'set_value',\n    properties: prevProperties,\n    newProperties: newProperties\n  });\n};\n/**\n * Export.\n *\n * @type {Object}\n */\n\n/**\n * A plugin that adds a set of queries to the editor.\n *\n * @param {Object} queries\n * @return {Object}\n */\n\n\nfunction QueriesPlugin() {\n  var queries = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  /**\n   * On construct, register all the queries.\n   *\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n  function onConstruct(editor, next) {\n    for (var query in queries) {\n      editor.registerQuery(query);\n    }\n\n    return next();\n  }\n  /**\n   * On query, if it exists in our list of queries, call it.\n   *\n   * @param {Object} query\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onQuery(query, editor, next) {\n    var type = query.type,\n        args = query.args;\n    var fn = queries[type];\n    if (!fn) return next();\n    var ret = fn.apply(undefined, [editor].concat(toConsumableArray(args)));\n    return ret === undefined ? next() : ret;\n  }\n  /**\n   * Return the plugin.\n   *\n   * @type {Object}\n   */\n\n\n  return {\n    onConstruct: onConstruct,\n    onQuery: onQuery\n  };\n}\n/**\n * Export.\n *\n * @type {Object}\n */\n\n/**\n * Define a Slate error.\n *\n * @type {SlateError}\n */\n\n\nvar SlateError = function (_Error) {\n  inherits(SlateError, _Error);\n\n  function SlateError(code) {\n    var attrs = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    classCallCheck(this, SlateError);\n\n    var _this = possibleConstructorReturn(this, (SlateError.__proto__ || Object.getPrototypeOf(SlateError)).call(this, code));\n\n    _this.code = code;\n\n    for (var key in attrs) {\n      _this[key] = attrs[key];\n    }\n\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(_this, _this.constructor);\n    } else {\n      _this.stack = new Error().stack;\n    }\n\n    return _this;\n  }\n\n  return SlateError;\n}(Error);\n/**\n * Export.\n *\n * @type {SlateError}\n */\n\n\nfunction SchemaPlugin(schema) {\n  var rules = schema.rules,\n      document = schema.document,\n      blocks = schema.blocks,\n      inlines = schema.inlines,\n      marks = schema.marks;\n  var schemaRules = [];\n\n  if (rules) {\n    schemaRules = schemaRules.concat(rules);\n  }\n\n  if (document) {\n    schemaRules.push(_extends({\n      match: [{\n        object: 'document'\n      }]\n    }, document));\n  }\n\n  if (blocks) {\n    for (var key in blocks) {\n      schemaRules.push(_extends({\n        match: [{\n          object: 'block',\n          type: key\n        }]\n      }, blocks[key]));\n    }\n  }\n\n  if (inlines) {\n    for (var _key in inlines) {\n      schemaRules.push(_extends({\n        match: [{\n          object: 'inline',\n          type: _key\n        }]\n      }, inlines[_key]));\n    }\n  }\n\n  if (marks) {\n    for (var _key2 in marks) {\n      schemaRules.push(_extends({\n        match: [{\n          object: 'mark',\n          type: _key2\n        }]\n      }, marks[_key2]));\n    }\n  }\n  /**\n   * Check if a `mark` is void based on the schema rules.\n   *\n   * @param {Editor} editor\n   * @param {Mark} mark\n   * @return {Boolean}\n   */\n\n\n  function isAtomic(editor, mark) {\n    var rule = schemaRules.find(function (r) {\n      return 'isAtomic' in r && testRules(mark, r.match);\n    });\n    return rule && rule.isAtomic;\n  }\n  /**\n   * Check if a `node` is void based on the schema rules.\n   *\n   * @param {Editor} editor\n   * @param {Node} node\n   * @return {Boolean}\n   */\n\n\n  function isVoid(editor, node) {\n    var rule = schemaRules.find(function (r) {\n      return 'isVoid' in r && testRules(node, r.match);\n    });\n    return rule && rule.isVoid;\n  }\n  /**\n   * Normalize a `node` with the schema rules, returning a function that will\n   * fix the invalid node, or void if the node is valid.\n   *\n   * @param {Node} node\n   * @param {Editor} editor\n   * @param {Function} next\n   * @return {Function|Void}\n   */\n\n\n  function normalizeNode(node, editor, next) {\n    var error = validateNode(node, editor, function () {});\n    if (!error) return next();\n    return function () {\n      var rule = error.rule;\n      var size = editor.operations.size; // First run the user-provided `normalize` function if one exists...\n\n      if (rule.normalize) {\n        rule.normalize(editor, error);\n      } // If the `normalize` function did not add any operations to the editor\n      // object, it can't have normalized, so run the default one.\n\n\n      if (editor.operations.size === size) {\n        defaultNormalize(editor, error);\n      }\n    };\n  }\n  /**\n   * Validate a `node` with the schema rules, returning a `SlateError` if it's\n   * invalid.\n   *\n   * @param {Node} node\n   * @param {Editor} editor\n   * @param {Function} next\n   * @return {Error|Void}\n   */\n\n\n  function validateNode(node, editor, next) {\n    var matches = schemaRules.filter(function (r) {\n      return testRules(node, r.match);\n    });\n    var failure = validateRules(node, matches, schemaRules, {\n      every: true\n    });\n    if (!failure) return next();\n    var error = new SlateError(failure.code, failure);\n    return error;\n  }\n  /**\n   * On schema-related queries, respond if we can.\n   *\n   * @param {Object} query\n   * @param {Function} next\n   */\n\n\n  var queries = QueriesPlugin({\n    isAtomic: isAtomic,\n    isVoid: isVoid\n  });\n  /**\n   * Return the plugins.\n   *\n   * @type {Object}\n   */\n\n  return [{\n    normalizeNode: normalizeNode,\n    validateNode: validateNode\n  }, queries];\n}\n/**\n * Normalize an invalid value with `error` with default remedies.\n *\n * @param {Editor} editor\n * @param {SlateError} error\n */\n\n\nfunction defaultNormalize(editor, error) {\n  var code = error.code,\n      node = error.node,\n      child = error.child,\n      next = error.next,\n      previous = error.previous,\n      key = error.key,\n      mark = error.mark;\n\n  switch (code) {\n    case 'child_max_invalid':\n    case 'child_object_invalid':\n    case 'child_type_invalid':\n    case 'child_unknown':\n    case 'first_child_object_invalid':\n    case 'first_child_type_invalid':\n    case 'last_child_object_invalid':\n    case 'last_child_type_invalid':\n      {\n        return child.object === 'text' && node.object === 'block' && node.nodes.size === 1 ? editor.removeNodeByKey(node.key) : editor.removeNodeByKey(child.key);\n      }\n\n    case 'previous_sibling_object_invalid':\n    case 'previous_sibling_type_invalid':\n      {\n        return previous.object === 'text' && node.object === 'block' && node.nodes.size === 1 ? editor.removeNodeByKey(node.key) : editor.removeNodeByKey(previous.key);\n      }\n\n    case 'next_sibling_object_invalid':\n    case 'next_sibling_type_invalid':\n      {\n        return next.object === 'text' && node.object === 'block' && node.nodes.size === 1 ? editor.removeNodeByKey(node.key) : editor.removeNodeByKey(next.key);\n      }\n\n    case 'child_min_invalid':\n    case 'node_text_invalid':\n    case 'parent_object_invalid':\n    case 'parent_type_invalid':\n      {\n        return node.object === 'document' ? node.nodes.forEach(function (n) {\n          return editor.removeNodeByKey(n.key);\n        }) : editor.removeNodeByKey(node.key);\n      }\n\n    case 'node_data_invalid':\n      {\n        return node.data.get(key) === undefined && node.object !== 'document' ? editor.removeNodeByKey(node.key) : editor.setNodeByKey(node.key, {\n          data: node.data.delete(key)\n        });\n      }\n\n    case 'node_mark_invalid':\n      {\n        return node.getTexts().forEach(function (t) {\n          return editor.removeMarkByKey(t.key, 0, t.text.length, mark);\n        });\n      }\n\n    default:\n      {\n        return editor.removeNodeByKey(node.key);\n      }\n  }\n}\n/**\n * Check that an `object` matches one of a set of `rules`.\n *\n * @param {Mixed} object\n * @param {Object|Array} rules\n * @return {Boolean}\n */\n\n\nfunction testRules(object, rules) {\n  var error = validateRules(object, rules);\n  return !error;\n}\n/**\n * Validate that a `object` matches a `rule` object or array.\n *\n * @param {Mixed} object\n * @param {Object|Array} rule\n * @param {Array|Void} rules\n * @return {Error|Void}\n */\n\n\nfunction validateRules(object, rule, rules) {\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  var _options$every = options.every,\n      every = _options$every === undefined ? false : _options$every;\n\n  if (Array.isArray(rule)) {\n    var array = rule.length ? rule : [{}];\n    var first = void 0;\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = array[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var r = _step.value;\n\n        var _error = validateRules(object, r, rules);\n\n        first = first || _error;\n        if (every && _error) return _error;\n        if (!every && !_error) return;\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator.return) {\n          _iterator.return();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n\n    return first;\n  }\n\n  var error = validateObject(object, rule) || validateType(object, rule) || validateData(object, rule) || validateMarks(object, rule) || validateText(object, rule) || validateFirst(object, rule) || validateLast(object, rule) || validateNodes(object, rule, rules);\n  return error;\n}\n\nfunction validateObject(node, rule) {\n  if (rule.object == null) return;\n  if (rule.object === node.object) return;\n  if (typeof rule.object === 'function' && rule.object(node.object)) return;\n  return fail('node_object_invalid', {\n    rule: rule,\n    node: node\n  });\n}\n\nfunction validateType(node, rule) {\n  if (rule.type == null) return;\n  if (rule.type === node.type) return;\n  if (typeof rule.type === 'function' && rule.type(node.type)) return;\n  return fail('node_type_invalid', {\n    rule: rule,\n    node: node\n  });\n}\n\nfunction validateData(node, rule) {\n  if (rule.data == null) return;\n  if (node.data == null) return;\n\n  if (typeof rule.data === 'function') {\n    if (rule.data(node.data)) return;\n    return fail('node_data_invalid', {\n      rule: rule,\n      node: node\n    });\n  }\n\n  for (var key in rule.data) {\n    var fn = rule.data[key];\n    var value = node.data && node.data.get(key);\n    var valid = typeof fn === 'function' ? fn(value) : fn === value;\n    if (valid) continue;\n    return fail('node_data_invalid', {\n      rule: rule,\n      node: node,\n      key: key,\n      value: value\n    });\n  }\n}\n\nfunction validateMarks(node, rule) {\n  if (rule.marks == null) return;\n  var marks = node.getMarks().toArray();\n\n  var _loop = function _loop(mark) {\n    var valid = rule.marks.some(function (def) {\n      return typeof def.type === 'function' ? def.type(mark.type) : def.type === mark.type;\n    });\n    if (valid) return 'continue';\n    return {\n      v: fail('node_mark_invalid', {\n        rule: rule,\n        node: node,\n        mark: mark\n      })\n    };\n  };\n\n  var _iteratorNormalCompletion2 = true;\n  var _didIteratorError2 = false;\n  var _iteratorError2 = undefined;\n\n  try {\n    for (var _iterator2 = marks[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n      var mark = _step2.value;\n\n      var _ret = _loop(mark);\n\n      switch (_ret) {\n        case 'continue':\n          continue;\n\n        default:\n          if ((typeof _ret === 'undefined' ? 'undefined' : _typeof(_ret)) === \"object\") return _ret.v;\n      }\n    }\n  } catch (err) {\n    _didIteratorError2 = true;\n    _iteratorError2 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion2 && _iterator2.return) {\n        _iterator2.return();\n      }\n    } finally {\n      if (_didIteratorError2) {\n        throw _iteratorError2;\n      }\n    }\n  }\n}\n\nfunction validateText(node, rule) {\n  if (rule.text == null) return;\n  var text = node.text;\n  var valid = typeof rule.text === 'function' ? rule.text(text) : rule.text.test(text);\n  if (valid) return;\n  return fail('node_text_invalid', {\n    rule: rule,\n    node: node,\n    text: text\n  });\n}\n\nfunction validateFirst(node, rule) {\n  if (rule.first == null) return;\n  var first = node.nodes.first();\n  if (!first) return;\n  var error = validateRules(first, rule.first);\n  if (!error) return;\n  error.rule = rule;\n  error.node = node;\n  error.child = first;\n  error.code = error.code.replace('node_', 'first_child_');\n  return error;\n}\n\nfunction validateLast(node, rule) {\n  if (rule.last == null) return;\n  var last = node.nodes.last();\n  if (!last) return;\n  var error = validateRules(last, rule.last);\n  if (!error) return;\n  error.rule = rule;\n  error.node = node;\n  error.child = last;\n  error.code = error.code.replace('node_', 'last_child_');\n  return error;\n}\n\nfunction validateNodes(node, rule) {\n  var rules = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n  if (node.nodes == null) return;\n  var children = node.nodes;\n  var defs = rule.nodes != null ? rule.nodes.slice() : [];\n  var count = 0;\n  var lastCount = 0;\n  var min = null;\n  var index = -1;\n  var def = null;\n  var max = null;\n  var child = null;\n  var previous = null;\n  var next = null;\n\n  function nextDef() {\n    if (defs.length === 0) return false;\n    def = defs.shift();\n    lastCount = count;\n    count = 0;\n    min = def.min || null;\n    max = def.max || null;\n    return true;\n  }\n\n  function nextChild() {\n    index += 1;\n    previous = index ? children.get(index - 1) : null;\n    child = children.get(index);\n    next = children.get(index + 1);\n    if (!child) return false;\n    lastCount = count;\n    count += 1;\n    return true;\n  }\n\n  function rewind() {\n    if (index > 0) {\n      index -= 1;\n      count = lastCount;\n    }\n  }\n\n  if (rule.nodes != null) {\n    nextDef();\n  }\n\n  while (nextChild()) {\n    var err = validateParent(node, child, rules) || validatePrevious(node, child, previous, index, rules) || validateNext(node, child, next, index, rules);\n    if (err) return err;\n\n    if (rule.nodes != null) {\n      if (!def) {\n        return fail('child_unknown', {\n          rule: rule,\n          node: node,\n          child: child,\n          index: index\n        });\n      }\n\n      if (def.match) {\n        var error = validateRules(child, def.match);\n\n        if (error) {\n          // Since we want to report overflow on last matching child we don't\n          // immediately check for count > max, but instead do so once we find\n          // a child that doesn't match.\n          if (max != null && count - 1 > max) {\n            rewind();\n            return fail('child_max_invalid', {\n              rule: rule,\n              node: node,\n              index: index,\n              child: children.get(index),\n              count: count,\n              limit: max\n            });\n          }\n\n          var lastMin = min; // If there are more groups after this one then child might actually\n          // be valid.\n\n          if (nextDef()) {\n            // If we've already satisfied the minimum for the current group,\n            // then we can rewind and proceed to the next group.\n            if (lastCount - 1 >= lastMin) {\n              index -= 1;\n              continue;\n            } // Otherwise we know that current value is underflowing. There are\n            // three possible causes for this...\n            // 1. There might just not be enough elements for current group, and\n            // current child is in fact the first of the next group. If so, the\n            // next def will not report errors, in which case we can rewind and\n            // report an minimum error.\n\n\n            if (validateRules(child, def.match) == null) {\n              rewind();\n              return fail('child_min_invalid', {\n                rule: rule,\n                node: node,\n                index: index,\n                count: lastCount - 1,\n                limit: lastMin\n              });\n            } // 2. The current group is underflowing, but there is also an\n            // invalid child before the next group.\n            // 3. Or the current group is not underflowing but it appears so\n            // because there's an invalid child between its members.\n            // It's either the second or third case. If it's the second then\n            // we could report an underflow, but presence of an invalid child\n            // is arguably more important, so we report it first. It also lets\n            // us avoid checking for which case exactly is it.\n\n\n            error.rule = rule;\n            error.node = node;\n            error.child = child;\n            error.index = index;\n            error.code = error.code.replace('node_', 'child_');\n            return error;\n          } // Otherwise either we exhausted the last group, in which case it's\n          // an unknown child, ...\n\n\n          if (max != null && count > max) {\n            return fail('child_unknown', {\n              rule: rule,\n              node: node,\n              child: child,\n              index: index\n            });\n          } // ... or it's an invalid child for the last group.\n\n\n          error.rule = rule;\n          error.node = node;\n          error.child = child;\n          error.index = index;\n          error.code = error.code.replace('node_', 'child_');\n          return error;\n        }\n      }\n    }\n  } // Since we want to report overflow on last matching child we don't\n  // immediately check for count > max, but do so after processing all nodes.\n\n\n  if (max != null && count > max) {\n    return fail('child_max_invalid', {\n      rule: rule,\n      node: node,\n      index: index - 1,\n      count: count,\n      child: children.get(index - 1),\n      limit: max\n    });\n  }\n\n  if (rule.nodes != null) {\n    do {\n      if (count < min) {\n        return fail('child_min_invalid', {\n          rule: rule,\n          node: node,\n          index: index,\n          count: count,\n          limit: min\n        });\n      }\n    } while (nextDef());\n  }\n}\n\nfunction validateParent(node, child, rules) {\n  var _iteratorNormalCompletion3 = true;\n  var _didIteratorError3 = false;\n  var _iteratorError3 = undefined;\n\n  try {\n    for (var _iterator3 = rules[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n      var rule = _step3.value;\n      if (rule.parent == null) continue;\n      if (!testRules(child, rule.match)) continue;\n      var error = validateRules(node, rule.parent);\n      if (!error) continue;\n      error.rule = rule;\n      error.parent = node;\n      error.node = child;\n      error.code = error.code.replace('node_', 'parent_');\n      return error;\n    }\n  } catch (err) {\n    _didIteratorError3 = true;\n    _iteratorError3 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion3 && _iterator3.return) {\n        _iterator3.return();\n      }\n    } finally {\n      if (_didIteratorError3) {\n        throw _iteratorError3;\n      }\n    }\n  }\n}\n\nfunction validatePrevious(node, child, previous, index, rules) {\n  if (!previous) return;\n  var _iteratorNormalCompletion4 = true;\n  var _didIteratorError4 = false;\n  var _iteratorError4 = undefined;\n\n  try {\n    for (var _iterator4 = rules[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n      var rule = _step4.value;\n      if (rule.previous == null) continue;\n      if (!testRules(child, rule.match)) continue;\n      var error = validateRules(previous, rule.previous);\n      if (!error) continue;\n      error.rule = rule;\n      error.node = node;\n      error.child = child;\n      error.index = index;\n      error.previous = previous;\n      error.code = error.code.replace('node_', 'previous_sibling_');\n      return error;\n    }\n  } catch (err) {\n    _didIteratorError4 = true;\n    _iteratorError4 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion4 && _iterator4.return) {\n        _iterator4.return();\n      }\n    } finally {\n      if (_didIteratorError4) {\n        throw _iteratorError4;\n      }\n    }\n  }\n}\n\nfunction validateNext(node, child, next, index, rules) {\n  if (!next) return;\n  var _iteratorNormalCompletion5 = true;\n  var _didIteratorError5 = false;\n  var _iteratorError5 = undefined;\n\n  try {\n    for (var _iterator5 = rules[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n      var rule = _step5.value;\n      if (rule.next == null) continue;\n      if (!testRules(child, rule.match)) continue;\n      var error = validateRules(next, rule.next);\n      if (!error) continue;\n      error.rule = rule;\n      error.node = node;\n      error.child = child;\n      error.index = index;\n      error.next = next;\n      error.code = error.code.replace('node_', 'next_sibling_');\n      return error;\n    }\n  } catch (err) {\n    _didIteratorError5 = true;\n    _iteratorError5 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion5 && _iterator5.return) {\n        _iterator5.return();\n      }\n    } finally {\n      if (_didIteratorError5) {\n        throw _iteratorError5;\n      }\n    }\n  }\n}\n/**\n * Create an interim failure object with `code` and `attrs`.\n *\n * @param {String} code\n * @param {Object} attrs\n * @return {Object}\n */\n\n\nfunction fail(code, attrs) {\n  return _extends({\n    code: code\n  }, attrs);\n}\n/**\n * Export.\n *\n * @type {Object}\n */\n\n\nfunction deleteExpanded(editor) {\n  var value = editor.value;\n  var selection = value.selection;\n\n  if (selection.isExpanded) {\n    editor.delete();\n  }\n}\n/**\n * Commands.\n *\n * @type {Object}\n */\n\n\nvar Commands$6 = {};\n/**\n * Add a `mark` to the characters in the current selection.\n *\n * @param {Editor} editor\n * @param {Mark} mark\n */\n\nCommands$6.addMark = function (editor, mark) {\n  mark = Mark.create(mark);\n  var value = editor.value;\n  var document = value.document,\n      selection = value.selection;\n\n  if (selection.isExpanded) {\n    editor.addMarkAtRange(selection, mark);\n  } else if (selection.marks) {\n    var marks = selection.marks.add(mark);\n    var sel = selection.set('marks', marks);\n    editor.select(sel);\n  } else {\n    var _marks = document.getActiveMarksAtRange(selection).add(mark);\n\n    var _sel = selection.set('marks', _marks);\n\n    editor.select(_sel);\n  }\n};\n/**\n * Add a list of `marks` to the characters in the current selection.\n *\n * @param {Editor} editor\n * @param {Set<Mark>|Array<Object>} marks\n */\n\n\nCommands$6.addMarks = function (editor, marks) {\n  marks.forEach(function (mark) {\n    return editor.addMark(mark);\n  });\n};\n/**\n * Delete at the current selection.\n *\n * @param {Editor} editor\n */\n\n\nCommands$6.delete = function (editor) {\n  var value = editor.value;\n  var selection = value.selection;\n  editor.deleteAtRange(selection); // COMPAT: Ensure that the selection is collapsed, because in certain cases\n  // when deleting across inline nodes, when splitting the inline node the end\n  // point of the selection will end up after the split point.\n\n  editor.moveToFocus();\n};\n/**\n * Delete backward `n` characters.\n *\n * @param {Editor} editor\n * @param {Number} n (optional)\n */\n\n\nCommands$6.deleteBackward = function (editor) {\n  var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  var value = editor.value;\n  var selection = value.selection;\n\n  if (selection.isExpanded) {\n    editor.delete();\n  } else {\n    editor.deleteBackwardAtRange(selection, n);\n  }\n};\n/**\n * Delete backward one character.\n *\n * @param {Editor} editor\n */\n\n\nCommands$6.deleteCharBackward = function (editor) {\n  var value = editor.value;\n  var selection = value.selection;\n\n  if (selection.isExpanded) {\n    editor.delete();\n  } else {\n    editor.deleteCharBackwardAtRange(selection);\n  }\n};\n/**\n * Delete backward one line.\n *\n * @param {Editor} editor\n */\n\n\nCommands$6.deleteLineBackward = function (editor) {\n  var value = editor.value;\n  var selection = value.selection;\n\n  if (selection.isExpanded) {\n    editor.delete();\n  } else {\n    editor.deleteLineBackwardAtRange(selection);\n  }\n};\n/**\n * Delete backward one word.\n *\n * @param {Editor} editor\n */\n\n\nCommands$6.deleteWordBackward = function (editor) {\n  var value = editor.value;\n  var selection = value.selection;\n\n  if (selection.isExpanded) {\n    editor.delete();\n  } else {\n    editor.deleteWordBackwardAtRange(selection);\n  }\n};\n/**\n * Delete backward `n` characters.\n *\n * @param {Editor} editor\n * @param {Number} n (optional)\n */\n\n\nCommands$6.deleteForward = function (editor) {\n  var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  var value = editor.value;\n  var selection = value.selection;\n\n  if (selection.isExpanded) {\n    editor.delete();\n  } else {\n    editor.deleteForwardAtRange(selection, n);\n  }\n};\n/**\n * Delete backward one character.\n *\n * @param {Editor} editor\n */\n\n\nCommands$6.deleteCharForward = function (editor) {\n  var value = editor.value;\n  var selection = value.selection;\n\n  if (selection.isExpanded) {\n    editor.delete();\n  } else {\n    editor.deleteCharForwardAtRange(selection);\n  }\n};\n/**\n * Delete backward one line.\n *\n * @param {Editor} editor\n */\n\n\nCommands$6.deleteLineForward = function (editor) {\n  var value = editor.value;\n  var selection = value.selection;\n\n  if (selection.isExpanded) {\n    editor.delete();\n  } else {\n    editor.deleteLineForwardAtRange(selection);\n  }\n};\n/**\n * Delete backward one word.\n *\n * @param {Editor} editor\n */\n\n\nCommands$6.deleteWordForward = function (editor) {\n  var value = editor.value;\n  var selection = value.selection;\n\n  if (selection.isExpanded) {\n    editor.delete();\n  } else {\n    editor.deleteWordForwardAtRange(selection);\n  }\n};\n/**\n * Insert a `block` at the current selection.\n *\n * @param {Editor} editor\n * @param {String|Object|Block} block\n */\n\n\nCommands$6.insertBlock = function (editor, block) {\n  deleteExpanded(editor);\n  block = Block.create(block);\n  var value = editor.value;\n  var selection = value.selection;\n  editor.insertBlockAtRange(selection, block); // If the node was successfully inserted, update the selection.\n\n  var node = editor.value.document.getNode(block.key);\n  if (node) editor.moveToEndOfNode(node);\n};\n/**\n * Insert a `fragment` at the current selection.\n *\n * @param {Editor} editor\n * @param {Document} fragment\n */\n\n\nCommands$6.insertFragment = function (editor, fragment) {\n  if (!fragment.nodes.size) return;\n  deleteExpanded(editor);\n  var value = editor.value;\n  var _value = value,\n      document = _value.document,\n      selection = _value.selection;\n  var start = selection.start,\n      end = selection.end;\n  var _value2 = value,\n      startText = _value2.startText,\n      endText = _value2.endText,\n      startInline = _value2.startInline;\n  var lastText = fragment.getLastText();\n  var lastInline = fragment.getClosestInline(lastText.key);\n  var lastBlock = fragment.getClosestBlock(lastText.key);\n  var firstChild = fragment.nodes.first();\n  var lastChild = fragment.nodes.last();\n  var keys = document.getTexts().map(function (text) {\n    return text.key;\n  });\n  var isAppending = !startInline || start.isAtStartOfNode(startText) || end.isAtStartOfNode(startText) || start.isAtEndOfNode(endText) || end.isAtEndOfNode(endText);\n  var isInserting = firstChild.hasBlockChildren() || lastChild.hasBlockChildren();\n  editor.insertFragmentAtRange(selection, fragment);\n  value = editor.value;\n  document = value.document;\n  var newTexts = document.getTexts().filter(function (n) {\n    return !keys.includes(n.key);\n  });\n  var newText = isAppending ? newTexts.last() : newTexts.takeLast(2).first();\n\n  if (newText && (lastInline || isInserting)) {\n    editor.moveToEndOfNode(newText);\n  } else if (newText) {\n    editor.moveToStartOfNode(newText).moveForward(lastBlock.text.length);\n  }\n};\n/**\n * Insert an `inline` at the current selection.\n *\n * @param {Editor} editor\n * @param {String|Object|Inline} inline\n */\n\n\nCommands$6.insertInline = function (editor, inline) {\n  deleteExpanded(editor);\n  inline = Inline.create(inline);\n  var value = editor.value;\n  var selection = value.selection;\n  editor.insertInlineAtRange(selection, inline); // If the node was successfully inserted, update the selection.\n\n  var node = editor.value.document.getNode(inline.key);\n  if (node) editor.moveToEndOfNode(node);\n};\n/**\n * Insert a string of `text` with optional `marks` at the current selection.\n *\n * @param {Editor} editor\n * @param {String} text\n * @param {Set<Mark>} marks (optional)\n */\n\n\nCommands$6.insertText = function (editor, text, marks) {\n  deleteExpanded(editor);\n  var value = editor.value;\n  var document = value.document,\n      selection = value.selection;\n  marks = marks || selection.marks || document.getInsertMarksAtRange(selection);\n  editor.insertTextAtRange(selection, text, marks); // If the text was successfully inserted, and the selection had marks on it,\n  // unset the selection's marks.\n\n  if (selection.marks && document !== editor.value.document) {\n    editor.select({\n      marks: null\n    });\n  }\n};\n/**\n * Remove a `mark` from the characters in the current selection.\n *\n * @param {Editor} editor\n * @param {Mark} mark\n */\n\n\nCommands$6.removeMark = function (editor, mark) {\n  mark = Mark.create(mark);\n  var value = editor.value;\n  var document = value.document,\n      selection = value.selection;\n\n  if (selection.isExpanded) {\n    editor.removeMarkAtRange(selection, mark);\n  } else if (selection.marks) {\n    var marks = selection.marks.remove(mark);\n    var sel = selection.set('marks', marks);\n    editor.select(sel);\n  } else {\n    var _marks2 = document.getActiveMarksAtRange(selection).remove(mark);\n\n    var _sel2 = selection.set('marks', _marks2);\n\n    editor.select(_sel2);\n  }\n};\n/**\n * Replace an `oldMark` with a `newMark` in the characters in the current selection.\n *\n * @param {Editor} editor\n * @param {Mark} oldMark\n * @param {Mark} newMark\n */\n\n\nCommands$6.replaceMark = function (editor, oldMark, newMark) {\n  editor.removeMark(oldMark);\n  editor.addMark(newMark);\n};\n/**\n * Set the `properties` of block nodes.\n *\n * @param {Editor} editor\n * @param {Object|String} properties\n */\n\n\nCommands$6.setBlocks = function (editor, properties) {\n  var value = editor.value;\n  var selection = value.selection;\n  editor.setBlocksAtRange(selection, properties);\n};\n/**\n * Set the `properties` of inline nodes.\n *\n * @param {Editor} editor\n * @param {Object|String} properties\n */\n\n\nCommands$6.setInlines = function (editor, properties) {\n  var value = editor.value;\n  var selection = value.selection;\n  editor.setInlinesAtRange(selection, properties);\n};\n/**\n * Split the block node at the current selection, to optional `depth`.\n *\n * @param {Editor} editor\n * @param {Number} depth (optional)\n */\n\n\nCommands$6.splitBlock = function (editor) {\n  var depth = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  deleteExpanded(editor);\n  var value = editor.value;\n  var selection = value.selection,\n      document = value.document;\n  var marks = selection.marks || document.getInsertMarksAtRange(selection);\n  editor.splitBlockAtRange(selection, depth).moveToEnd();\n\n  if (marks && marks.size !== 0) {\n    editor.select({\n      marks: marks\n    });\n  }\n};\n/**\n * Split the inline nodes to optional `height`.\n *\n * @param {Editor} editor\n * @param {Number} height (optional)\n */\n\n\nCommands$6.splitInline = function (editor, height) {\n  deleteExpanded(editor);\n  var value = editor.value;\n  var selection = value.selection;\n  editor.splitInlineAtRange(selection, height);\n};\n/**\n * Add or remove a `mark` from the characters in the current selection,\n * depending on whether it's already there.\n *\n * @param {Editor} editor\n * @param {Mark} mark\n */\n\n\nCommands$6.toggleMark = function (editor, mark) {\n  mark = Mark.create(mark);\n  var value = editor.value;\n  var exists = value.activeMarks.has(mark);\n\n  if (exists) {\n    editor.removeMark(mark);\n  } else {\n    editor.addMark(mark);\n  }\n};\n/**\n * Unwrap nodes from a block with `properties`.\n *\n * @param {Editor} editor\n * @param {String|Object} properties\n */\n\n\nCommands$6.unwrapBlock = function (editor, properties) {\n  var value = editor.value;\n  var selection = value.selection;\n  editor.unwrapBlockAtRange(selection, properties);\n};\n/**\n * Unwrap nodes from an inline with `properties`.\n *\n * @param {Editor} editor\n * @param {String|Object} properties\n */\n\n\nCommands$6.unwrapInline = function (editor, properties) {\n  var value = editor.value;\n  var selection = value.selection;\n  editor.unwrapInlineAtRange(selection, properties);\n};\n/**\n * Wrap nodes in a new `block`.\n *\n * @param {Editor} editor\n * @param {Block|Object|String} block\n */\n\n\nCommands$6.wrapBlock = function (editor, block) {\n  var value = editor.value;\n  var selection = value.selection;\n  editor.wrapBlockAtRange(selection, block);\n};\n/**\n * Wrap nodes in a new `inline`.\n *\n * @param {Editor} editor\n * @param {Inline|Object|String} inline\n */\n\n\nCommands$6.wrapInline = function (editor, inline) {\n  var value = editor.value;\n  var selection = value.selection;\n  editor.wrapInlineAtRange(selection, inline);\n};\n/**\n * Wrap the current selection with prefix/suffix.\n *\n * @param {Editor} editor\n * @param {String} prefix\n * @param {String} suffix\n */\n\n\nCommands$6.wrapText = function (editor, prefix) {\n  var suffix = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : prefix;\n  var value = editor.value;\n  var selection = value.selection;\n  editor.wrapTextAtRange(selection, prefix, suffix); // If the selection was collapsed, it will have moved the start offset too.\n\n  if (selection.isCollapsed) {\n    editor.moveStartBackward(prefix.length);\n  } // Adding the suffix will have pushed the end of the selection further on, so\n  // we need to move it back to account for this.\n\n\n  editor.moveEndBackward(suffix.length); // There's a chance that the selection points moved \"through\" each other,\n  // resulting in a now-incorrect selection direction.\n\n  if (selection.isForward !== editor.value.selection.isForward) {\n    editor.flip();\n  }\n};\n/**\n * Export.\n *\n * @type {Object}\n */\n\n\nfunction CorePlugin() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var _options$plugins = options.plugins,\n      plugins = _options$plugins === undefined ? [] : _options$plugins;\n  /**\n   * The core Slate commands.\n   *\n   * @type {Object}\n   */\n\n  var commands = CommandsPlugin(_extends({}, Commands$1, Commands$2, Commands$3, Commands$4, Commands$5, Commands$6));\n  /**\n   * The core Slate queries.\n   *\n   * @type {Object}\n   */\n\n  var queries = QueriesPlugin({\n    isAtomic: function isAtomic() {\n      return false;\n    },\n    isVoid: function isVoid() {\n      return false;\n    }\n  });\n  /**\n   * The core Slate schema.\n   *\n   * @type {Object}\n   */\n\n  var schema = SchemaPlugin({\n    rules: [// Only allow block nodes in documents.\n    {\n      match: {\n        object: 'document'\n      },\n      nodes: [{\n        match: {\n          object: 'block'\n        }\n      }]\n    }, // Only allow block nodes or inline and text nodes in blocks.\n    {\n      match: {\n        object: 'block',\n        first: {\n          object: 'block'\n        }\n      },\n      nodes: [{\n        match: {\n          object: 'block'\n        }\n      }]\n    }, {\n      match: {\n        object: 'block',\n        first: [{\n          object: 'inline'\n        }, {\n          object: 'text'\n        }]\n      },\n      nodes: [{\n        match: [{\n          object: 'inline'\n        }, {\n          object: 'text'\n        }]\n      }]\n    }, // Only allow inline and text nodes in inlines.\n    {\n      match: {\n        object: 'inline'\n      },\n      nodes: [{\n        match: [{\n          object: 'inline'\n        }, {\n          object: 'text'\n        }]\n      }]\n    }, // Ensure that block and inline nodes have at least one text child.\n    {\n      match: [{\n        object: 'block'\n      }, {\n        object: 'inline'\n      }],\n      nodes: [{\n        min: 1\n      }],\n      normalize: function normalize(editor, error) {\n        var code = error.code,\n            node = error.node;\n\n        if (code === 'child_min_invalid' && node.nodes.isEmpty()) {\n          editor.insertNodeByKey(node.key, 0, Text.create());\n        }\n      }\n    }, // Ensure that inline nodes are surrounded by text nodes.\n    {\n      match: {\n        object: 'block'\n      },\n      first: [{\n        object: 'block'\n      }, {\n        object: 'text'\n      }],\n      last: [{\n        object: 'block'\n      }, {\n        object: 'text'\n      }],\n      normalize: function normalize(editor, error) {\n        var code = error.code,\n            node = error.node;\n        var text = Text.create();\n        var i = void 0;\n\n        if (code === 'first_child_object_invalid') {\n          i = 0;\n        } else if (code === 'last_child_object_invalid') {\n          i = node.nodes.size;\n        } else {\n          return;\n        }\n\n        editor.insertNodeByKey(node.key, i, text);\n      }\n    }, {\n      match: {\n        object: 'inline'\n      },\n      first: [{\n        object: 'block'\n      }, {\n        object: 'text'\n      }],\n      last: [{\n        object: 'block'\n      }, {\n        object: 'text'\n      }],\n      previous: [{\n        object: 'block'\n      }, {\n        object: 'text'\n      }],\n      next: [{\n        object: 'block'\n      }, {\n        object: 'text'\n      }],\n      normalize: function normalize(editor, error) {\n        var code = error.code,\n            node = error.node,\n            index = error.index;\n        var text = Text.create();\n        var i = void 0;\n\n        if (code === 'first_child_object_invalid') {\n          i = 0;\n        } else if (code === 'last_child_object_invalid') {\n          i = node.nodes.size;\n        } else if (code === 'previous_sibling_object_invalid') {\n          i = index;\n        } else if (code === 'next_sibling_object_invalid') {\n          i = index + 1;\n        } else {\n          return;\n        }\n\n        editor.insertNodeByKey(node.key, i, text);\n      }\n    }, // Merge adjacent text nodes.\n    {\n      match: {\n        object: 'text'\n      },\n      next: [{\n        object: 'block'\n      }, {\n        object: 'inline'\n      }],\n      normalize: function normalize(editor, error) {\n        var code = error.code,\n            next = error.next;\n\n        if (code === 'next_sibling_object_invalid') {\n          editor.mergeNodeByKey(next.key);\n        }\n      }\n    }]\n  });\n  /**\n   * Return the plugins.\n   *\n   * @type {Array}\n   */\n\n  return [schema].concat(toConsumableArray(plugins), [commands, queries]);\n}\n/**\n * Export.\n *\n * @type {Object}\n */\n\n\nvar debug$2 = Debug('slate:editor');\n/**\n * Editor.\n *\n * @type {Editor}\n */\n\nvar Editor = function () {\n  /**\n   * Create a new `Editor` with `attrs`.\n   *\n   * @param {Object} attrs\n   * @param {Object} options\n   */\n  function Editor() {\n    var attrs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    classCallCheck(this, Editor);\n    var _options$controller = options.controller,\n        controller = _options$controller === undefined ? this : _options$controller,\n        _options$construct = options.construct,\n        construct = _options$construct === undefined ? true : _options$construct;\n    var _attrs$onChange = attrs.onChange,\n        onChange = _attrs$onChange === undefined ? function () {} : _attrs$onChange,\n        _attrs$plugins = attrs.plugins,\n        plugins = _attrs$plugins === undefined ? [] : _attrs$plugins,\n        _attrs$readOnly = attrs.readOnly,\n        readOnly = _attrs$readOnly === undefined ? false : _attrs$readOnly,\n        _attrs$value = attrs.value,\n        value = _attrs$value === undefined ? Value.create() : _attrs$value;\n    this.controller = controller;\n    this.middleware = {};\n    this.onChange = onChange;\n    this.operations = List();\n    this.readOnly = null;\n    this.value = null;\n    this.tmp = {\n      dirty: [],\n      flushing: false,\n      merge: null,\n      normalize: true,\n      save: true\n    };\n    var core = CorePlugin({\n      plugins: plugins\n    });\n    registerPlugin(this, core);\n\n    if (construct) {\n      this.run('onConstruct');\n      this.setReadOnly(readOnly);\n      this.setValue(value, options);\n    }\n  }\n  /**\n   * Apply an `operation` to the editor, updating its value.\n   *\n   * @param {Operation|Object} operation\n   * @return {Editor}\n   */\n\n\n  createClass(Editor, [{\n    key: 'applyOperation',\n    value: function applyOperation(operation) {\n      var _this = this;\n\n      var operations = this.operations,\n          controller = this.controller;\n      var value = this.value; // Add in the current `value` in case the operation was serialized.\n\n      if (isPlainObject(operation)) {\n        operation = _extends({}, operation, {\n          value: value\n        });\n      }\n\n      operation = Operation.create(operation); // Save the operation into the history. Since `save` is a command, we need\n      // to do it without normalizing, since it would have side effects.\n\n      this.withoutNormalizing(function () {\n        controller.save(operation);\n        value = _this.value;\n      }); // Apply the operation to the value.\n\n      debug$2('apply', {\n        operation: operation\n      });\n      this.value = operation.apply(value);\n      this.operations = operations.push(operation); // Get the paths of the affected nodes, and mark them as dirty.\n\n      var newDirtyPaths = getDirtyPaths(operation);\n      var dirty = this.tmp.dirty.reduce(function (memo, path) {\n        path = PathUtils.create(path);\n        var transformed = PathUtils.transform(path, operation);\n        memo = memo.concat(transformed.toArray());\n        return memo;\n      }, newDirtyPaths);\n      this.tmp.dirty = dirty; // If we're not already, queue the flushing process on the next tick.\n\n      if (!this.tmp.flushing) {\n        this.tmp.flushing = true;\n        Promise.resolve().then(function () {\n          return _this.flush();\n        });\n      }\n\n      return controller;\n    }\n    /**\n     * Flush the editor's current change.\n     *\n     * @return {Editor}\n     */\n\n  }, {\n    key: 'flush',\n    value: function flush() {\n      this.run('onChange');\n      var value = this.value,\n          operations = this.operations,\n          controller = this.controller;\n      var change = {\n        value: value,\n        operations: operations\n      };\n      this.operations = List();\n      this.tmp.flushing = false;\n      this.onChange(change);\n      return controller;\n    }\n    /**\n     * Trigger a command by `type` with `...args`.\n     *\n     * @param {String|Function} type\n     * @param {Any} ...args\n     * @return {Editor}\n     */\n\n  }, {\n    key: 'command',\n    value: function command(type) {\n      for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      var controller = this.controller;\n\n      if (typeof type === 'function') {\n        type.apply(undefined, [controller].concat(args));\n        normalizeDirtyPaths(this);\n        return controller;\n      }\n\n      debug$2('command', {\n        type: type,\n        args: args\n      });\n      var obj = {\n        type: type,\n        args: args\n      };\n      this.run('onCommand', obj);\n      normalizeDirtyPaths(this);\n      return controller;\n    }\n    /**\n     * Checks if a command by `type` has been registered.\n     *\n     * @param {String} type\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'hasCommand',\n    value: function hasCommand(type) {\n      var controller = this.controller;\n      var has = type in controller && controller[type].__command;\n      return has;\n    }\n    /**\n     * Checks if a query by `type` has been registered.\n     *\n     * @param {String} type\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'hasQuery',\n    value: function hasQuery(type) {\n      var controller = this.controller;\n      var has = type in controller && controller[type].__query;\n      return has;\n    }\n    /**\n     * Normalize all of the nodes in the document from scratch.\n     *\n     * @return {Editor}\n     */\n\n  }, {\n    key: 'normalize',\n    value: function normalize() {\n      var value = this.value,\n          controller = this.controller;\n      var document = value.document;\n      var table = document.getKeysToPathsTable();\n      var paths = Object.values(table).map(PathUtils.create);\n      this.tmp.dirty = this.tmp.dirty.concat(paths);\n      normalizeDirtyPaths(this);\n      var selection = value.selection;\n      document = value.document;\n\n      if (selection.isUnset && document.nodes.size) {\n        controller.moveToStartOfDocument();\n      }\n\n      return controller;\n    }\n    /**\n     * Ask a query by `type` with `...args`.\n     *\n     * @param {String|Function} type\n     * @param {Any} ...args\n     * @return {Any}\n     */\n\n  }, {\n    key: 'query',\n    value: function query(type) {\n      for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        args[_key2 - 1] = arguments[_key2];\n      }\n\n      var controller = this.controller;\n\n      if (typeof type === 'function') {\n        return type.apply(undefined, [controller].concat(args));\n      }\n\n      debug$2('query', {\n        type: type,\n        args: args\n      });\n      var obj = {\n        type: type,\n        args: args\n      };\n      return this.run('onQuery', obj);\n    }\n    /**\n     * Register a command `type` with the editor.\n     *\n     * @param {String} type\n     * @return {Editor}\n     */\n\n  }, {\n    key: 'registerCommand',\n    value: function registerCommand(type) {\n      var _this2 = this;\n\n      var controller = this.controller;\n\n      if (type in controller && controller[type].__command) {\n        return controller;\n      }\n\n      invariant(!(type in controller), 'You cannot register a `' + type + '` command because it would overwrite an existing property of the `Editor`.');\n\n      var method = function method() {\n        for (var _len3 = arguments.length, args = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n          args[_key3] = arguments[_key3];\n        }\n\n        return _this2.command.apply(_this2, [type].concat(args));\n      };\n\n      controller[type] = method;\n      method.__command = true;\n      return controller;\n    }\n    /**\n     * Register a query `type` with the editor.\n     *\n     * @param {String} type\n     * @return {Editor}\n     */\n\n  }, {\n    key: 'registerQuery',\n    value: function registerQuery(type) {\n      var _this3 = this;\n\n      var controller = this.controller;\n\n      if (type in controller && controller[type].__query) {\n        return controller;\n      }\n\n      invariant(!(type in controller), 'You cannot register a `' + type + '` query because it would overwrite an existing property of the `Editor`.');\n\n      var method = function method() {\n        for (var _len4 = arguments.length, args = Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n          args[_key4] = arguments[_key4];\n        }\n\n        return _this3.query.apply(_this3, [type].concat(args));\n      };\n\n      controller[type] = method;\n      method.__query = true;\n      return controller;\n    }\n    /**\n     * Run through the middleware stack by `key` with `args`.\n     *\n     * @param {String} key\n     * @param {Any} ...args\n     * @return {Any}\n     */\n\n  }, {\n    key: 'run',\n    value: function run(key) {\n      for (var _len5 = arguments.length, args = Array(_len5 > 1 ? _len5 - 1 : 0), _key5 = 1; _key5 < _len5; _key5++) {\n        args[_key5 - 1] = arguments[_key5];\n      }\n\n      var controller = this.controller,\n          middleware = this.middleware;\n      var fns = middleware[key] || [];\n      var i = 0;\n\n      function next() {\n        var fn = fns[i++];\n        if (!fn) return;\n\n        for (var _len6 = arguments.length, overrides = Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n          overrides[_key6] = arguments[_key6];\n        }\n\n        if (overrides.length) {\n          args = overrides;\n        }\n\n        var ret = fn.apply(undefined, toConsumableArray(args).concat([controller, next]));\n        return ret;\n      }\n\n      Object.defineProperty(next, 'change', {\n        get: function get$$1() {\n          invariant(false, 'As of Slate 0.42, the `editor` is no longer passed as the third argument to event handlers. You can access it via `change.editor` instead.');\n        }\n      });\n      Object.defineProperty(next, 'onChange', {\n        get: function get$$1() {\n          invariant(false, 'As of Slate 0.42, the `editor` is no longer passed as the third argument to event handlers. You can access it via `change.editor` instead.');\n        }\n      });\n      Object.defineProperty(next, 'props', {\n        get: function get$$1() {\n          invariant(false, 'As of Slate 0.42, the `editor` is no longer passed as the third argument to event handlers. You can access it via `change.editor` instead.');\n        }\n      });\n      Object.defineProperty(next, 'schema', {\n        get: function get$$1() {\n          invariant(false, 'As of Slate 0.42, the `editor` is no longer passed as the third argument to event handlers. You can access it via `change.editor` instead.');\n        }\n      });\n      Object.defineProperty(next, 'stack', {\n        get: function get$$1() {\n          invariant(false, 'As of Slate 0.42, the `editor` is no longer passed as the third argument to event handlers. You can access it via `change.editor` instead.');\n        }\n      });\n      return next();\n    }\n    /**\n     * Set the `readOnly` flag.\n     *\n     * @param {Boolean} readOnly\n     * @return {Editor}\n     */\n\n  }, {\n    key: 'setReadOnly',\n    value: function setReadOnly(readOnly) {\n      this.readOnly = readOnly;\n      return this;\n    }\n    /**\n     * Set the editor's `value`.\n     *\n     * @param {Value} value\n     * @param {Options} options\n     * @return {Editor}\n     */\n\n  }, {\n    key: 'setValue',\n    value: function setValue(value) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var _options$normalize = options.normalize,\n          normalize = _options$normalize === undefined ? value !== this.value : _options$normalize;\n      this.value = value;\n\n      if (normalize) {\n        this.normalize();\n      }\n\n      return this;\n    }\n    /**\n     * Apply a series of changes inside a synchronous `fn`, deferring\n     * normalization until after the function has finished executing.\n     *\n     * @param {Function} fn\n     * @return {Editor}\n     */\n\n  }, {\n    key: 'withoutNormalizing',\n    value: function withoutNormalizing(fn) {\n      var controller = this.controller;\n      var value = this.tmp.normalize;\n      this.tmp.normalize = false;\n      fn(controller);\n      this.tmp.normalize = value;\n      normalizeDirtyPaths(this);\n      return controller;\n    }\n    /**\n     * Deprecated.\n     */\n\n  }, {\n    key: 'change',\n    value: function change(fn) {\n      warning(false, 'As of Slate 0.43 the `change` object has been replaced with `editor`, so the `editor.change()` method is deprecated.`');\n\n      for (var _len7 = arguments.length, args = Array(_len7 > 1 ? _len7 - 1 : 0), _key7 = 1; _key7 < _len7; _key7++) {\n        args[_key7 - 1] = arguments[_key7];\n      }\n\n      fn.apply(undefined, [this.controller].concat(args));\n    }\n  }, {\n    key: 'call',\n    value: function call(fn) {\n      warning(false, 'As of Slate 0.43 the `editor.call(fn)` method has been deprecated, please use `editor.command(fn)` instead.');\n\n      for (var _len8 = arguments.length, args = Array(_len8 > 1 ? _len8 - 1 : 0), _key8 = 1; _key8 < _len8; _key8++) {\n        args[_key8 - 1] = arguments[_key8];\n      }\n\n      fn.apply(undefined, [this.controller].concat(args));\n      return this.controller;\n    }\n  }, {\n    key: 'applyOperations',\n    value: function applyOperations(operations) {\n      var _this4 = this;\n\n      warning(false, 'As of Slate 0.43 the `applyOperations` method is deprecated, please apply each operation in a loop instead.');\n      operations.forEach(function (op) {\n        return _this4.applyOperation(op);\n      });\n      return this.controller;\n    }\n  }, {\n    key: 'setOperationFlag',\n    value: function setOperationFlag(key, value) {\n      warning(false, 'As of slate@0.41 the `change.setOperationFlag` method has been deprecated.');\n      this.tmp[key] = value;\n      return this;\n    }\n  }, {\n    key: 'getFlag',\n    value: function getFlag(key) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      warning(false, 'As of slate@0.41 the `change.getFlag` method has been deprecated.');\n      return options[key] !== undefined ? options[key] : this.tmp[key];\n    }\n  }, {\n    key: 'unsetOperationFlag',\n    value: function unsetOperationFlag(key) {\n      warning(false, 'As of slate@0.41 the `change.unsetOperationFlag` method has been deprecated.');\n      delete this.tmp[key];\n      return this;\n    }\n  }, {\n    key: 'withoutNormalization',\n    value: function withoutNormalization(fn) {\n      warning(false, 'As of slate@0.41 the `change.withoutNormalization` helper has been renamed to `change.withoutNormalizing`.');\n      return this.withoutNormalizing(fn);\n    }\n  }, {\n    key: 'editor',\n    get: function get$$1() {\n      warning(false, \"As of Slate 0.43 the `change` object has been replaced with `editor`, so you don't need to access `change.editor`.\");\n      return this.controller;\n    }\n  }]);\n  return Editor;\n}();\n/**\n * Get the \"dirty\" paths for a given `operation`.\n *\n * @param {Operation} operation\n * @return {Array}\n */\n\n\nfunction getDirtyPaths(operation) {\n  var type = operation.type,\n      node = operation.node,\n      path = operation.path,\n      newPath = operation.newPath;\n\n  switch (type) {\n    case 'add_mark':\n    case 'insert_text':\n    case 'remove_mark':\n    case 'remove_text':\n    case 'set_mark':\n    case 'set_node':\n      {\n        var ancestors = PathUtils.getAncestors(path).toArray();\n        return [].concat(toConsumableArray(ancestors), [path]);\n      }\n\n    case 'insert_node':\n      {\n        var table = node.getKeysToPathsTable();\n        var paths = Object.values(table).map(function (p) {\n          return path.concat(p);\n        });\n\n        var _ancestors = PathUtils.getAncestors(path).toArray();\n\n        return [].concat(toConsumableArray(_ancestors), [path], toConsumableArray(paths));\n      }\n\n    case 'split_node':\n      {\n        var _ancestors2 = PathUtils.getAncestors(path).toArray();\n\n        var nextPath = PathUtils.increment(path);\n        return [].concat(toConsumableArray(_ancestors2), [path, nextPath]);\n      }\n\n    case 'merge_node':\n      {\n        var _ancestors3 = PathUtils.getAncestors(path).toArray();\n\n        var previousPath = PathUtils.decrement(path);\n        return [].concat(toConsumableArray(_ancestors3), [previousPath]);\n      }\n\n    case 'move_node':\n      {\n        if (PathUtils.isEqual(path, newPath)) {\n          return [];\n        }\n\n        var oldAncestors = PathUtils.getAncestors(path).reduce(function (arr, p) {\n          arr.push.apply(arr, toConsumableArray(PathUtils.transform(p, operation).toArray()));\n          return arr;\n        }, []);\n        var newAncestors = PathUtils.getAncestors(newPath).reduce(function (arr, p) {\n          arr.push.apply(arr, toConsumableArray(PathUtils.transform(p, operation).toArray()));\n          return arr;\n        }, []);\n        return [].concat(toConsumableArray(oldAncestors), toConsumableArray(newAncestors));\n      }\n\n    case 'remove_node':\n      {\n        var _ancestors4 = PathUtils.getAncestors(path).toArray();\n\n        return [].concat(toConsumableArray(_ancestors4));\n      }\n\n    default:\n      {\n        return [];\n      }\n  }\n}\n/**\n * Normalize any new \"dirty\" paths that have been added to the change.\n *\n * @param {Editor}\n */\n\n\nfunction normalizeDirtyPaths(editor) {\n  if (!editor.tmp.normalize) {\n    return;\n  }\n\n  if (!editor.tmp.dirty.length) {\n    return;\n  }\n\n  editor.withoutNormalizing(function () {\n    while (editor.tmp.dirty.length) {\n      var path = editor.tmp.dirty.pop();\n      normalizeNodeByPath(editor, path);\n    }\n  });\n}\n/**\n * Normalize the node at a specific `path`.\n *\n * @param {Editor} editor\n * @param {Array} path\n */\n\n\nfunction normalizeNodeByPath(editor, path) {\n  var controller = editor.controller;\n  var value = editor.value;\n  var _value = value,\n      document = _value.document;\n  var node = document.assertNode(path);\n  var iterations = 0;\n  var max = 100 + (node.object === 'text' ? 1 : node.nodes.size);\n\n  while (node) {\n    var fn = node.normalize(controller);\n\n    if (!fn) {\n      break;\n    } // Run the normalize `fn` to fix the node.\n\n\n    fn(controller); // Attempt to re-find the node by path, or by key if it has changed\n    // locations in the tree continue iterating.\n\n    value = editor.value;\n    document = value.document;\n    var _node = node,\n        key = _node.key;\n    var found = document.getDescendant(path);\n\n    if (found && found.key === key) {\n      node = found;\n    } else {\n      found = document.getDescendant(key);\n\n      if (found) {\n        node = found;\n        path = document.getPath(key);\n      } else {\n        // If it no longer exists by key, it was removed, so we're done.\n        break;\n      }\n    } // Increment the iterations counter, and check to make sure that we haven't\n    // exceeded the max. Without this check, it's easy for the `normalize`\n    // function of a schema rule to be written incorrectly and for an infinite\n    // invalid loop to occur.\n\n\n    iterations++;\n\n    if (iterations > max) {\n      throw new Error('A schema rule could not be normalized after sufficient iterations. This is usually due to a `rule.normalize` or `plugin.normalizeNode` function of a schema being incorrectly written, causing an infinite loop.');\n    }\n  }\n}\n/**\n * Register a `plugin` with the editor.\n *\n * @param {Editor} editor\n * @param {Object|Array} plugin\n */\n\n\nfunction registerPlugin(editor, plugin) {\n  if (Array.isArray(plugin)) {\n    plugin.forEach(function (p) {\n      return registerPlugin(editor, p);\n    });\n    return;\n  }\n\n  var commands = plugin.commands,\n      queries = plugin.queries,\n      schema = plugin.schema,\n      rest = objectWithoutProperties(plugin, ['commands', 'queries', 'schema']);\n\n  if (commands) {\n    var commandsPlugin = CommandsPlugin(commands);\n    registerPlugin(editor, commandsPlugin);\n  }\n\n  if (queries) {\n    var queriesPlugin = QueriesPlugin(queries);\n    registerPlugin(editor, queriesPlugin);\n  }\n\n  if (schema) {\n    var schemaPlugin = SchemaPlugin(schema);\n    registerPlugin(editor, schemaPlugin);\n  }\n\n  for (var key in rest) {\n    var fn = rest[key];\n    var middleware = editor.middleware[key] = editor.middleware[key] || [];\n    middleware.push(fn);\n  }\n}\n/**\n * Export.\n *\n * @type {Editor}\n */\n\n/**\n * Mix in an `Interface` to a `Class`.\n *\n * @param {Class} Interface\n * @param {Class} Class\n */\n\n\nfunction mixin(Interface, Classes) {\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = Classes[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var Class = _step.value; // Copy static properties from the interface.\n\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = Object.getOwnPropertyNames(Interface)[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var name = _step2.value;\n          if (Class.hasOwnProperty(name)) continue;\n          var desc = Object.getOwnPropertyDescriptor(Interface, name);\n          Object.defineProperty(Class, name, desc);\n        } // Copy instance properties from the interface.\n\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      var _iteratorNormalCompletion3 = true;\n      var _didIteratorError3 = false;\n      var _iteratorError3 = undefined;\n\n      try {\n        for (var _iterator3 = Object.getOwnPropertyNames(Interface.prototype)[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n          var _name = _step3.value;\n          if (Class.prototype.hasOwnProperty(_name)) continue;\n          var desc = Object.getOwnPropertyDescriptor(Interface.prototype, _name);\n          Object.defineProperty(Class.prototype, _name, desc);\n        }\n      } catch (err) {\n        _didIteratorError3 = true;\n        _iteratorError3 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion3 && _iterator3.return) {\n            _iterator3.return();\n          }\n        } finally {\n          if (_didIteratorError3) {\n            throw _iteratorError3;\n          }\n        }\n      }\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n}\n\nfunction create$2(type) {\n  var TYPE = TYPES[type];\n  var camel = '' + type.charAt(0).toUpperCase() + type.slice(1);\n  var is$$1 = 'is' + camel;\n\n  var ObjectInterface = function () {\n    function ObjectInterface() {\n      classCallCheck(this, ObjectInterface);\n    }\n\n    createClass(ObjectInterface, [{\n      key: 'object',\n\n      /**\n       * Return the type of the object.\n       *\n       * @return {String}\n       */\n      get: function get$$1() {\n        return type;\n      }\n    }]);\n    return ObjectInterface;\n  }();\n\n  ObjectInterface[is$$1] = isObject.bind(null, type);\n  ObjectInterface.prototype[TYPE] = true;\n  return ObjectInterface;\n}\n/**\n * Mix in the object interfaces.\n */\n\n\nObject.entries({\n  Block: Block,\n  Change: Change,\n  Decoration: Decoration,\n  Document: Document,\n  Editor: Editor,\n  Inline: Inline,\n  Leaf: Leaf,\n  Mark: Mark,\n  Node: Node,\n  Operation: Operation,\n  Point: Point,\n  Range: Range,\n  Selection: Selection,\n  Text: Text,\n  Value: Value\n}).forEach(function (_ref) {\n  var _ref2 = slicedToArray(_ref, 2),\n      camel = _ref2[0],\n      obj = _ref2[1];\n\n  return mixin(create$2(camel.toLowerCase()), [obj]);\n});\n\nvar ModelInterface = function () {\n  function ModelInterface() {\n    classCallCheck(this, ModelInterface);\n  }\n\n  createClass(ModelInterface, [{\n    key: 'toJS',\n\n    /**\n     * Alias `toJS`.\n     */\n    value: function toJS() {\n      return this.toJSON.apply(this, arguments);\n    }\n  }], [{\n    key: 'fromJS',\n\n    /**\n     * Alias `fromJS`.\n     */\n    value: function fromJS() {\n      return this.fromJSON.apply(this, arguments);\n    }\n  }]);\n  return ModelInterface;\n}();\n/**\n * Mix in the common interface.\n *\n * @param {Record}\n */\n\n\nmixin(ModelInterface, [Block, Decoration, Document, Inline, Leaf, Mark, Node, Operation, Point, Range, Selection, Text, Value]);\n\nvar NodeInterface = function () {\n  function NodeInterface() {\n    classCallCheck(this, NodeInterface);\n  }\n\n  createClass(NodeInterface, [{\n    key: 'getFirstText',\n\n    /**\n     * Get the first text node of a node, or the node itself.\n     *\n     * @return {Node|Null}\n     */\n    value: function getFirstText() {\n      if (this.object === 'text') {\n        return this;\n      }\n\n      var descendant = null;\n      var found = this.nodes.find(function (node) {\n        if (node.object === 'text') return true;\n        descendant = node.getFirstText();\n        return !!descendant;\n      });\n      return descendant || found;\n    }\n    /**\n     * Get an object mapping all the keys in the node to their paths.\n     *\n     * @return {Object}\n     */\n\n  }, {\n    key: 'getKeysToPathsTable',\n    value: function getKeysToPathsTable() {\n      var ret = defineProperty({}, this.key, []);\n\n      if (this.nodes) {\n        this.nodes.forEach(function (node, i) {\n          var nested = node.getKeysToPathsTable();\n\n          for (var key in nested) {\n            var path = nested[key];\n            warning(!(key in ret), 'A node with a duplicate key of \"' + key + '\" was found! Duplicate keys are not allowed, you should use `node.regenerateKey` before inserting if you are reusing an existing node.');\n            ret[key] = [i].concat(toConsumableArray(path));\n          }\n        });\n      }\n\n      return ret;\n    }\n    /**\n     * Get the last text node of a node, or the node itself.\n     *\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getLastText',\n    value: function getLastText() {\n      if (this.object === 'text') {\n        return this;\n      }\n\n      var descendant = null;\n      var found = this.nodes.findLast(function (node) {\n        if (node.object === 'text') return true;\n        descendant = node.getLastText();\n        return descendant;\n      });\n      return descendant || found;\n    }\n    /**\n     * Get a node in the tree, or the node itself.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getNode',\n    value: function getNode(path) {\n      path = this.resolvePath(path);\n      if (!path) return null;\n      if (this.object === 'text' && path.size) return null;\n      var node = path.size ? this.getDescendant(path) : this;\n      return node;\n    }\n    /**\n     * Find the path to a node.\n     *\n     * @param {String|List} key\n     * @return {List}\n     */\n\n  }, {\n    key: 'getPath',\n    value: function getPath(key) {\n      // Handle the case of passing in a path directly, to match other methods.\n      if (List.isList(key)) return key;\n      var dict = this.getKeysToPathsTable();\n      var path = dict[key];\n      return path ? List(path) : null;\n    }\n    /**\n     * Get the concatenated text string of a node.\n     *\n     * @return {String}\n     */\n\n  }, {\n    key: 'getText',\n    value: function getText() {\n      var children = this.object === 'text' ? this.leaves : this.nodes;\n      var text = children.reduce(function (memo, c) {\n        return memo + c.text;\n      }, '');\n      return text;\n    }\n    /**\n     * Check if a node exists.\n     *\n     * @param {List|String} path\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'hasNode',\n    value: function hasNode(path) {\n      var node = this.getNode(path);\n      return !!node;\n    }\n    /**\n     * Normalize the text node with an `editor`.\n     *\n     * @param {Editor} editor\n     * @return {Function|Void}\n     */\n\n  }, {\n    key: 'normalize',\n    value: function normalize(editor) {\n      var normalizer = editor.run('normalizeNode', this);\n      return normalizer;\n    }\n    /**\n     * Regenerate the node's key.\n     *\n     * @return {Node}\n     */\n\n  }, {\n    key: 'regenerateKey',\n    value: function regenerateKey() {\n      var key = KeyUtils.create();\n      var node = this.set('key', key);\n      return node;\n    }\n    /**\n     * Resolve a path from a path list or key string.\n     *\n     * An `index` can be provided, in which case paths created from a key string\n     * will have the index pushed onto them. This is helpful in cases where you\n     * want to accept either a `path` or a `key, index` combination for targeting\n     * a location in the tree that doesn't exist yet, like when inserting.\n     *\n     * @param {List|String} value\n     * @param {Number} index\n     * @return {List}\n     */\n\n  }, {\n    key: 'resolvePath',\n    value: function resolvePath(path, index) {\n      if (typeof path === 'string') {\n        path = this.getPath(path);\n\n        if (index != null) {\n          path = path.concat(index);\n        }\n      } else {\n        path = PathUtils.create(path);\n      }\n\n      return path;\n    }\n    /**\n     * Validate the node with an `editor`.\n     *\n     * @param {Editor} editor\n     * @return {Error|Void}\n     */\n\n  }, {\n    key: 'validate',\n    value: function validate(editor) {\n      var error = editor.run('validateNode', this);\n      return error;\n    }\n  }, {\n    key: 'text',\n\n    /**\n     * Get the concatenated text of the node.\n     *\n     * @return {String}\n     */\n    get: function get$$1() {\n      return this.getText();\n    }\n  }]);\n  return NodeInterface;\n}();\n/**\n * Memoize read methods.\n */\n\n\nmemoize(NodeInterface.prototype, ['getFirstText', 'getKeysToPathsTable', 'getLastText', 'getText', 'normalize', 'validate']);\n/**\n * Mix in the node interface.\n */\n\nmixin(NodeInterface, [Block, Document, Inline, Text]);\n\nvar ElementInterface = function () {\n  function ElementInterface() {\n    classCallCheck(this, ElementInterface);\n  }\n\n  createClass(ElementInterface, [{\n    key: 'addMark',\n\n    /**\n     * Add mark to text at `offset` and `length` in node by `path`.\n     *\n     * @param {List|String} path\n     * @param {Number} offset\n     * @param {Number} length\n     * @param {Mark} mark\n     * @return {Node}\n     */\n    value: function addMark(path, offset, length, mark) {\n      var node = this.assertDescendant(path);\n      path = this.resolvePath(path);\n      node = node.addMark(offset, length, mark);\n      var ret = this.replaceNode(path, node);\n      return ret;\n    }\n    /**\n     * Create a decoration with `properties` relative to the node.\n     *\n     * @param {Object|Decoration} properties\n     * @return {Decoration}\n     */\n\n  }, {\n    key: 'createDecoration',\n    value: function createDecoration(properties) {\n      properties = Decoration.createProperties(properties);\n      var decoration = this.resolveDecoration(properties);\n      return decoration;\n    }\n    /**\n     * Create a point with `properties` relative to the node.\n     *\n     * @param {Object|Point} properties\n     * @return {Range}\n     */\n\n  }, {\n    key: 'createPoint',\n    value: function createPoint(properties) {\n      properties = Point.createProperties(properties);\n      var point = this.resolvePoint(properties);\n      return point;\n    }\n    /**\n     * Create a range with `properties` relative to the node.\n     *\n     * @param {Object|Range} properties\n     * @return {Range}\n     */\n\n  }, {\n    key: 'createRange',\n    value: function createRange(properties) {\n      properties = Range.createProperties(properties);\n      var range = this.resolveRange(properties);\n      return range;\n    }\n    /**\n     * Create a selection with `properties` relative to the node.\n     *\n     * @param {Object|Selection} properties\n     * @return {Selection}\n     */\n\n  }, {\n    key: 'createSelection',\n    value: function createSelection(properties) {\n      properties = Selection.createProperties(properties);\n      var selection = this.resolveSelection(properties);\n      return selection;\n    }\n    /**\n     * Recursively filter all descendant nodes with `iterator`.\n     *\n     * @param {Function} iterator\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'filterDescendants',\n    value: function filterDescendants(iterator) {\n      var matches = [];\n      this.forEachDescendant(function (node, i, nodes) {\n        if (iterator(node, i, nodes)) matches.push(node);\n      });\n      return List(matches);\n    }\n    /**\n     * Recursively find a descendant node by `iterator`.\n     *\n     * @param {Function} iterator\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'findDescendant',\n    value: function findDescendant(iterator) {\n      var found = null;\n      this.forEachDescendant(function (node, i, nodes) {\n        if (iterator(node, i, nodes)) {\n          found = node;\n          return false;\n        }\n      });\n      return found;\n    }\n    /**\n     * Recursively find a descendant node and its path by `iterator`.\n     *\n     * @param {Function} iterator\n     * @return {Null|[Node, List]}\n     */\n\n  }, {\n    key: 'findDescendantAndPath',\n    value: function findDescendantAndPath(iterator) {\n      var pathToThisNode = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : PathUtils.create([]);\n      var findLast = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var found = void 0;\n      var foundPath = void 0;\n      this.forEachDescendantWithPath(function (node, path, nodes) {\n        if (iterator(node, path, nodes)) {\n          found = node;\n          foundPath = path;\n          return false;\n        }\n      }, pathToThisNode, findLast);\n      return found ? [found, foundPath] : null;\n    } // Easy helpers to avoid needing to pass findLast boolean\n\n  }, {\n    key: 'findFirstDescendantAndPath',\n    value: function findFirstDescendantAndPath(iterator, pathToThisNode) {\n      return this.findDescendantAndPath(iterator, pathToThisNode, false);\n    }\n  }, {\n    key: 'findLastDescendantAndPath',\n    value: function findLastDescendantAndPath(iterator, pathToThisNode) {\n      return this.findDescendantAndPath(iterator, pathToThisNode, true);\n    }\n    /**\n     * Recursively iterate over all descendant nodes with `iterator`. If the\n     * iterator returns false it will break the loop.\n     *\n     * @param {Function} iterator\n     */\n\n  }, {\n    key: 'forEachDescendant',\n    value: function forEachDescendant(iterator) {\n      var ret = void 0;\n      this.nodes.forEach(function (child, i, nodes) {\n        if (iterator(child, i, nodes) === false) {\n          ret = false;\n          return false;\n        }\n\n        if (child.object !== 'text') {\n          ret = child.forEachDescendant(iterator);\n          return ret;\n        }\n      });\n      return ret;\n    }\n    /**\n     * Recursively iterate over all descendant nodes with `iterator`. If the\n     * iterator returns false it will break the loop.\n     * Calls iterator with node and path.\n     *\n     * @param {Function} iterator\n     * @param {List} path\n     * @param {Boolean} findLast - whether to iterate in reverse order\n     */\n\n  }, {\n    key: 'forEachDescendantWithPath',\n    value: function forEachDescendantWithPath(iterator) {\n      var path = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : PathUtils.create([]);\n      var findLast = arguments[2];\n      var nodes = this.nodes;\n      var ret = void 0;\n      if (findLast) nodes = nodes.reverse();\n      nodes.forEach(function (child, i) {\n        var childPath = path.concat(i);\n\n        if (iterator(child, childPath, nodes) === false) {\n          ret = false;\n          return false;\n        }\n\n        if (child.object !== 'text') {\n          ret = child.forEachDescendantWithPath(iterator, childPath, findLast);\n          return ret;\n        }\n      });\n      return ret;\n    }\n    /**\n     * Get a set of the active marks in a `range`.\n     *\n     * @param {Range} range\n     * @return {Set<Mark>}\n     */\n\n  }, {\n    key: 'getActiveMarksAtRange',\n    value: function getActiveMarksAtRange(range) {\n      range = this.resolveRange(range);\n      if (range.isUnset) return Set();\n\n      if (range.isCollapsed) {\n        var _range = range,\n            _start = _range.start;\n        return this.getMarksAtPosition(_start.path, _start.offset).toSet();\n      }\n\n      var _range2 = range,\n          start = _range2.start,\n          end = _range2.end;\n      var startPath = start.path;\n      var startOffset = start.offset;\n      var endPath = end.path;\n      var endOffset = end.offset;\n      var startText = this.getDescendant(startPath);\n      var endText = this.getDescendant(endPath);\n\n      if (!PathUtils.isEqual(startPath, endPath)) {\n        while (!PathUtils.isEqual(startPath, endPath) && endOffset === 0) {\n          var _getPreviousTextAndPa = this.getPreviousTextAndPath(endPath);\n\n          var _getPreviousTextAndPa2 = slicedToArray(_getPreviousTextAndPa, 2);\n\n          endText = _getPreviousTextAndPa2[0];\n          endPath = _getPreviousTextAndPa2[1];\n          endOffset = endText.text.length;\n        }\n\n        while (!PathUtils.isEqual(startPath, endPath) && startOffset === startText.text.length) {\n          var _getNextTextAndPath = this.getNextTextAndPath(startPath);\n\n          var _getNextTextAndPath2 = slicedToArray(_getNextTextAndPath, 2);\n\n          startText = _getNextTextAndPath2[0];\n          startPath = _getNextTextAndPath2[1];\n          startOffset = 0;\n        }\n      }\n\n      if (PathUtils.isEqual(startPath, endPath)) {\n        return startText.getActiveMarksBetweenOffsets(startOffset, endOffset);\n      }\n\n      var startMarks = startText.getActiveMarksBetweenOffsets(startOffset, startText.text.length);\n      if (startMarks.size === 0) return Set();\n      var endMarks = endText.getActiveMarksBetweenOffsets(0, endOffset);\n      var marks = startMarks.intersect(endMarks); // If marks is already empty, the active marks is empty\n\n      if (marks.size === 0) {\n        return marks;\n      }\n\n      var _getNextTextAndPath3 = this.getNextTextAndPath(startPath);\n\n      var _getNextTextAndPath4 = slicedToArray(_getNextTextAndPath3, 2);\n\n      startText = _getNextTextAndPath4[0];\n      startPath = _getNextTextAndPath4[1];\n\n      while (!PathUtils.isEqual(startPath, endPath)) {\n        if (startText.text.length !== 0) {\n          marks = marks.intersect(startText.getActiveMarks());\n          if (marks.size === 0) return Set();\n        }\n\n        var _getNextTextAndPath5 = this.getNextTextAndPath(startPath);\n\n        var _getNextTextAndPath6 = slicedToArray(_getNextTextAndPath5, 2);\n\n        startText = _getNextTextAndPath6[0];\n        startPath = _getNextTextAndPath6[1];\n      }\n\n      return marks;\n    }\n    /**\n     * Get a list of the ancestors of a descendant.\n     *\n     * @param {List|String} path\n     * @return {List<Node>|Null}\n     */\n\n  }, {\n    key: 'getAncestors',\n    value: function getAncestors(path) {\n      var _this = this;\n\n      path = this.resolvePath(path);\n      if (!path) return null;\n      var ancestors = [];\n      path.forEach(function (p, i) {\n        var current = path.slice(0, i);\n\n        var parent = _this.getNode(current);\n\n        ancestors.push(parent);\n      });\n      return List(ancestors);\n    }\n    /**\n     * Get the leaf block descendants of the node.\n     *\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'getBlocks',\n    value: function getBlocks() {\n      var array = this.getBlocksAsArray();\n      return List(array);\n    }\n    /**\n     * Get the leaf block descendants of the node.\n     *\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'getBlocksAsArray',\n    value: function getBlocksAsArray() {\n      return this.nodes.reduce(function (array, child) {\n        if (child.object !== 'block') return array;\n        if (!child.isLeafBlock()) return array.concat(child.getBlocksAsArray());\n        array.push(child);\n        return array;\n      }, []);\n    }\n    /**\n     * Get the leaf block descendants in a `range`.\n     *\n     * @param {Range} range\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'getBlocksAtRange',\n    value: function getBlocksAtRange(range) {\n      warning(false, 'As of slate@0.44 the `node.getBlocksAtRange` method has been renamed to `getLeafBlocksAtRange`.');\n      return this.getLeafBlocksAtRange(range);\n    }\n    /**\n     * Get the bottom-most block descendants in a `range` as an array\n     *\n     * @param {Range} range\n     * @return {Array}\n     */\n\n  }, {\n    key: 'getBlocksAtRangeAsArray',\n    value: function getBlocksAtRangeAsArray(range) {\n      warning(false, 'As of slate@0.44 the `node.getBlocksAtRangeAsArray` method has been renamed to `getLeafBlocksAtRangeAsArray`.');\n      return this.getLeafBlocksAtRangeAsArray(range);\n    }\n    /**\n     * Get all of the leaf blocks that match a `type`.\n     *\n     * @param {String} type\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'getBlocksByType',\n    value: function getBlocksByType(type) {\n      var array = this.getBlocksByTypeAsArray(type);\n      return List(array);\n    }\n    /**\n     * Get all of the leaf blocks that match a `type` as an array\n     *\n     * @param {String} type\n     * @return {Array}\n     */\n\n  }, {\n    key: 'getBlocksByTypeAsArray',\n    value: function getBlocksByTypeAsArray(type) {\n      return this.nodes.reduce(function (array, node) {\n        if (node.object !== 'block') {\n          return array;\n        } else if (node.isLeafBlock() && node.type === type) {\n          array.push(node);\n          return array;\n        } else {\n          return array.concat(node.getBlocksByTypeAsArray(type));\n        }\n      }, []);\n    }\n    /**\n     * Get a child node.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getChild',\n    value: function getChild(path) {\n      path = this.resolvePath(path);\n      if (!path || path.size > 1) return null;\n      var child = this.nodes.get(path.first());\n      return child;\n    }\n    /**\n     * Get closest parent of node that matches an `iterator`.\n     *\n     * @param {List|String} path\n     * @param {Function} iterator\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getClosest',\n    value: function getClosest(path, iterator) {\n      var _this2 = this;\n\n      var ancestors = this.getAncestors(path);\n      if (!ancestors) return null;\n      var closest = ancestors.findLast(function (node) {\n        for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          args[_key - 1] = arguments[_key];\n        } // We never want to include the top-level node.\n\n\n        if (node === _this2) return false;\n        return iterator.apply(undefined, [node].concat(args));\n      });\n      return closest || null;\n    }\n    /**\n     * Get the closest block parent of a node.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getClosestBlock',\n    value: function getClosestBlock(path) {\n      var closest = this.getClosest(path, function (n) {\n        return n.object === 'block';\n      });\n      return closest;\n    }\n    /**\n     * Get the closest inline parent of a node by `path`.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getClosestInline',\n    value: function getClosestInline(path) {\n      var closest = this.getClosest(path, function (n) {\n        return n.object === 'inline';\n      });\n      return closest;\n    }\n    /**\n     * Get the closest void parent of a node by `path`.\n     *\n     * @param {List|String} path\n     * @param {Editor} editor\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getClosestVoid',\n    value: function getClosestVoid(path, editor) {\n      invariant(!Value.isValue(editor), 'As of Slate 0.42.0, the `node.getClosestVoid` method takes an `editor` instead of a `value`.');\n      var ancestors = this.getAncestors(path);\n      if (!ancestors) return null;\n      var ancestor = ancestors.findLast(function (a) {\n        return editor.query('isVoid', a);\n      });\n      return ancestor;\n    }\n    /**\n     * Get the common ancestor of nodes `a` and `b`.\n     *\n     * @param {List} a\n     * @param {List} b\n     * @return {Node}\n     */\n\n  }, {\n    key: 'getCommonAncestor',\n    value: function getCommonAncestor(a, b) {\n      a = this.resolvePath(a);\n      b = this.resolvePath(b);\n      if (!a || !b) return null;\n      var path = PathUtils.relate(a, b);\n      var node = this.getNode(path);\n      return node;\n    }\n    /**\n     * Get the decorations for the node from an `editor`.\n     *\n     * @param {Editor} editor\n     * @return {List}\n     */\n\n  }, {\n    key: 'getDecorations',\n    value: function getDecorations(editor) {\n      invariant(!Value.isValue(editor), 'As of Slate 0.42.0, the `node.getDecorations` method takes an `editor` instead of a `value`.');\n      var array = editor.run('decorateNode', this);\n      var decorations = Decoration.createList(array);\n      return decorations;\n    }\n    /**\n     * Get the depth of a descendant, with optional `startAt`.\n     *\n     * @param {List|String} path\n     * @param {Number} startAt\n     * @return {Number|Null}\n     */\n\n  }, {\n    key: 'getDepth',\n    value: function getDepth(path) {\n      var startAt = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      path = this.resolvePath(path);\n      if (!path) return null;\n      var node = this.getNode(path);\n      var depth = node ? path.size - 1 + startAt : null;\n      return depth;\n    }\n    /**\n     * Get a descendant node.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getDescendant',\n    value: function getDescendant(path) {\n      path = this.resolvePath(path);\n      if (!path || !path.size) return null;\n      var node = this;\n      path.forEach(function (index) {\n        node = node.getIn(['nodes', index]);\n        return !!node;\n      });\n      return node;\n    }\n    /**\n     * Get a fragment of the node at a `range`.\n     *\n     * @param {Range} range\n     * @return {Document}\n     */\n\n  }, {\n    key: 'getFragmentAtRange',\n    value: function getFragmentAtRange(range) {\n      range = this.resolveRange(range);\n\n      if (range.isUnset) {\n        return Document.create();\n      }\n\n      var _range3 = range,\n          start = _range3.start,\n          end = _range3.end;\n      var node = this;\n      var targetPath = end.path;\n      var targetPosition = end.offset;\n      var mode = 'end';\n\n      while (targetPath.size) {\n        var index = targetPath.last();\n        node = node.splitNode(targetPath, targetPosition);\n        targetPosition = index + 1;\n        targetPath = PathUtils.lift(targetPath);\n\n        if (!targetPath.size && mode === 'end') {\n          targetPath = start.path;\n          targetPosition = start.offset;\n          mode = 'start';\n        }\n      }\n\n      var startIndex = start.path.first() + 1;\n      var endIndex = end.path.first() + 2;\n      var nodes = node.nodes.slice(startIndex, endIndex);\n      var fragment = Document.create({\n        nodes: nodes\n      });\n      return fragment;\n    }\n    /**\n     * Get the furthest parent of a node that matches an `iterator`.\n     *\n     * @param {Path} path\n     * @param {Function} iterator\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getFurthest',\n    value: function getFurthest(path, iterator) {\n      var _this3 = this;\n\n      var ancestors = this.getAncestors(path);\n      if (!ancestors) return null;\n      var furthest = ancestors.find(function (node) {\n        for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n          args[_key2 - 1] = arguments[_key2];\n        } // We never want to include the top-level node.\n\n\n        if (node === _this3) return false;\n        return iterator.apply(undefined, [node].concat(args));\n      });\n      return furthest || null;\n    }\n    /**\n     * Get the furthest ancestor of a node.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getFurthestAncestor',\n    value: function getFurthestAncestor(path) {\n      path = this.resolvePath(path);\n      if (!path || !path.size) return null;\n      var furthest = this.nodes.get(path.first());\n      return furthest;\n    }\n    /**\n     * Get the furthest block parent of a node.\n     *\n     * @param {Path} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getFurthestBlock',\n    value: function getFurthestBlock(path) {\n      var furthest = this.getFurthest(path, function (n) {\n        return n.object === 'block';\n      });\n      return furthest;\n    }\n    /**\n     * Get the furthest inline parent of a node.\n     *\n     * @param {Path} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getFurthestInline',\n    value: function getFurthestInline(path) {\n      var furthest = this.getFurthest(path, function (n) {\n        return n.object === 'inline';\n      });\n      return furthest;\n    }\n    /**\n     * Get the furthest ancestor of a node, where all ancestors to that point only have one child.\n     *\n     * @param {Path} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getFurthestOnlyChildAncestor',\n    value: function getFurthestOnlyChildAncestor(path) {\n      var ancestors = this.getAncestors(path);\n      if (!ancestors) return null;\n      var furthest = ancestors.rest().reverse().takeUntil(function (p) {\n        return p.nodes.size > 1;\n      }).last();\n      return furthest || null;\n    }\n    /**\n     * Get the closest inline nodes for each text node in the node.\n     *\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'getInlines',\n    value: function getInlines() {\n      var array = this.getInlinesAsArray();\n      var list = List(array);\n      return list;\n    }\n    /**\n     * Get the closest inline nodes for each text node in the node, as an array.\n     *\n     * @return {Array<Node>}\n     */\n\n  }, {\n    key: 'getInlinesAsArray',\n    value: function getInlinesAsArray() {\n      var array = [];\n      this.nodes.forEach(function (child) {\n        if (child.object === 'text') return;\n\n        if (child.isLeafInline()) {\n          array.push(child);\n        } else {\n          array = array.concat(child.getInlinesAsArray());\n        }\n      });\n      return array;\n    }\n    /**\n     * Get the bottom-most inline nodes for each text node in a `range`.\n     *\n     * @param {Range} range\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'getInlinesAtRange',\n    value: function getInlinesAtRange(range) {\n      warning(false, 'As of slate@0.44 the `node.getInlinesAtRange` method has been renamed to `getLeafInlinesAtRange`.');\n      return this.getLeafInlinesAtRange(range);\n    }\n    /**\n     * Get the bottom-most inline nodes for each text node in a `range` as an array.\n     *\n     * @param {Range} range\n     * @return {Array}\n     */\n\n  }, {\n    key: 'getInlinesAtRangeAsArray',\n    value: function getInlinesAtRangeAsArray(range) {\n      warning(false, 'As of slate@0.44 the `node.getInlinesAtRangeAsArray` method has been renamed to `getLeafInlinesAtRangeAsArray`.');\n      return this.getLeafInlinesAtRangeAsArray(range);\n    }\n    /**\n     * Get all of the leaf inline nodes that match a `type`.\n     *\n     * @param {String} type\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'getInlinesByType',\n    value: function getInlinesByType(type) {\n      var array = this.getInlinesByTypeAsArray(type);\n      var list = List(array);\n      return list;\n    }\n    /**\n     * Get all of the leaf inline nodes that match a `type` as an array.\n     *\n     * @param {String} type\n     * @return {Array}\n     */\n\n  }, {\n    key: 'getInlinesByTypeAsArray',\n    value: function getInlinesByTypeAsArray(type) {\n      var array = this.nodes.reduce(function (inlines, node) {\n        if (node.object === 'text') {\n          return inlines;\n        } else if (node.isLeafInline() && node.type === type) {\n          inlines.push(node);\n          return inlines;\n        } else {\n          return inlines.concat(node.getInlinesByTypeAsArray(type));\n        }\n      }, []);\n      return array;\n    }\n    /**\n     * Get a set of the marks in a `range`.\n     *\n     * @param {Range} range\n     * @return {Set<Mark>}\n     */\n\n  }, {\n    key: 'getInsertMarksAtRange',\n    value: function getInsertMarksAtRange(range) {\n      range = this.resolveRange(range);\n      var _range4 = range,\n          start = _range4.start;\n\n      if (range.isUnset) {\n        return Set();\n      }\n\n      if (range.isCollapsed) {\n        // PERF: range is not cachable, use key and offset as proxies for cache\n        return this.getMarksAtPosition(start.path, start.offset);\n      }\n\n      var text = this.getDescendant(start.path);\n      var marks = text.getMarksAtIndex(start.offset + 1);\n      return marks;\n    }\n    /**\n     * Get the bottom-most block descendants in a `range`.\n     *\n     * @param {Range} range\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'getLeafBlocksAtRange',\n    value: function getLeafBlocksAtRange(range) {\n      var array = this.getLeafBlocksAtRangeAsArray(range); // Eliminate duplicates by converting to an `OrderedSet` first.\n\n      return List(OrderedSet(array));\n    }\n    /**\n     * Get the bottom-most descendants in a `range` as an array\n     *\n     * @param {Range} range\n     * @return {Array<Node>}\n     */\n\n  }, {\n    key: 'getLeafBlocksAtRangeAsArray',\n    value: function getLeafBlocksAtRangeAsArray(range) {\n      range = this.resolveRange(range);\n      if (range.isUnset) return [];\n      var _range5 = range,\n          start = _range5.start,\n          end = _range5.end;\n      return this.getLeafBlocksBetweenPathPositionsAsArray(start.path, end.path);\n    }\n    /**\n     * Get the bottom-most descendants between two paths as an array\n     *\n     * @param {List|Null} startPath\n     * @param {List|Null} endPath\n     * @return {Array<Node>}\n     */\n\n  }, {\n    key: 'getLeafBlocksBetweenPathPositionsAsArray',\n    value: function getLeafBlocksBetweenPathPositionsAsArray(startPath, endPath) {\n      // PERF: the most common case is when the range is in a single block node,\n      // where we can avoid a lot of iterating of the tree.\n      if (startPath && endPath && PathUtils.isEqual(startPath, endPath)) {\n        return [this.getClosestBlock(startPath)];\n      } else if (!startPath && !endPath) {\n        return this.getBlocksAsArray();\n      }\n\n      var startIndex = startPath ? startPath.get(0, 0) : 0;\n      var endIndex = endPath ? endPath.get(0, this.nodes.size - 1) : this.nodes.size - 1;\n      var array = [];\n      this.nodes.slice(startIndex, endIndex + 1).forEach(function (node, i) {\n        if (node.object !== 'block') {\n          return;\n        } else if (node.isLeafBlock()) {\n          array.push(node);\n        } else {\n          var childStartPath = startPath && i === 0 ? PathUtils.drop(startPath) : null;\n          var childEndPath = endPath && i === endIndex - startIndex ? PathUtils.drop(endPath) : null;\n          array = array.concat(node.getLeafBlocksBetweenPathPositionsAsArray(childStartPath, childEndPath));\n        }\n      });\n      return array;\n    }\n    /**\n     * Get the bottom-most inline nodes for each text node in a `range`.\n     *\n     * @param {Range} range\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'getLeafInlinesAtRange',\n    value: function getLeafInlinesAtRange(range) {\n      var array = this.getLeafInlinesAtRangeAsArray(range); // Remove duplicates by converting it to an `OrderedSet` first.\n\n      var list = List(OrderedSet(array));\n      return list;\n    }\n    /**\n     * Get the bottom-most inline nodes for each text node in a `range` as an array.\n     *\n     * @param {Range} range\n     * @return {Array<Node>}\n     */\n\n  }, {\n    key: 'getLeafInlinesAtRangeAsArray',\n    value: function getLeafInlinesAtRangeAsArray(range) {\n      var _this4 = this;\n\n      range = this.resolveRange(range);\n      if (range.isUnset) return [];\n      var array = this.getTextsAtRangeAsArray(range).map(function (text) {\n        return _this4.getClosestInline(text.key);\n      }).filter(function (exists) {\n        return exists;\n      });\n      return array;\n    }\n    /**\n     * Get all of the marks for all of the characters of every text node.\n     *\n     * @return {Set<Mark>}\n     */\n\n  }, {\n    key: 'getMarks',\n    value: function getMarks() {\n      var array = this.getMarksAsArray();\n      return Set(array);\n    }\n    /**\n     * Get all of the marks as an array.\n     *\n     * @return {Array}\n     */\n\n  }, {\n    key: 'getMarksAsArray',\n    value: function getMarksAsArray() {\n      var _ref;\n\n      var result = [];\n      this.nodes.forEach(function (node) {\n        result.push(node.getMarksAsArray());\n      }); // PERF: use only one concat rather than multiple for speed.\n\n      var array = (_ref = []).concat.apply(_ref, result);\n\n      return array;\n    }\n    /**\n     * Get a set of marks in a `position`, the equivalent of a collapsed range\n     *\n     * @param {List|string} key\n     * @param {number} offset\n     * @return {Set}\n     */\n\n  }, {\n    key: 'getMarksAtPosition',\n    value: function getMarksAtPosition(path, offset) {\n      path = this.resolvePath(path);\n      var text = this.getDescendant(path);\n      var currentMarks = text.getMarksAtIndex(offset);\n      if (offset !== 0) return currentMarks;\n      var closestBlock = this.getClosestBlock(path);\n\n      if (closestBlock.text === '') {\n        // insert mark for empty block; the empty block are often created by split node or add marks in a range including empty blocks\n        return currentMarks;\n      }\n\n      var previous = this.getPreviousTextAndPath(path);\n      if (!previous) return Set();\n\n      var _previous = slicedToArray(previous, 2),\n          previousText = _previous[0],\n          previousPath = _previous[1];\n\n      if (closestBlock.hasDescendant(previousPath)) {\n        return previousText.getMarksAtIndex(previousText.text.length);\n      }\n\n      return currentMarks;\n    }\n    /**\n     * Get a set of the marks in a `range`.\n     *\n     * @param {Range} range\n     * @return {Set<Mark>}\n     */\n\n  }, {\n    key: 'getMarksAtRange',\n    value: function getMarksAtRange(range) {\n      var marks = Set(this.getOrderedMarksAtRange(range));\n      return marks;\n    }\n    /**\n     * Get all of the marks that match a `type`.\n     *\n     * @param {String} type\n     * @return {Set<Mark>}\n     */\n\n  }, {\n    key: 'getMarksByType',\n    value: function getMarksByType(type) {\n      var array = this.getMarksByTypeAsArray(type);\n      return Set(array);\n    }\n    /**\n     * Get all of the marks that match a `type` as an array.\n     *\n     * @param {String} type\n     * @return {Array}\n     */\n\n  }, {\n    key: 'getMarksByTypeAsArray',\n    value: function getMarksByTypeAsArray(type) {\n      var array = this.nodes.reduce(function (memo, node) {\n        return node.object === 'text' ? memo.concat(node.getMarksAsArray().filter(function (m) {\n          return m.type === type;\n        })) : memo.concat(node.getMarksByTypeAsArray(type));\n      }, []);\n      return array;\n    }\n    /**\n     * Get the block node after a descendant text node by `path`.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getNextBlock',\n    value: function getNextBlock(path) {\n      path = this.resolvePath(path);\n      var match = this.getNextDeepMatchingNodeAndPath(path, function (n) {\n        return n.object === 'block';\n      });\n      return match ? match[0] : null;\n    }\n    /**\n     * Get the next node in the tree from a node.\n     *\n     * This will not only check for siblings but instead move up the tree\n     * returning the next ancestor if no sibling is found.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getNextNode',\n    value: function getNextNode(path) {\n      path = this.resolvePath(path);\n      if (!path) return null;\n      if (!path.size) return null;\n\n      for (var i = path.size; i > 0; i--) {\n        var p = path.slice(0, i);\n        var target = PathUtils.increment(p);\n        var node = this.getNode(target);\n        if (node) return node;\n      }\n\n      return null;\n    }\n    /**\n     * Get the next node in the tree from a node that matches iterator\n     *\n     * This will not only check for siblings but instead move up the tree\n     * returning the next ancestor if no sibling is found.\n     *\n     * @param {List} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getNextMatchingNodeAndPath',\n    value: function getNextMatchingNodeAndPath(path) {\n      var iterator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {\n        return true;\n      };\n      if (!path) return null;\n\n      for (var i = path.size; i > 0; i--) {\n        var p = path.slice(0, i);\n        var nextPath = PathUtils.increment(p);\n        var nextNode = this.getNode(nextPath);\n\n        while (nextNode && !iterator(nextNode)) {\n          nextPath = PathUtils.increment(nextPath);\n          nextNode = this.getNode(nextPath);\n        }\n\n        if (nextNode) return [nextNode, nextPath];\n      }\n\n      return null;\n    }\n    /**\n     * Get the next, deepest node in the tree from a node that matches iterator\n     *\n     * This will not only check for siblings but instead move up the tree\n     * returning the next ancestor if no sibling is found.\n     *\n     * @param {List} path\n     * @param {Function} iterator\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getNextDeepMatchingNodeAndPath',\n    value: function getNextDeepMatchingNodeAndPath(path) {\n      var iterator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {\n        return true;\n      };\n      var match = this.getNextMatchingNodeAndPath(path);\n      if (!match) return null;\n\n      var _match = slicedToArray(match, 2),\n          nextNode = _match[0],\n          nextPath = _match[1];\n\n      var childMatch = void 0;\n\n      var assign = function assign() {\n        childMatch = nextNode.object !== 'text' && nextNode.findFirstDescendantAndPath(iterator, nextPath);\n        return childMatch;\n      };\n\n      while (assign(childMatch)) {\n        var _childMatch = childMatch;\n\n        var _childMatch2 = slicedToArray(_childMatch, 2);\n\n        nextNode = _childMatch2[0];\n        nextPath = _childMatch2[1];\n      }\n\n      if (!nextNode) return null;\n      return iterator(nextNode) ? [nextNode, nextPath] : this.getNextDeepMatchingNodeAndPath(match[1], iterator);\n    }\n    /**\n     * Get the next sibling of a node.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getNextSibling',\n    value: function getNextSibling(path) {\n      path = this.resolvePath(path);\n      if (!path) return null;\n      if (!path.size) return null;\n      var p = PathUtils.increment(path);\n      var sibling = this.getNode(p);\n      return sibling;\n    }\n    /**\n     * Get the text node after a descendant text node.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getNextText',\n    value: function getNextText(path) {\n      path = this.resolvePath(path);\n      if (!path) return null;\n      if (!path.size) return null;\n      var next = this.getNextNode(path);\n      if (!next) return null;\n      var text = next.getFirstText();\n      return text;\n    }\n  }, {\n    key: 'getNextTextAndPath',\n    value: function getNextTextAndPath(path) {\n      if (!path) return null;\n      if (!path.size) return null;\n      var match = this.getNextDeepMatchingNodeAndPath(path, function (n) {\n        return n.object === 'text';\n      });\n      return match;\n    }\n    /**\n     * Get all of the nodes in a `range`. This includes all of the\n     * text nodes inside the range and all ancestors of those text\n     * nodes up to this node.\n     *\n     * @param {Range} range\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'getNodesAtRange',\n    value: function getNodesAtRange(range) {\n      range = this.resolveRange(range);\n      if (range.isUnset) return List();\n      var _range6 = range,\n          start = _range6.start,\n          end = _range6.end; // Do a depth-first stack-based search for all nodes in the range\n      // Nodes that are pushed to the stack are inside the range\n      // Start with the nodes that are on the highest level in the tree\n\n      var stack = Stack(this.nodes.slice(start.path.get(0), end.path.get(0) + 1).map(function (node, index) {\n        return {\n          node: node,\n          onStartEdge: index === 0,\n          onEndEdge: index === end.path.get(0) - start.path.get(0),\n          relativeStartPath: start.path.slice(1),\n          relativeEndPath: end.path.slice(1)\n        };\n      }));\n      var result = [];\n\n      var _loop = function _loop() {\n        var _stack$peek = stack.peek(),\n            node = _stack$peek.node,\n            onStartEdge = _stack$peek.onStartEdge,\n            onEndEdge = _stack$peek.onEndEdge,\n            relativeStartPath = _stack$peek.relativeStartPath,\n            relativeEndPath = _stack$peek.relativeEndPath;\n\n        stack = stack.shift();\n        result.push(node);\n        if (node.object === 'text') return 'continue'; // Modify indexes to exclude children that are outside of the range\n\n        var startIndex = onStartEdge ? relativeStartPath.get(0) : 0;\n        var endIndex = onEndEdge ? relativeEndPath.get(0) : node.nodes.size - 1; // Push children that are inside the range to the stack\n\n        stack = stack.pushAll(node.nodes.slice(startIndex, endIndex + 1).map(function (n, i) {\n          return {\n            node: n,\n            onStartEdge: onStartEdge && i === 0,\n            onEndEdge: onEndEdge && i === endIndex - startIndex,\n            relativeStartPath: onStartEdge && i === 0 ? relativeStartPath.slice(1) : null,\n            relativeEndPath: onEndEdge && i === endIndex - startIndex ? relativeEndPath.slice(1) : null\n          };\n        }));\n      };\n\n      while (stack.size > 0) {\n        var _ret = _loop();\n\n        if (_ret === 'continue') continue;\n      }\n\n      return List(result);\n    }\n    /**\n     * Get the offset for a descendant text node by `path` or `key`.\n     *\n     * @param {List|string} path\n     * @return {Number}\n     */\n\n  }, {\n    key: 'getOffset',\n    value: function getOffset(path) {\n      path = this.resolvePath(path);\n      this.assertDescendant(path); // Calculate the offset of the nodes before the highest child.\n\n      var index = path.first();\n      var offset = this.nodes.slice(0, index).reduce(function (memo, n) {\n        return memo + n.text.length;\n      }, 0); // Recurse if need be.\n\n      var ret = path.size === 1 ? offset : offset + this.nodes.get(index).getOffset(PathUtils.drop(path));\n      return ret;\n    }\n    /**\n     * Get the offset from a `range`.\n     *\n     * @param {Range} range\n     * @return {Number}\n     */\n\n  }, {\n    key: 'getOffsetAtRange',\n    value: function getOffsetAtRange(range) {\n      range = this.resolveRange(range);\n\n      if (range.isUnset) {\n        throw new Error('The range cannot be unset to calculcate its offset.');\n      }\n\n      if (range.isExpanded) {\n        throw new Error('The range must be collapsed to calculcate its offset.');\n      }\n\n      var _range7 = range,\n          start = _range7.start;\n      var offset = this.getOffset(start.path) + start.offset;\n      return offset;\n    }\n    /**\n     * Get all of the marks for all of the characters of every text node.\n     *\n     * @return {OrderedSet<Mark>}\n     */\n\n  }, {\n    key: 'getOrderedMarks',\n    value: function getOrderedMarks() {\n      var array = this.getMarksAsArray();\n      return OrderedSet(array);\n    }\n    /**\n     * Get a set of the marks in a `range`.\n     *\n     * @param {Range} range\n     * @return {OrderedSet<Mark>}\n     */\n\n  }, {\n    key: 'getOrderedMarksAtRange',\n    value: function getOrderedMarksAtRange(range) {\n      range = this.resolveRange(range);\n      var _range8 = range,\n          start = _range8.start,\n          end = _range8.end;\n\n      if (range.isUnset) {\n        return OrderedSet();\n      }\n\n      if (range.isCollapsed) {\n        // PERF: range is not cachable, use path? and offset as proxies for cache\n        return this.getMarksAtPosition(start.path, start.offset);\n      }\n\n      var marks = this.getOrderedMarksBetweenPositions(start.path, start.offset, end.path, end.offset);\n      return marks;\n    }\n    /**\n     * Get a set of the marks in a `range`.\n     * PERF: arguments use key and offset for utilizing cache\n     *\n     * @param {List|string} startPath\n     * @param {number} startOffset\n     * @param {List|string} endPath\n     * @param {number} endOffset\n     * @returns {OrderedSet<Mark>}\n     */\n\n  }, {\n    key: 'getOrderedMarksBetweenPositions',\n    value: function getOrderedMarksBetweenPositions(startPath, startOffset, endPath, endOffset) {\n      startPath = this.resolvePath(startPath);\n      endPath = this.resolvePath(endPath);\n      var startText = this.getDescendant(startPath);\n\n      if (PathUtils.isEqual(startPath, endPath)) {\n        return startText.getMarksBetweenOffsets(startOffset, endOffset);\n      }\n\n      var endText = this.getDescendant(endPath);\n      var texts = this.getTextsBetweenPathPositionsAsArray(startPath, endPath);\n      return OrderedSet().withMutations(function (result) {\n        texts.forEach(function (text) {\n          if (text.key === startText.key) {\n            result.union(text.getMarksBetweenOffsets(startOffset, text.text.length));\n          } else if (text.key === endText.key) {\n            result.union(text.getMarksBetweenOffsets(0, endOffset));\n          } else {\n            result.union(text.getMarks());\n          }\n        });\n      });\n    }\n    /**\n     * Get all of the marks that match a `type`.\n     *\n     * @param {String} type\n     * @return {OrderedSet<Mark>}\n     */\n\n  }, {\n    key: 'getOrderedMarksByType',\n    value: function getOrderedMarksByType(type) {\n      var array = this.getMarksByTypeAsArray(type);\n      return OrderedSet(array);\n    }\n    /**\n     * Get the parent of a descendant node.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getParent',\n    value: function getParent(path) {\n      path = this.resolvePath(path);\n      if (!path) return null;\n      if (!path.size) return null;\n      var parentPath = PathUtils.lift(path);\n      var parent = this.getNode(parentPath);\n      return parent;\n    }\n    /**\n     * Get the block node before a descendant text node by `path`.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getPreviousBlock',\n    value: function getPreviousBlock(path) {\n      path = this.resolvePath(path);\n      var match = this.getPreviousDeepMatchingNodeAndPath(path, function (n) {\n        return n.object === 'block';\n      });\n      return match ? match[0] : null;\n    }\n    /**\n     * Get the highest block descendants in a `range`.\n     *\n     * @param {Range} range\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'getRootBlocksAtRange',\n    value: function getRootBlocksAtRange(range) {\n      range = this.resolveRange(range);\n      if (range.isUnset) return List();\n      var _range9 = range,\n          start = _range9.start,\n          end = _range9.end;\n      return this.nodes.slice(start.path.first(), end.path.first() + 1);\n    }\n    /**\n     * Get the top-most inline nodes for each text node in a `range`.\n     *\n     * @param {Range} range\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'getRootInlinesAtRange',\n    value: function getRootInlinesAtRange(range) {\n      var array = this.getRootInlinesAtRangeAsArray(range); // Remove duplicates by converting it to an `OrderedSet` first.\n\n      var list = List(OrderedSet(array));\n      return list;\n    }\n    /**\n     * Get the top-most inline nodes for each text node in a `range` as an array.\n     *\n     * @param {Range} range\n     * @return {Array}\n     */\n\n  }, {\n    key: 'getRootInlinesAtRangeAsArray',\n    value: function getRootInlinesAtRangeAsArray(range) {\n      var _this5 = this;\n\n      range = this.resolveRange(range);\n      if (range.isUnset) return List();\n      var array = this.getTextsAtRangeAsArray(range).map(function (text) {\n        return _this5.getFurthestInline(text.key);\n      }).filter(function (exists) {\n        return exists;\n      });\n      return array;\n    }\n    /**\n     * Get the previous node from a node in the tree.\n     *\n     * This will not only check for siblings but instead move up the tree\n     * returning the previous ancestor if no sibling is found.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getPreviousNode',\n    value: function getPreviousNode(path) {\n      path = this.resolvePath(path);\n      if (!path) return null;\n      if (!path.size) return null;\n\n      for (var i = path.size; i > 0; i--) {\n        var p = path.slice(0, i);\n        if (p.last() === 0) continue;\n        var target = PathUtils.decrement(p);\n        var node = this.getNode(target);\n        if (node) return node;\n      }\n\n      return null;\n    }\n    /**\n     * Get the previous node in the tree from a node that matches iterator\n     *\n     * This will not only check for siblings but instead move up the tree\n     * returning the previous ancestor if no sibling is found.\n     *\n     * @param {List} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getPreviousMatchingNodeAndPath',\n    value: function getPreviousMatchingNodeAndPath(path) {\n      var iterator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {\n        return true;\n      };\n      if (!path) return null;\n\n      for (var i = path.size; i > 0; i--) {\n        var p = path.slice(0, i);\n        if (p.last() === 0) continue;\n        var previousPath = PathUtils.decrement(p);\n        var previousNode = this.getNode(previousPath);\n\n        while (previousNode && !iterator(previousNode)) {\n          previousPath = PathUtils.decrement(previousPath);\n          previousNode = this.getNode(previousPath);\n        }\n\n        if (previousNode) return [previousNode, previousPath];\n      }\n\n      return null;\n    }\n    /**\n     * Get the next previous in the tree from a node that matches iterator\n     *\n     * This will not only check for siblings but instead move up the tree\n     * returning the previous ancestor if no sibling is found.\n     * Once a node is found, the last deepest child matching is returned\n     *\n     * @param {List} path\n     * @param {Function} iterator\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getPreviousDeepMatchingNodeAndPath',\n    value: function getPreviousDeepMatchingNodeAndPath(path) {\n      var iterator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {\n        return true;\n      };\n      var match = this.getPreviousMatchingNodeAndPath(path);\n      if (!match) return null;\n\n      var _match2 = slicedToArray(match, 2),\n          previousNode = _match2[0],\n          previousPath = _match2[1];\n\n      var childMatch = void 0;\n\n      var assign = function assign() {\n        childMatch = previousNode.object !== 'text' && previousNode.findLastDescendantAndPath(iterator, previousPath);\n        return childMatch;\n      };\n\n      while (assign(childMatch)) {\n        var _childMatch3 = childMatch;\n\n        var _childMatch4 = slicedToArray(_childMatch3, 2);\n\n        previousNode = _childMatch4[0];\n        previousPath = _childMatch4[1];\n      }\n\n      if (!previousNode) return null;\n      return iterator(previousNode) ? [previousNode, previousPath] : this.getPreviousDeepMatchingNodeAndPath(match[1], iterator);\n    }\n    /**\n     * Get the previous sibling of a node.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getPreviousSibling',\n    value: function getPreviousSibling(path) {\n      path = this.resolvePath(path);\n      if (!path) return null;\n      if (!path.size) return null;\n      if (path.last() === 0) return null;\n      var p = PathUtils.decrement(path);\n      var sibling = this.getNode(p);\n      return sibling;\n    }\n    /**\n     * Get the text node before a descendant text node.\n     *\n     * @param {List|String} path\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getPreviousText',\n    value: function getPreviousText(path) {\n      path = this.resolvePath(path);\n      if (!path) return null;\n      if (!path.size) return null;\n      var previous = this.getPreviousNode(path);\n      if (!previous) return null;\n      var match = previous.getLastText();\n      return match;\n    }\n  }, {\n    key: 'getPreviousTextAndPath',\n    value: function getPreviousTextAndPath(path) {\n      if (!path) return null;\n      if (!path.size) return null;\n      var match = this.getPreviousDeepMatchingNodeAndPath(path, function (n) {\n        return n.object === 'text';\n      });\n      return match;\n    }\n    /**\n     * Get the indexes of the selection for a `range`, given an extra flag for\n     * whether the node `isSelected`, to determine whether not finding matches\n     * means everything is selected or nothing is.\n     *\n     * @param {Range} range\n     * @param {Boolean} isSelected\n     * @return {Object|Null}\n     */\n\n  }, {\n    key: 'getSelectionIndexes',\n    value: function getSelectionIndexes(range) {\n      var isSelected = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      var start = range.start,\n          end = range.end; // PERF: if we're not selected, we can exit early.\n\n      if (!isSelected) {\n        return null;\n      } // if we've been given an invalid selection we can exit early.\n\n\n      if (range.isUnset) {\n        return null;\n      } // PERF: if the start and end keys are the same, just check for the child\n      // that contains that single key.\n\n\n      if (start.key === end.key) {\n        var child = this.getFurthestAncestor(start.key);\n        var index = child ? this.nodes.indexOf(child) : null;\n        return {\n          start: index,\n          end: index + 1\n        };\n      } // Otherwise, check all of the children...\n\n\n      var startIndex = null;\n      var endIndex = null;\n      this.nodes.forEach(function (child, i) {\n        if (child.object === 'text') {\n          if (startIndex == null && child.key === start.key) startIndex = i;\n          if (endIndex == null && child.key === end.key) endIndex = i + 1;\n        } else {\n          if (startIndex == null && child.hasDescendant(start.key)) startIndex = i;\n          if (endIndex == null && child.hasDescendant(end.key)) endIndex = i + 1;\n        } // PERF: exit early if both start and end have been found.\n\n\n        return startIndex == null || endIndex == null;\n      });\n      if (isSelected && startIndex == null) startIndex = 0;\n      if (isSelected && endIndex == null) endIndex = this.nodes.size;\n      return startIndex == null ? null : {\n        start: startIndex,\n        end: endIndex\n      };\n    }\n    /**\n     * Get the descendent text node at an `offset`.\n     *\n     * @param {String} offset\n     * @return {Node|Null}\n     */\n\n  }, {\n    key: 'getTextAtOffset',\n    value: function getTextAtOffset(offset) {\n      // PERF: Add a few shortcuts for the obvious cases.\n      if (offset === 0) return this.getFirstText();\n      if (offset === this.text.length) return this.getLastText();\n      if (offset < 0 || offset > this.text.length) return null;\n      var length = 0;\n      var text = this.getTexts().find(function (node, i, nodes) {\n        length += node.text.length;\n        return length > offset;\n      });\n      return text;\n    }\n    /**\n     * Get the direction of the node's text.\n     *\n     * @return {String}\n     */\n\n  }, {\n    key: 'getTextDirection',\n    value: function getTextDirection() {\n      var dir = direction(this.text);\n      return dir === 'neutral' ? null : dir;\n    }\n    /**\n     * Recursively get all of the child text nodes in order of appearance.\n     *\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'getTexts',\n    value: function getTexts() {\n      var array = this.getTextsAsArray();\n      return List(array);\n    }\n    /**\n     * Recursively get all the leaf text nodes in order of appearance, as array.\n     *\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'getTextsAsArray',\n    value: function getTextsAsArray() {\n      var array = [];\n      this.nodes.forEach(function (node) {\n        if (node.object === 'text') {\n          array.push(node);\n        } else {\n          array = array.concat(node.getTextsAsArray());\n        }\n      });\n      return array;\n    }\n    /**\n     * Get all of the text nodes in a `range` as a List.\n     *\n     * @param {Range} range\n     * @return {List<Node>}\n     */\n\n  }, {\n    key: 'getTextsAtRange',\n    value: function getTextsAtRange(range) {\n      var arr = this.getTextsAtRangeAsArray(range);\n      return List(arr);\n    }\n    /**\n     * Get all of the text nodes in a `range` as an array.\n     *\n     * @param {Range} range\n     * @return {Array<Node>}\n     */\n\n  }, {\n    key: 'getTextsAtRangeAsArray',\n    value: function getTextsAtRangeAsArray(range) {\n      range = this.resolveRange(range);\n      if (range.isUnset) return [];\n      var _range10 = range,\n          start = _range10.start,\n          end = _range10.end;\n      var texts = this.getTextsBetweenPathPositionsAsArray(start.path, end.path);\n      return texts;\n    }\n    /**\n     * Get all of the text nodes in a `range` as an array.\n     * PERF: use key / path in arguments for cache\n     *\n     * @param {List|string} startPath\n     * @param {List|string} endPath\n     * @returns {Array}\n     */\n\n  }, {\n    key: 'getTextsBetweenPositionsAsArray',\n    value: function getTextsBetweenPositionsAsArray(startPath, endPath) {\n      startPath = this.resolvePath(startPath);\n      endPath = this.resolvePath(endPath);\n      return this.getTextsBetweenPathPositionsAsArray(startPath, endPath);\n    }\n    /**\n     * Get all of the text nodes in a `range` as an array.\n     *\n     * @param {List|falsey} startPath\n     * @param {List|falsey} endPath\n     * @returns {Array}\n     */\n\n  }, {\n    key: 'getTextsBetweenPathPositionsAsArray',\n    value: function getTextsBetweenPathPositionsAsArray(startPath, endPath) {\n      // PERF: the most common case is when the range is in a single text node,\n      // where we can avoid a lot of iterating of the tree.\n      if (startPath && endPath && PathUtils.isEqual(startPath, endPath)) {\n        return [this.getDescendant(startPath)];\n      } else if (!startPath && !endPath) {\n        return this.getTextsAsArray();\n      }\n\n      var startIndex = startPath ? startPath.get(0, 0) : 0;\n      var endIndex = endPath ? endPath.get(0, this.nodes.size - 1) : this.nodes.size - 1;\n      var array = [];\n      this.nodes.slice(startIndex, endIndex + 1).forEach(function (node, i) {\n        if (node.object === 'text') {\n          array.push(node);\n        } else {\n          // For the node at start and end of this list, we want to provide a start and end path\n          // For other nodes, we can just get all their text nodes, they are between the paths\n          var childStartPath = startPath && i === 0 ? PathUtils.drop(startPath) : null;\n          var childEndPath = endPath && i === endIndex - startIndex ? PathUtils.drop(endPath) : null;\n          array = array.concat(node.getTextsBetweenPathPositionsAsArray(childStartPath, childEndPath));\n        }\n      });\n      return array;\n    }\n    /**\n     * Check if the node has block children.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'hasBlockChildren',\n    value: function hasBlockChildren() {\n      return !!(this.nodes && this.nodes.find(function (n) {\n        return n.object === 'block';\n      }));\n    }\n    /**\n     * Check if a child node exists.\n     *\n     * @param {List|String} path\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'hasChild',\n    value: function hasChild(path) {\n      var child = this.getChild(path);\n      return !!child;\n    }\n    /**\n     * Check if a node has inline children.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'hasInlineChildren',\n    value: function hasInlineChildren() {\n      return !!(this.nodes && this.nodes.find(function (n) {\n        return n.object === 'inline' || n.object === 'text';\n      }));\n    }\n    /**\n     * Recursively check if a child node exists.\n     *\n     * @param {List|String} path\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'hasDescendant',\n    value: function hasDescendant(path) {\n      var descendant = this.getDescendant(path);\n      return !!descendant;\n    }\n    /**\n     * Check if a node has a void parent.\n     *\n     * @param {List|String} path\n     * @param {Editor} editor\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'hasVoidParent',\n    value: function hasVoidParent(path, editor) {\n      invariant(!Value.isValue(editor), 'As of Slate 0.42.0, the `node.hasVoidParent` method takes an `editor` instead of a `value`.');\n      var closest = this.getClosestVoid(path, editor);\n      return !!closest;\n    }\n    /**\n     * Insert a `node`.\n     *\n     * @param {List|String} path\n     * @param {Node} node\n     * @return {Node}\n     */\n\n  }, {\n    key: 'insertNode',\n    value: function insertNode(path, node) {\n      path = this.resolvePath(path);\n      var index = path.last();\n      var parentPath = PathUtils.lift(path);\n      var parent = this.assertNode(parentPath);\n      var nodes = parent.nodes.splice(index, 0, node);\n      parent = parent.set('nodes', nodes);\n      var ret = this.replaceNode(parentPath, parent);\n      return ret;\n    }\n    /**\n     * Insert `text` at `offset` in node by `path`.\n     *\n     * @param {List|String} path\n     * @param {Number} offset\n     * @param {String} text\n     * @param {Set} marks\n     * @return {Node}\n     */\n\n  }, {\n    key: 'insertText',\n    value: function insertText(path, offset, text, marks) {\n      var node = this.assertDescendant(path);\n      path = this.resolvePath(path);\n      node = node.insertText(offset, text, marks);\n      var ret = this.replaceNode(path, node);\n      return ret;\n    }\n    /**\n     * Check whether the node is a leaf block.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isLeafBlock',\n    value: function isLeafBlock() {\n      var object = this.object,\n          nodes = this.nodes;\n      if (object !== 'block') return false;\n      if (!nodes.size) return true;\n      return nodes.first().object !== 'block';\n    }\n    /**\n     * Check whether the node is a leaf inline.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isLeafInline',\n    value: function isLeafInline() {\n      var object = this.object,\n          nodes = this.nodes;\n      if (object !== 'inline') return false;\n      if (!nodes.size) return true;\n      return nodes.first().object !== 'inline';\n    }\n    /**\n     * Check whether a descendant node is inside a range. This will return true for all\n     * text nodes inside the range and all ancestors of those text nodes up to this node.\n     *\n     * @param {List|string} path\n     * @param {Range} range\n     * @return {Node}\n     */\n\n  }, {\n    key: 'isNodeInRange',\n    value: function isNodeInRange(path, range) {\n      this.assertDescendant(path);\n      path = this.resolvePath(path);\n      range = this.resolveRange(range);\n      if (range.isUnset) return false;\n      var toStart = PathUtils.compare(path, range.start.path);\n      var toEnd = range.start.key === range.end.key ? toStart : PathUtils.compare(path, range.end.path);\n      var is$$1 = toStart !== -1 && toEnd !== 1;\n      return is$$1;\n    }\n    /**\n     * Map all child nodes, updating them in their parents. This method is\n     * optimized to not return a new node if no changes are made.\n     *\n     * @param {Function} iterator\n     * @return {Node}\n     */\n\n  }, {\n    key: 'mapChildren',\n    value: function mapChildren(iterator) {\n      var _this6 = this;\n\n      var nodes = this.nodes;\n      nodes.forEach(function (node, i) {\n        var ret = iterator(node, i, _this6.nodes);\n        if (ret !== node) nodes = nodes.set(ret.key, ret);\n      });\n      var ret = this.set('nodes', nodes);\n      return ret;\n    }\n    /**\n     * Map all descendant nodes, updating them in their parents. This method is\n     * optimized to not return a new node if no changes are made.\n     *\n     * @param {Function} iterator\n     * @return {Node}\n     */\n\n  }, {\n    key: 'mapDescendants',\n    value: function mapDescendants(iterator) {\n      var _this7 = this;\n\n      var nodes = this.nodes;\n      nodes.forEach(function (node, index) {\n        var ret = node;\n        if (ret.object !== 'text') ret = ret.mapDescendants(iterator);\n        ret = iterator(ret, index, _this7.nodes);\n        if (ret === node) return;\n        nodes = nodes.set(index, ret);\n      });\n      var ret = this.set('nodes', nodes);\n      return ret;\n    }\n    /**\n     * Merge a node backwards its previous sibling.\n     *\n     * @param {List|Key} path\n     * @return {Node}\n     */\n\n  }, {\n    key: 'mergeNode',\n    value: function mergeNode(path) {\n      var b = this.assertNode(path);\n      path = this.resolvePath(path);\n\n      if (path.last() === 0) {\n        throw new Error('Unable to merge node because it has no previous sibling: ' + b);\n      }\n\n      var withPath = PathUtils.decrement(path);\n      var a = this.assertNode(withPath);\n\n      if (a.object !== b.object) {\n        throw new Error('Unable to merge two different kinds of nodes: ' + a + ' and ' + b);\n      }\n\n      var newNode = a.object === 'text' ? a.mergeText(b) : a.set('nodes', a.nodes.concat(b.nodes));\n      var ret = this;\n      ret = ret.removeNode(path);\n      ret = ret.removeNode(withPath);\n      ret = ret.insertNode(withPath, newNode);\n      return ret;\n    }\n    /**\n     * Move a node by `path` to `newPath`.\n     *\n     * A `newIndex` can be provided when move nodes by `key`, to account for not\n     * being able to have a key for a location in the tree that doesn't exist yet.\n     *\n     * @param {List|Key} path\n     * @param {List|Key} newPath\n     * @param {Number} newIndex\n     * @return {Node}\n     */\n\n  }, {\n    key: 'moveNode',\n    value: function moveNode(path, newPath) {\n      var newIndex = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var node = this.assertNode(path);\n      path = this.resolvePath(path);\n      newPath = this.resolvePath(newPath, newIndex);\n      var newParentPath = PathUtils.lift(newPath);\n      this.assertNode(newParentPath); // TODO: this is a bit hacky, re-creating the operation that led to this method being called\n      // Alternative 1: pass the operation through from apply -> value.moveNode\n      // Alternative 2: add a third property to the operation called \"transformedNewPath\", pass that through\n\n      var op = Operation.create({\n        type: 'move_node',\n        path: path,\n        newPath: newPath\n      });\n      newPath = PathUtils.transform(path, op).first();\n      var ret = this;\n      ret = ret.removeNode(path);\n      ret = ret.insertNode(newPath, node);\n      return ret;\n    }\n    /**\n     * Remove mark from text at `offset` and `length` in node.\n     *\n     * @param {List} path\n     * @param {Number} offset\n     * @param {Number} length\n     * @param {Mark} mark\n     * @return {Node}\n     */\n\n  }, {\n    key: 'removeMark',\n    value: function removeMark(path, offset, length, mark) {\n      var node = this.assertDescendant(path);\n      path = this.resolvePath(path);\n      node = node.removeMark(offset, length, mark);\n      var ret = this.replaceNode(path, node);\n      return ret;\n    }\n    /**\n     * Remove a node.\n     *\n     * @param {List|String} path\n     * @return {Node}\n     */\n\n  }, {\n    key: 'removeNode',\n    value: function removeNode(path) {\n      this.assertDescendant(path);\n      path = this.resolvePath(path);\n      var deep = path.flatMap(function (x) {\n        return ['nodes', x];\n      });\n      var ret = this.deleteIn(deep);\n      return ret;\n    }\n    /**\n     * Remove `text` at `offset` in node.\n     *\n     * @param {List|Key} path\n     * @param {Number} offset\n     * @param {String} text\n     * @return {Node}\n     */\n\n  }, {\n    key: 'removeText',\n    value: function removeText(path, offset, text) {\n      var node = this.assertDescendant(path);\n      node = node.removeText(offset, text.length);\n      var ret = this.replaceNode(path, node);\n      return ret;\n    }\n    /**\n     * Replace a `node` in the tree.\n     *\n     * @param {List|Key} path\n     * @param {Node} node\n     * @return {Node}\n     */\n\n  }, {\n    key: 'replaceNode',\n    value: function replaceNode(path, node) {\n      path = this.resolvePath(path);\n\n      if (!path) {\n        throw new Error('Unable to replace a node because it could not be found in the first place: ' + path);\n      }\n\n      if (!path.size) return node;\n      this.assertNode(path);\n      var deep = path.flatMap(function (x) {\n        return ['nodes', x];\n      });\n      var ret = this.setIn(deep, node);\n      return ret;\n    }\n    /**\n     * Resolve a `decoration`, relative to the node, ensuring that the keys and\n     * offsets in the decoration exist and that they are synced with the paths.\n     *\n     * @param {Decoration|Object} decoration\n     * @return {Decoration}\n     */\n\n  }, {\n    key: 'resolveDecoration',\n    value: function resolveDecoration(decoration) {\n      decoration = Decoration.create(decoration);\n      decoration = decoration.normalize(this);\n      return decoration;\n    }\n    /**\n     * Resolve a `point`, relative to the node, ensuring that the keys and\n     * offsets in the point exist and that they are synced with the paths.\n     *\n     * @param {Point|Object} point\n     * @return {Point}\n     */\n\n  }, {\n    key: 'resolvePoint',\n    value: function resolvePoint(point) {\n      point = Point.create(point);\n      point = point.normalize(this);\n      return point;\n    }\n    /**\n     * Resolve a `range`, relative to the node, ensuring that the keys and\n     * offsets in the range exist and that they are synced with the paths.\n     *\n     * @param {Range|Object} range\n     * @return {Range}\n     */\n\n  }, {\n    key: 'resolveRange',\n    value: function resolveRange(range) {\n      range = Range.create(range);\n      range = range.normalize(this);\n      return range;\n    }\n    /**\n     * Resolve a `selection`, relative to the node, ensuring that the keys and\n     * offsets in the selection exist and that they are synced with the paths.\n     *\n     * @param {Selection|Object} selection\n     * @return {Selection}\n     */\n\n  }, {\n    key: 'resolveSelection',\n    value: function resolveSelection(selection) {\n      selection = Selection.create(selection);\n      selection = selection.normalize(this);\n      return selection;\n    }\n    /**\n     * Set `properties` on a node.\n     *\n     * @param {List|String} path\n     * @param {Object} properties\n     * @return {Node}\n     */\n\n  }, {\n    key: 'setNode',\n    value: function setNode(path, properties) {\n      var node = this.assertNode(path);\n      node = node.merge(properties);\n      var ret = this.replaceNode(path, node);\n      return ret;\n    }\n    /**\n     * Set `properties` on `mark` on text at `offset` and `length` in node.\n     *\n     * @param {List|String} path\n     * @param {Number} offset\n     * @param {Number} length\n     * @param {Mark} mark\n     * @param {Object} properties\n     * @return {Node}\n     */\n\n  }, {\n    key: 'setMark',\n    value: function setMark(path, offset, length, properties, newProperties) {\n      var node = this.assertNode(path);\n      node = node.updateMark(offset, length, properties, newProperties);\n      var ret = this.replaceNode(path, node);\n      return ret;\n    }\n    /**\n     * Split a node by `path` at `position` with optional `properties` to apply\n     * to the newly split node.\n     *\n     * @param {List|String} path\n     * @param {Number} position\n     * @param {Object} properties\n     * @return {Node}\n     */\n\n  }, {\n    key: 'splitNode',\n    value: function splitNode(path, position, properties) {\n      var child = this.assertNode(path);\n      path = this.resolvePath(path);\n      var a = void 0;\n      var b = void 0;\n\n      if (child.object === 'text') {\n        var _child$splitText = child.splitText(position);\n\n        var _child$splitText2 = slicedToArray(_child$splitText, 2);\n\n        a = _child$splitText2[0];\n        b = _child$splitText2[1];\n      } else {\n        var befores = child.nodes.take(position);\n        var afters = child.nodes.skip(position);\n        a = child.set('nodes', befores);\n        b = child.set('nodes', afters).regenerateKey();\n      }\n\n      if (properties && child.object !== 'text') {\n        b = b.merge(properties);\n      }\n\n      var ret = this;\n      ret = ret.removeNode(path);\n      ret = ret.insertNode(path, b);\n      ret = ret.insertNode(path, a);\n      return ret;\n    }\n  }]);\n  return ElementInterface;\n}();\n/**\n * Mix in assertion variants.\n */\n\n\nvar ASSERTS = ['Child', 'Depth', 'Descendant', 'Node', 'Parent', 'Path'];\n\nvar _loop2 = function _loop2(method) {\n  ElementInterface.prototype['assert' + method] = function (path) {\n    for (var _len3 = arguments.length, args = Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n      args[_key3 - 1] = arguments[_key3];\n    }\n\n    var ret = this['get' + method].apply(this, [path].concat(args));\n\n    if (ret == null) {\n      throw new Error('`Node.assert' + method + '` could not find node with path or key: ' + path);\n    }\n\n    return ret;\n  };\n};\n\nvar _iteratorNormalCompletion$1 = true;\nvar _didIteratorError$1 = false;\nvar _iteratorError$1 = undefined;\n\ntry {\n  for (var _iterator$1 = ASSERTS[Symbol.iterator](), _step$1; !(_iteratorNormalCompletion$1 = (_step$1 = _iterator$1.next()).done); _iteratorNormalCompletion$1 = true) {\n    var method$1 = _step$1.value;\n\n    _loop2(method$1);\n  }\n  /**\n   * Memoize read methods.\n   */\n\n} catch (err) {\n  _didIteratorError$1 = true;\n  _iteratorError$1 = err;\n} finally {\n  try {\n    if (!_iteratorNormalCompletion$1 && _iterator$1.return) {\n      _iterator$1.return();\n    }\n  } finally {\n    if (_didIteratorError$1) {\n      throw _iteratorError$1;\n    }\n  }\n}\n\nmemoize(ElementInterface.prototype, ['getBlocksAsArray', 'getLeafBlocksAtRangeAsArray', 'getBlocksByTypeAsArray', 'getDecorations', 'getFragmentAtRange', 'getInlinesAsArray', 'getInlinesByTypeAsArray', 'getLeafBlocksAtRangeAsArray', 'getLeafInlinesAtRangeAsArray', 'getMarksAsArray', 'getMarksAtPosition', 'getNodesAtRange', 'getOrderedMarksBetweenPositions', 'getInsertMarksAtRange', 'getMarksByTypeAsArray', 'getNextBlock', 'getOffset', 'getOffsetAtRange', 'getPreviousBlock', 'getRootBlocksAtRange', 'getRootInlinesAtRangeAsArray', 'getTextAtOffset', 'getTextDirection', 'getTextsAsArray', 'getTextsBetweenPathPositionsAsArray']);\n/**\n * Mix in the element interface.\n */\n\nmixin(ElementInterface, [Block, Document, Inline]);\n\nvar RangeInterface = function () {\n  function RangeInterface() {\n    classCallCheck(this, RangeInterface);\n  }\n\n  createClass(RangeInterface, [{\n    key: 'flip',\n\n    /**\n     * Flip the range.\n     *\n     * @return {Range}\n     */\n    value: function flip() {\n      var range = this.setPoints([this.focus, this.anchor]);\n      return range;\n    }\n    /**\n     * Move the anchor and focus offsets forward `n` characters.\n     *\n     * @param {Number} n\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveForward',\n    value: function moveForward(n) {\n      return this.updatePoints(function (point) {\n        return point.moveForward(n);\n      });\n    }\n    /**\n     * Move the anchor and focus offsets backward `n` characters.\n     *\n     * @param {Number} n\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveBackward',\n    value: function moveBackward(n) {\n      return this.updatePoints(function (point) {\n        return point.moveBackward(n);\n      });\n    }\n    /**\n     * Move the anchor offset backward `n` characters.\n     *\n     * @param {Number} n\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveAnchorBackward',\n    value: function moveAnchorBackward(n) {\n      var range = this.setAnchor(this.anchor.moveBackward(n));\n      return range;\n    }\n    /**\n     * Move the anchor offset forward `n` characters.\n     *\n     * @param {Number} n\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveAnchorForward',\n    value: function moveAnchorForward(n) {\n      var range = this.setAnchor(this.anchor.moveForward(n));\n      return range;\n    }\n    /**\n     * Move the range's anchor point to a new `path` and `offset`.\n     *\n     * Optionally, the `path` can be a key string, or omitted entirely in which\n     * case it would be the offset number.\n     *\n     * @param {List|String} path\n     * @param {Number} offset\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveAnchorTo',\n    value: function moveAnchorTo(path, offset) {\n      var range = this.setAnchor(this.anchor.moveTo(path, offset));\n      return range;\n    }\n    /**\n     * Move the range's anchor point to the start of a `node`.\n     *\n     * @param {Node} node\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveAnchorToStartOfNode',\n    value: function moveAnchorToStartOfNode(node) {\n      var range = this.setAnchor(this.anchor.moveToStartOfNode(node));\n      return range;\n    }\n    /**\n     * Move the range's anchor point to the end of a `node`.\n     *\n     * @param {Node} node\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveAnchorToEndOfNode',\n    value: function moveAnchorToEndOfNode(node) {\n      var range = this.setAnchor(this.anchor.moveToEndOfNode(node));\n      return range;\n    }\n    /**\n     * Move the end offset backward `n` characters.\n     *\n     * @param {Number} n\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveEndBackward',\n    value: function moveEndBackward(n) {\n      var range = this.setEnd(this.end.moveBackward(n));\n      return range;\n    }\n    /**\n     * Move the end offset forward `n` characters.\n     *\n     * @param {Number} n\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveEndForward',\n    value: function moveEndForward(n) {\n      var range = this.setEnd(this.end.moveForward(n));\n      return range;\n    }\n    /**\n     * Move the range's end point to a new `path` and `offset`.\n     *\n     * Optionally, the `path` can be a key string, or omitted entirely in which\n     * case it would be the offset number.\n     *\n     * @param {List|String} path\n     * @param {Number} offset\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveEndTo',\n    value: function moveEndTo(path, offset) {\n      var range = this.setEnd(this.end.moveTo(path, offset));\n      return range;\n    }\n    /**\n     * Move the range's end point to the start of a `node`.\n     *\n     * @param {Node} node\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveEndToStartOfNode',\n    value: function moveEndToStartOfNode(node) {\n      var range = this.setEnd(this.end.moveToStartOfNode(node));\n      return range;\n    }\n    /**\n     * Move the range's end point to the end of a `node`.\n     *\n     * @param {Node} node\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveEndToEndOfNode',\n    value: function moveEndToEndOfNode(node) {\n      var range = this.setEnd(this.end.moveToEndOfNode(node));\n      return range;\n    }\n    /**\n     * Move the focus offset backward `n` characters.\n     *\n     * @param {Number} n\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveFocusBackward',\n    value: function moveFocusBackward(n) {\n      var range = this.setFocus(this.focus.moveBackward(n));\n      return range;\n    }\n    /**\n     * Move the focus offset forward `n` characters.\n     *\n     * @param {Number} n\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveFocusForward',\n    value: function moveFocusForward(n) {\n      var range = this.setFocus(this.focus.moveForward(n));\n      return range;\n    }\n    /**\n     * Move the range's focus point to a new `path` and `offset`.\n     *\n     * Optionally, the `path` can be a key string, or omitted entirely in which\n     * case it would be the offset number.\n     *\n     * @param {List|String} path\n     * @param {Number} offset\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveFocusTo',\n    value: function moveFocusTo(path, offset) {\n      var range = this.setFocus(this.focus.moveTo(path, offset));\n      return range;\n    }\n    /**\n     * Move the range's focus point to the start of a `node`.\n     *\n     * @param {Node} node\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveFocusToStartOfNode',\n    value: function moveFocusToStartOfNode(node) {\n      var range = this.setFocus(this.focus.moveToStartOfNode(node));\n      return range;\n    }\n    /**\n     * Move the range's focus point to the end of a `node`.\n     *\n     * @param {Node} node\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveFocusToEndOfNode',\n    value: function moveFocusToEndOfNode(node) {\n      var range = this.setFocus(this.focus.moveToEndOfNode(node));\n      return range;\n    }\n    /**\n     * Move the start offset backward `n` characters.\n     *\n     * @param {Number} n\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveStartBackward',\n    value: function moveStartBackward(n) {\n      var range = this.setStart(this.start.moveBackward(n));\n      return range;\n    }\n    /**\n     * Move the start offset forward `n` characters.\n     *\n     * @param {Number} n\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveStartForward',\n    value: function moveStartForward(n) {\n      var range = this.setStart(this.start.moveForward(n));\n      return range;\n    }\n    /**\n     * Move the range's start point to a new `path` and `offset`.\n     *\n     * Optionally, the `path` can be a key string, or omitted entirely in which\n     * case it would be the offset number.\n     *\n     * @param {List|String} path\n     * @param {Number} offset\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveStartTo',\n    value: function moveStartTo(path, offset) {\n      var range = this.setStart(this.start.moveTo(path, offset));\n      return range;\n    }\n    /**\n     * Move the range's start point to the start of a `node`.\n     *\n     * @param {Node} node\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveStartToStartOfNode',\n    value: function moveStartToStartOfNode(node) {\n      var range = this.setStart(this.start.moveToStartOfNode(node));\n      return range;\n    }\n    /**\n     * Move the range's start point to the end of a `node`.\n     *\n     * @param {Node} node\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveStartToEndOfNode',\n    value: function moveStartToEndOfNode(node) {\n      var range = this.setStart(this.start.moveToEndOfNode(node));\n      return range;\n    }\n    /**\n     * Move range's points to a new `path` and `offset`.\n     *\n     * @param {Number} n\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveTo',\n    value: function moveTo(path, offset) {\n      return this.updatePoints(function (point) {\n        return point.moveTo(path, offset);\n      });\n    }\n    /**\n     * Move the focus point to the anchor point.\n     *\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveToAnchor',\n    value: function moveToAnchor() {\n      var range = this.setFocus(this.anchor);\n      return range;\n    }\n    /**\n     * Move the start point to the end point.\n     *\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveToEnd',\n    value: function moveToEnd() {\n      var range = this.setStart(this.end);\n      return range;\n    }\n    /**\n     * Move the range's points to the end of a `node`.\n     *\n     * @param {Node} node\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveToEndOfNode',\n    value: function moveToEndOfNode(node) {\n      return this.updatePoints(function (point) {\n        return point.moveToEndOfNode(node);\n      });\n    }\n    /**\n     * Move the anchor point to the focus point.\n     *\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveToFocus',\n    value: function moveToFocus() {\n      var range = this.setAnchor(this.focus);\n      return range;\n    }\n    /**\n     * Move to the entire range of `start` and `end` nodes.\n     *\n     * @param {Node} start\n     * @param {Node} end (optional)\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveToRangeOfNode',\n    value: function moveToRangeOfNode(start) {\n      var end = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : start;\n      var range = this.setPoints([this.anchor.moveToStartOfNode(start), this.focus.moveToEndOfNode(end)]);\n      return range;\n    }\n    /**\n     * Move the end point to the start point.\n     *\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveToStart',\n    value: function moveToStart() {\n      var range = this.setEnd(this.start);\n      return range;\n    }\n    /**\n     * Move the range's points to the start of a `node`.\n     *\n     * @param {Node} node\n     * @return {Range}\n     */\n\n  }, {\n    key: 'moveToStartOfNode',\n    value: function moveToStartOfNode(node) {\n      return this.updatePoints(function (point) {\n        return point.moveToStartOfNode(node);\n      });\n    }\n    /**\n     * Normalize the range, relative to a `node`, ensuring that the anchor\n     * and focus nodes of the range always refer to leaf text nodes.\n     *\n     * @param {Node} node\n     * @return {Range}\n     */\n\n  }, {\n    key: 'normalize',\n    value: function normalize(node) {\n      return this.updatePoints(function (point) {\n        return point.normalize(node);\n      });\n    }\n    /**\n     * Set the anchor point to a new `anchor`.\n     *\n     * @param {Point} anchor\n     * @return {Range}\n     */\n\n  }, {\n    key: 'setAnchor',\n    value: function setAnchor(anchor) {\n      var range = this.set('anchor', anchor);\n      return range;\n    }\n    /**\n     * Set the end point to a new `point`.\n     *\n     * @param {Point} point\n     * @return {Range}\n     */\n\n  }, {\n    key: 'setEnd',\n    value: function setEnd(point) {\n      var range = this.isBackward ? this.setAnchor(point) : this.setFocus(point);\n      return range;\n    }\n    /**\n     * Set the focus point to a new `focus`.\n     *\n     * @param {Point} focus\n     * @return {Range}\n     */\n\n  }, {\n    key: 'setFocus',\n    value: function setFocus(focus) {\n      var range = this.set('focus', focus);\n      return range;\n    }\n    /**\n     * Set the anchor and focus points to new `values`.\n     *\n     * @param {Array<Point>} values\n     * @return {Range}\n     */\n\n  }, {\n    key: 'setPoints',\n    value: function setPoints(values) {\n      var _values = slicedToArray(values, 2),\n          anchor = _values[0],\n          focus = _values[1];\n\n      var range = this.set('anchor', anchor).set('focus', focus);\n      return range;\n    }\n    /**\n     * Set the anchor and focus points with `updater` callback\n     *\n     * @param {Function} updater\n     * @return {Range}\n     */\n\n  }, {\n    key: 'updatePoints',\n    value: function updatePoints(updater) {\n      var anchor = this.anchor,\n          focus = this.focus;\n      anchor = updater(anchor);\n      focus = updater(focus);\n      return this.merge({\n        anchor: anchor,\n        focus: focus\n      });\n    }\n    /**\n     * Set the start point to a new `point`.\n     *\n     * @param {Point} point\n     * @return {Range}\n     */\n\n  }, {\n    key: 'setStart',\n    value: function setStart(point) {\n      var range = this.isBackward ? this.setFocus(point) : this.setAnchor(point);\n      return range;\n    }\n    /**\n     * Set new `properties` on the range.\n     *\n     * @param {Object|Range} properties\n     * @return {Range}\n     */\n\n  }, {\n    key: 'setProperties',\n    value: function setProperties(properties) {\n      properties = Range.createProperties(properties);\n      var _properties = properties,\n          anchor = _properties.anchor,\n          focus = _properties.focus,\n          props = objectWithoutProperties(_properties, ['anchor', 'focus']);\n\n      if (anchor) {\n        props.anchor = Point.create(anchor);\n      }\n\n      if (focus) {\n        props.focus = Point.create(focus);\n      }\n\n      var range = this.merge(props);\n      return range;\n    }\n    /**\n     * Return a JSON representation of the range.\n     *\n     * @param {Object} options\n     * @return {Object}\n     */\n\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var object = {\n        object: this.object,\n        anchor: this.anchor.toJSON(options),\n        focus: this.focus.toJSON(options)\n      };\n      return object;\n    }\n    /**\n     * Return a `Range` instance from any range-like instance.\n     *\n     * @return {Range}\n     */\n\n  }, {\n    key: 'toRange',\n    value: function toRange() {\n      var properties = Range.createProperties(this);\n      var range = Range.create(properties);\n      return range;\n    }\n    /**\n     * Unset the range.\n     *\n     * @return {Range}\n     */\n\n  }, {\n    key: 'unset',\n    value: function unset() {\n      var range = this.updatePoints(function (p) {\n        return p.unset();\n      });\n      return range;\n    }\n  }, {\n    key: 'isCollapsed',\n\n    /**\n     * Check whether the range is collapsed.\n     *\n     * @return {Boolean}\n     */\n    get: function get$$1() {\n      return this.anchor === this.focus || this.anchor.key === this.focus.key && this.anchor.offset === this.focus.offset;\n    }\n    /**\n     * Check whether the range is expanded.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isExpanded',\n    get: function get$$1() {\n      return !this.isCollapsed;\n    }\n    /**\n     * Check whether the range is backward.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isBackward',\n    get: function get$$1() {\n      var isUnset = this.isUnset,\n          anchor = this.anchor,\n          focus = this.focus;\n\n      if (isUnset) {\n        return null;\n      }\n\n      if (anchor.key === focus.key) {\n        return anchor.offset > focus.offset;\n      }\n\n      var isBackward = PathUtils.isBefore(focus.path, anchor.path);\n      return isBackward;\n    }\n    /**\n     * Check whether the range is forward.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isForward',\n    get: function get$$1() {\n      var isBackward = this.isBackward;\n      var isForward = isBackward == null ? null : !isBackward;\n      return isForward;\n    }\n    /**\n     * Check whether the range isn't set.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isUnset',\n    get: function get$$1() {\n      var anchor = this.anchor,\n          focus = this.focus;\n      var isUnset = anchor.isUnset || focus.isUnset;\n      return isUnset;\n    }\n    /**\n     * Check whether the range is set.\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'isSet',\n    get: function get$$1() {\n      return !this.isUnset;\n    }\n    /**\n     * Get the start point.\n     *\n     * @return {String}\n     */\n\n  }, {\n    key: 'start',\n    get: function get$$1() {\n      return this.isBackward ? this.focus : this.anchor;\n    }\n    /**\n     * Get the end point.\n     *\n     * @return {String}\n     */\n\n  }, {\n    key: 'end',\n    get: function get$$1() {\n      return this.isBackward ? this.anchor : this.focus;\n    }\n  }]);\n  return RangeInterface;\n}();\n/**\n * Mix in the range interface.\n *\n * @param {Record}\n */\n\n\nmixin(RangeInterface, [Decoration, Range, Selection]);\nvar index = {\n  Block: Block,\n  Change: Change,\n  Data: Data,\n  Decoration: Decoration,\n  Document: Document,\n  Editor: Editor,\n  Inline: Inline,\n  KeyUtils: KeyUtils,\n  Leaf: Leaf,\n  Mark: Mark,\n  Node: Node,\n  Operation: Operation,\n  PathUtils: PathUtils,\n  Point: Point,\n  Range: Range,\n  resetMemoization: resetMemoization,\n  Selection: Selection,\n  Text: Text,\n  TextUtils: TextUtils,\n  useMemoization: useMemoization,\n  Value: Value\n};\nexport default index;\nexport { Block, Change, Data, Decoration, Document, Editor, Inline, KeyUtils, Leaf, Mark, Node, Operation, PathUtils, Point, Range, resetMemoization, Selection, Text, TextUtils, useMemoization, Value };","import isBrowser from 'is-in-browser';\n\nvar slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n/**\n * Browser matching rules.\n *\n * @type {Array}\n */\n\n\nvar BROWSER_RULES = [['edge', /Edge\\/([0-9\\._]+)/], ['chrome', /(?!Chrom.*OPR)Chrom(?:e|ium)\\/([0-9\\.]+)(:?\\s|$)/], ['firefox', /Firefox\\/([0-9\\.]+)(?:\\s|$)/], ['opera', /Opera\\/([0-9\\.]+)(?:\\s|$)/], ['opera', /OPR\\/([0-9\\.]+)(:?\\s|$)$/], ['ie', /Trident\\/7\\.0.*rv\\:([0-9\\.]+)\\).*Gecko$/], ['ie', /MSIE\\s([0-9\\.]+);.*Trident\\/[4-7].0/], ['ie', /MSIE\\s(7\\.0)/], ['android', /Android\\s([0-9\\.]+)/], ['safari', /Version\\/([0-9\\._]+).*Safari/]];\nvar browser = void 0;\n\nif (isBrowser) {\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = BROWSER_RULES[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var _ref = _step.value;\n\n      var _ref2 = slicedToArray(_ref, 2);\n\n      var name = _ref2[0];\n      var regexp = _ref2[1];\n\n      if (regexp.test(window.navigator.userAgent)) {\n        browser = name;\n        break;\n      }\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n}\n/**\n * Operating system matching rules.\n *\n * @type {Array}\n */\n\n\nvar OS_RULES = [['ios', /os ([\\.\\_\\d]+) like mac os/i], // must be before the macos rule\n['macos', /mac os x/i], ['android', /android/i], ['firefoxos', /mozilla\\/[a-z\\.\\_\\d]+ \\((?:mobile)|(?:tablet)/i], ['windows', /windows\\s*(?:nt)?\\s*([\\.\\_\\d]+)/i]];\nvar os = void 0;\n\nif (isBrowser) {\n  var _iteratorNormalCompletion2 = true;\n  var _didIteratorError2 = false;\n  var _iteratorError2 = undefined;\n\n  try {\n    for (var _iterator2 = OS_RULES[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n      var _ref3 = _step2.value;\n\n      var _ref4 = slicedToArray(_ref3, 2);\n\n      var _name = _ref4[0];\n      var _regexp = _ref4[1];\n\n      if (_regexp.test(window.navigator.userAgent)) {\n        os = _name;\n        break;\n      }\n    }\n  } catch (err) {\n    _didIteratorError2 = true;\n    _iteratorError2 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion2 && _iterator2.return) {\n        _iterator2.return();\n      }\n    } finally {\n      if (_didIteratorError2) {\n        throw _iteratorError2;\n      }\n    }\n  }\n}\n/**\n * Feature matching rules.\n *\n * @type {Array}\n */\n\n\nvar FEATURE_RULES = [['inputeventslevel1', function (window) {\n  var event = window.InputEvent ? new window.InputEvent('input') : {};\n  var support = 'inputType' in event;\n  return support;\n}], ['inputeventslevel2', function (window) {\n  var element = window.document.createElement('div');\n  element.contentEditable = true;\n  var support = 'onbeforeinput' in element;\n  return support;\n}]];\nvar features = [];\n\nif (isBrowser) {\n  var _iteratorNormalCompletion3 = true;\n  var _didIteratorError3 = false;\n  var _iteratorError3 = undefined;\n\n  try {\n    for (var _iterator3 = FEATURE_RULES[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n      var _ref5 = _step3.value;\n\n      var _ref6 = slicedToArray(_ref5, 2);\n\n      var _name2 = _ref6[0];\n      var test = _ref6[1];\n\n      if (test(window)) {\n        features.push(_name2);\n      }\n    }\n  } catch (err) {\n    _didIteratorError3 = true;\n    _iteratorError3 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion3 && _iterator3.return) {\n        _iterator3.return();\n      }\n    } finally {\n      if (_didIteratorError3) {\n        throw _iteratorError3;\n      }\n    }\n  }\n}\n/**\n * Array of regular expression matchers and their API version\n *\n * @type {Array}\n */\n\n\nvar ANDROID_API_VERSIONS = [[/^9([.]0|)/, 28], [/^8[.]1/, 27], [/^8([.]0|)/, 26], [/^7[.]1/, 25], [/^7([.]0|)/, 24], [/^6([.]0|)/, 23], [/^5[.]1/, 22], [/^5([.]0|)/, 21], [/^4[.]4/, 20]];\n/**\n * get the Android API version from the userAgent\n *\n * @return {number} version\n */\n\nfunction getAndroidApiVersion() {\n  if (os !== 'android') return null;\n  var userAgent = window.navigator.userAgent;\n  var matchData = userAgent.match(/Android\\s([0-9\\.]+)/);\n  if (matchData == null) return null;\n  var versionString = matchData[1];\n  var _iteratorNormalCompletion4 = true;\n  var _didIteratorError4 = false;\n  var _iteratorError4 = undefined;\n\n  try {\n    for (var _iterator4 = ANDROID_API_VERSIONS[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n      var _ref7 = _step4.value;\n\n      var _ref8 = slicedToArray(_ref7, 2);\n\n      var regex = _ref8[0];\n      var version = _ref8[1];\n      if (versionString.match(regex)) return version;\n    }\n  } catch (err) {\n    _didIteratorError4 = true;\n    _iteratorError4 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion4 && _iterator4.return) {\n        _iterator4.return();\n      }\n    } finally {\n      if (_didIteratorError4) {\n        throw _iteratorError4;\n      }\n    }\n  }\n\n  return null;\n}\n/**\n * Export.\n *\n * @type {Boolean}\n */\n\n\nvar IS_CHROME = browser === 'chrome';\nvar IS_OPERA = browser === 'opera';\nvar IS_FIREFOX = browser === 'firefox';\nvar IS_SAFARI = browser === 'safari';\nvar IS_IE = browser === 'ie';\nvar IS_EDGE = browser === 'edge';\nvar IS_ANDROID = os === 'android';\nvar IS_IOS = os === 'ios';\nvar IS_MAC = os === 'macos';\nvar IS_WINDOWS = os === 'windows';\nvar ANDROID_API_VERSION = getAndroidApiVersion();\nvar HAS_INPUT_EVENTS_LEVEL_1 = features.includes('inputeventslevel1');\nvar HAS_INPUT_EVENTS_LEVEL_2 = features.includes('inputeventslevel2') || IS_ANDROID && (ANDROID_API_VERSION === 28 || ANDROID_API_VERSION === null);\nexport { IS_CHROME, IS_OPERA, IS_FIREFOX, IS_SAFARI, IS_IE, IS_EDGE, IS_ANDROID, IS_IOS, IS_MAC, IS_WINDOWS, ANDROID_API_VERSION, HAS_INPUT_EVENTS_LEVEL_1, HAS_INPUT_EVENTS_LEVEL_2 };","import { Node, Value } from 'slate';\nimport { atob, btoa } from 'isomorphic-base64';\n/**\n * Encode a JSON `object` as base-64 `string`.\n *\n * @param {Object} object\n * @return {String}\n */\n\nfunction encode(object) {\n  var string = JSON.stringify(object);\n  var encoded = btoa(encodeURIComponent(string));\n  return encoded;\n}\n/**\n * Decode a base-64 `string` to a JSON `object`.\n *\n * @param {String} string\n * @return {Object}\n */\n\n\nfunction decode(string) {\n  var decoded = decodeURIComponent(atob(string));\n  var object = JSON.parse(decoded);\n  return object;\n}\n/**\n * Deserialize a Value `string`.\n *\n * @param {String} string\n * @return {Value}\n */\n\n\nfunction deserialize(string, options) {\n  var raw = decode(string);\n  var value = Value.fromJSON(raw, options);\n  return value;\n}\n/**\n * Deserialize a Node `string`.\n *\n * @param {String} string\n * @return {Node}\n */\n\n\nfunction deserializeNode(string, options) {\n  var raw = decode(string);\n  var node = Node.fromJSON(raw, options);\n  return node;\n}\n/**\n * Serialize a `value`.\n *\n * @param {Value} value\n * @return {String}\n */\n\n\nfunction serialize(value, options) {\n  var raw = value.toJSON(options);\n  var encoded = encode(raw);\n  return encoded;\n}\n/**\n * Serialize a `node`.\n *\n * @param {Node} node\n * @return {String}\n */\n\n\nfunction serializeNode(node, options) {\n  var raw = node.toJSON(options);\n  var encoded = encode(raw);\n  return encoded;\n}\n/**\n * Export.\n *\n * @type {Object}\n */\n\n\nvar index = {\n  deserialize: deserialize,\n  deserializeNode: deserializeNode,\n  serialize: serialize,\n  serializeNode: serializeNode\n};\nexport default index;","import { Block, Mark, Node, Value } from 'slate';\nimport { Set } from 'immutable';\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n/**\n * Deserialize a plain text `string` to a Slate value.\n *\n * @param {String} string\n * @param {Object} options\n *   @property {Boolean} toJSON\n *   @property {String|Object|Block} defaultBlock\n *   @property {Array|Set} defaultMarks\n * @return {Value}\n */\n\n\nfunction deserialize(string) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var _options$defaultBlock = options.defaultBlock,\n      defaultBlock = _options$defaultBlock === undefined ? 'line' : _options$defaultBlock,\n      _options$defaultMarks = options.defaultMarks,\n      defaultMarks = _options$defaultMarks === undefined ? [] : _options$defaultMarks,\n      _options$delimiter = options.delimiter,\n      delimiter = _options$delimiter === undefined ? '\\n' : _options$delimiter,\n      _options$toJSON = options.toJSON,\n      toJSON = _options$toJSON === undefined ? false : _options$toJSON;\n\n  if (Set.isSet(defaultMarks)) {\n    defaultMarks = defaultMarks.toArray();\n  }\n\n  defaultBlock = Node.createProperties(defaultBlock);\n  defaultMarks = defaultMarks.map(Mark.createProperties);\n  var json = {\n    object: 'value',\n    document: {\n      object: 'document',\n      data: {},\n      nodes: string.split(delimiter).map(function (line) {\n        return _extends({}, defaultBlock, {\n          object: 'block',\n          data: {},\n          nodes: [{\n            object: 'text',\n            text: line,\n            marks: defaultMarks\n          }]\n        });\n      })\n    }\n  };\n  var ret = toJSON ? json : Value.fromJSON(json);\n  return ret;\n}\n/**\n * Serialize a Slate `value` to a plain text string.\n *\n * @param {Value} value\n * @return {String}\n */\n\n\nfunction serialize(value) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return serializeNode(value.document, options);\n}\n/**\n * Serialize a `node` to plain text.\n *\n * @param {Node} node\n * @return {String}\n */\n\n\nfunction serializeNode(node) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var _options$delimiter2 = options.delimiter,\n      delimiter = _options$delimiter2 === undefined ? '\\n' : _options$delimiter2;\n\n  if (node.object === 'document' || node.object === 'block' && Block.isBlockList(node.nodes)) {\n    return node.nodes.map(serializeNode).join(delimiter);\n  } else {\n    return node.text;\n  }\n}\n/**\n * Export.\n *\n * @type {Object}\n */\n\n\nvar index = {\n  deserialize: deserialize,\n  serialize: serialize\n};\nexport default index;","import { isKeyHotkey } from 'is-hotkey';\nimport { IS_IOS, IS_MAC } from 'slate-dev-environment';\n/**\n * Hotkey mappings for each platform.\n *\n * @type {Object}\n */\n\nvar HOTKEYS = {\n  bold: 'mod+b',\n  compose: ['down', 'left', 'right', 'up', 'backspace', 'enter'],\n  moveBackward: 'left',\n  moveForward: 'right',\n  moveWordBackward: 'ctrl+left',\n  moveWordForward: 'ctrl+right',\n  deleteBackward: 'shift?+backspace',\n  deleteForward: 'shift?+delete',\n  extendBackward: 'shift+left',\n  extendForward: 'shift+right',\n  italic: 'mod+i',\n  splitBlock: 'shift?+enter',\n  undo: 'mod+z'\n};\nvar APPLE_HOTKEYS = {\n  moveLineBackward: 'opt+up',\n  moveLineForward: 'opt+down',\n  moveWordBackward: 'opt+left',\n  moveWordForward: 'opt+right',\n  deleteBackward: ['ctrl+backspace', 'ctrl+h'],\n  deleteForward: ['ctrl+delete', 'ctrl+d'],\n  deleteLineBackward: 'cmd+shift?+backspace',\n  deleteLineForward: ['cmd+shift?+delete', 'ctrl+k'],\n  deleteWordBackward: 'opt+shift?+backspace',\n  deleteWordForward: 'opt+shift?+delete',\n  extendLineBackward: 'opt+shift+up',\n  extendLineForward: 'opt+shift+down',\n  redo: 'cmd+shift+z',\n  transposeCharacter: 'ctrl+t'\n};\nvar WINDOWS_HOTKEYS = {\n  deleteWordBackward: 'ctrl+shift?+backspace',\n  deleteWordForward: 'ctrl+shift?+delete',\n  redo: 'ctrl+y'\n  /**\n   * Hotkeys.\n   *\n   * @type {Object}\n   */\n\n};\nvar Hotkeys = {};\nvar IS_APPLE = IS_IOS || IS_MAC;\nvar IS_WINDOWS = !IS_APPLE;\nvar KEYS = [].concat(Object.keys(HOTKEYS)).concat(Object.keys(APPLE_HOTKEYS)).concat(Object.keys(WINDOWS_HOTKEYS));\nKEYS.forEach(function (key) {\n  var method = 'is' + key[0].toUpperCase() + key.slice(1);\n  if (Hotkeys[method]) return;\n  var generic = HOTKEYS[key];\n  var apple = APPLE_HOTKEYS[key];\n  var windows = WINDOWS_HOTKEYS[key];\n  var isGeneric = generic && isKeyHotkey(generic);\n  var isApple = apple && isKeyHotkey(apple);\n  var isWindows = windows && isKeyHotkey(windows);\n\n  Hotkeys[method] = function (event) {\n    if (isGeneric && isGeneric(event)) return true;\n    if (IS_APPLE && isApple && isApple(event)) return true;\n    if (IS_WINDOWS && isWindows && isWindows(event)) return true;\n    return false;\n  };\n});\nexport default Hotkeys;","import { Block, Change, Data, Document, Inline, Leaf, Mark, Node, Range, Selection, Value, Text } from 'slate';\n/**\n * Create a prop type checker for Slate objects with `name` and `validate`.\n *\n * @param {String} name\n * @param {Function} validate\n * @return {Function}\n */\n\nfunction create(name, validate) {\n  function check(isRequired, props, propName, componentName, location) {\n    var value = props[propName];\n\n    if (value == null && !isRequired) {\n      return null;\n    }\n\n    if (value == null && isRequired) {\n      return new Error('The ' + location + ' `' + propName + '` is marked as required in `' + componentName + '`, but it was not supplied.');\n    }\n\n    if (validate(value)) {\n      return null;\n    }\n\n    return new Error('Invalid ' + location + ' `' + propName + '` supplied to `' + componentName + '`, expected a Slate `' + name + '` but received: ' + value);\n  }\n\n  function propType() {\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return check.apply(undefined, [false].concat(args));\n  }\n\n  propType.isRequired = function () {\n    for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    return check.apply(undefined, [true].concat(args));\n  };\n\n  return propType;\n}\n/**\n * Prop type checkers.\n *\n * @type {Object}\n */\n\n\nvar Types = {\n  block: create('Block', function (v) {\n    return Block.isBlock(v);\n  }),\n  blocks: create('List<Block>', function (v) {\n    return Block.isBlockList(v);\n  }),\n  change: create('Change', function (v) {\n    return Change.isChange(v);\n  }),\n  data: create('Data', function (v) {\n    return Data.isData(v);\n  }),\n  document: create('Document', function (v) {\n    return Document.isDocument(v);\n  }),\n  inline: create('Inline', function (v) {\n    return Inline.isInline(v);\n  }),\n  inlines: create('Inline', function (v) {\n    return Inline.isInlineList(v);\n  }),\n  leaf: create('Leaf', function (v) {\n    return Leaf.isLeaf(v);\n  }),\n  leaves: create('List<Leaf>', function (v) {\n    return Leaf.isLeafList(v);\n  }),\n  mark: create('Mark', function (v) {\n    return Mark.isMark(v);\n  }),\n  marks: create('Set<Mark>', function (v) {\n    return Mark.isMarkSet(v);\n  }),\n  node: create('Node', function (v) {\n    return Node.isNode(v);\n  }),\n  nodes: create('List<Node>', function (v) {\n    return Node.isNodeList(v);\n  }),\n  range: create('Range', function (v) {\n    return Range.isRange(v);\n  }),\n  ranges: create('List<Range>', function (v) {\n    return Range.isRangeList(v);\n  }),\n  selection: create('Selection', function (v) {\n    return Selection.isSelection(v);\n  }),\n  value: create('Value', function (v) {\n    return Value.isValue(v);\n  }),\n  text: create('Text', function (v) {\n    return Text.isText(v);\n  }),\n  texts: create('List<Text>', function (v) {\n    return Text.isTextList(v);\n  })\n  /**\n   * Export.\n   *\n   * @type {Object}\n   */\n\n};\nexport default Types;","import React from 'react';\nvar isProduction = \"development\" === 'production';\nvar prefix = 'Invariant failed';\n\nvar index = function index(condition, message) {\n  if (condition) {\n    return;\n  }\n\n  if (isProduction) {\n    throw new Error(prefix);\n  } else {\n    throw new Error(prefix + \": \" + (message || ''));\n  }\n};\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar toConsumableArray = function toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n};\n/*\n * Instance counter to enable unique marks for multiple Placeholder instances.\n */\n\n\nvar instanceCounter = 0;\n/**\n * A plugin that renders a React placeholder for a given Slate node.\n *\n * @param {Object} options\n * @return {Object}\n */\n\nfunction SlateReactPlaceholder() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var instanceId = instanceCounter++;\n  var placeholderMark = {\n    type: 'placeholder',\n    data: {\n      key: instanceId\n    }\n  };\n  var placeholder = options.placeholder,\n      when = options.when,\n      _options$style = options.style,\n      style = _options$style === undefined ? {} : _options$style;\n  index(placeholder, 'You must pass `SlateReactPlaceholder` an `options.placeholder` string.');\n  index(when, 'You must pass `SlateReactPlaceholder` an `options.when` query.');\n  /**\n   * Decorate a match node with a placeholder mark when it fits the query.\n   *\n   * @param {Node} node\n   * @param {Editor} editor\n   * @param {Function} next\n   * @return {Array}\n   */\n\n  function decorateNode(node, editor, next) {\n    if (!editor.query(when, node)) {\n      return next();\n    }\n\n    var others = next();\n    var document = editor.value.document;\n    var first = node.getFirstText();\n    var last = node.getLastText();\n    var decoration = {\n      anchor: {\n        key: first.key,\n        offset: 0,\n        path: document.getPath(first.key)\n      },\n      focus: {\n        key: last.key,\n        offset: last.text.length,\n        path: document.getPath(last.key)\n      },\n      mark: placeholderMark\n    };\n    return [].concat(toConsumableArray(others), [decoration]);\n  }\n  /**\n   * Render an inline placeholder for the placeholder mark.\n   *\n   * @param {Object} props\n   * @param {Editor} editor\n   * @param {Function} next\n   * @return {Element}\n   */\n\n\n  function renderMark(props, editor, next) {\n    var children = props.children,\n        mark = props.mark;\n\n    if (mark.type === 'placeholder' && mark.data.get('key') === instanceId) {\n      var placeHolderStyle = _extends({\n        pointerEvents: 'none',\n        display: 'inline-block',\n        width: '0',\n        maxWidth: '100%',\n        whiteSpace: 'nowrap',\n        opacity: '0.333'\n      }, style);\n\n      return React.createElement('span', null, React.createElement('span', {\n        contentEditable: false,\n        style: placeHolderStyle\n      }, placeholder), children);\n    }\n\n    return next();\n  }\n  /**\n   * Return the plugin.\n   *\n   * @return {Object}\n   */\n\n\n  return {\n    decorateNode: decorateNode,\n    renderMark: renderMark\n  };\n}\n\nexport default SlateReactPlaceholder;","import getWindow from 'get-window';\nimport invariant from 'tiny-invariant';\nimport { Value, Node, PathUtils, Editor } from 'slate';\nimport Debug from 'debug';\nimport pick from 'lodash/pick';\nimport { ANDROID_API_VERSION, IS_IE, IS_IOS, IS_EDGE, IS_FIREFOX, HAS_INPUT_EVENTS_LEVEL_2, IS_ANDROID, IS_SAFARI } from 'slate-dev-environment';\nimport Base64 from 'slate-base64-serializer';\nimport Plain from 'slate-plain-serializer';\nimport Hotkeys from 'slate-hotkeys';\nimport ReactDOM from 'react-dom';\nimport React from 'react';\nimport Types from 'prop-types';\nimport SlateTypes from 'slate-prop-types';\nimport ImmutableTypes from 'react-immutable-proptypes';\nimport { Set } from 'immutable';\nimport warning from 'tiny-warning';\nimport isBackward from 'selection-is-backward';\nimport throttle from 'lodash/throttle';\nimport PlaceholderPlugin from 'slate-react-placeholder';\nimport memoizeOne from 'memoize-one';\n/**\n * Event handlers used by Slate plugins.\n *\n * @type {Array}\n */\n\nvar EVENT_HANDLERS = ['onBeforeInput', 'onBlur', 'onClick', 'onContextMenu', 'onCompositionEnd', 'onCompositionStart', 'onCopy', 'onCut', 'onDragEnd', 'onDragEnter', 'onDragExit', 'onDragLeave', 'onDragOver', 'onDragStart', 'onDrop', 'onInput', 'onFocus', 'onKeyDown', 'onKeyUp', 'onMouseDown', 'onMouseUp', 'onPaste', 'onSelect'];\n/**\n * Fixes a selection within the DOM when the cursor is in Slate's special\n * zero-width block. Slate handles empty blocks in a special manner and the\n * cursor can end up either before or after the non-breaking space. This\n * causes different behavior in Android and so we make sure the seleciton is\n * always before the zero-width space.\n *\n * @param {Window} window\n */\n\nfunction fixSelectionInZeroWidthBlock(window) {\n  var domSelection = window.getSelection();\n  var anchorNode = domSelection.anchorNode;\n  var dataset = anchorNode.parentElement.dataset;\n  var isZeroWidth = dataset ? dataset.slateZeroWidth === 'n' : false; // We are doing three checks to see if we need to move the cursor.\n  // Is this a zero-width slate span?\n  // Is the current cursor position not at the start of it?\n  // Is there more than one character (i.e. the zero-width space char) in here?\n\n  if (isZeroWidth && anchorNode.textContent.length === 1 && domSelection.anchorOffset !== 0) {\n    var range = window.document.createRange();\n    range.setStart(anchorNode, 0);\n    range.setEnd(anchorNode, 0);\n    domSelection.removeAllRanges();\n    domSelection.addRange(range);\n  }\n}\n\nvar classCallCheck = function classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar defineProperty = function defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n};\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar inherits = function inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\nvar possibleConstructorReturn = function possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\nvar slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\nvar toConsumableArray = function toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n};\n/**\n * Offset key parser regex.\n *\n * @type {RegExp}\n */\n\n\nvar PARSER = /^([\\w-]+)(?::(\\d+))?$/;\n/**\n * Parse an offset key `string`.\n *\n * @param {String} string\n * @return {Object}\n */\n\nfunction parse(string) {\n  var matches = PARSER.exec(string);\n\n  if (!matches) {\n    throw new Error(\"Invalid offset key string \\\"\" + string + \"\\\".\");\n  }\n\n  var _matches = slicedToArray(matches, 3),\n      original = _matches[0],\n      key = _matches[1],\n      index = _matches[2]; // eslint-disable-line no-unused-vars\n\n\n  return {\n    key: key,\n    index: parseInt(index, 10)\n  };\n}\n/**\n * Stringify an offset key `object`.\n *\n * @param {Object} object\n *   @property {String} key\n *   @property {Number} index\n * @return {String}\n */\n\n\nfunction stringify(object) {\n  return object.key + \":\" + object.index;\n}\n/**\n * Export.\n *\n * @type {Object}\n */\n\n\nvar OffsetKey = {\n  parse: parse,\n  stringify: stringify\n};\n/**\n * Constants.\n *\n * @type {String}\n */\n\nvar ZERO_WIDTH_ATTRIBUTE = 'data-slate-zero-width';\nvar ZERO_WIDTH_SELECTOR = '[' + ZERO_WIDTH_ATTRIBUTE + ']';\nvar OFFSET_KEY_ATTRIBUTE = 'data-offset-key';\nvar RANGE_SELECTOR = '[' + OFFSET_KEY_ATTRIBUTE + ']';\nvar TEXT_SELECTOR = '[data-key]';\nvar VOID_SELECTOR = '[data-slate-void]';\n/**\n * Find a Slate point from a DOM selection's `nativeNode` and `nativeOffset`.\n *\n * @param {Element} nativeNode\n * @param {Number} nativeOffset\n * @param {Editor} editor\n * @return {Point}\n */\n\nfunction findPoint(nativeNode, nativeOffset, editor) {\n  invariant(!Value.isValue(editor), 'As of Slate 0.42.0, the `findPoint` utility takes an `editor` instead of a `value`.');\n\n  var _normalizeNodeAndOffs = normalizeNodeAndOffset(nativeNode, nativeOffset),\n      nearestNode = _normalizeNodeAndOffs.node,\n      nearestOffset = _normalizeNodeAndOffs.offset;\n\n  var window = getWindow(nativeNode);\n  var parentNode = nearestNode.parentNode;\n  var rangeNode = parentNode.closest(RANGE_SELECTOR);\n  var offset = void 0;\n  var node = void 0; // Calculate how far into the text node the `nearestNode` is, so that we can\n  // determine what the offset relative to the text node is.\n\n  if (rangeNode) {\n    var range = window.document.createRange();\n    var textNode = rangeNode.closest(TEXT_SELECTOR);\n    range.setStart(textNode, 0);\n    range.setEnd(nearestNode, nearestOffset);\n    node = textNode; // COMPAT: Edge has a bug where Range.prototype.toString() will convert \\n\n    // into \\r\\n. The bug causes a loop when slate-react attempts to reposition\n    // its cursor to match the native position. Use textContent.length instead.\n    // https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/10291116/\n\n    offset = range.cloneContents().textContent.length;\n  } else {\n    // For void nodes, the element with the offset key will be a cousin, not an\n    // ancestor, so find it by going down from the nearest void parent.\n    var voidNode = parentNode.closest(VOID_SELECTOR);\n    if (!voidNode) return null;\n    rangeNode = voidNode.querySelector(RANGE_SELECTOR);\n    if (!rangeNode) return null;\n    node = rangeNode;\n    offset = node.textContent.length;\n  } // COMPAT: If the parent node is a Slate zero-width space, this is because the\n  // text node should have no characters. However, during IME composition the\n  // ASCII characters will be prepended to the zero-width space, so subtract 1\n  // from the offset to account for the zero-width space character.\n\n\n  if (offset === node.textContent.length && parentNode.hasAttribute(ZERO_WIDTH_ATTRIBUTE)) {\n    offset--;\n  } // Get the string value of the offset key attribute.\n\n\n  var offsetKey = rangeNode.getAttribute(OFFSET_KEY_ATTRIBUTE);\n  if (!offsetKey) return null;\n\n  var _OffsetKey$parse = OffsetKey.parse(offsetKey),\n      key = _OffsetKey$parse.key; // COMPAT: If someone is clicking from one Slate editor into another, the\n  // select event fires twice, once for the old editor's `element` first, and\n  // then afterwards for the correct `element`. (2017/03/03)\n\n\n  var value = editor.value;\n  if (!value.document.hasDescendant(key)) return null;\n  var point = value.document.createPoint({\n    key: key,\n    offset: offset\n  });\n  return point;\n}\n/**\n * From a DOM selection's `node` and `offset`, normalize so that it always\n * refers to a text node.\n *\n * @param {Element} node\n * @param {Number} offset\n * @return {Object}\n */\n\n\nfunction normalizeNodeAndOffset(node, offset) {\n  // If it's an element node, its offset refers to the index of its children\n  // including comment nodes, so try to find the right text child node.\n  if (node.nodeType === 1 && node.childNodes.length) {\n    var isLast = offset === node.childNodes.length;\n    var direction = isLast ? 'backward' : 'forward';\n    var index = isLast ? offset - 1 : offset;\n    node = getEditableChild(node, index, direction); // If the node has children, traverse until we have a leaf node. Leaf nodes\n    // can be either text nodes, or other void DOM nodes.\n\n    while (node.nodeType === 1 && node.childNodes.length) {\n      var i = isLast ? node.childNodes.length - 1 : 0;\n      node = getEditableChild(node, i, direction);\n    } // Determine the new offset inside the text node.\n\n\n    offset = isLast ? node.textContent.length : 0;\n  } // Return the node and offset.\n\n\n  return {\n    node: node,\n    offset: offset\n  };\n}\n/**\n * Get the nearest editable child at `index` in a `parent`, preferring\n * `direction`.\n *\n * @param {Element} parent\n * @param {Number} index\n * @param {String} direction ('forward' or 'backward')\n * @return {Element|Null}\n */\n\n\nfunction getEditableChild(parent, index, direction) {\n  var childNodes = parent.childNodes;\n  var child = childNodes[index];\n  var i = index;\n  var triedForward = false;\n  var triedBackward = false; // While the child is a comment node, or an element node with no children,\n  // keep iterating to find a sibling non-void, non-comment node.\n\n  while (child.nodeType === 8 || child.nodeType === 1 && child.childNodes.length === 0 || child.nodeType === 1 && child.getAttribute('contenteditable') === 'false') {\n    if (triedForward && triedBackward) break;\n\n    if (i >= childNodes.length) {\n      triedForward = true;\n      i = index - 1;\n      direction = 'backward';\n      continue;\n    }\n\n    if (i < 0) {\n      triedBackward = true;\n      i = index + 1;\n      direction = 'forward';\n      continue;\n    }\n\n    child = childNodes[i];\n    if (direction === 'forward') i++;\n    if (direction === 'backward') i--;\n  }\n\n  return child || null;\n}\n/**\n * Find a Slate range from a DOM `native` selection.\n *\n * @param {Selection} native\n * @param {Editor} editor\n * @return {Range}\n */\n\n\nfunction findRange(native, editor) {\n  invariant(!Value.isValue(editor), 'As of Slate 0.42.0, the `findNode` utility takes an `editor` instead of a `value`.');\n  var el = native.anchorNode || native.startContainer;\n  if (!el) return null;\n  var window = getWindow(el); // If the `native` object is a DOM `Range` or `StaticRange` object, change it\n  // into something that looks like a DOM `Selection` instead.\n\n  if (native instanceof window.Range || window.StaticRange && native instanceof window.StaticRange) {\n    native = {\n      anchorNode: native.startContainer,\n      anchorOffset: native.startOffset,\n      focusNode: native.endContainer,\n      focusOffset: native.endOffset\n    };\n  }\n\n  var _native = native,\n      anchorNode = _native.anchorNode,\n      anchorOffset = _native.anchorOffset,\n      focusNode = _native.focusNode,\n      focusOffset = _native.focusOffset,\n      isCollapsed = _native.isCollapsed;\n  var value = editor.value;\n  var anchor = findPoint(anchorNode, anchorOffset, editor);\n  var focus = isCollapsed ? anchor : findPoint(focusNode, focusOffset, editor);\n  if (!anchor || !focus) return null;\n  var document = value.document;\n  var range = document.createRange({\n    anchor: anchor,\n    focus: focus\n  });\n  return range;\n}\n\nfunction getSelectionFromDOM(window, editor, domSelection) {\n  var value = editor.value;\n  var document = value.document; // If there are no ranges, the editor was blurred natively.\n\n  if (!domSelection.rangeCount) {\n    editor.blur();\n    return;\n  } // Otherwise, determine the Slate selection from the native one.\n\n\n  var range = findRange(domSelection, editor);\n\n  if (!range) {\n    return;\n  }\n\n  var _range = range,\n      anchor = _range.anchor,\n      focus = _range.focus;\n  var anchorText = document.getNode(anchor.key);\n  var focusText = document.getNode(focus.key);\n  var anchorInline = document.getClosestInline(anchor.key);\n  var focusInline = document.getClosestInline(focus.key);\n  var focusBlock = document.getClosestBlock(focus.key);\n  var anchorBlock = document.getClosestBlock(anchor.key); // COMPAT: If the anchor point is at the start of a non-void, and the\n  // focus point is inside a void node with an offset that isn't `0`, set\n  // the focus offset to `0`. This is due to void nodes <span>'s being\n  // positioned off screen, resulting in the offset always being greater\n  // than `0`. Since we can't know what it really should be, and since an\n  // offset of `0` is less destructive because it creates a hanging\n  // selection, go with `0`. (2017/09/07)\n\n  if (anchorBlock && !editor.isVoid(anchorBlock) && anchor.offset === 0 && focusBlock && editor.isVoid(focusBlock) && focus.offset !== 0) {\n    range = range.setFocus(focus.setOffset(0));\n  } // COMPAT: If the selection is at the end of a non-void inline node, and\n  // there is a node after it, put it in the node after instead. This\n  // standardizes the behavior, since it's indistinguishable to the user.\n\n\n  if (anchorInline && !editor.isVoid(anchorInline) && anchor.offset === anchorText.text.length) {\n    var block = document.getClosestBlock(anchor.key);\n    var nextText = block.getNextText(anchor.key);\n    if (nextText) range = range.moveAnchorTo(nextText.key, 0);\n  }\n\n  if (focusInline && !editor.isVoid(focusInline) && focus.offset === focusText.text.length) {\n    var _block = document.getClosestBlock(focus.key);\n\n    var _nextText = _block.getNextText(focus.key);\n\n    if (_nextText) range = range.moveFocusTo(_nextText.key, 0);\n  }\n\n  var selection = document.createSelection(range);\n  selection = selection.setIsFocused(true); // Preserve active marks from the current selection.\n  // They will be cleared by `editor.select` if the selection actually moved.\n\n  selection = selection.set('marks', value.selection.marks);\n  return selection;\n}\n/**\n * Looks at the DOM and generates the equivalent Slate Selection.\n *\n * @param {Window} window\n * @param {Editor} editor\n * @param {Selection} domSelection - The DOM's selection Object\n */\n\n\nfunction setSelectionFromDOM(window, editor, domSelection) {\n  var selection = getSelectionFromDOM(window, editor, domSelection);\n  editor.select(selection);\n}\n/**\n * setTextFromDomNode lets us take a domNode and reconcile the text in the\n * editor's Document such that it reflects the text in the DOM. This is the\n * opposite of what the Editor usually does which takes the Editor's Document\n * and React modifies the DOM to match. The purpose of this method is for\n * composition changes where we don't know what changes the user made by\n * looking at events. Instead we wait until the DOM is in a safe state, we\n * read from it, and update the Editor's Document.\n *\n * @param {Window} window\n * @param {Editor} editor\n * @param {Node} domNode\n */\n\n\nfunction setTextFromDomNode(window, editor, domNode) {\n  var point = findPoint(domNode, 0, editor);\n  if (!point) return; // Get the text node and leaf in question.\n\n  var value = editor.value;\n  var document = value.document,\n      selection = value.selection;\n  var node = document.getDescendant(point.key);\n  var block = document.getClosestBlock(node.key);\n  var leaves = node.getLeaves();\n  var lastText = block.getLastText();\n  var lastLeaf = leaves.last();\n  var start = 0;\n  var end = 0;\n  var leaf = leaves.find(function (r) {\n    start = end;\n    end += r.text.length;\n    if (end > point.offset) return true;\n  }) || lastLeaf; // Get the text information.\n\n  var text = leaf.text;\n  var textContent = domNode.textContent;\n  var isLastText = node === lastText;\n  var isLastLeaf = leaf === lastLeaf;\n  var lastChar = textContent.charAt(textContent.length - 1); // COMPAT: If this is the last leaf, and the DOM text ends in a new line,\n  // we will have added another new line in <Leaf>'s render method to account\n  // for browsers collapsing a single trailing new lines, so remove it.\n\n  if (isLastText && isLastLeaf && lastChar === '\\n') {\n    textContent = textContent.slice(0, -1);\n  } // If the text is no different, abort.\n\n\n  if (textContent === text) return; // Determine what the selection should be after changing the text.\n  // const delta = textContent.length - text.length\n  // const corrected = selection.moveToEnd().moveForward(delta)\n\n  var entire = selection.moveAnchorTo(point.key, start).moveFocusTo(point.key, end);\n  entire = document.resolveRange(entire); // Change the current value to have the leaf's text replaced.\n\n  editor.insertTextAtRange(entire, textContent, leaf.marks);\n}\n/**\n * In Android API 26 and 27 we can tell if the input key was pressed by\n * waiting for the `beforeInput` event and seeing that the last character\n * of its `data` property is char code `10`.\n *\n * Note that at this point it is too late to prevent the event from affecting\n * the DOM so we use other methods to clean the DOM up after we have detected\n * the input.\n *\n * @param  {String} data\n * @return {Boolean}\n */\n\n\nfunction isInputDataEnter(data) {\n  if (data == null) return false;\n  var lastChar = data[data.length - 1];\n  var charCode = lastChar.charCodeAt(0);\n  return charCode === 10;\n}\n/**\n * In Android sometimes the only way to tell what the user is trying to do\n * is to look at an event's `data` property and see if the last characters\n * matches a character. This method helps us make that determination.\n *\n * @param {String} data\n * @param {[String]} chars\n * @return {Boolean}\n */\n\n\nfunction isInputDataLastChar(data, chars) {\n  if (!Array.isArray(chars)) throw new Error(\"chars must be an array of one character strings\");\n  if (data == null) return false;\n  var lastChar = data[data.length - 1];\n  return chars.includes(lastChar);\n}\n/**\n * Is the given node a text node?\n *\n * @param {node} node\n * @param {Window} window\n * @return {Boolean}\n */\n\n\nfunction isTextNode(node, window) {\n  return node.nodeType === window.Node.TEXT_NODE;\n}\n/**\n * Takes a node and returns a snapshot of the node.\n *\n * @param {node} node\n * @param {Window} window\n * @return {object} element snapshot\n */\n\n\nfunction getElementSnapshot(node, window) {\n  var snapshot = {};\n  snapshot.node = node;\n\n  if (isTextNode(node, window)) {\n    snapshot.text = node.textContent;\n  }\n\n  snapshot.children = Array.from(node.childNodes).map(function (childNode) {\n    return getElementSnapshot(childNode, window);\n  });\n  return snapshot;\n}\n/**\n * Takes an array of elements and returns a snapshot\n *\n * @param {elements[]} elements\n * @param {Window} window\n * @return {object} snapshot\n */\n\n\nfunction getSnapshot(elements, window) {\n  if (!elements.length) throw new Error('elements must be an Array');\n  var lastElement = elements[elements.length - 1];\n  var snapshot = {\n    elements: elements.map(function (element) {\n      return getElementSnapshot(element, window);\n    }),\n    parent: lastElement.parentElement,\n    next: lastElement.nextElementSibling\n  };\n  return snapshot;\n}\n/**\n * Takes an element snapshot and applies it to the element in the DOM.\n * Basically, it fixes the DOM to the point in time that the snapshot was\n * taken. This will put the DOM back in sync with React.\n *\n * @param {Object} snapshot\n * @param {Window} window\n */\n\n\nfunction applyElementSnapshot(snapshot, window) {\n  var el = snapshot.node;\n\n  if (isTextNode(el, window)) {\n    // Update text if it is different\n    if (el.textContent !== snapshot.text) {\n      el.textContent = snapshot.text;\n    }\n  }\n\n  snapshot.children.forEach(function (childSnapshot) {\n    applyElementSnapshot(childSnapshot, window);\n    el.appendChild(childSnapshot.node);\n  }); // remove children that shouldn't be there\n\n  var snapLength = snapshot.children.length;\n\n  while (el.childNodes.length > snapLength) {\n    el.removeChild(el.childNodes[0]);\n  } // remove any clones from the DOM. This can happen when a block is split.\n\n\n  var dataset = el.dataset;\n  if (!dataset) return; // if there's no dataset, don't remove it\n\n  var key = dataset.key;\n  if (!key) return; // if there's no `data-key`, don't remove it\n\n  var dups = new window.Set(Array.from(window.document.querySelectorAll('[data-key=\\'' + key + '\\']')));\n  dups.delete(el);\n  dups.forEach(function (dup) {\n    return dup.parentElement.removeChild(dup);\n  });\n}\n/**\n * Takes a snapshot and applies it to the DOM. Rearranges both the contents\n * of the elements in the snapshot as well as putting the elements back into\n * position relative to each other and also makes sure the last element is\n * before the same element as it was when the snapshot was taken.\n *\n * @param {snapshot} snapshot\n * @param {Window} window\n */\n\n\nfunction applySnapshot(snapshot, window) {\n  var elements = snapshot.elements,\n      next = snapshot.next,\n      parent = snapshot.parent;\n  elements.forEach(function (element) {\n    return applyElementSnapshot(element, window);\n  });\n  var lastElement = elements[elements.length - 1].node;\n\n  if (snapshot.next) {\n    parent.insertBefore(lastElement, next);\n  } else {\n    parent.appendChild(lastElement);\n  }\n\n  var prevElement = lastElement;\n\n  for (var i = elements.length - 2; i >= 0; i--) {\n    var element = elements[i].node;\n    parent.insertBefore(element, prevElement);\n    prevElement = element;\n  }\n}\n/**\n * A snapshot of one or more elements.\n */\n\n\nvar ElementSnapshot = function () {\n  /**\n   * constructor\n   * @param {elements[]} elements - array of element to snapshot. Must be in order.\n   * @param {object} data - any arbitrary data you want to store with the snapshot\n   */\n  function ElementSnapshot(elements, data) {\n    classCallCheck(this, ElementSnapshot);\n    this.window = getWindow(elements[0]);\n    this.snapshot = getSnapshot(elements, this.window);\n    this.data = data;\n  }\n  /**\n   * apply the current snapshot to the DOM.\n   */\n\n\n  createClass(ElementSnapshot, [{\n    key: 'apply',\n    value: function apply() {\n      applySnapshot(this.snapshot, this.window);\n    }\n    /**\n     * get the data you passed into the constructor.\n     *\n     * @return {object} data\n     */\n\n  }, {\n    key: 'getData',\n    value: function getData() {\n      return this.data;\n    }\n  }]);\n  return ElementSnapshot;\n}();\n/**\n * Returns the closest element that matches the selector.\n * Unlike the native `Element.closest` method, this doesn't require the\n * starting node to be an Element.\n *\n * @param  {Node} node to start at\n * @param  {String} css selector to match\n * @return {Element} the closest matching element\n */\n\n\nfunction closest(node, selector) {\n  var win = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : window;\n\n  if (node.nodeType === win.Node.TEXT_NODE) {\n    node = node.parentNode;\n  }\n\n  return node.closest(selector);\n}\n/**\n * A DomSnapshot remembers the state of elements at a given point in time\n * and also remembers the state of the Editor at that time as well.\n * The state can be applied to the DOM at a time in the future.\n */\n\n\nvar DomSnapshot = function () {\n  /**\n   * Constructor.\n   *\n   * @param {Window} window\n   * @param {Editor} editor\n   * @param {Boolean} options.before - should we remember the element before the one passed in\n   */\n  function DomSnapshot(window, editor) {\n    var _ref = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n        _ref$before = _ref.before,\n        before = _ref$before === undefined ? false : _ref$before;\n\n    classCallCheck(this, DomSnapshot);\n    var domSelection = window.getSelection();\n    var anchorNode = domSelection.anchorNode;\n    var subrootEl = closest(anchorNode, '[data-slate-editor] > *');\n    var elements = [subrootEl]; // The before option is for when we need to take a snapshot of the current\n    // subroot and the element before when the user hits the backspace key.\n\n    if (before) {\n      var previousElementSibling = subrootEl.previousElementSibling;\n\n      if (previousElementSibling) {\n        elements.unshift(previousElementSibling);\n      }\n    }\n\n    this.snapshot = new ElementSnapshot(elements);\n    this.selection = getSelectionFromDOM(window, editor, domSelection);\n  }\n  /**\n   * Apply the snapshot to the DOM and set the selection in the Editor.\n   *\n   * @param {Editor} editor\n   */\n\n\n  createClass(DomSnapshot, [{\n    key: 'apply',\n    value: function apply(editor) {\n      var snapshot = this.snapshot,\n          selection = this.selection;\n      snapshot.apply();\n      editor.moveTo(selection.anchor.key, selection.anchor.offset);\n    }\n  }]);\n  return DomSnapshot;\n}();\n/**\n * A function that does nothing\n * @return {Function}\n */\n\n\nfunction noop() {}\n/**\n * Creates an executor like a `resolver` or a `deleter` that handles\n * delayed execution of a method using a `requestAnimationFrame` or `setTimeout`.\n *\n * Unlike a `requestAnimationFrame`, after a method is cancelled, it can be\n * resumed. You can also optionally add a `timeout` after which time the\n * executor is automatically cancelled.\n */\n\n\nvar Executor =\n/**\n * Executor\n * @param {window} window\n * @param {Function} fn - the function to execute when done\n * @param {Object} options\n */\nfunction Executor(window, fn) {\n  var _this = this;\n\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  classCallCheck(this, Executor);\n\n  this.__call__ = function () {\n    // I don't clear the timeout since it will be noop'ed anyways. Less code.\n    _this.fn();\n\n    _this.preventFurtherCalls(); // Ensure you can only call the function once\n\n  };\n\n  this.preventFurtherCalls = function () {\n    _this.fn = noop;\n  };\n\n  this.resume = function (ms) {\n    // in case resume is called more than once, we don't want old timers\n    // from executing because the `timeoutId` or `callbackId` is overwritten.\n    _this.cancel();\n\n    if (ms) {\n      _this.mode = 'timeout';\n      _this.timeoutId = _this.window.setTimeout(_this.__call__, ms);\n    } else {\n      _this.mode = 'animationFrame';\n      _this.callbackId = _this.window.requestAnimationFrame(_this.__call__);\n    }\n  };\n\n  this.cancel = function () {\n    if (_this.mode === 'timeout') {\n      _this.window.clearTimeout(_this.timeoutId);\n    } else {\n      _this.window.cancelAnimationFrame(_this.callbackId);\n    }\n\n    if (_this.onCancel) _this.onCancel();\n  };\n\n  this.__setTimeout__ = function (timeout) {\n    if (timeout == null) return;\n\n    _this.window.setTimeout(function () {\n      _this.cancel();\n\n      _this.preventFurtherCalls();\n    }, timeout);\n  };\n\n  this.fn = fn;\n  this.window = window;\n  this.resume();\n  this.onCancel = options.onCancel;\n\n  this.__setTimeout__(options.timeout);\n};\n\nvar debug = Debug('slate:android');\ndebug.reconcile = Debug('slate:reconcile');\ndebug('ANDROID_API_VERSION', {\n  ANDROID_API_VERSION: ANDROID_API_VERSION\n});\n/**\n * Define variables related to composition state.\n */\n\nvar NONE = 0;\nvar COMPOSING = 1;\n\nfunction AndroidPlugin() {\n  /**\n   * The current state of composition.\n   *\n   * @type {NONE|COMPOSING|WAITING}\n   */\n  var status = NONE;\n  /**\n   * The set of nodes that we need to process when we next reconcile.\n   * Usually this is soon after the `onCompositionEnd` event.\n   *\n   * @type {Set} set containing Node objects\n   */\n\n  var nodes = new window.Set();\n  /**\n   * Keep a snapshot after a composition end for API 26/27. If a `beforeInput`\n   * gets called with data that ends in an ENTER then we need to use this\n   * snapshot to revert the DOM so that React doesn't get out of sync with the\n   * DOM. We also need to cancel the `reconcile` operation as it interferes in\n   * certain scenarios like hitting 'enter' at the end of a word.\n   *\n   * @type {DomSnapshot} [compositionEndSnapshot]\n   \n   */\n\n  var compositionEndSnapshot = null;\n  /**\n   * When there is a `compositionEnd` we ened to reconcile Slate's Document\n   * with the DOM. The `reconciler` is an instance of `Executor` that does\n   * this for us. It is created on every `compositionEnd` and executes on the\n   * next `requestAnimationFrame`. The `Executor` can be cancelled and resumed\n   * which some methods do.\n   *\n   * @type {Executor}\n   */\n\n  var reconciler = null;\n  /**\n   * A snapshot that gets taken when there is a `keydown` event in API26/27.\n   * If an `input` gets called with `inputType` of `deleteContentBackward`\n   * we need to undo the delete that Android does to keep React in sync with\n   * the DOM.\n   *\n   * @type {DomSnapshot}\n   */\n\n  var keyDownSnapshot = null;\n  /**\n   * The deleter is an instace of `Executor` that will execute a delete\n   * operation on the next `requestAnimationFrame`. It has to wait because\n   * we need Android to finish all of its DOM operations to do with deletion\n   * before we revert them to a Snapshot. After reverting, we then execute\n   * Slate's version of delete.\n   *\n   * @type {Executor}\n   */\n\n  var deleter = null;\n  /**\n   * Because Slate implements its own event handler for `beforeInput` in\n   * addition to React's version, we actually get two. If we cancel the\n   * first native version, the React one will still fire. We set this to\n   * `true` if we don't want that to happen. Remember that when we prevent it,\n   * we need to tell React to `preventDefault` so the event doesn't continue\n   * through React's event system.\n   *\n   * type {Boolean}\n   */\n\n  var preventNextBeforeInput = false;\n  /**\n   * When a composition ends, in some API versions we may need to know what we\n   * have learned so far about the composition and what we want to do because of\n   * some actions that may come later.\n   *\n   * For example in API 26/27, if we get a `beforeInput` that tells us that the\n   * input was a `.`, then we want the reconcile to happen even if there are\n   * `onInput:delete` events that follow. In this case, we would set\n   * `compositionEndAction` to `period`. During the `onInput` we would check if\n   * the `compositionEndAction` says `period` and if so we would not start the\n   * `delete` action.\n   *\n   * @type {(String|null)}\n   */\n\n  var compositionEndAction = null;\n  /**\n   * Looks at the `nodes` we have collected, usually the things we have edited\n   * during the course of a composition, and then updates Slate's internal\n   * Document based on the text values in these DOM nodes and also updates\n   * Slate's Selection based on the current cursor position in the Editor.\n   *\n   * @param {Window} window\n   * @param {Editor} editor\n   * @param {String} options.from - where reconcile was called from for debug\n   */\n\n  function reconcile(window, editor, _ref) {\n    var from = _ref.from;\n    debug.reconcile({\n      from: from\n    });\n    var domSelection = window.getSelection();\n    nodes.forEach(function (node) {\n      setTextFromDomNode(window, editor, node);\n    });\n    setSelectionFromDOM(window, editor, domSelection);\n    nodes.clear();\n  }\n  /**\n   * On before input.\n   *\n   * Check `components/content` because some versions of Android attach a\n   * native `beforeinput` event on the Editor. In this case, you might need\n   * to distinguish whether the event coming through is the native or React\n   * version of the event. Also, if you cancel the native version that does\n   * not necessarily mean that the React version is cancelled.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onBeforeInput(event, editor, next) {\n    var isNative = !event.nativeEvent;\n    debug('onBeforeInput', {\n      isNative: isNative,\n      event: event,\n      status: status,\n      e: pick(event, ['data', 'inputType', 'isComposing', 'nativeEvent'])\n    });\n    var window = getWindow(event.target);\n\n    if (preventNextBeforeInput) {\n      event.preventDefault();\n      preventNextBeforeInput = false;\n      return;\n    }\n\n    switch (ANDROID_API_VERSION) {\n      case 25:\n        // prevent onBeforeInput to allow selecting an alternate suggest to\n        // work.\n        break;\n\n      case 26:\n      case 27:\n        if (deleter) {\n          deleter.cancel();\n          reconciler.resume();\n        } // This analyses Android's native `beforeInput` which Slate adds\n        // on in the `Content` component. It only fires if the cursor is at\n        // the end of a block. Otherwise, the code below checks.\n\n\n        if (isNative) {\n          if (event.inputType === 'insertParagraph' || event.inputType === 'insertLineBreak') {\n            debug('onBeforeInput:enter:native', {});\n            var domSelection = window.getSelection();\n            var selection = getSelectionFromDOM(window, editor, domSelection);\n            preventNextBeforeInput = true;\n            event.preventDefault();\n            editor.moveTo(selection.anchor.key, selection.anchor.offset);\n            editor.splitBlock();\n          }\n        } else {\n          if (isInputDataLastChar(event.data, ['.'])) {\n            debug('onBeforeInput:period');\n            reconciler.cancel();\n            compositionEndAction = 'period';\n            return;\n          } // This looks at the beforeInput event's data property and sees if it\n          // ends in a linefeed which is character code 10. This appears to be\n          // the only way to detect that enter has been pressed except at end\n          // of line where it doesn't work.\n\n\n          var isEnter = isInputDataEnter(event.data);\n\n          if (isEnter) {\n            if (reconciler) reconciler.cancel();\n            window.requestAnimationFrame(function () {\n              debug('onBeforeInput:enter:react', {});\n              compositionEndSnapshot.apply(editor);\n              editor.splitBlock();\n            });\n          }\n        }\n\n        break;\n\n      case 28:\n        // If a `beforeInput` event fires after an `input:deleteContentBackward`\n        // event, it appears to be a good indicator that it is some sort of\n        // special combined Android event. If this is the case, then we don't\n        // want to have a deletion to happen, we just want to wait until Android\n        // has done its thing and then at the end we just want to reconcile.\n        if (deleter) {\n          deleter.cancel();\n          reconciler.resume();\n        }\n\n        break;\n\n      default:\n        if (status !== COMPOSING) next();\n    }\n  }\n  /**\n   * On Composition end. By default, when a `compositionEnd` event happens,\n   * we start a reconciler. The reconciler will update Slate's Document using\n   * the DOM as the source of truth. In some cases, the reconciler needs to\n   * be cancelled and can also be resumed. For example, when a delete\n   * immediately followed a `compositionEnd`, we don't want to reconcile.\n   * Instead, we want the `delete` to take precedence.\n   *\n   * @param  {Event} event\n   * @param  {Editor} editor\n   * @param  {Function} next\n   */\n\n\n  function onCompositionEnd(event, editor, next) {\n    debug('onCompositionEnd', {\n      event: event\n    });\n    var window = getWindow(event.target);\n    var domSelection = window.getSelection();\n    var anchorNode = domSelection.anchorNode;\n\n    switch (ANDROID_API_VERSION) {\n      case 26:\n      case 27:\n        compositionEndSnapshot = new DomSnapshot(window, editor); // fixes a bug in Android API 26 & 27 where a `compositionEnd` is triggered\n        // without the corresponding `compositionStart` event when clicking a\n        // suggestion.\n        //\n        // If we don't add this, the `onBeforeInput` is triggered and passes\n        // through to the `before` plugin.\n\n        status = COMPOSING;\n        break;\n    }\n\n    compositionEndAction = 'reconcile';\n    nodes.add(anchorNode);\n    reconciler = new Executor(window, function () {\n      status = NONE;\n      reconcile(window, editor, {\n        from: 'onCompositionEnd:reconciler'\n      });\n      compositionEndAction = null;\n    });\n  }\n  /**\n   * On composition start.\n   *\n   * @param  {Event} event\n   * @param  {Editor} editor\n   * @param  {Function} next\n   */\n\n\n  function onCompositionStart(event, editor, next) {\n    debug('onCompositionStart', {\n      event: event\n    });\n    status = COMPOSING;\n    nodes.clear();\n  }\n  /**\n   * On composition update.\n   *\n   * @param  {Event} event\n   * @param  {Editor} editor\n   * @param  {Function} next\n   */\n\n\n  function onCompositionUpdate(event, editor, next) {\n    debug('onCompositionUpdate', {\n      event: event\n    });\n  }\n  /**\n   * On input.\n   *\n   * @param  {Event} event\n   * @param  {Editor} editor\n   * @param  {Function} next\n   */\n\n\n  function onInput(event, editor, next) {\n    debug('onInput', {\n      event: event,\n      status: status,\n      e: pick(event, ['data', 'nativeEvent', 'inputType', 'isComposing'])\n    });\n\n    switch (ANDROID_API_VERSION) {\n      case 24:\n      case 25:\n        break;\n\n      case 26:\n      case 27:\n      case 28:\n        var nativeEvent = event.nativeEvent;\n\n        if (ANDROID_API_VERSION === 28) {\n          // NOTE API 28:\n          // When a user hits space and then backspace in `middle` we end up\n          // with `midle`.\n          //\n          // This is because when the user hits space, the composition is not\n          // ended because `compositionEnd` is not called yet. When backspace is\n          // hit, the `compositionEnd` is called. We need to revert the DOM but\n          // the reconciler has not had a chance to run from the\n          // `compositionEnd` because it is set to run on the next\n          // `requestAnimationFrame`. When the backspace is carried out on the\n          // Slate Value, Slate doesn't know about the space yet so the\n          // backspace is carried out without the space cuasing us to lose a\n          // character.\n          //\n          // This fix forces Android to reconcile immediately after hitting\n          // the space.\n          //\n          // NOTE API 27:\n          // It is confirmed that this bug does not present itself on API27.\n          // A space fires a `compositionEnd` (as well as other events including\n          // an input that is a delete) so the reconciliation happens.\n          //\n          if (nativeEvent.inputType === 'insertText' && nativeEvent.data === ' ') {\n            if (reconciler) reconciler.cancel();\n            if (deleter) deleter.cancel();\n            reconcile(window, editor, {\n              from: 'onInput:space'\n            });\n            return;\n          }\n        }\n\n        if (ANDROID_API_VERSION === 26 || ANDROID_API_VERSION === 27) {\n          if (compositionEndAction === 'period') {\n            debug('onInput:period:abort'); // This means that there was a `beforeInput` that indicated the\n            // period was pressed. When a period is pressed, you get a bunch\n            // of delete actions mixed in. We want to ignore those. At this\n            // point, we add the current node to the list of things we need to\n            // resolve at the next compositionEnd. We know that a new\n            // composition will start right after this event so it is safe to\n            // do this.\n\n            var _window$getSelection = window.getSelection(),\n                anchorNode = _window$getSelection.anchorNode;\n\n            nodes.add(anchorNode);\n            return;\n          }\n        }\n\n        if (nativeEvent.inputType === 'deleteContentBackward') {\n          debug('onInput:delete', {\n            keyDownSnapshot: keyDownSnapshot\n          });\n\n          var _window = getWindow(event.target);\n\n          if (reconciler) reconciler.cancel();\n          if (deleter) deleter.cancel();\n          deleter = new Executor(_window, function () {\n            debug('onInput:delete:callback', {\n              keyDownSnapshot: keyDownSnapshot\n            });\n            keyDownSnapshot.apply(editor);\n            editor.deleteBackward();\n            deleter = null;\n          }, {\n            onCancel: function onCancel() {\n              deleter = null;\n            }\n          });\n          return;\n        }\n\n        if (status === COMPOSING) {\n          var _window$getSelection2 = window.getSelection(),\n              _anchorNode = _window$getSelection2.anchorNode;\n\n          nodes.add(_anchorNode);\n          return;\n        } // Some keys like '.' are input without compositions. This happens\n        // in API28. It might be happening in API 27 as well. Check by typing\n        // `It me. No.` On a blank line.\n\n\n        if (ANDROID_API_VERSION === 28) {\n          debug('onInput:fallback');\n\n          var _window$getSelection3 = window.getSelection(),\n              _anchorNode2 = _window$getSelection3.anchorNode;\n\n          nodes.add(_anchorNode2);\n          window.requestAnimationFrame(function () {\n            debug('onInput:fallback:callback');\n            reconcile(window, editor, {\n              from: 'onInput:fallback'\n            });\n          });\n          return;\n        }\n\n        break;\n\n      default:\n        if (status === COMPOSING) return;\n        next();\n    }\n  }\n  /**\n   * On key down.\n   *\n   * @param  {Event} event\n   * @param  {Editor} editor\n   * @param  {Function} next\n   */\n\n\n  function onKeyDown(event, editor, next) {\n    debug('onKeyDown', {\n      event: event,\n      status: status,\n      e: pick(event, ['char', 'charCode', 'code', 'key', 'keyCode', 'keyIdentifier', 'keyLocation', 'location', 'nativeEvent', 'which'])\n    });\n    var window = getWindow(event.target);\n\n    switch (ANDROID_API_VERSION) {\n      // 1. We want to allow enter keydown to allows go through\n      // 2. We want to deny keydown, I think, when it fires before the composition\n      //    or something. Need to remember what it was.\n      case 25:\n        // in API25 prevent other keys to fix clicking a word and then\n        // selecting an alternate suggestion.\n        //\n        // NOTE:\n        // The `setSelectionFromDom` is to allow hitting `Enter` to work\n        // because the selection needs to be in the right place; however,\n        // for now we've removed the cancelling of `onSelect` and everything\n        // appears to be working. Not sure why we removed `onSelect` though\n        // in API25.\n        if (event.key === 'Enter') {\n          // const window = getWindow(event.target)\n          // const selection = window.getSelection()\n          // setSelectionFromDom(window, editor, selection)\n          next();\n        }\n\n        break;\n\n      case 26:\n      case 27:\n        if (event.key === 'Enter') {\n          debug('onKeyDown:enter', {});\n\n          if (deleter) {\n            // If a `deleter` exists which means there was an onInput with\n            // `deleteContentBackward` that hasn't fired yet, then we know\n            // this is one of the cases where we have to revert to before\n            // the split.\n            deleter.cancel();\n            event.preventDefault();\n            window.requestAnimationFrame(function () {\n              debug('onKeyDown:enter:callback');\n              compositionEndSnapshot.apply(editor);\n              editor.splitBlock();\n            });\n          } else {\n            event.preventDefault(); // If there is no deleter, all we have to do is prevent the\n            // action before applying or splitBlock. In this scenario, we\n            // have to grab the selection from the DOM.\n\n            var domSelection = window.getSelection();\n            var selection = getSelectionFromDOM(window, editor, domSelection);\n            editor.moveTo(selection.anchor.key, selection.anchor.offset);\n            editor.splitBlock();\n          }\n\n          return;\n        } // We need to take a snapshot of the current selection and the\n        // element before when the user hits the backspace key. This is because\n        // we only know if the user hit backspace if the `onInput` event that\n        // follows has an `inputType` of `deleteContentBackward`. At that time\n        // it's too late to stop the event.\n\n\n        keyDownSnapshot = new DomSnapshot(window, editor, {\n          before: true\n        }); // If we let 'Enter' through it breaks handling of hitting\n        // enter at the beginning of a word so we need to stop it.\n\n        break;\n\n      case 28:\n        {\n          if (event.key === 'Enter') {\n            debug('onKeyDown:enter');\n            event.preventDefault();\n            if (reconciler) reconciler.cancel();\n            if (deleter) deleter.cancel();\n            window.requestAnimationFrame(function () {\n              reconcile(window, editor, {\n                from: 'onKeyDown:enter'\n              });\n              editor.splitBlock();\n            });\n            return;\n          } // We need to take a snapshot of the current selection and the\n          // element before when the user hits the backspace key. This is because\n          // we only know if the user hit backspace if the `onInput` event that\n          // follows has an `inputType` of `deleteContentBackward`. At that time\n          // it's too late to stop the event.\n\n\n          keyDownSnapshot = new DomSnapshot(window, editor, {\n            before: true\n          });\n          debug('onKeyDown:snapshot', {\n            keyDownSnapshot: keyDownSnapshot\n          });\n        } // If we let 'Enter' through it breaks handling of hitting\n        // enter at the beginning of a word so we need to stop it.\n\n        break;\n\n      default:\n        if (status !== COMPOSING) {\n          next();\n        }\n\n    }\n  }\n  /**\n   * On select.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onSelect(event, editor, next) {\n    debug('onSelect', {\n      event: event,\n      status: status\n    });\n\n    switch (ANDROID_API_VERSION) {\n      // We don't want to have the selection move around in an onSelect because\n      // it happens after we press `enter` in the same transaction. This\n      // causes the cursor position to not be properly placed.\n      case 26:\n      case 27:\n      case 28:\n        var _window2 = getWindow(event.target);\n\n        fixSelectionInZeroWidthBlock(_window2);\n        break;\n\n      default:\n        break;\n    }\n  }\n  /**\n   * Return the plugin.\n   *\n   * @type {Object}\n   */\n\n\n  return {\n    onBeforeInput: onBeforeInput,\n    onCompositionEnd: onCompositionEnd,\n    onCompositionStart: onCompositionStart,\n    onCompositionUpdate: onCompositionUpdate,\n    onInput: onInput,\n    onKeyDown: onKeyDown,\n    onSelect: onSelect\n  };\n}\n/**\n * The transfer types that Slate recognizes.\n *\n * @type {Object}\n */\n\n\nvar TRANSFER_TYPES = {\n  FRAGMENT: 'application/x-slate-fragment',\n  HTML: 'text/html',\n  NODE: 'application/x-slate-node',\n  RICH: 'text/rtf',\n  TEXT: 'text/plain'\n  /**\n   * Export.\n   *\n   * @type {Object}\n   */\n\n};\n/**\n * Find the DOM node for a `key`.\n *\n * @param {String|Node} key\n * @param {Window} win (optional)\n * @return {Element}\n */\n\nfunction findDOMNode(key) {\n  var win = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : window;\n\n  if (Node.isNode(key)) {\n    key = key.key;\n  }\n\n  var el = win.document.querySelector('[data-key=\"' + key + '\"]');\n\n  if (!el) {\n    throw new Error('Unable to find a DOM node for \"' + key + '\". This is often because of forgetting to add `props.attributes` to a custom component.');\n  }\n\n  return el;\n}\n/**\n * COMPAT: if we are in <= IE11 and the selection contains\n * tables, `removeAllRanges()` will throw\n * \"unable to complete the operation due to error 800a025e\"\n *\n * @param {Selection} selection document selection\n */\n\n\nfunction removeAllRanges(selection) {\n  var doc = window.document;\n\n  if (doc && doc.body.createTextRange) {\n    // All IE but Edge\n    var range = doc.body.createTextRange();\n    range.collapse();\n    range.select();\n  } else {\n    selection.removeAllRanges();\n  }\n}\n\nvar FRAGMENT = TRANSFER_TYPES.FRAGMENT;\nvar HTML = TRANSFER_TYPES.HTML;\nvar TEXT = TRANSFER_TYPES.TEXT;\n/**\n * Prepares a Slate document fragment to be copied to the clipboard.\n *\n * @param {Event} event\n * @param {Editor} editor\n */\n\nfunction cloneFragment(event, editor) {\n  var callback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function () {\n    return undefined;\n  };\n  invariant(!Value.isValue(editor), 'As of Slate 0.42.0, the `cloneFragment` utility takes an `editor` instead of a `value`.');\n  var window = getWindow(event.target);\n  var native = window.getSelection();\n  var value = editor.value;\n  var document = value.document,\n      fragment = value.fragment,\n      selection = value.selection;\n  var start = selection.start,\n      end = selection.end;\n  var startVoid = document.getClosestVoid(start.key, editor);\n  var endVoid = document.getClosestVoid(end.key, editor); // If the selection is collapsed, and it isn't inside a void node, abort.\n\n  if (native.isCollapsed && !startVoid) return; // Create a fake selection so that we can add a Base64-encoded copy of the\n  // fragment to the HTML, to decode on future pastes.\n\n  var encoded = Base64.serializeNode(fragment);\n  var range = native.getRangeAt(0);\n  var contents = range.cloneContents();\n  var attach = contents.childNodes[0]; // Make sure attach is a non-empty node, since empty nodes will not get copied\n\n  contents.childNodes.forEach(function (node) {\n    if (node.textContent && node.textContent.trim() !== '') {\n      attach = node;\n    }\n  }); // COMPAT: If the end node is a void node, we need to move the end of the\n  // range from the void node's spacer span, to the end of the void node's\n  // content, since the spacer is before void's content in the DOM.\n\n  if (endVoid) {\n    var r = range.cloneRange();\n    var node = findDOMNode(endVoid, window);\n    r.setEndAfter(node);\n    contents = r.cloneContents();\n  } // COMPAT: If the start node is a void node, we need to attach the encoded\n  // fragment to the void node's content node instead of the spacer, because\n  // attaching it to empty `<div>/<span>` nodes will end up having it erased by\n  // most browsers. (2018/04/27)\n\n\n  if (startVoid) {\n    attach = contents.childNodes[0].childNodes[1].firstChild;\n  } // Remove any zero-width space spans from the cloned DOM so that they don't\n  // show up elsewhere when pasted.\n\n\n  [].slice.call(contents.querySelectorAll(ZERO_WIDTH_SELECTOR)).forEach(function (zw) {\n    var isNewline = zw.getAttribute(ZERO_WIDTH_ATTRIBUTE) === 'n';\n    zw.textContent = isNewline ? '\\n' : '';\n  }); // Set a `data-slate-fragment` attribute on a non-empty node, so it shows up\n  // in the HTML, and can be used for intra-Slate pasting. If it's a text\n  // node, wrap it in a `<span>` so we have something to set an attribute on.\n\n  if (attach.nodeType === 3) {\n    var span = window.document.createElement('span'); // COMPAT: In Chrome and Safari, if we don't add the `white-space` style\n    // then leading and trailing spaces will be ignored. (2017/09/21)\n\n    span.style.whiteSpace = 'pre';\n    span.appendChild(attach);\n    contents.appendChild(span);\n    attach = span;\n  }\n\n  attach.setAttribute('data-slate-fragment', encoded); //  Creates value from only the selected blocks\n  //  Then gets plaintext for clipboard with proper linebreaks for BLOCK elements\n  //  Via Plain serializer\n\n  var valFromSelection = Value.create({\n    document: fragment\n  });\n  var plainText = Plain.serialize(valFromSelection); // Add the phony content to a div element. This is needed to copy the\n  // contents into the html clipboard register.\n\n  var div = window.document.createElement('div');\n  div.appendChild(contents); // For browsers supporting it, we set the clipboard registers manually,\n  // since the result is more predictable.\n  // COMPAT: IE supports the setData method, but only in restricted sense.\n  // IE doesn't support arbitrary MIME types or common ones like 'text/plain';\n  // it only accepts \"Text\" (which gets mapped to 'text/plain') and \"Url\"\n  // (mapped to 'text/url-list'); so, we should only enter block if !IS_IE\n\n  if (event.clipboardData && event.clipboardData.setData && !IS_IE) {\n    event.preventDefault();\n    event.clipboardData.setData(TEXT, plainText);\n    event.clipboardData.setData(FRAGMENT, encoded);\n    event.clipboardData.setData(HTML, div.innerHTML);\n    callback();\n    return;\n  } // COMPAT: For browser that don't support the Clipboard API's setData method,\n  // we must rely on the browser to natively copy what's selected.\n  // So we add the div (containing our content) to the DOM, and select it.\n\n\n  var editorEl = event.target.closest('[data-slate-editor]');\n  div.setAttribute('contenteditable', true);\n  div.style.position = 'absolute';\n  div.style.left = '-9999px';\n  editorEl.appendChild(div);\n  native.selectAllChildren(div); // Revert to the previous selection right after copying.\n\n  window.requestAnimationFrame(function () {\n    editorEl.removeChild(div);\n    removeAllRanges(native);\n    native.addRange(range);\n    callback();\n  });\n}\n/**\n * Find a Slate node from a DOM `element`.\n *\n * @param {Element} element\n * @param {Editor} editor\n * @return {Node|Null}\n */\n\n\nfunction findNode(element, editor) {\n  invariant(!Value.isValue(editor), 'As of Slate 0.42.0, the `findNode` utility takes an `editor` instead of a `value`.');\n  var closest = element.closest('[data-key]');\n  if (!closest) return null;\n  var key = closest.getAttribute('data-key');\n  if (!key) return null;\n  var value = editor.value;\n  var document = value.document;\n  var node = document.getNode(key);\n  return node || null;\n}\n/**\n * Get the target range from a DOM `event`.\n *\n * @param {Event} event\n * @param {Editor} editor\n * @return {Range}\n */\n\n\nfunction getEventRange(event, editor) {\n  invariant(!Value.isValue(editor), 'As of Slate 0.42.0, the `findNode` utility takes an `editor` instead of a `value`.');\n\n  if (event.nativeEvent) {\n    event = event.nativeEvent;\n  }\n\n  var _event = event,\n      x = _event.clientX,\n      y = _event.clientY,\n      target = _event.target;\n  if (x == null || y == null) return null;\n  var value = editor.value;\n  var document = value.document;\n  var node = findNode(target, editor);\n  if (!node) return null; // If the drop target is inside a void node, move it into either the next or\n  // previous node, depending on which side the `x` and `y` coordinates are\n  // closest to.\n\n  if (editor.query('isVoid', node)) {\n    var rect = target.getBoundingClientRect();\n    var isPrevious = node.object === 'inline' ? x - rect.left < rect.left + rect.width - x : y - rect.top < rect.top + rect.height - y;\n    var text = node.getFirstText();\n\n    var _range = document.createRange();\n\n    if (isPrevious) {\n      var previousText = document.getPreviousText(text.key);\n\n      if (previousText) {\n        return _range.moveToEndOfNode(previousText);\n      }\n    }\n\n    var nextText = document.getNextText(text.key);\n    return nextText ? _range.moveToStartOfNode(nextText) : null;\n  } // Else resolve a range from the caret position where the drop occured.\n\n\n  var window = getWindow(target);\n  var native = void 0; // COMPAT: In Firefox, `caretRangeFromPoint` doesn't exist. (2016/07/25)\n\n  if (window.document.caretRangeFromPoint) {\n    native = window.document.caretRangeFromPoint(x, y);\n  } else if (window.document.caretPositionFromPoint) {\n    var position = window.document.caretPositionFromPoint(x, y);\n    native = window.document.createRange();\n    native.setStart(position.offsetNode, position.offset);\n    native.setEnd(position.offsetNode, position.offset);\n  } else if (window.document.body.createTextRange) {\n    // COMPAT: In IE, `caretRangeFromPoint` and\n    // `caretPositionFromPoint` don't exist. (2018/07/11)\n    native = window.document.body.createTextRange();\n\n    try {\n      native.moveToPoint(x, y);\n    } catch (error) {\n      // IE11 will raise an `unspecified error` if `moveToPoint` is\n      // called during a dropEvent.\n      return null;\n    }\n  } // Resolve a Slate range from the DOM range.\n\n\n  var range = findRange(native, editor);\n  if (!range) return null;\n  return range;\n}\n/**\n * Transfer types.\n *\n * @type {String}\n */\n\n\nvar FRAGMENT$1 = TRANSFER_TYPES.FRAGMENT;\nvar HTML$1 = TRANSFER_TYPES.HTML;\nvar NODE = TRANSFER_TYPES.NODE;\nvar RICH = TRANSFER_TYPES.RICH;\nvar TEXT$1 = TRANSFER_TYPES.TEXT;\n/**\n * Fragment matching regexp for HTML nodes.\n *\n * @type {RegExp}\n */\n\nvar FRAGMENT_MATCHER = / data-slate-fragment=\"([^\\s\"]+)\"/;\n/**\n * Get the transfer data from an `event`.\n *\n * @param {Event} event\n * @return {Object}\n */\n\nfunction getEventTransfer(event) {\n  // COMPAT: IE 11 doesn't populate nativeEvent with either\n  // dataTransfer or clipboardData. We'll need to use the base event\n  // object (2018/14/6)\n  if (!IS_IE && event.nativeEvent) {\n    event = event.nativeEvent;\n  }\n\n  var transfer = event.dataTransfer || event.clipboardData;\n  var fragment = getType(transfer, FRAGMENT$1);\n  var node = getType(transfer, NODE);\n  var html = getType(transfer, HTML$1);\n  var rich = getType(transfer, RICH);\n  var text = getType(transfer, TEXT$1);\n  var files = void 0; // If there isn't a fragment, but there is HTML, check to see if the HTML is\n  // actually an encoded fragment.\n\n  if (!fragment && html && ~html.indexOf(' data-slate-fragment=\"')) {\n    var matches = FRAGMENT_MATCHER.exec(html);\n\n    var _matches = slicedToArray(matches, 2),\n        full = _matches[0],\n        encoded = _matches[1]; // eslint-disable-line no-unused-vars\n\n\n    if (encoded) fragment = encoded;\n  } // COMPAT: Edge doesn't handle custom data types\n  // These will be embedded in text/plain in this case (2017/7/12)\n\n\n  if (text) {\n    var embeddedTypes = getEmbeddedTypes(text);\n    if (embeddedTypes[FRAGMENT$1]) fragment = embeddedTypes[FRAGMENT$1];\n    if (embeddedTypes[NODE]) node = embeddedTypes[NODE];\n    if (embeddedTypes[TEXT$1]) text = embeddedTypes[TEXT$1];\n  } // Decode a fragment or node if they exist.\n\n\n  if (fragment) fragment = Base64.deserializeNode(fragment);\n  if (node) node = Base64.deserializeNode(node); // COMPAT: Edge sometimes throws 'NotSupportedError'\n  // when accessing `transfer.items` (2017/7/12)\n\n  try {\n    // Get and normalize files if they exist.\n    if (transfer.items && transfer.items.length) {\n      files = Array.from(transfer.items).map(function (item) {\n        return item.kind === 'file' ? item.getAsFile() : null;\n      }).filter(function (exists) {\n        return exists;\n      });\n    } else if (transfer.files && transfer.files.length) {\n      files = Array.from(transfer.files);\n    }\n  } catch (err) {\n    if (transfer.files && transfer.files.length) {\n      files = Array.from(transfer.files);\n    }\n  } // Determine the type of the data.\n\n\n  var data = {\n    files: files,\n    fragment: fragment,\n    html: html,\n    node: node,\n    rich: rich,\n    text: text\n  };\n  data.type = getTransferType(data);\n  return data;\n}\n/**\n * Takes text input, checks whether contains embedded data\n * and returns object with original text +/- additional data\n *\n * @param {String} text\n * @return {Object}\n */\n\n\nfunction getEmbeddedTypes(text) {\n  var prefix = 'SLATE-DATA-EMBED::';\n\n  if (text.substring(0, prefix.length) !== prefix) {\n    return {\n      TEXT: text\n    };\n  } // Attempt to parse, if fails then just standard text/plain\n  // Otherwise, already had data embedded\n\n\n  try {\n    return JSON.parse(text.substring(prefix.length));\n  } catch (err) {\n    throw new Error('Unable to parse custom Slate drag event data.');\n  }\n}\n/**\n * Get the type of a transfer from its `data`.\n *\n * @param {Object} data\n * @return {String}\n */\n\n\nfunction getTransferType(data) {\n  if (data.fragment) return 'fragment';\n  if (data.node) return 'node'; // COMPAT: Microsoft Word adds an image of the selected text to the data.\n  // Since files are preferred over HTML or text, this would cause the type to\n  // be considered `files`. But it also adds rich text data so we can check\n  // for that and properly set the type to `html` or `text`. (2016/11/21)\n\n  if (data.rich && data.html) return 'html';\n  if (data.rich && data.text) return 'text';\n  if (data.files && data.files.length) return 'files';\n  if (data.html) return 'html';\n  if (data.text) return 'text';\n  return 'unknown';\n}\n/**\n * Get one of types `TYPES.FRAGMENT`, `TYPES.NODE`, `text/html`, `text/rtf` or\n * `text/plain` from transfers's `data` if possible, otherwise return null.\n *\n * @param {Object} transfer\n * @param {String} type\n * @return {String}\n */\n\n\nfunction getType(transfer, type) {\n  if (!transfer.types || !transfer.types.length) {\n    // COMPAT: In IE 11, there is no `types` field but `getData('Text')`\n    // is supported`. (2017/06/23)\n    return type === TEXT$1 ? transfer.getData('Text') || null : null;\n  } // COMPAT: In Edge, transfer.types doesn't respond to `indexOf`. (2017/10/25)\n\n\n  var types = Array.from(transfer.types);\n  return types.indexOf(type) !== -1 ? transfer.getData(type) || null : null;\n}\n/**\n * The default plain text transfer type.\n *\n * @type {String}\n */\n\n\nvar TEXT$2 = TRANSFER_TYPES.TEXT;\n/**\n * Set data with `type` and `content` on an `event`.\n *\n * COMPAT: In Edge, custom types throw errors, so embed all non-standard\n * types in text/plain compound object. (2017/7/12)\n *\n * @param {Event} event\n * @param {String} type\n * @param {String} content\n */\n\nfunction setEventTransfer(event, type, content) {\n  var mime = TRANSFER_TYPES[type.toUpperCase()];\n\n  if (!mime) {\n    throw new Error('Cannot set unknown transfer type \"' + mime + '\".');\n  }\n\n  if (event.nativeEvent) {\n    event = event.nativeEvent;\n  }\n\n  var transfer = event.dataTransfer || event.clipboardData;\n\n  try {\n    transfer.setData(mime, content); // COMPAT: Safari needs to have the 'text' (and not 'text/plain') value in dataTransfer\n    // to display the cursor while dragging internally.\n\n    transfer.setData('text', transfer.getData('text'));\n  } catch (err) {\n    var prefix = 'SLATE-DATA-EMBED::';\n    var text = transfer.getData(TEXT$2);\n    var obj = {}; // If the existing plain text data is prefixed, it's Slate JSON data.\n\n    if (text.substring(0, prefix.length) === prefix) {\n      try {\n        obj = JSON.parse(text.substring(prefix.length));\n      } catch (e) {\n        throw new Error('Failed to parse Slate data from `DataTransfer` object.');\n      }\n    } else {\n      // Otherwise, it's just set it as is.\n      obj[TEXT$2] = text;\n    }\n\n    obj[mime] = content;\n    var string = '' + prefix + JSON.stringify(obj);\n    transfer.setData(TEXT$2, string);\n  }\n}\n/**\n * Debug.\n *\n * @type {Function}\n */\n\n\nvar debug$1 = Debug('slate:after');\n/**\n * A plugin that adds the \"after\" browser-specific logic to the editor.\n *\n * @param {Object} options\n * @return {Object}\n */\n\nfunction AfterPlugin() {\n  var isDraggingInternally = null;\n  var isMouseDown = false;\n  /**\n   * On before input.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n  function onBeforeInput(event, editor, next) {\n    var value = editor.value;\n    var isSynthetic = !!event.nativeEvent; // If the event is synthetic, it's React's polyfill of `beforeinput` that\n    // isn't a true `beforeinput` event with meaningful information. It only\n    // gets triggered for character insertions, so we can just insert directly.\n\n    if (isSynthetic) {\n      event.preventDefault();\n      editor.insertText(event.data);\n      return next();\n    } // Otherwise, we can use the information in the `beforeinput` event to\n    // figure out the exact change that will occur, and prevent it.\n\n\n    var _event$getTargetRange = event.getTargetRanges(),\n        _event$getTargetRange2 = slicedToArray(_event$getTargetRange, 1),\n        targetRange = _event$getTargetRange2[0];\n\n    if (!targetRange) return next();\n    debug$1('onBeforeInput', {\n      event: event\n    });\n    event.preventDefault();\n    var document = value.document,\n        selection = value.selection;\n    var range = findRange(targetRange, editor);\n\n    switch (event.inputType) {\n      case 'deleteByDrag':\n      case 'deleteByCut':\n      case 'deleteContent':\n      case 'deleteContentBackward':\n      case 'deleteContentForward':\n        {\n          editor.deleteAtRange(range);\n          break;\n        }\n\n      case 'deleteWordBackward':\n        {\n          editor.deleteWordBackwardAtRange(range);\n          break;\n        }\n\n      case 'deleteWordForward':\n        {\n          editor.deleteWordForwardAtRange(range);\n          break;\n        }\n\n      case 'deleteSoftLineBackward':\n      case 'deleteHardLineBackward':\n        {\n          editor.deleteLineBackwardAtRange(range);\n          break;\n        }\n\n      case 'deleteSoftLineForward':\n      case 'deleteHardLineForward':\n        {\n          editor.deleteLineForwardAtRange(range);\n          break;\n        }\n\n      case 'insertLineBreak':\n      case 'insertParagraph':\n        {\n          var hasVoidParent = document.hasVoidParent(selection.start.path, editor);\n\n          if (hasVoidParent) {\n            editor.moveToStartOfNextText();\n          } else {\n            editor.splitBlockAtRange(range);\n          }\n\n          break;\n        }\n\n      case 'insertFromYank':\n      case 'insertReplacementText':\n      case 'insertText':\n        {\n          // COMPAT: `data` should have the text for the `insertText` input type\n          // and `dataTransfer` should have the text for the\n          // `insertReplacementText` input type, but Safari uses `insertText` for\n          // spell check replacements and sets `data` to `null`. (2018/08/09)\n          var text = event.data == null ? event.dataTransfer.getData('text/plain') : event.data;\n          if (text == null) break;\n          editor.insertTextAtRange(range, text, selection.marks); // If the text was successfully inserted, and the selection had marks\n          // on it, unset the selection's marks.\n\n          if (selection.marks && value.document !== editor.value.document) {\n            editor.select({\n              marks: null\n            });\n          }\n\n          break;\n        }\n    }\n\n    next();\n  }\n  /**\n   * On blur.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onBlur(event, editor, next) {\n    debug$1('onBlur', {\n      event: event\n    });\n    editor.blur();\n    next();\n  }\n  /**\n   * On click.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onClick(event, editor, next) {\n    if (editor.readOnly) return next();\n    var value = editor.value;\n    var document = value.document;\n    var node = findNode(event.target, editor);\n    if (!node) return next();\n    debug$1('onClick', {\n      event: event\n    });\n    var ancestors = document.getAncestors(node.key);\n    var isVoid = node && (editor.isVoid(node) || ancestors.some(function (a) {\n      return editor.isVoid(a);\n    }));\n\n    if (isVoid) {\n      // COMPAT: In Chrome & Safari, selections that are at the zero offset of\n      // an inline node will be automatically replaced to be at the last offset\n      // of a previous inline node, which screws us up, so we always want to set\n      // it to the end of the node. (2016/11/29)\n      editor.focus().moveToEndOfNode(node);\n    }\n\n    next();\n  }\n  /**\n   * On copy.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onCopy(event, editor, next) {\n    debug$1('onCopy', {\n      event: event\n    });\n    cloneFragment(event, editor);\n    next();\n  }\n  /**\n   * On cut.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onCut(event, editor, next) {\n    debug$1('onCut', {\n      event: event\n    }); // Once the fake cut content has successfully been added to the clipboard,\n    // delete the content in the current selection.\n\n    cloneFragment(event, editor, function () {\n      // If user cuts a void block node or a void inline node,\n      // manually removes it since selection is collapsed in this case.\n      var value = editor.value;\n      var endBlock = value.endBlock,\n          endInline = value.endInline,\n          selection = value.selection;\n      var isCollapsed = selection.isCollapsed;\n      var isVoidBlock = endBlock && editor.isVoid(endBlock) && isCollapsed;\n      var isVoidInline = endInline && editor.isVoid(endInline) && isCollapsed;\n\n      if (isVoidBlock) {\n        editor.removeNodeByKey(endBlock.key);\n      } else if (isVoidInline) {\n        editor.removeNodeByKey(endInline.key);\n      } else {\n        editor.delete();\n      }\n    });\n    next();\n  }\n  /**\n   * On drag end.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onDragEnd(event, editor, next) {\n    debug$1('onDragEnd', {\n      event: event\n    });\n    isDraggingInternally = null;\n    next();\n  }\n  /**\n   * On drag start.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onDragStart(event, editor, next) {\n    debug$1('onDragStart', {\n      event: event\n    });\n    isDraggingInternally = true;\n    var value = editor.value;\n    var document = value.document;\n    var node = findNode(event.target, editor);\n    var ancestors = document.getAncestors(node.key);\n    var isVoid = node && (editor.isVoid(node) || ancestors.some(function (a) {\n      return editor.isVoid(a);\n    }));\n    var selectionIncludesNode = value.blocks.some(function (block) {\n      return block.key === node.key;\n    }); // If a void block is dragged and is not selected, select it (necessary for local drags).\n\n    if (isVoid && !selectionIncludesNode) {\n      editor.moveToRangeOfNode(node);\n    }\n\n    var fragment = editor.value.fragment;\n    var encoded = Base64.serializeNode(fragment);\n    setEventTransfer(event, 'fragment', encoded);\n    next();\n  }\n  /**\n   * On drop.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onDrop(event, editor, next) {\n    var value = editor.value;\n    var document = value.document,\n        selection = value.selection;\n    var window = getWindow(event.target);\n    var target = getEventRange(event, editor);\n    if (!target) return next();\n    debug$1('onDrop', {\n      event: event\n    });\n    var transfer = getEventTransfer(event);\n    var type = transfer.type,\n        fragment = transfer.fragment,\n        text = transfer.text;\n    editor.focus(); // If the drag is internal and the target is after the selection, it\n    // needs to account for the selection's content being deleted.\n\n    if (isDraggingInternally && selection.end.key === target.end.key && selection.end.offset < target.end.offset) {\n      target = target.moveForward(selection.start.key === selection.end.key ? 0 - selection.end.offset + selection.start.offset : 0 - selection.end.offset);\n    }\n\n    if (isDraggingInternally) {\n      editor.delete();\n    }\n\n    editor.select(target);\n\n    if (type === 'text' || type === 'html') {\n      var _target = target,\n          anchor = _target.anchor;\n      var hasVoidParent = document.hasVoidParent(anchor.key, editor);\n\n      if (hasVoidParent) {\n        var n = document.getNode(anchor.key);\n\n        while (hasVoidParent) {\n          n = document.getNextText(n.key);\n          if (!n) break;\n          hasVoidParent = document.hasVoidParent(n.key, editor);\n        }\n\n        if (n) editor.moveToStartOfNode(n);\n      }\n\n      if (text) {\n        text.split('\\n').forEach(function (line, i) {\n          if (i > 0) editor.splitBlock();\n          editor.insertText(line);\n        });\n      }\n    }\n\n    if (type === 'fragment') {\n      editor.insertFragment(fragment);\n    } // COMPAT: React's onSelect event breaks after an onDrop event\n    // has fired in a node: https://github.com/facebook/react/issues/11379.\n    // Until this is fixed in React, we dispatch a mouseup event on that\n    // DOM node, since that will make it go back to normal.\n\n\n    var focusNode = document.getNode(target.focus.key);\n    var el = findDOMNode(focusNode, window);\n\n    if (el) {\n      el.dispatchEvent(new MouseEvent('mouseup', {\n        view: window,\n        bubbles: true,\n        cancelable: true\n      }));\n    }\n\n    next();\n  }\n  /**\n   * On focus.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onFocus(event, editor, next) {\n    debug$1('onFocus', {\n      event: event\n    }); // COMPAT: If the focus event is a mouse-based one, it will be shortly\n    // followed by a `selectionchange`, so we need to deselect here to prevent\n    // the old selection from being set by the `updateSelection` of `<Content>`,\n    // preventing the `selectionchange` from firing. (2018/11/07)\n\n    if (isMouseDown && !IS_IE && !IS_EDGE) {\n      editor.deselect().focus();\n    } else {\n      editor.focus();\n    }\n\n    next();\n  }\n  /**\n   * On input.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onInput(event, editor, next) {\n    debug$1('onInput');\n    var window = getWindow(event.target); // Get the selection point.\n\n    var selection = window.getSelection();\n    var anchorNode = selection.anchorNode;\n    setTextFromDomNode(window, editor, anchorNode);\n    setSelectionFromDOM(window, editor, selection);\n    next();\n  }\n  /**\n   * On key down.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onKeyDown(event, editor, next) {\n    debug$1('onKeyDown', {\n      event: event\n    });\n    var value = editor.value;\n    var document = value.document,\n        selection = value.selection;\n    var hasVoidParent = document.hasVoidParent(selection.start.path, editor); // COMPAT: In iOS, some of these hotkeys are handled in the\n    // `onNativeBeforeInput` handler of the `<Content>` component in order to\n    // preserve native autocorrect behavior, so they shouldn't be handled here.\n\n    if (Hotkeys.isSplitBlock(event) && !IS_IOS) {\n      return hasVoidParent ? editor.moveToStartOfNextText() : editor.splitBlock();\n    }\n\n    if (Hotkeys.isDeleteBackward(event) && !IS_IOS) {\n      return editor.deleteCharBackward();\n    }\n\n    if (Hotkeys.isDeleteForward(event) && !IS_IOS) {\n      return editor.deleteCharForward();\n    }\n\n    if (Hotkeys.isDeleteLineBackward(event)) {\n      return editor.deleteLineBackward();\n    }\n\n    if (Hotkeys.isDeleteLineForward(event)) {\n      return editor.deleteLineForward();\n    }\n\n    if (Hotkeys.isDeleteWordBackward(event)) {\n      return editor.deleteWordBackward();\n    }\n\n    if (Hotkeys.isDeleteWordForward(event)) {\n      return editor.deleteWordForward();\n    }\n\n    if (Hotkeys.isRedo(event)) {\n      return editor.redo();\n    }\n\n    if (Hotkeys.isUndo(event)) {\n      return editor.undo();\n    } // COMPAT: Certain browsers don't handle the selection updates properly. In\n    // Chrome, the selection isn't properly extended. And in Firefox, the\n    // selection isn't properly collapsed. (2017/10/17)\n\n\n    if (Hotkeys.isMoveLineBackward(event)) {\n      event.preventDefault();\n      return editor.moveToStartOfBlock();\n    }\n\n    if (Hotkeys.isMoveLineForward(event)) {\n      event.preventDefault();\n      return editor.moveToEndOfBlock();\n    }\n\n    if (Hotkeys.isExtendLineBackward(event)) {\n      event.preventDefault();\n      return editor.moveFocusToStartOfBlock();\n    }\n\n    if (Hotkeys.isExtendLineForward(event)) {\n      event.preventDefault();\n      return editor.moveFocusToEndOfBlock();\n    } // COMPAT: If a void node is selected, or a zero-width text node adjacent to\n    // an inline is selected, we need to handle these hotkeys manually because\n    // browsers won't know what to do.\n\n\n    if (Hotkeys.isMoveBackward(event)) {\n      event.preventDefault();\n\n      if (!selection.isCollapsed) {\n        return editor.moveToStart();\n      }\n\n      return editor.moveBackward();\n    }\n\n    if (Hotkeys.isMoveForward(event)) {\n      event.preventDefault();\n\n      if (!selection.isCollapsed) {\n        return editor.moveToEnd();\n      }\n\n      return editor.moveForward();\n    }\n\n    if (Hotkeys.isMoveWordBackward(event)) {\n      event.preventDefault();\n      return editor.moveWordBackward();\n    }\n\n    if (Hotkeys.isMoveWordForward(event)) {\n      event.preventDefault();\n      return editor.moveWordForward();\n    }\n\n    if (Hotkeys.isExtendBackward(event)) {\n      var previousText = value.previousText,\n          startText = value.startText;\n      var isPreviousInVoid = previousText && document.hasVoidParent(previousText.key, editor);\n\n      if (hasVoidParent || isPreviousInVoid || startText.text === '') {\n        event.preventDefault();\n        return editor.moveFocusBackward();\n      }\n    }\n\n    if (Hotkeys.isExtendForward(event)) {\n      var nextText = value.nextText,\n          _startText = value.startText;\n      var isNextInVoid = nextText && document.hasVoidParent(nextText.key, editor);\n\n      if (hasVoidParent || isNextInVoid || _startText.text === '') {\n        event.preventDefault();\n        return editor.moveFocusForward();\n      }\n    }\n\n    next();\n  }\n  /**\n   * On mouse down.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onMouseDown(event, editor, next) {\n    debug$1('onMouseDown', {\n      event: event\n    });\n    isMouseDown = true;\n    next();\n  }\n  /**\n   * On mouse up.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onMouseUp(event, editor, next) {\n    debug$1('onMouseUp', {\n      event: event\n    });\n    isMouseDown = false;\n    next();\n  }\n  /**\n   * On paste.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onPaste(event, editor, next) {\n    debug$1('onPaste', {\n      event: event\n    });\n    var value = editor.value;\n    var transfer = getEventTransfer(event);\n    var type = transfer.type,\n        fragment = transfer.fragment,\n        text = transfer.text;\n\n    if (type === 'fragment') {\n      editor.insertFragment(fragment);\n    }\n\n    if (type === 'text' || type === 'html') {\n      if (!text) return next();\n      var document = value.document,\n          selection = value.selection,\n          startBlock = value.startBlock;\n      if (editor.isVoid(startBlock)) return next();\n      var defaultBlock = startBlock;\n      var defaultMarks = document.getInsertMarksAtRange(selection);\n      var frag = Plain.deserialize(text, {\n        defaultBlock: defaultBlock,\n        defaultMarks: defaultMarks\n      }).document;\n      editor.insertFragment(frag);\n    }\n\n    next();\n  }\n  /**\n   * On select.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onSelect(event, editor, next) {\n    debug$1('onSelect', {\n      event: event\n    });\n    var window = getWindow(event.target);\n    var selection = window.getSelection();\n    setSelectionFromDOM(window, editor, selection); // COMPAT: reset the `isMouseDown` state here in case a `mouseup` event\n    // happens outside the editor. This is needed for `onFocus` handling.\n\n    isMouseDown = false;\n    next();\n  }\n  /**\n   * Return the plugin.\n   *\n   * @type {Object}\n   */\n\n\n  return {\n    onBeforeInput: onBeforeInput,\n    onBlur: onBlur,\n    onClick: onClick,\n    onCopy: onCopy,\n    onCut: onCut,\n    onDragEnd: onDragEnd,\n    onDragStart: onDragStart,\n    onDrop: onDrop,\n    onFocus: onFocus,\n    onInput: onInput,\n    onKeyDown: onKeyDown,\n    onMouseDown: onMouseDown,\n    onMouseUp: onMouseUp,\n    onPaste: onPaste,\n    onSelect: onSelect\n  };\n}\n/**\n * Debug.\n *\n * @type {Function}\n */\n\n\nvar debug$2 = Debug('slate:before');\n/**\n * A plugin that adds the \"before\" browser-specific logic to the editor.\n *\n * @return {Object}\n */\n\nfunction BeforePlugin() {\n  var activeElement = null;\n  var compositionCount = 0;\n  var isComposing = false;\n  var isCopying = false;\n  var isDragging = false;\n  /**\n   * On before input.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n  function onBeforeInput(event, editor, next) {\n    var isSynthetic = !!event.nativeEvent;\n    if (editor.readOnly) return; // COMPAT: If the browser supports Input Events Level 2, we will have\n    // attached a custom handler for the real `beforeinput` events, instead of\n    // allowing React's synthetic polyfill, so we need to ignore synthetics.\n\n    if (isSynthetic && HAS_INPUT_EVENTS_LEVEL_2) return;\n    debug$2('onBeforeInput', {\n      event: event\n    });\n    next();\n  }\n  /**\n   * On blur.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onBlur(event, editor, next) {\n    if (isCopying) return;\n    if (editor.readOnly) return;\n    var relatedTarget = event.relatedTarget,\n        target = event.target;\n    var window = getWindow(target); // COMPAT: If the current `activeElement` is still the previous one, this is\n    // due to the window being blurred when the tab itself becomes unfocused, so\n    // we want to abort early to allow to editor to stay focused when the tab\n    // becomes focused again.\n\n    if (activeElement === window.document.activeElement) return; // COMPAT: The `relatedTarget` can be null when the new focus target is not\n    // a \"focusable\" element (eg. a `<div>` without `tabindex` set).\n\n    if (relatedTarget) {\n      var el = ReactDOM.findDOMNode(editor); // COMPAT: The event should be ignored if the focus is returning to the\n      // editor from an embedded editable element (eg. an <input> element inside\n      // a void node).\n\n      if (relatedTarget === el) return; // COMPAT: The event should be ignored if the focus is moving from the\n      // editor to inside a void node's spacer element.\n\n      if (relatedTarget.hasAttribute('data-slate-spacer')) return; // COMPAT: The event should be ignored if the focus is moving to a non-\n      // editable section of an element that isn't a void node (eg. a list item\n      // of the check list example).\n\n      var node = findNode(relatedTarget, editor);\n      if (el.contains(relatedTarget) && node && !editor.isVoid(node)) return;\n    }\n\n    debug$2('onBlur', {\n      event: event\n    });\n    next();\n  }\n  /**\n   * On composition end.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onCompositionEnd(event, editor, next) {\n    var n = compositionCount; // The `count` check here ensures that if another composition starts\n    // before the timeout has closed out this one, we will abort unsetting the\n    // `isComposing` flag, since a composition is still in affect.\n\n    window.requestAnimationFrame(function () {\n      if (compositionCount > n) return;\n      isComposing = false;\n    });\n    debug$2('onCompositionEnd', {\n      event: event\n    });\n    next();\n  }\n  /**\n   * On click.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onClick(event, editor, next) {\n    debug$2('onClick', {\n      event: event\n    });\n    next();\n  }\n  /**\n   * On composition start.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onCompositionStart(event, editor, next) {\n    isComposing = true;\n    compositionCount++;\n    var value = editor.value;\n    var selection = value.selection;\n\n    if (!selection.isCollapsed) {\n      // https://github.com/ianstormtaylor/slate/issues/1879\n      // When composition starts and the current selection is not collapsed, the\n      // second composition key-down would drop the text wrapping <spans> which\n      // resulted on crash in content.updateSelection after composition ends\n      // (because it cannot find <span> nodes in DOM). This is a workaround that\n      // erases selection as soon as composition starts and preventing <spans>\n      // to be dropped.\n      editor.delete();\n    }\n\n    debug$2('onCompositionStart', {\n      event: event\n    });\n    next();\n  }\n  /**\n   * On copy.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onCopy(event, editor, next) {\n    var window = getWindow(event.target);\n    isCopying = true;\n    window.requestAnimationFrame(function () {\n      return isCopying = false;\n    });\n    debug$2('onCopy', {\n      event: event\n    });\n    next();\n  }\n  /**\n   * On cut.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onCut(event, editor, next) {\n    if (editor.readOnly) return;\n    var window = getWindow(event.target);\n    isCopying = true;\n    window.requestAnimationFrame(function () {\n      return isCopying = false;\n    });\n    debug$2('onCut', {\n      event: event\n    });\n    next();\n  }\n  /**\n   * On drag end.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onDragEnd(event, editor, next) {\n    isDragging = false;\n    debug$2('onDragEnd', {\n      event: event\n    });\n    next();\n  }\n  /**\n   * On drag enter.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onDragEnter(event, editor, next) {\n    debug$2('onDragEnter', {\n      event: event\n    });\n    next();\n  }\n  /**\n   * On drag exit.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onDragExit(event, editor, next) {\n    debug$2('onDragExit', {\n      event: event\n    });\n    next();\n  }\n  /**\n   * On drag leave.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onDragLeave(event, editor, next) {\n    debug$2('onDragLeave', {\n      event: event\n    });\n    next();\n  }\n  /**\n   * On drag over.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onDragOver(event, editor, next) {\n    // If the target is inside a void node, and only in this case,\n    // call `preventDefault` to signal that drops are allowed.\n    // When the target is editable, dropping is already allowed by\n    // default, and calling `preventDefault` hides the cursor.\n    var node = findNode(event.target, editor);\n    if (editor.isVoid(node)) event.preventDefault(); // COMPAT: IE won't call onDrop on contentEditables unless the\n    // default dragOver is prevented:\n    // https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/913982/\n    // (2018/07/11)\n\n    if (IS_IE) {\n      event.preventDefault();\n    } // If a drag is already in progress, don't do this again.\n\n\n    if (!isDragging) {\n      isDragging = true; // COMPAT: IE will raise an `unspecified error` if dropEffect is\n      // set. (2018/07/11)\n\n      if (!IS_IE) {\n        event.nativeEvent.dataTransfer.dropEffect = 'move';\n      }\n    }\n\n    debug$2('onDragOver', {\n      event: event\n    });\n    next();\n  }\n  /**\n   * On drag start.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onDragStart(event, editor, next) {\n    isDragging = true;\n    debug$2('onDragStart', {\n      event: event\n    });\n    next();\n  }\n  /**\n   * On drop.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onDrop(event, editor, next) {\n    if (editor.readOnly) return; // Prevent default so the DOM's value isn't corrupted.\n\n    event.preventDefault();\n    debug$2('onDrop', {\n      event: event\n    });\n    next();\n  }\n  /**\n   * On focus.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onFocus(event, editor, next) {\n    if (isCopying) return;\n    if (editor.readOnly) return;\n    var el = ReactDOM.findDOMNode(editor); // Save the new `activeElement`.\n\n    var window = getWindow(event.target);\n    activeElement = window.document.activeElement; // COMPAT: If the editor has nested editable elements, the focus can go to\n    // those elements. In Firefox, this must be prevented because it results in\n    // issues with keyboard navigation. (2017/03/30)\n\n    if (IS_FIREFOX && event.target !== el) {\n      el.focus();\n      return;\n    }\n\n    debug$2('onFocus', {\n      event: event\n    });\n    next();\n  }\n  /**\n   * On input.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onInput(event, editor, next) {\n    if (isComposing) return;\n    if (editor.value.selection.isBlurred) return;\n    debug$2('onInput', {\n      event: event\n    });\n    next();\n  }\n  /**\n   * On key down.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onKeyDown(event, editor, next) {\n    if (editor.readOnly) return; // When composing, we need to prevent all hotkeys from executing while\n    // typing. However, certain characters also move the selection before\n    // we're able to handle it, so prevent their default behavior.\n\n    if (isComposing) {\n      if (Hotkeys.isCompose(event)) event.preventDefault();\n      return;\n    } // Certain hotkeys have native editing behaviors in `contenteditable`\n    // elements which will editor the DOM and cause our value to be out of sync,\n    // so they need to always be prevented.\n\n\n    if (!IS_IOS && (Hotkeys.isBold(event) || Hotkeys.isDeleteBackward(event) || Hotkeys.isDeleteForward(event) || Hotkeys.isDeleteLineBackward(event) || Hotkeys.isDeleteLineForward(event) || Hotkeys.isDeleteWordBackward(event) || Hotkeys.isDeleteWordForward(event) || Hotkeys.isItalic(event) || Hotkeys.isRedo(event) || Hotkeys.isSplitBlock(event) || Hotkeys.isTransposeCharacter(event) || Hotkeys.isUndo(event))) {\n      event.preventDefault();\n    }\n\n    debug$2('onKeyDown', {\n      event: event\n    });\n    next();\n  }\n  /**\n   * On paste.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onPaste(event, editor, next) {\n    if (editor.readOnly) return; // Prevent defaults so the DOM state isn't corrupted.\n\n    event.preventDefault();\n    debug$2('onPaste', {\n      event: event\n    });\n    next();\n  }\n  /**\n   * On select.\n   *\n   * @param {Event} event\n   * @param {Editor} editor\n   * @param {Function} next\n   */\n\n\n  function onSelect(event, editor, next) {\n    if (isCopying) return;\n    if (isComposing) return;\n    if (editor.readOnly) return; // Save the new `activeElement`.\n\n    var window = getWindow(event.target);\n    activeElement = window.document.activeElement;\n    debug$2('onSelect', {\n      event: event\n    });\n    next();\n  }\n  /**\n   * Return the plugin.\n   *\n   * @type {Object}\n   */\n\n\n  return {\n    onBeforeInput: onBeforeInput,\n    onBlur: onBlur,\n    onClick: onClick,\n    onCompositionEnd: onCompositionEnd,\n    onCompositionStart: onCompositionStart,\n    onCopy: onCopy,\n    onCut: onCut,\n    onDragEnd: onDragEnd,\n    onDragEnter: onDragEnter,\n    onDragExit: onDragExit,\n    onDragLeave: onDragLeave,\n    onDragOver: onDragOver,\n    onDragStart: onDragStart,\n    onDrop: onDrop,\n    onFocus: onFocus,\n    onInput: onInput,\n    onKeyDown: onKeyDown,\n    onPaste: onPaste,\n    onSelect: onSelect\n  };\n}\n/**\n * A plugin that adds the browser-specific logic to the editor.\n *\n * @param {Object} options\n * @return {Object}\n */\n\n\nfunction DOMPlugin() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var _options$plugins = options.plugins,\n      plugins = _options$plugins === undefined ? [] : _options$plugins; // Add Android specific handling separately before it gets to the other\n  // plugins because it is specific (other browser don't need it) and finicky\n  // (it has to come before other plugins to work).\n\n  var beforeBeforePlugins = IS_ANDROID ? [AndroidPlugin()] : [];\n  var beforePlugin = BeforePlugin();\n  var afterPlugin = AfterPlugin();\n  return [].concat(beforeBeforePlugins, [beforePlugin], toConsumableArray(plugins), [afterPlugin]);\n}\n/**\n * Debugger.\n *\n * @type {Function}\n */\n\n\nvar debug$3 = Debug('slate:leaves');\n/**\n * Leaf.\n *\n * @type {Component}\n */\n\nvar Leaf = function (_React$Component) {\n  inherits(Leaf, _React$Component);\n\n  function Leaf() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    classCallCheck(this, Leaf);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = possibleConstructorReturn(this, (_ref = Leaf.__proto__ || Object.getPrototypeOf(Leaf)).call.apply(_ref, [this].concat(args))), _this), _initialiseProps.call(_this), _temp), possibleConstructorReturn(_this, _ret);\n  }\n  /**\n   * Property types.\n   *\n   * @type {Object}\n   */\n\n  /**\n   * Debug.\n   *\n   * @param {String} message\n   * @param {Mixed} ...args\n   */\n\n\n  createClass(Leaf, [{\n    key: 'shouldComponentUpdate',\n\n    /**\n     * Should component update?\n     *\n     * @param {Object} props\n     * @return {Boolean}\n     */\n    value: function shouldComponentUpdate(props) {\n      // If any of the regular properties have changed, re-render.\n      if (props.index !== this.props.index || props.marks !== this.props.marks || props.text !== this.props.text || props.parent !== this.props.parent) {\n        return true;\n      } // Otherwise, don't update.\n\n\n      return false;\n    }\n    /**\n     * Render the leaf.\n     *\n     * @return {Element}\n     */\n\n  }, {\n    key: 'render',\n    value: function render() {\n      this.debug('render', this);\n      var _props = this.props,\n          node = _props.node,\n          index = _props.index;\n      var offsetKey = OffsetKey.stringify({\n        key: node.key,\n        index: index\n      });\n      return React.createElement('span', {\n        'data-slate-leaf': true,\n        'data-offset-key': offsetKey\n      }, this.renderMarks());\n    }\n    /**\n     * Render all of the leaf's mark components.\n     *\n     * @return {Element}\n     */\n\n  }, {\n    key: 'renderMarks',\n    value: function renderMarks() {\n      var _props2 = this.props,\n          marks = _props2.marks,\n          node = _props2.node,\n          offset = _props2.offset,\n          text = _props2.text,\n          editor = _props2.editor;\n      var leaf = this.renderText();\n      var attributes = {\n        'data-slate-mark': true\n      };\n      return marks.reduce(function (children, mark) {\n        var props = {\n          editor: editor,\n          mark: mark,\n          marks: marks,\n          node: node,\n          offset: offset,\n          text: text,\n          children: children,\n          attributes: attributes\n        };\n        var element = editor.run('renderMark', props);\n        return element || children;\n      }, leaf);\n    }\n    /**\n     * Render the text content of the leaf, accounting for browsers.\n     *\n     * @return {Element}\n     */\n\n  }, {\n    key: 'renderText',\n    value: function renderText() {\n      var _props3 = this.props,\n          block = _props3.block,\n          node = _props3.node,\n          editor = _props3.editor,\n          parent = _props3.parent,\n          text = _props3.text,\n          index = _props3.index,\n          leaves = _props3.leaves; // COMPAT: Render text inside void nodes with a zero-width space.\n      // So the node can contain selection but the text is not visible.\n\n      if (editor.query('isVoid', parent)) {\n        return React.createElement('span', {\n          'data-slate-zero-width': 'z',\n          'data-slate-length': parent.text.length\n        }, \"\\uFEFF\");\n      } // COMPAT: If this is the last text node in an empty block, render a zero-\n      // width space that will convert into a line break when copying and pasting\n      // to support expected plain text.\n\n\n      if (text === '' && parent.object === 'block' && parent.text === '' && parent.nodes.last() === node) {\n        return React.createElement('span', {\n          'data-slate-zero-width': 'n',\n          'data-slate-length': 0\n        }, \"\\uFEFF\", React.createElement('br', null));\n      } // COMPAT: If the text is empty, it's because it's on the edge of an inline\n      // node, so we render a zero-width space so that the selection can be\n      // inserted next to it still.\n\n\n      if (text === '') {\n        return React.createElement('span', {\n          'data-slate-zero-width': 'z',\n          'data-slate-length': 0\n        }, \"\\uFEFF\");\n      } // COMPAT: Browsers will collapse trailing new lines at the end of blocks,\n      // so we need to add an extra trailing new lines to prevent that.\n\n\n      var lastText = block.getLastText();\n      var lastChar = text.charAt(text.length - 1);\n      var isLastText = node === lastText;\n      var isLastLeaf = index === leaves.size - 1;\n      if (isLastText && isLastLeaf && lastChar === '\\n') return React.createElement('span', {\n        'data-slate-content': true\n      }, text + '\\n'); // Otherwise, just return the content.\n\n      return React.createElement('span', {\n        'data-slate-content': true\n      }, text);\n    }\n  }]);\n  return Leaf;\n}(React.Component);\n/**\n * Export.\n *\n * @type {Component}\n */\n\n\nLeaf.propTypes = {\n  block: SlateTypes.block.isRequired,\n  editor: Types.object.isRequired,\n  index: Types.number.isRequired,\n  leaves: SlateTypes.leaves.isRequired,\n  marks: SlateTypes.marks.isRequired,\n  node: SlateTypes.node.isRequired,\n  offset: Types.number.isRequired,\n  parent: SlateTypes.node.isRequired,\n  text: Types.string.isRequired\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this2 = this;\n\n  this.debug = function (message) {\n    for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n      args[_key2 - 1] = arguments[_key2];\n    }\n\n    debug$3.apply(undefined, [message, _this2.props.node.key + '-' + _this2.props.index].concat(args));\n  };\n};\n/**\n * Debug.\n *\n * @type {Function}\n */\n\n\nvar debug$4 = Debug('slate:node');\n/**\n * Text.\n *\n * @type {Component}\n */\n\nvar Text = function (_React$Component) {\n  inherits(Text, _React$Component);\n\n  function Text() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    classCallCheck(this, Text);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = possibleConstructorReturn(this, (_ref = Text.__proto__ || Object.getPrototypeOf(Text)).call.apply(_ref, [this].concat(args))), _this), _initialiseProps$1.call(_this), _temp), possibleConstructorReturn(_this, _ret);\n  }\n  /**\n   * Property types.\n   *\n   * @type {Object}\n   */\n\n  /**\n   * Default prop types.\n   *\n   * @type {Object}\n   */\n\n  /**\n   * Debug.\n   *\n   * @param {String} message\n   * @param {Mixed} ...args\n   */\n\n  /**\n   * Should the node update?\n   *\n   * @param {Object} nextProps\n   * @param {Object} value\n   * @return {Boolean}\n   */\n\n\n  createClass(Text, [{\n    key: 'render',\n\n    /**\n     * Render.\n     *\n     * @return {Element}\n     */\n    value: function render() {\n      var _this2 = this;\n\n      this.debug('render', this);\n      var _props = this.props,\n          decorations = _props.decorations,\n          editor = _props.editor,\n          node = _props.node,\n          style = _props.style;\n      var value = editor.value;\n      var document = value.document;\n      var key = node.key;\n      var decs = decorations.filter(function (d) {\n        var start = d.start,\n            end = d.end; // If either of the decoration's keys match, include it.\n\n        if (start.key === key || end.key === key) return true; // Otherwise, if the decoration is in a single node, it's not ours.\n\n        if (start.key === end.key) return false;\n        var path = document.assertPath(key);\n        var startPath = start.path || document.assertPath(start.key);\n        var endPath = end.path || document.assertPath(end.key); // If the node's path is before the start path, ignore it.\n\n        if (PathUtils.compare(path, startPath) === -1) return false; // If the node's path is after the end path, ignore it.\n\n        if (PathUtils.compare(path, endPath) === 1) return false; // Otherwise, include it.\n\n        return true;\n      }); // PERF: Take advantage of cache by avoiding arguments\n\n      var leaves = decs.size === 0 ? node.getLeaves() : node.getLeaves(decs);\n      var offset = 0;\n      var children = leaves.map(function (leaf, i) {\n        var child = _this2.renderLeaf(leaves, leaf, i, offset);\n\n        offset += leaf.text.length;\n        return child;\n      });\n      return React.createElement('span', {\n        'data-key': key,\n        style: style\n      }, children);\n    }\n    /**\n     * Render a single leaf given a `leaf` and `offset`.\n     *\n     * @param {List<Leaf>} leaves\n     * @param {Leaf} leaf\n     * @param {Number} index\n     * @param {Number} offset\n     * @return {Element} leaf\n     */\n\n  }]);\n  return Text;\n}(React.Component);\n/**\n * Export.\n *\n * @type {Component}\n */\n\n\nText.propTypes = {\n  block: SlateTypes.block,\n  decorations: ImmutableTypes.list.isRequired,\n  editor: Types.object.isRequired,\n  node: SlateTypes.node.isRequired,\n  parent: SlateTypes.node.isRequired,\n  style: Types.object\n};\nText.defaultProps = {\n  style: null\n};\n\nvar _initialiseProps$1 = function _initialiseProps() {\n  var _this3 = this;\n\n  this.debug = function (message) {\n    for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n      args[_key2 - 1] = arguments[_key2];\n    }\n\n    var node = _this3.props.node;\n    var key = node.key;\n    debug$4.apply(undefined, [message, key + ' (text)'].concat(args));\n  };\n\n  this.shouldComponentUpdate = function (nextProps) {\n    var props = _this3.props;\n    var n = nextProps;\n    var p = props; // If the node has changed, update. PERF: There are cases where it will have\n    // changed, but it's properties will be exactly the same (eg. copy-paste)\n    // which this won't catch. But that's rare and not a drag on performance, so\n    // for simplicity we just let them through.\n\n    if (n.node !== p.node) return true; // If the node parent is a block node, and it was the last child of the\n    // block, re-render to cleanup extra `\\n`.\n\n    if (n.parent.object === 'block') {\n      var pLast = p.parent.nodes.last();\n      var nLast = n.parent.nodes.last();\n      if (p.node === pLast && n.node !== nLast) return true;\n    } // Re-render if the current decorations have changed.\n\n\n    if (!n.decorations.equals(p.decorations)) return true; // Otherwise, don't update.\n\n    return false;\n  };\n\n  this.renderLeaf = function (leaves, leaf, index, offset) {\n    var _props2 = _this3.props,\n        block = _props2.block,\n        node = _props2.node,\n        parent = _props2.parent,\n        editor = _props2.editor;\n    var text = leaf.text,\n        marks = leaf.marks;\n    return React.createElement(Leaf, {\n      key: node.key + '-' + index,\n      block: block,\n      editor: editor,\n      index: index,\n      marks: marks,\n      node: node,\n      offset: offset,\n      parent: parent,\n      leaves: leaves,\n      text: text\n    });\n  };\n};\n/**\n * Debug.\n *\n * @type {Function}\n */\n\n\nvar debug$5 = Debug('slate:void');\n/**\n * Void.\n *\n * @type {Component}\n */\n\nvar Void = function (_React$Component) {\n  inherits(Void, _React$Component);\n\n  function Void() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    classCallCheck(this, Void);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = possibleConstructorReturn(this, (_ref = Void.__proto__ || Object.getPrototypeOf(Void)).call.apply(_ref, [this].concat(args))), _this), _initialiseProps$2.call(_this), _temp), possibleConstructorReturn(_this, _ret);\n  }\n  /**\n   * Property types.\n   *\n   * @type {Object}\n   */\n\n  /**\n   * Debug.\n   *\n   * @param {String} message\n   * @param {Mixed} ...args\n   */\n\n\n  createClass(Void, [{\n    key: 'render',\n\n    /**\n     * Render.\n     *\n     * @return {Element}\n     */\n    value: function render() {\n      var props = this.props;\n      var children = props.children,\n          node = props.node,\n          readOnly = props.readOnly;\n      var Tag = node.object === 'block' ? 'div' : 'span';\n      var style = {\n        height: '0',\n        color: 'transparent',\n        outline: 'none',\n        position: 'absolute'\n      };\n      var spacer = React.createElement(Tag, {\n        'data-slate-spacer': true,\n        style: style\n      }, this.renderText());\n      var content = React.createElement(Tag, {\n        contentEditable: readOnly ? null : false\n      }, children);\n      this.debug('render', {\n        props: props\n      });\n      return React.createElement(Tag, {\n        'data-slate-void': true,\n        'data-key': node.key,\n        contentEditable: readOnly || node.object === 'block' ? null : false\n      }, readOnly ? null : spacer, content);\n    }\n    /**\n     * Render the void node's text node, which will catch the cursor when it the\n     * void node is navigated to with the arrow keys.\n     *\n     * Having this text node there means the browser continues to manage the\n     * selection natively, so it keeps track of the right offset when moving\n     * across the block.\n     *\n     * @return {Element}\n     */\n\n  }]);\n  return Void;\n}(React.Component);\n/**\n * Export.\n *\n * @type {Component}\n */\n\n\nVoid.propTypes = {\n  block: SlateTypes.block,\n  children: Types.any.isRequired,\n  editor: Types.object.isRequired,\n  node: SlateTypes.node.isRequired,\n  parent: SlateTypes.node.isRequired,\n  readOnly: Types.bool.isRequired\n};\n\nvar _initialiseProps$2 = function _initialiseProps() {\n  var _this2 = this;\n\n  this.debug = function (message) {\n    for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n      args[_key2 - 1] = arguments[_key2];\n    }\n\n    var node = _this2.props.node;\n    var key = node.key,\n        type = node.type;\n    var id = key + ' (' + type + ')';\n    debug$5.apply(undefined, [message, '' + id].concat(args));\n  };\n\n  this.renderText = function () {\n    var _props = _this2.props,\n        block = _props.block,\n        decorations = _props.decorations,\n        node = _props.node,\n        readOnly = _props.readOnly,\n        editor = _props.editor;\n    var child = node.getFirstText();\n    return React.createElement(Text, {\n      block: node.object === 'block' ? node : block,\n      decorations: decorations,\n      editor: editor,\n      key: child.key,\n      node: child,\n      parent: node,\n      readOnly: readOnly\n    });\n  };\n};\n/**\n * Split the decorations in lists of relevant decorations for each child.\n *\n * @param {Node} node\n * @param {List} decorations\n * @return {Array<List<Decoration>>}\n */\n\n\nfunction getChildrenDecorations(node, decorations) {\n  var activeDecorations = Set().asMutable();\n  var childrenDecorations = [];\n  orderChildDecorations(node, decorations).forEach(function (item) {\n    if (item.isRangeStart) {\n      // Item is a decoration start\n      activeDecorations.add(item.decoration);\n    } else if (item.isRangeEnd) {\n      // item is a decoration end\n      activeDecorations.remove(item.decoration);\n    } else {\n      // Item is a child node\n      childrenDecorations.push(activeDecorations.toList());\n    }\n  });\n  return childrenDecorations;\n}\n/**\n * Orders the children of provided node and its decoration endpoints (start, end)\n * so that decorations can be passed only to relevant children (see use in Node.render())\n *\n * @param {Node} node\n * @param {List} decorations\n * @return {Array<Item>}\n *\n * where type Item =\n * {\n *   child: Node,\n *   // Index of the child in its parent\n *   index: number\n * }\n * or {\n *   // True if this represents the start of the given decoration\n *   isRangeStart: boolean,\n *   // True if this represents the end of the given decoration\n *   isRangeEnd: boolean,\n *   decoration: Range\n * }\n */\n\n\nfunction orderChildDecorations(node, decorations) {\n  if (decorations.isEmpty()) {\n    return node.nodes.toArray().map(function (child, index) {\n      return {\n        child: child,\n        index: index\n      };\n    });\n  } // Map each key to its global order\n\n\n  var keyOrders = defineProperty({}, node.key, 0);\n  var globalOrder = 1;\n  node.forEachDescendant(function (child) {\n    keyOrders[child.key] = globalOrder;\n    globalOrder = globalOrder + 1;\n  });\n  var childNodes = node.nodes.toArray();\n  var endPoints = childNodes.map(function (child, index) {\n    return {\n      child: child,\n      index: index,\n      order: keyOrders[child.key]\n    };\n  });\n  decorations.forEach(function (decoration) {\n    // Range start.\n    // A rangeStart should be before the child containing its startKey, in order\n    // to consider it active before going down the child.\n    var startKeyOrder = keyOrders[decoration.start.key];\n    var containingChildOrder = startKeyOrder === undefined ? 0 : getContainingChildOrder(childNodes, keyOrders, startKeyOrder);\n    endPoints.push({\n      isRangeStart: true,\n      order: containingChildOrder - 0.5,\n      decoration: decoration\n    }); // Range end.\n\n    var endKeyOrder = (keyOrders[decoration.end.key] || globalOrder) + 0.5;\n    endPoints.push({\n      isRangeEnd: true,\n      order: endKeyOrder,\n      decoration: decoration\n    });\n  });\n  return endPoints.sort(function (a, b) {\n    return a.order > b.order ? 1 : -1;\n  });\n}\n/*\n * Returns the key order of the child right before the given order.\n */\n\n\nfunction getContainingChildOrder(children, keyOrders, order) {\n  // Find the first child that is after the given key\n  var nextChildIndex = children.findIndex(function (child) {\n    return order < keyOrders[child.key];\n  });\n\n  if (nextChildIndex <= 0) {\n    return 0;\n  }\n\n  var containingChild = children[nextChildIndex - 1];\n  return keyOrders[containingChild.key];\n}\n/**\n * Debug.\n *\n * @type {Function}\n */\n\n\nvar debug$6 = Debug('slate:node');\n/**\n * Node.\n *\n * @type {Component}\n */\n\nvar Node$1 = function (_React$Component) {\n  inherits(Node$$1, _React$Component);\n\n  function Node$$1() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    classCallCheck(this, Node$$1);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = possibleConstructorReturn(this, (_ref = Node$$1.__proto__ || Object.getPrototypeOf(Node$$1)).call.apply(_ref, [this].concat(args))), _this), _initialiseProps$3.call(_this), _temp), possibleConstructorReturn(_this, _ret);\n  }\n  /**\n   * Property types.\n   *\n   * @type {Object}\n   */\n\n  /**\n   * Debug.\n   *\n   * @param {String} message\n   * @param {Mixed} ...args\n   */\n\n\n  createClass(Node$$1, [{\n    key: 'shouldComponentUpdate',\n\n    /**\n     * Should the node update?\n     *\n     * @param {Object} nextProps\n     * @param {Object} value\n     * @return {Boolean}\n     */\n    value: function shouldComponentUpdate(nextProps) {\n      var props = this.props;\n      var editor = props.editor;\n      var shouldUpdate = editor.run('shouldNodeComponentUpdate', props, nextProps);\n      var n = nextProps;\n      var p = props; // If the `Component` has a custom logic to determine whether the component\n      // needs to be updated or not, return true if it returns true. If it returns\n      // false, we need to ignore it, because it shouldn't be allowed it.\n\n      if (shouldUpdate != null) {\n        if (shouldUpdate) {\n          return true;\n        }\n\n        warning(shouldUpdate !== false, \"Returning false in `shouldNodeComponentUpdate` does not disable Slate's internal `shouldComponentUpdate` logic. If you want to prevent updates, use React's `shouldComponentUpdate` instead.\");\n      } // If the `readOnly` status has changed, re-render in case there is any\n      // user-land logic that depends on it, like nested editable contents.\n\n\n      if (n.readOnly !== p.readOnly) return true; // If the node has changed, update. PERF: There are cases where it will have\n      // changed, but it's properties will be exactly the same (eg. copy-paste)\n      // which this won't catch. But that's rare and not a drag on performance, so\n      // for simplicity we just let them through.\n\n      if (n.node !== p.node) return true; // If the selection value of the node or of some of its children has changed,\n      // re-render in case there is any user-land logic depends on it to render.\n      // if the node is selected update it, even if it was already selected: the\n      // selection value of some of its children could have been changed and they\n      // need to be rendered again.\n\n      if (n.isSelected || p.isSelected) return true;\n      if (n.isFocused || p.isFocused) return true; // If the decorations have changed, update.\n\n      if (!n.decorations.equals(p.decorations)) return true; // Otherwise, don't update.\n\n      return false;\n    }\n    /**\n     * Render.\n     *\n     * @return {Element}\n     */\n\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      this.debug('render', this);\n      var _props = this.props,\n          editor = _props.editor,\n          isSelected = _props.isSelected,\n          isFocused = _props.isFocused,\n          node = _props.node,\n          decorations = _props.decorations,\n          parent = _props.parent,\n          readOnly = _props.readOnly;\n      var value = editor.value;\n      var selection = value.selection;\n      var indexes = node.getSelectionIndexes(selection, isSelected);\n      var decs = decorations.concat(node.getDecorations(editor));\n      var childrenDecorations = getChildrenDecorations(node, decs);\n      var children = [];\n      node.nodes.forEach(function (child, i) {\n        var isChildSelected = !!indexes && indexes.start <= i && i < indexes.end;\n        children.push(_this2.renderNode(child, isChildSelected, childrenDecorations[i]));\n      }); // Attributes that the developer must mix into the element in their\n      // custom node renderer component.\n\n      var attributes = {\n        'data-key': node.key // If it's a block node with inline children, add the proper `dir` attribute\n        // for text direction.\n\n      };\n\n      if (node.isLeafBlock()) {\n        var direction = node.getTextDirection();\n        if (direction === 'rtl') attributes.dir = 'rtl';\n      }\n\n      var props = {\n        key: node.key,\n        editor: editor,\n        isFocused: isFocused,\n        isSelected: isSelected,\n        node: node,\n        parent: parent,\n        readOnly: readOnly\n      };\n      var element = editor.run('renderNode', _extends({}, props, {\n        attributes: attributes,\n        children: children\n      }));\n      return editor.query('isVoid', node) ? React.createElement(Void, this.props, element) : element;\n    }\n    /**\n     * Render a `child` node.\n     *\n     * @param {Node} child\n     * @param {Boolean} isSelected\n     * @param {Array<Decoration>} decorations\n     * @return {Element}\n     */\n\n  }]);\n  return Node$$1;\n}(React.Component);\n/**\n * Export.\n *\n * @type {Component}\n */\n\n\nNode$1.propTypes = {\n  block: SlateTypes.block,\n  decorations: ImmutableTypes.list.isRequired,\n  editor: Types.object.isRequired,\n  isFocused: Types.bool.isRequired,\n  isSelected: Types.bool.isRequired,\n  node: SlateTypes.node.isRequired,\n  parent: SlateTypes.node.isRequired,\n  readOnly: Types.bool.isRequired\n};\n\nvar _initialiseProps$3 = function _initialiseProps() {\n  var _this3 = this;\n\n  this.debug = function (message) {\n    for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n      args[_key2 - 1] = arguments[_key2];\n    }\n\n    var node = _this3.props.node;\n    var key = node.key,\n        type = node.type;\n    debug$6.apply(undefined, [message, key + ' (' + type + ')'].concat(args));\n  };\n\n  this.renderNode = function (child, isSelected, decorations) {\n    var _props2 = _this3.props,\n        block = _props2.block,\n        editor = _props2.editor,\n        node = _props2.node,\n        readOnly = _props2.readOnly,\n        isFocused = _props2.isFocused;\n    var Component = child.object === 'text' ? Text : Node$1;\n    return React.createElement(Component, {\n      block: node.object === 'block' ? node : block,\n      decorations: decorations,\n      editor: editor,\n      isSelected: isSelected,\n      isFocused: isFocused && isSelected,\n      key: child.key,\n      node: child,\n      parent: node,\n      readOnly: readOnly\n    });\n  };\n};\n/**\n * Find a native DOM selection point from a Slate `point`.\n *\n * @param {Point} point\n * @param {Window} win (optional)\n * @return {Object|Null}\n */\n\n\nfunction findDOMPoint(point) {\n  var win = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : window;\n  var el = findDOMNode(point.key, win);\n  var start = 0; // For each leaf, we need to isolate its content, which means filtering to its\n  // direct text and zero-width spans. (We have to filter out any other siblings\n  // that may have been rendered alongside them.)\n\n  var texts = Array.from(el.querySelectorAll('[data-slate-content], [data-slate-zero-width]'));\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = texts[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var text = _step.value;\n      var node = text.childNodes[0];\n      var domLength = node.textContent.length;\n      var slateLength = domLength;\n\n      if (text.hasAttribute('data-slate-length')) {\n        slateLength = parseInt(text.getAttribute('data-slate-length'), 10);\n      }\n\n      var end = start + slateLength;\n\n      if (point.offset <= end) {\n        var offset = Math.min(domLength, Math.max(0, point.offset - start));\n        return {\n          node: node,\n          offset: offset\n        };\n      }\n\n      start = end;\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  return null;\n}\n/**\n * Find a native DOM range Slate `range`.\n *\n * @param {Range} range\n * @param {Window} win (optional)\n * @return {Object|Null}\n */\n\n\nfunction findDOMRange(range) {\n  var win = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : window;\n  var anchor = range.anchor,\n      focus = range.focus,\n      isBackward$$1 = range.isBackward,\n      isCollapsed = range.isCollapsed;\n  var domAnchor = findDOMPoint(anchor, win);\n  var domFocus = isCollapsed ? domAnchor : findDOMPoint(focus, win);\n  if (!domAnchor || !domFocus) return null;\n  var r = win.document.createRange();\n  var start = isBackward$$1 ? domFocus : domAnchor;\n  var end = isBackward$$1 ? domAnchor : domFocus;\n  r.setStart(start.node, start.offset);\n  r.setEnd(end.node, end.offset);\n  return r;\n}\n/**\n * CSS overflow values that would cause scrolling.\n *\n * @type {Array}\n */\n\n\nvar OVERFLOWS = ['auto', 'overlay', 'scroll'];\n/**\n * Detect whether we are running IOS version 11\n */\n\nvar IS_IOS_11 = IS_IOS && !!window.navigator.userAgent.match(/os 11_/i);\n/**\n * Find the nearest parent with scrolling, or window.\n *\n * @param {el} Element\n */\n\nfunction findScrollContainer(el, window) {\n  var parent = el.parentNode;\n  var scroller = void 0;\n\n  while (!scroller) {\n    if (!parent.parentNode) break;\n    var style = window.getComputedStyle(parent);\n    var overflowY = style.overflowY;\n\n    if (OVERFLOWS.includes(overflowY)) {\n      scroller = parent;\n      break;\n    }\n\n    parent = parent.parentNode;\n  } // COMPAT: Because Chrome does not allow doucment.body.scrollTop, we're\n  // assuming that window.scrollTo() should be used if the scrollable element\n  // turns out to be document.body or document.documentElement. This will work\n  // unless body is intentionally set to scrollable by restricting its height\n  // (e.g. height: 100vh).\n\n\n  if (!scroller) {\n    return window.document.body;\n  }\n\n  return scroller;\n}\n/**\n * Scroll the current selection's focus point into view if needed.\n *\n * @param {Selection} selection\n */\n\n\nfunction scrollToSelection(selection) {\n  if (IS_IOS_11) return;\n  if (!selection.anchorNode) return;\n  var window = getWindow(selection.anchorNode);\n  var scroller = findScrollContainer(selection.anchorNode, window);\n  var isWindow = scroller === window.document.body || scroller === window.document.documentElement;\n  var backward = isBackward(selection);\n  var range = selection.getRangeAt(0).cloneRange();\n  range.collapse(backward);\n  var cursorRect = range.getBoundingClientRect(); // COMPAT: range.getBoundingClientRect() returns 0s in Safari when range is\n  // collapsed. Expanding the range by 1 is a relatively effective workaround\n  // for vertical scroll, although horizontal may be off by 1 character.\n  // https://bugs.webkit.org/show_bug.cgi?id=138949\n  // https://bugs.chromium.org/p/chromium/issues/detail?id=435438\n\n  if (IS_SAFARI) {\n    if (range.collapsed && cursorRect.top === 0 && cursorRect.height === 0) {\n      if (range.startOffset === 0) {\n        range.setEnd(range.endContainer, 1);\n      } else {\n        range.setStart(range.startContainer, range.startOffset - 1);\n      }\n\n      cursorRect = range.getBoundingClientRect();\n\n      if (cursorRect.top === 0 && cursorRect.height === 0) {\n        if (range.getClientRects().length) {\n          cursorRect = range.getClientRects()[0];\n        }\n      }\n    }\n  }\n\n  var width = void 0;\n  var height = void 0;\n  var yOffset = void 0;\n  var xOffset = void 0;\n  var scrollerTop = 0;\n  var scrollerLeft = 0;\n  var scrollerBordersY = 0;\n  var scrollerBordersX = 0;\n  var scrollerPaddingTop = 0;\n  var scrollerPaddingBottom = 0;\n  var scrollerPaddingLeft = 0;\n  var scrollerPaddingRight = 0;\n\n  if (isWindow) {\n    var innerWidth = window.innerWidth,\n        innerHeight = window.innerHeight,\n        pageYOffset = window.pageYOffset,\n        pageXOffset = window.pageXOffset;\n    width = innerWidth;\n    height = innerHeight;\n    yOffset = pageYOffset;\n    xOffset = pageXOffset;\n  } else {\n    var offsetWidth = scroller.offsetWidth,\n        offsetHeight = scroller.offsetHeight,\n        scrollTop = scroller.scrollTop,\n        scrollLeft = scroller.scrollLeft;\n\n    var _window$getComputedSt = window.getComputedStyle(scroller),\n        borderTopWidth = _window$getComputedSt.borderTopWidth,\n        borderBottomWidth = _window$getComputedSt.borderBottomWidth,\n        borderLeftWidth = _window$getComputedSt.borderLeftWidth,\n        borderRightWidth = _window$getComputedSt.borderRightWidth,\n        paddingTop = _window$getComputedSt.paddingTop,\n        paddingBottom = _window$getComputedSt.paddingBottom,\n        paddingLeft = _window$getComputedSt.paddingLeft,\n        paddingRight = _window$getComputedSt.paddingRight;\n\n    var scrollerRect = scroller.getBoundingClientRect();\n    width = offsetWidth;\n    height = offsetHeight;\n    scrollerTop = scrollerRect.top + parseInt(borderTopWidth, 10);\n    scrollerLeft = scrollerRect.left + parseInt(borderLeftWidth, 10);\n    scrollerBordersY = parseInt(borderTopWidth, 10) + parseInt(borderBottomWidth, 10);\n    scrollerBordersX = parseInt(borderLeftWidth, 10) + parseInt(borderRightWidth, 10);\n    scrollerPaddingTop = parseInt(paddingTop, 10);\n    scrollerPaddingBottom = parseInt(paddingBottom, 10);\n    scrollerPaddingLeft = parseInt(paddingLeft, 10);\n    scrollerPaddingRight = parseInt(paddingRight, 10);\n    yOffset = scrollTop;\n    xOffset = scrollLeft;\n  }\n\n  var cursorTop = cursorRect.top + yOffset - scrollerTop;\n  var cursorLeft = cursorRect.left + xOffset - scrollerLeft;\n  var x = xOffset;\n  var y = yOffset;\n\n  if (cursorLeft < xOffset) {\n    // selection to the left of viewport\n    x = cursorLeft - scrollerPaddingLeft;\n  } else if (cursorLeft + cursorRect.width + scrollerBordersX > xOffset + width) {\n    // selection to the right of viewport\n    x = cursorLeft + scrollerBordersX + scrollerPaddingRight - width;\n  }\n\n  if (cursorTop < yOffset) {\n    // selection above viewport\n    y = cursorTop - scrollerPaddingTop;\n  } else if (cursorTop + cursorRect.height + scrollerBordersY > yOffset + height) {\n    // selection below viewport\n    y = cursorTop + scrollerBordersY + scrollerPaddingBottom + cursorRect.height - height;\n  }\n\n  if (isWindow) {\n    window.scrollTo(x, y);\n  } else {\n    scroller.scrollTop = y;\n    scroller.scrollLeft = x;\n  }\n}\n\nvar FIREFOX_NODE_TYPE_ACCESS_ERROR = /Permission denied to access property \"nodeType\"/;\n/**\n * Debug.\n *\n * @type {Function}\n */\n\nvar debug$7 = Debug('slate:content');\n/**\n * Separate debug to easily see when the DOM has updated either by render or\n * changing selection.\n *\n * @type {Function}\n */\n\ndebug$7.update = Debug('slate:update');\n/**\n * Content.\n *\n * @type {Component}\n */\n\nvar Content = function (_React$Component) {\n  inherits(Content, _React$Component);\n\n  function Content() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    classCallCheck(this, Content);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = possibleConstructorReturn(this, (_ref = Content.__proto__ || Object.getPrototypeOf(Content)).call.apply(_ref, [this].concat(args))), _this), _this.tmp = {\n      isUpdatingSelection: false\n      /**\n       * Create a set of bound event handlers.\n       *\n       * @type {Object}\n       */\n\n    }, _this.handlers = EVENT_HANDLERS.reduce(function (obj, handler) {\n      obj[handler] = function (event) {\n        return _this.onEvent(handler, event);\n      };\n\n      return obj;\n    }, {}), _this.updateSelection = function () {\n      var editor = _this.props.editor;\n      var value = editor.value;\n      var selection = value.selection;\n      var isBackward$$1 = selection.isBackward;\n      var window = getWindow(_this.element);\n      var native = window.getSelection();\n      var activeElement = window.document.activeElement;\n\n      if (debug$7.enabled) {\n        debug$7.update('updateSelection', {\n          selection: selection.toJSON()\n        });\n      } // COMPAT: In Firefox, there's a but where `getSelection` can return `null`.\n      // https://bugzilla.mozilla.org/show_bug.cgi?id=827585 (2018/11/07)\n\n\n      if (!native) {\n        return;\n      }\n\n      var rangeCount = native.rangeCount,\n          anchorNode = native.anchorNode;\n      var updated = false; // If the Slate selection is blurred, but the DOM's active element is still\n      // the editor, we need to blur it.\n\n      if (selection.isBlurred && activeElement === _this.element) {\n        _this.element.blur();\n\n        updated = true;\n      } // If the Slate selection is unset, but the DOM selection has a range\n      // selected in the editor, we need to remove the range.\n\n\n      if (selection.isUnset && rangeCount && _this.isInEditor(anchorNode)) {\n        removeAllRanges(native);\n        updated = true;\n      } // If the Slate selection is focused, but the DOM's active element is not\n      // the editor, we need to focus it. We prevent scrolling because we handle\n      // scrolling to the correct selection.\n\n\n      if (selection.isFocused && activeElement !== _this.element) {\n        _this.element.focus({\n          preventScroll: true\n        });\n\n        updated = true;\n      } // Otherwise, figure out which DOM nodes should be selected...\n\n\n      if (selection.isFocused && selection.isSet) {\n        var current = !!rangeCount && native.getRangeAt(0);\n        var range = findDOMRange(selection, window);\n\n        if (!range) {\n          warning(false, 'Unable to find a native DOM range from the current selection.');\n          return;\n        }\n\n        var startContainer = range.startContainer,\n            startOffset = range.startOffset,\n            endContainer = range.endContainer,\n            endOffset = range.endOffset; // If the new range matches the current selection, there is nothing to fix.\n        // COMPAT: The native `Range` object always has it's \"start\" first and \"end\"\n        // last in the DOM. It has no concept of \"backwards/forwards\", so we have\n        // to check both orientations here. (2017/10/31)\n\n        if (current) {\n          if (startContainer === current.startContainer && startOffset === current.startOffset && endContainer === current.endContainer && endOffset === current.endOffset || startContainer === current.endContainer && startOffset === current.endOffset && endContainer === current.startContainer && endOffset === current.startOffset) {\n            return;\n          }\n        } // Otherwise, set the `isUpdatingSelection` flag and update the selection.\n\n\n        updated = true;\n        _this.tmp.isUpdatingSelection = true;\n        removeAllRanges(native); // COMPAT: IE 11 does not support `setBaseAndExtent`. (2018/11/07)\n\n        if (native.setBaseAndExtent) {\n          // COMPAT: Since the DOM range has no concept of backwards/forwards\n          // we need to check and do the right thing here.\n          if (isBackward$$1) {\n            native.setBaseAndExtent(range.endContainer, range.endOffset, range.startContainer, range.startOffset);\n          } else {\n            native.setBaseAndExtent(range.startContainer, range.startOffset, range.endContainer, range.endOffset);\n          }\n        } else {\n          native.addRange(range);\n        } // Scroll to the selection, in case it's out of view.\n\n\n        scrollToSelection(native); // Then unset the `isUpdatingSelection` flag after a delay, to ensure that\n        // it is still set when selection-related events from updating it fire.\n\n        setTimeout(function () {\n          // COMPAT: In Firefox, it's not enough to create a range, you also need\n          // to focus the contenteditable element too. (2016/11/16)\n          if (IS_FIREFOX && _this.element) {\n            _this.element.focus();\n          }\n\n          _this.tmp.isUpdatingSelection = false;\n        });\n      }\n\n      if (updated && debug$7.enabled) {\n        debug$7('updateSelection', {\n          selection: selection,\n          native: native,\n          activeElement: activeElement\n        });\n        debug$7.update('updateSelection-applied', {\n          selection: selection\n        });\n      }\n    }, _this.ref = function (element) {\n      _this.element = element;\n    }, _this.isInEditor = function (target) {\n      var _this2 = _this,\n          element = _this2.element;\n      var el = void 0;\n\n      try {\n        // COMPAT: In Firefox, sometimes the node can be comment which doesn't\n        // have .closest and it crashes.\n        if (target.nodeType === 8) {\n          return false;\n        } // COMPAT: Text nodes don't have `isContentEditable` property. So, when\n        // `target` is a text node use its parent node for check.\n\n\n        el = target.nodeType === 3 ? target.parentNode : target;\n      } catch (err) {\n        // COMPAT: In Firefox, `target.nodeType` will throw an error if target is\n        // originating from an internal \"restricted\" element (e.g. a stepper\n        // arrow on a number input)\n        // see github.com/ianstormtaylor/slate/issues/1819\n        if (IS_FIREFOX && FIREFOX_NODE_TYPE_ACCESS_ERROR.test(err.message)) {\n          return false;\n        }\n\n        throw err;\n      }\n\n      return el.isContentEditable && (el === element || el.closest('[data-slate-editor]') === element);\n    }, _this.onNativeSelectionChange = throttle(function (event) {\n      if (_this.props.readOnly) return;\n      var window = getWindow(event.target);\n      var activeElement = window.document.activeElement;\n      if (activeElement !== _this.element) return;\n\n      _this.props.onEvent('onSelect', event);\n    }, 100), _this.renderNode = function (child, isSelected, decorations) {\n      var _this$props = _this.props,\n          editor = _this$props.editor,\n          readOnly = _this$props.readOnly;\n      var value = editor.value;\n      var document = value.document,\n          selection = value.selection;\n      var isFocused = selection.isFocused;\n      return React.createElement(Node$1, {\n        block: null,\n        editor: editor,\n        decorations: decorations,\n        isSelected: isSelected,\n        isFocused: isFocused && isSelected,\n        key: child.key,\n        node: child,\n        parent: document,\n        readOnly: readOnly\n      });\n    }, _temp), possibleConstructorReturn(_this, _ret);\n  }\n  /**\n   * Property types.\n   *\n   * @type {Object}\n   */\n\n  /**\n   * Default properties.\n   *\n   * @type {Object}\n   */\n\n  /**\n   * Temporary values.\n   *\n   * @type {Object}\n   */\n\n\n  createClass(Content, [{\n    key: 'componentDidMount',\n\n    /**\n     * When the editor first mounts in the DOM we need to:\n     *\n     *   - Add native DOM event listeners.\n     *   - Update the selection, in case it starts focused.\n     */\n    value: function componentDidMount() {\n      var window = getWindow(this.element);\n      window.document.addEventListener('selectionchange', this.onNativeSelectionChange); // COMPAT: Restrict scope of `beforeinput` to clients that support the\n      // Input Events Level 2 spec, since they are preventable events.\n\n      if (HAS_INPUT_EVENTS_LEVEL_2) {\n        this.element.addEventListener('beforeinput', this.handlers.onBeforeInput);\n      }\n\n      this.updateSelection();\n    }\n    /**\n     * When unmounting, remove DOM event listeners.\n     */\n\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      var window = getWindow(this.element);\n\n      if (window) {\n        window.document.removeEventListener('selectionchange', this.onNativeSelectionChange);\n      }\n\n      if (HAS_INPUT_EVENTS_LEVEL_2) {\n        this.element.removeEventListener('beforeinput', this.handlers.onBeforeInput);\n      }\n    }\n    /**\n     * On update, update the selection.\n     */\n\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate() {\n      debug$7.update('componentDidUpdate');\n      this.updateSelection();\n    }\n    /**\n     * Update the native DOM selection to reflect the internal model.\n     */\n\n    /**\n     * The React ref method to set the root content element locally.\n     *\n     * @param {Element} element\n     */\n\n    /**\n     * Check if an event `target` is fired from within the contenteditable\n     * element. This should be false for edits happening in non-contenteditable\n     * children, such as void nodes and other nested Slate editors.\n     *\n     * @param {Element} target\n     * @return {Boolean}\n     */\n\n  }, {\n    key: 'onEvent',\n\n    /**\n     * On `event` with `handler`.\n     *\n     * @param {String} handler\n     * @param {Event} event\n     */\n    value: function onEvent(handler, event) {\n      debug$7('onEvent', handler); // Ignore `onBlur`, `onFocus` and `onSelect` events generated\n      // programmatically while updating selection.\n\n      if (this.tmp.isUpdatingSelection && (handler === 'onSelect' || handler === 'onBlur' || handler === 'onFocus')) {\n        return;\n      } // COMPAT: There are situations where a select event will fire with a new\n      // native selection that resolves to the same internal position. In those\n      // cases we don't need to trigger any changes, since our internal model is\n      // already up to date, but we do want to update the native selection again\n      // to make sure it is in sync. (2017/10/16)\n      //\n      // ANDROID: The updateSelection causes issues in Android when you are\n      // at the end of a block. The selection ends up to the left of the inserted\n      // character instead of to the right. This behavior continues even if\n      // you enter more than one character. (2019/01/03)\n\n\n      if (!IS_ANDROID && handler === 'onSelect') {\n        var editor = this.props.editor;\n        var value = editor.value;\n        var selection = value.selection;\n        var window = getWindow(event.target);\n        var native = window.getSelection();\n        var range = findRange(native, editor);\n\n        if (range && range.equals(selection.toRange())) {\n          this.updateSelection();\n          return;\n        }\n      } // Don't handle drag and drop events coming from embedded editors.\n\n\n      if (handler === 'onDragEnd' || handler === 'onDragEnter' || handler === 'onDragExit' || handler === 'onDragLeave' || handler === 'onDragOver' || handler === 'onDragStart' || handler === 'onDrop') {\n        var closest = event.target.closest('[data-slate-editor]');\n\n        if (closest !== this.element) {\n          return;\n        }\n      } // Some events require being in editable in the editor, so if the event\n      // target isn't, ignore them.\n\n\n      if (handler === 'onBeforeInput' || handler === 'onBlur' || handler === 'onCompositionEnd' || handler === 'onCompositionStart' || handler === 'onCopy' || handler === 'onCut' || handler === 'onFocus' || handler === 'onInput' || handler === 'onKeyDown' || handler === 'onKeyUp' || handler === 'onPaste' || handler === 'onSelect') {\n        if (!this.isInEditor(event.target)) {\n          return;\n        }\n      }\n\n      this.props.onEvent(handler, event);\n    }\n    /**\n     * On native `selectionchange` event, trigger the `onSelect` handler. This is\n     * needed to account for React's `onSelect` being non-standard and not firing\n     * until after a selection has been released. This causes issues in situations\n     * where another change happens while a selection is being made.\n     *\n     * @param {Event} event\n     */\n\n  }, {\n    key: 'render',\n\n    /**\n     * Render the editor content.\n     *\n     * @return {Element}\n     */\n    value: function render() {\n      var _this3 = this;\n\n      var props = this.props,\n          handlers = this.handlers;\n      var id = props.id,\n          className = props.className,\n          readOnly = props.readOnly,\n          editor = props.editor,\n          tabIndex = props.tabIndex,\n          role = props.role,\n          tagName = props.tagName,\n          spellCheck = props.spellCheck;\n      var value = editor.value;\n      var Container = tagName;\n      var document = value.document,\n          selection = value.selection,\n          decorations = value.decorations;\n      var indexes = document.getSelectionIndexes(selection);\n      var decs = document.getDecorations(editor).concat(decorations);\n      var childrenDecorations = getChildrenDecorations(document, decs);\n      var children = document.nodes.toArray().map(function (child, i) {\n        var isSelected = !!indexes && indexes.start <= i && i < indexes.end;\n        return _this3.renderNode(child, isSelected, childrenDecorations[i]);\n      });\n\n      var style = _extends({\n        // Prevent the default outline styles.\n        outline: 'none',\n        // Preserve adjacent whitespace and new lines.\n        whiteSpace: 'pre-wrap',\n        // Allow words to break if they are too long.\n        wordWrap: 'break-word'\n      }, readOnly ? {} : {\n        WebkitUserModify: 'read-write-plaintext-only'\n      }, props.style);\n\n      debug$7('render', {\n        props: props\n      });\n\n      if (debug$7.enabled) {\n        debug$7.update('render', {\n          text: value.document.text,\n          selection: value.selection.toJSON(),\n          value: value.toJSON()\n        });\n      }\n\n      return React.createElement(Container, _extends({}, handlers, {\n        'data-slate-editor': true,\n        ref: this.ref,\n        'data-key': document.key,\n        contentEditable: readOnly ? null : true,\n        suppressContentEditableWarning: true,\n        id: id,\n        className: className,\n        autoCorrect: props.autoCorrect ? 'on' : 'off',\n        spellCheck: spellCheck,\n        style: style,\n        role: readOnly ? null : role || 'textbox',\n        tabIndex: tabIndex // COMPAT: The Grammarly Chrome extension works by changing the DOM out\n        // from under `contenteditable` elements, which leads to weird behaviors\n        // so we have to disable it like this. (2017/04/24)\n        ,\n        'data-gramm': false\n      }), children);\n    }\n    /**\n     * Render a `child` node of the document.\n     *\n     * @param {Node} child\n     * @param {Boolean} isSelected\n     * @return {Element}\n     */\n\n  }]);\n  return Content;\n}(React.Component);\n/**\n * Export.\n *\n * @type {Component}\n */\n\n\nContent.propTypes = {\n  autoCorrect: Types.bool.isRequired,\n  className: Types.string,\n  editor: Types.object.isRequired,\n  id: Types.string,\n  readOnly: Types.bool.isRequired,\n  role: Types.string,\n  spellCheck: Types.bool.isRequired,\n  style: Types.object,\n  tabIndex: Types.number,\n  tagName: Types.string\n};\nContent.defaultProps = {\n  style: {},\n  tagName: 'div'\n};\n/**\n * Props that can be defined by plugins.\n *\n * @type {Array}\n */\n\nvar PROPS = [].concat(toConsumableArray(EVENT_HANDLERS), ['commands', 'decorateNode', 'queries', 'renderEditor', 'renderMark', 'renderNode', 'schema']);\n/**\n * A plugin that adds the React-specific rendering logic to the editor.\n *\n * @param {Object} options\n * @return {Object}\n */\n\nfunction ReactPlugin() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var placeholder = options.placeholder,\n      _options$plugins = options.plugins,\n      plugins = _options$plugins === undefined ? [] : _options$plugins;\n  /**\n   * Decorate node.\n   *\n   * @param {Object} node\n   * @param {Editor} editor\n   * @param {Function} next\n   * @return {Array}\n   */\n\n  function decorateNode(node, editor, next) {\n    return [];\n  }\n  /**\n   * Render editor.\n   *\n   * @param {Object} props\n   * @param {Editor} editor\n   * @param {Function} next\n   * @return {Element}\n   */\n\n\n  function renderEditor(props, editor, next) {\n    return React.createElement(Content, {\n      autoCorrect: props.autoCorrect,\n      className: props.className,\n      editor: editor,\n      id: props.id,\n      onEvent: function onEvent(handler, event) {\n        return editor.run(handler, event);\n      },\n      readOnly: props.readOnly,\n      role: props.role,\n      spellCheck: props.spellCheck,\n      style: props.style,\n      tabIndex: props.tabIndex,\n      tagName: props.tagName\n    });\n  }\n  /**\n   * Render node.\n   *\n   * @param {Object} props\n   * @param {Editor} editor\n   * @param {Function} next\n   * @return {Element}\n   */\n\n\n  function renderNode(props, editor, next) {\n    var attributes = props.attributes,\n        children = props.children,\n        node = props.node;\n    var object = node.object;\n    if (object !== 'block' && object !== 'inline') return null;\n    var Tag = object === 'block' ? 'div' : 'span';\n    var style = {\n      position: 'relative'\n    };\n    return React.createElement(Tag, _extends({}, attributes, {\n      style: style\n    }), children);\n  }\n  /**\n   * Return the plugins.\n   *\n   * @type {Array}\n   */\n\n\n  var ret = [];\n  var editorPlugin = PROPS.reduce(function (memo, prop) {\n    if (prop in options) memo[prop] = options[prop];\n    return memo;\n  }, {});\n  ret.push(DOMPlugin({\n    plugins: [editorPlugin].concat(toConsumableArray(plugins))\n  }));\n\n  if (placeholder) {\n    ret.push(PlaceholderPlugin({\n      placeholder: placeholder,\n      when: function when(editor, node) {\n        return node.object === 'document' && node.text === '' && node.nodes.size === 1 && node.getTexts().size === 1;\n      }\n    }));\n  }\n\n  ret.push({\n    decorateNode: decorateNode,\n    renderEditor: renderEditor,\n    renderNode: renderNode\n  });\n  return ret;\n}\n/**\n * Debug.\n *\n * @type {Function}\n */\n\n\nvar debug$8 = Debug('slate:editor');\n/**\n * Editor.\n *\n * @type {Component}\n */\n\nvar Editor$1 = function (_React$Component) {\n  inherits(Editor$$1, _React$Component);\n\n  function Editor$$1() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    classCallCheck(this, Editor$$1);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = possibleConstructorReturn(this, (_ref = Editor$$1.__proto__ || Object.getPrototypeOf(Editor$$1)).call.apply(_ref, [this].concat(args))), _this), _this.state = {\n      value: _this.props.defaultValue\n      /**\n       * Temporary values.\n       *\n       * @type {Object}\n       */\n\n    }, _this.tmp = {\n      mounted: false,\n      change: null,\n      resolves: 0,\n      updates: 0\n      /**\n       * When the component first mounts, flush a queued change if one exists.\n       */\n\n    }, _this.resolveController = memoizeOne(function () {\n      warning(_this.tmp.resolves < 5 || _this.tmp.resolves !== _this.tmp.updates, 'A Slate <Editor> component is re-resolving the `plugins`, `schema`, `commands`, `queries` or `placeholder` prop on each update, which leads to poor performance. This is often due to passing in a new references for these props with each render by declaring them inline in your render function. Do not do this! Declare them outside your render function, or memoize them instead.');\n      _this.tmp.resolves++;\n      var react = ReactPlugin(_extends({}, _this.props, {\n        value: _this.props.value || _this.state.value\n      }));\n\n      var onChange = function onChange(change) {\n        if (_this.tmp.mounted) {\n          _this.handleChange(change);\n        } else {\n          _this.tmp.change = change;\n        }\n      };\n\n      _this.controller = new Editor({\n        plugins: [react],\n        onChange: onChange\n      }, {\n        controller: _this,\n        construct: false\n      });\n\n      _this.controller.run('onConstruct');\n    }), _temp), possibleConstructorReturn(_this, _ret);\n  }\n  /**\n   * Property types.\n   *\n   * @type {Object}\n   */\n\n  /**\n   * Default properties.\n   *\n   * @type {Object}\n   */\n\n  /**\n   * Initial state.\n   *\n   * @type {Object}\n   */\n\n\n  createClass(Editor$$1, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.tmp.mounted = true;\n      this.tmp.updates++;\n\n      if (this.props.autoFocus) {\n        this.focus();\n      }\n\n      if (this.tmp.change) {\n        this.handleChange(this.tmp.change);\n        this.tmp.change = null;\n      }\n    }\n    /**\n     * When the component updates, flush a queued change if one exists.\n     */\n\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate() {\n      this.tmp.updates++;\n\n      if (this.tmp.change) {\n        this.handleChange(this.tmp.change);\n        this.tmp.change = null;\n      }\n    }\n    /**\n     * When the component unmounts, make sure async commands don't trigger react updates.\n     */\n\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.tmp.mounted = false;\n    }\n    /**\n     * Render the editor.\n     *\n     * @return {Element}\n     */\n\n  }, {\n    key: 'render',\n    value: function render() {\n      debug$8('render', this);\n\n      var props = _extends({}, this.props, {\n        editor: this // Re-resolve the controller if needed based on memoized props.\n\n      });\n\n      var commands = props.commands,\n          placeholder = props.placeholder,\n          plugins = props.plugins,\n          queries = props.queries,\n          schema = props.schema;\n      this.resolveController(plugins, schema, commands, queries, placeholder); // Set the current props on the controller.\n\n      var options = props.options,\n          readOnly = props.readOnly,\n          valueFromProps = props.value;\n      var valueFromState = this.state.value;\n      var value = valueFromProps || valueFromState;\n      this.controller.setReadOnly(readOnly);\n      this.controller.setValue(value, options); // Render the editor's children with the controller.\n\n      var children = this.controller.run('renderEditor', _extends({}, props, {\n        value: value\n      }));\n      return children;\n    }\n    /**\n     * Resolve an editor controller from the passed-in props. This method takes\n     * all of the props as individual arguments to be able to properly memoize\n     * against anything that could change and invalidate the old editor.\n     *\n     * @param {Array} plugins\n     * @param {Object} schema\n     * @param {Object} commands\n     * @param {Object} queries\n     * @param {String} placeholder\n     * @return {Editor}\n     */\n\n  }, {\n    key: 'handleChange',\n    value: function handleChange(change) {\n      var onChange = this.props.onChange;\n      var value = this.state.value;\n\n      if (value) {\n        // Syncing value inside this component since parent does not want control of it (defaultValue was used)\n        this.setState({\n          value: change.value\n        });\n      }\n\n      onChange(change);\n    }\n    /**\n     * Mimic the API of the `Editor` controller, so that this component instance\n     * can be passed in its place to plugins.\n     */\n\n  }, {\n    key: 'applyOperation',\n    value: function applyOperation() {\n      var _controller;\n\n      return (_controller = this.controller).applyOperation.apply(_controller, arguments);\n    }\n  }, {\n    key: 'command',\n    value: function command() {\n      var _controller2;\n\n      return (_controller2 = this.controller).command.apply(_controller2, arguments);\n    }\n  }, {\n    key: 'hasCommand',\n    value: function hasCommand() {\n      var _controller3;\n\n      return (_controller3 = this.controller).hasCommand.apply(_controller3, arguments);\n    }\n  }, {\n    key: 'hasQuery',\n    value: function hasQuery() {\n      var _controller4;\n\n      return (_controller4 = this.controller).hasQuery.apply(_controller4, arguments);\n    }\n  }, {\n    key: 'normalize',\n    value: function normalize() {\n      var _controller5;\n\n      return (_controller5 = this.controller).normalize.apply(_controller5, arguments);\n    }\n  }, {\n    key: 'query',\n    value: function query() {\n      var _controller6;\n\n      return (_controller6 = this.controller).query.apply(_controller6, arguments);\n    }\n  }, {\n    key: 'registerCommand',\n    value: function registerCommand() {\n      var _controller7;\n\n      return (_controller7 = this.controller).registerCommand.apply(_controller7, arguments);\n    }\n  }, {\n    key: 'registerQuery',\n    value: function registerQuery() {\n      var _controller8;\n\n      return (_controller8 = this.controller).registerQuery.apply(_controller8, arguments);\n    }\n  }, {\n    key: 'run',\n    value: function run() {\n      var _controller9;\n\n      return (_controller9 = this.controller).run.apply(_controller9, arguments);\n    }\n  }, {\n    key: 'withoutNormalizing',\n    value: function withoutNormalizing() {\n      var _controller10;\n\n      return (_controller10 = this.controller).withoutNormalizing.apply(_controller10, arguments);\n    }\n    /**\n     * Deprecated.\n     */\n\n  }, {\n    key: 'call',\n    value: function call() {\n      var _controller11;\n\n      return (_controller11 = this.controller).call.apply(_controller11, arguments);\n    }\n  }, {\n    key: 'change',\n    value: function change() {\n      var _controller12;\n\n      return (_controller12 = this.controller).change.apply(_controller12, arguments);\n    }\n  }, {\n    key: 'onChange',\n    value: function onChange() {\n      var _controller13;\n\n      return (_controller13 = this.controller).onChange.apply(_controller13, arguments);\n    }\n  }, {\n    key: 'applyOperations',\n    value: function applyOperations() {\n      var _controller14;\n\n      return (_controller14 = this.controller).applyOperations.apply(_controller14, arguments);\n    }\n  }, {\n    key: 'setOperationFlag',\n    value: function setOperationFlag() {\n      var _controller15;\n\n      return (_controller15 = this.controller).setOperationFlag.apply(_controller15, arguments);\n    }\n  }, {\n    key: 'getFlag',\n    value: function getFlag() {\n      var _controller16;\n\n      return (_controller16 = this.controller).getFlag.apply(_controller16, arguments);\n    }\n  }, {\n    key: 'unsetOperationFlag',\n    value: function unsetOperationFlag() {\n      var _controller17;\n\n      return (_controller17 = this.controller).unsetOperationFlag.apply(_controller17, arguments);\n    }\n  }, {\n    key: 'withoutNormalization',\n    value: function withoutNormalization() {\n      var _controller18;\n\n      return (_controller18 = this.controller).withoutNormalization.apply(_controller18, arguments);\n    }\n  }, {\n    key: 'operations',\n    get: function get$$1() {\n      return this.controller.operations;\n    }\n  }, {\n    key: 'readOnly',\n    get: function get$$1() {\n      return this.controller.readOnly;\n    }\n  }, {\n    key: 'value',\n    get: function get$$1() {\n      return this.controller.value;\n    }\n  }, {\n    key: 'editor',\n    get: function get$$1() {\n      return this.controller.editor;\n    }\n  }, {\n    key: 'schema',\n    get: function get$$1() {\n      invariant(false, 'As of Slate 0.42, the `editor.schema` property no longer exists, and its functionality has been folded into the editor itself. Use the `editor` instead.');\n    }\n  }, {\n    key: 'stack',\n    get: function get$$1() {\n      invariant(false, 'As of Slate 0.42, the `editor.stack` property no longer exists, and its functionality has been folded into the editor itself. Use the `editor` instead.');\n    }\n  }]);\n  return Editor$$1;\n}(React.Component);\n/**\n * Export.\n *\n * @type {Component}\n */\n\n\nEditor$1.propTypes = _extends({\n  autoCorrect: Types.bool,\n  autoFocus: Types.bool,\n  className: Types.string,\n  defaultValue: SlateTypes.value,\n  id: Types.string,\n  onChange: Types.func,\n  options: Types.object,\n  placeholder: Types.any,\n  plugins: Types.array,\n  readOnly: Types.bool,\n  role: Types.string,\n  schema: Types.object,\n  spellCheck: Types.bool,\n  style: Types.object,\n  tabIndex: Types.number,\n  value: SlateTypes.value\n}, EVENT_HANDLERS.reduce(function (obj, handler) {\n  obj[handler] = Types.func;\n  return obj;\n}, {}));\nEditor$1.defaultProps = {\n  autoFocus: false,\n  autoCorrect: true,\n  onChange: function onChange() {},\n  options: {},\n  placeholder: '',\n  plugins: [],\n  readOnly: false,\n  schema: {},\n  spellCheck: true\n};\nvar index = {\n  Editor: Editor$1,\n  cloneFragment: cloneFragment,\n  findDOMNode: findDOMNode,\n  findDOMRange: findDOMRange,\n  findNode: findNode,\n  findRange: findRange,\n  getEventRange: getEventRange,\n  getEventTransfer: getEventTransfer,\n  setEventTransfer: setEventTransfer,\n  ReactPlugin: ReactPlugin\n};\nexport default index;\nexport { Editor$1 as Editor, cloneFragment, findDOMNode, findDOMRange, findNode, findRange, getEventRange, getEventTransfer, setEventTransfer, ReactPlugin };","\"use strict\";\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n  createDebug.debug = createDebug;\n  createDebug.default = createDebug;\n  createDebug.coerce = coerce;\n  createDebug.disable = disable;\n  createDebug.enable = enable;\n  createDebug.enabled = enabled;\n  createDebug.humanize = require('ms');\n  Object.keys(env).forEach(function (key) {\n    createDebug[key] = env[key];\n  });\n  /**\n  * Active `debug` instances.\n  */\n\n  createDebug.instances = [];\n  /**\n  * The currently active debug mode names, and names to skip.\n  */\n\n  createDebug.names = [];\n  createDebug.skips = [];\n  /**\n  * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n  *\n  * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n  */\n\n  createDebug.formatters = {};\n  /**\n  * Selects a color for a debug namespace\n  * @param {String} namespace The namespace string for the for the debug instance to be colored\n  * @return {Number|String} An ANSI color code for the given namespace\n  * @api private\n  */\n\n  function selectColor(namespace) {\n    var hash = 0;\n\n    for (var i = 0; i < namespace.length; i++) {\n      hash = (hash << 5) - hash + namespace.charCodeAt(i);\n      hash |= 0; // Convert to 32bit integer\n    }\n\n    return createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n  }\n\n  createDebug.selectColor = selectColor;\n  /**\n  * Create a debugger with the given `namespace`.\n  *\n  * @param {String} namespace\n  * @return {Function}\n  * @api public\n  */\n\n  function createDebug(namespace) {\n    var prevTime;\n\n    function debug() {\n      // Disabled?\n      if (!debug.enabled) {\n        return;\n      }\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      var self = debug; // Set `diff` timestamp\n\n      var curr = Number(new Date());\n      var ms = curr - (prevTime || curr);\n      self.diff = ms;\n      self.prev = prevTime;\n      self.curr = curr;\n      prevTime = curr;\n      args[0] = createDebug.coerce(args[0]);\n\n      if (typeof args[0] !== 'string') {\n        // Anything else let's inspect with %O\n        args.unshift('%O');\n      } // Apply any `formatters` transformations\n\n\n      var index = 0;\n      args[0] = args[0].replace(/%([a-zA-Z%])/g, function (match, format) {\n        // If we encounter an escaped % then don't increase the array index\n        if (match === '%%') {\n          return match;\n        }\n\n        index++;\n        var formatter = createDebug.formatters[format];\n\n        if (typeof formatter === 'function') {\n          var val = args[index];\n          match = formatter.call(self, val); // Now we need to remove `args[index]` since it's inlined in the `format`\n\n          args.splice(index, 1);\n          index--;\n        }\n\n        return match;\n      }); // Apply env-specific formatting (colors, etc.)\n\n      createDebug.formatArgs.call(self, args);\n      var logFn = self.log || createDebug.log;\n      logFn.apply(self, args);\n    }\n\n    debug.namespace = namespace;\n    debug.enabled = createDebug.enabled(namespace);\n    debug.useColors = createDebug.useColors();\n    debug.color = selectColor(namespace);\n    debug.destroy = destroy;\n    debug.extend = extend; // Debug.formatArgs = formatArgs;\n    // debug.rawLog = rawLog;\n    // env-specific initialization logic for debug instances\n\n    if (typeof createDebug.init === 'function') {\n      createDebug.init(debug);\n    }\n\n    createDebug.instances.push(debug);\n    return debug;\n  }\n\n  function destroy() {\n    var index = createDebug.instances.indexOf(this);\n\n    if (index !== -1) {\n      createDebug.instances.splice(index, 1);\n      return true;\n    }\n\n    return false;\n  }\n\n  function extend(namespace, delimiter) {\n    return createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n  }\n  /**\n  * Enables a debug mode by namespaces. This can include modes\n  * separated by a colon and wildcards.\n  *\n  * @param {String} namespaces\n  * @api public\n  */\n\n\n  function enable(namespaces) {\n    createDebug.save(namespaces);\n    createDebug.names = [];\n    createDebug.skips = [];\n    var i;\n    var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n    var len = split.length;\n\n    for (i = 0; i < len; i++) {\n      if (!split[i]) {\n        // ignore empty strings\n        continue;\n      }\n\n      namespaces = split[i].replace(/\\*/g, '.*?');\n\n      if (namespaces[0] === '-') {\n        createDebug.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n      } else {\n        createDebug.names.push(new RegExp('^' + namespaces + '$'));\n      }\n    }\n\n    for (i = 0; i < createDebug.instances.length; i++) {\n      var instance = createDebug.instances[i];\n      instance.enabled = createDebug.enabled(instance.namespace);\n    }\n  }\n  /**\n  * Disable debug output.\n  *\n  * @api public\n  */\n\n\n  function disable() {\n    createDebug.enable('');\n  }\n  /**\n  * Returns true if the given mode name is enabled, false otherwise.\n  *\n  * @param {String} name\n  * @return {Boolean}\n  * @api public\n  */\n\n\n  function enabled(name) {\n    if (name[name.length - 1] === '*') {\n      return true;\n    }\n\n    var i;\n    var len;\n\n    for (i = 0, len = createDebug.skips.length; i < len; i++) {\n      if (createDebug.skips[i].test(name)) {\n        return false;\n      }\n    }\n\n    for (i = 0, len = createDebug.names.length; i < len; i++) {\n      if (createDebug.names[i].test(name)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n  /**\n  * Coerce `val`.\n  *\n  * @param {Mixed} val\n  * @return {Mixed}\n  * @api private\n  */\n\n\n  function coerce(val) {\n    if (val instanceof Error) {\n      return val.stack || val.message;\n    }\n\n    return val;\n  }\n\n  createDebug.enable(createDebug.load());\n  return createDebug;\n}\n\nmodule.exports = setup;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isInCodeBlock = exports.getIndent = exports.getCurrentIndent = exports.getCurrentCode = exports.deserializeCode = undefined;\n\nvar _deserializeCode = require('./deserializeCode');\n\nvar _deserializeCode2 = _interopRequireDefault(_deserializeCode);\n\nvar _getCurrentCode = require('./getCurrentCode');\n\nvar _getCurrentCode2 = _interopRequireDefault(_getCurrentCode);\n\nvar _getCurrentIndent = require('./getCurrentIndent');\n\nvar _getCurrentIndent2 = _interopRequireDefault(_getCurrentIndent);\n\nvar _getIndent = require('./getIndent');\n\nvar _getIndent2 = _interopRequireDefault(_getIndent);\n\nvar _isInCodeBlock = require('./isInCodeBlock');\n\nvar _isInCodeBlock2 = _interopRequireDefault(_isInCodeBlock);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nexports.deserializeCode = _deserializeCode2.default;\nexports.getCurrentCode = _getCurrentCode2.default;\nexports.getCurrentIndent = _getCurrentIndent2.default;\nexports.getIndent = _getIndent2.default;\nexports.isInCodeBlock = _isInCodeBlock2.default;","\"use strict\";\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\n\n\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\n/**\n * Colors.\n */\n\nexports.colors = ['#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC', '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF', '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC', '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF', '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC', '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033', '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366', '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933', '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC', '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF', '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'];\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n// eslint-disable-next-line complexity\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n    return true;\n  } // Internet Explorer and Edge do not support colors.\n\n\n  if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n    return false;\n  } // Is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\n\n  return typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance || // Is firebug? http://stackoverflow.com/a/398120/376773\n  typeof window !== 'undefined' && window.console && (window.console.firebug || window.console.exception && window.console.table) || // Is firefox >= v31?\n  // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n  typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31 || // Double check webkit in userAgent just in case we are in a worker\n  typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/);\n}\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\n\nfunction formatArgs(args) {\n  args[0] = (this.useColors ? '%c' : '') + this.namespace + (this.useColors ? ' %c' : ' ') + args[0] + (this.useColors ? '%c ' : ' ') + '+' + module.exports.humanize(this.diff);\n\n  if (!this.useColors) {\n    return;\n  }\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit'); // The final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function (match) {\n    if (match === '%%') {\n      return;\n    }\n\n    index++;\n\n    if (match === '%c') {\n      // We only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n  args.splice(lastC, 0, c);\n}\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\n\nfunction log() {\n  var _console; // This hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n\n\n  return (typeof console === \"undefined\" ? \"undefined\" : _typeof(console)) === 'object' && console.log && (_console = console).log.apply(_console, arguments);\n}\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\n\nfunction save(namespaces) {\n  try {\n    if (namespaces) {\n      exports.storage.setItem('debug', namespaces);\n    } else {\n      exports.storage.removeItem('debug');\n    }\n  } catch (error) {// Swallow\n    // XXX (@Qix-) should we be logging these?\n  }\n}\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\n\nfunction load() {\n  var r;\n\n  try {\n    r = exports.storage.getItem('debug');\n  } catch (error) {} // Swallow\n  // XXX (@Qix-) should we be logging these?\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\n\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\n\nfunction localstorage() {\n  try {\n    // TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n    // The Browser also has localStorage in the global context.\n    return localStorage;\n  } catch (error) {// Swallow\n    // XXX (@Qix-) should we be logging these?\n  }\n}\n\nmodule.exports = require('./common')(exports);\nvar formatters = module.exports.formatters;\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n  try {\n    return JSON.stringify(v);\n  } catch (error) {\n    return '[UnexpectedJSONParseError]: ' + error.message;\n  }\n};","\"use strict\";\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\n\n\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\n/**\n * Colors.\n */\n\nexports.colors = ['#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC', '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF', '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC', '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF', '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC', '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033', '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366', '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933', '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC', '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF', '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'];\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n// eslint-disable-next-line complexity\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n    return true;\n  } // Internet Explorer and Edge do not support colors.\n\n\n  if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n    return false;\n  } // Is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\n\n  return typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance || // Is firebug? http://stackoverflow.com/a/398120/376773\n  typeof window !== 'undefined' && window.console && (window.console.firebug || window.console.exception && window.console.table) || // Is firefox >= v31?\n  // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n  typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31 || // Double check webkit in userAgent just in case we are in a worker\n  typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/);\n}\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\n\nfunction formatArgs(args) {\n  args[0] = (this.useColors ? '%c' : '') + this.namespace + (this.useColors ? ' %c' : ' ') + args[0] + (this.useColors ? '%c ' : ' ') + '+' + module.exports.humanize(this.diff);\n\n  if (!this.useColors) {\n    return;\n  }\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit'); // The final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function (match) {\n    if (match === '%%') {\n      return;\n    }\n\n    index++;\n\n    if (match === '%c') {\n      // We only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n  args.splice(lastC, 0, c);\n}\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\n\nfunction log() {\n  var _console; // This hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n\n\n  return (typeof console === \"undefined\" ? \"undefined\" : _typeof(console)) === 'object' && console.log && (_console = console).log.apply(_console, arguments);\n}\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\n\nfunction save(namespaces) {\n  try {\n    if (namespaces) {\n      exports.storage.setItem('debug', namespaces);\n    } else {\n      exports.storage.removeItem('debug');\n    }\n  } catch (error) {// Swallow\n    // XXX (@Qix-) should we be logging these?\n  }\n}\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\n\nfunction load() {\n  var r;\n\n  try {\n    r = exports.storage.getItem('debug');\n  } catch (error) {} // Swallow\n  // XXX (@Qix-) should we be logging these?\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\n\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\n\nfunction localstorage() {\n  try {\n    // TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n    // The Browser also has localStorage in the global context.\n    return localStorage;\n  } catch (error) {// Swallow\n    // XXX (@Qix-) should we be logging these?\n  }\n}\n\nmodule.exports = require('./common')(exports);\nvar formatters = module.exports.formatters;\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n  try {\n    return JSON.stringify(v);\n  } catch (error) {\n    return '[UnexpectedJSONParseError]: ' + error.message;\n  }\n};","\"use strict\";\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n  createDebug.debug = createDebug;\n  createDebug.default = createDebug;\n  createDebug.coerce = coerce;\n  createDebug.disable = disable;\n  createDebug.enable = enable;\n  createDebug.enabled = enabled;\n  createDebug.humanize = require('ms');\n  Object.keys(env).forEach(function (key) {\n    createDebug[key] = env[key];\n  });\n  /**\n  * Active `debug` instances.\n  */\n\n  createDebug.instances = [];\n  /**\n  * The currently active debug mode names, and names to skip.\n  */\n\n  createDebug.names = [];\n  createDebug.skips = [];\n  /**\n  * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n  *\n  * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n  */\n\n  createDebug.formatters = {};\n  /**\n  * Selects a color for a debug namespace\n  * @param {String} namespace The namespace string for the for the debug instance to be colored\n  * @return {Number|String} An ANSI color code for the given namespace\n  * @api private\n  */\n\n  function selectColor(namespace) {\n    var hash = 0;\n\n    for (var i = 0; i < namespace.length; i++) {\n      hash = (hash << 5) - hash + namespace.charCodeAt(i);\n      hash |= 0; // Convert to 32bit integer\n    }\n\n    return createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n  }\n\n  createDebug.selectColor = selectColor;\n  /**\n  * Create a debugger with the given `namespace`.\n  *\n  * @param {String} namespace\n  * @return {Function}\n  * @api public\n  */\n\n  function createDebug(namespace) {\n    var prevTime;\n\n    function debug() {\n      // Disabled?\n      if (!debug.enabled) {\n        return;\n      }\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      var self = debug; // Set `diff` timestamp\n\n      var curr = Number(new Date());\n      var ms = curr - (prevTime || curr);\n      self.diff = ms;\n      self.prev = prevTime;\n      self.curr = curr;\n      prevTime = curr;\n      args[0] = createDebug.coerce(args[0]);\n\n      if (typeof args[0] !== 'string') {\n        // Anything else let's inspect with %O\n        args.unshift('%O');\n      } // Apply any `formatters` transformations\n\n\n      var index = 0;\n      args[0] = args[0].replace(/%([a-zA-Z%])/g, function (match, format) {\n        // If we encounter an escaped % then don't increase the array index\n        if (match === '%%') {\n          return match;\n        }\n\n        index++;\n        var formatter = createDebug.formatters[format];\n\n        if (typeof formatter === 'function') {\n          var val = args[index];\n          match = formatter.call(self, val); // Now we need to remove `args[index]` since it's inlined in the `format`\n\n          args.splice(index, 1);\n          index--;\n        }\n\n        return match;\n      }); // Apply env-specific formatting (colors, etc.)\n\n      createDebug.formatArgs.call(self, args);\n      var logFn = self.log || createDebug.log;\n      logFn.apply(self, args);\n    }\n\n    debug.namespace = namespace;\n    debug.enabled = createDebug.enabled(namespace);\n    debug.useColors = createDebug.useColors();\n    debug.color = selectColor(namespace);\n    debug.destroy = destroy;\n    debug.extend = extend; // Debug.formatArgs = formatArgs;\n    // debug.rawLog = rawLog;\n    // env-specific initialization logic for debug instances\n\n    if (typeof createDebug.init === 'function') {\n      createDebug.init(debug);\n    }\n\n    createDebug.instances.push(debug);\n    return debug;\n  }\n\n  function destroy() {\n    var index = createDebug.instances.indexOf(this);\n\n    if (index !== -1) {\n      createDebug.instances.splice(index, 1);\n      return true;\n    }\n\n    return false;\n  }\n\n  function extend(namespace, delimiter) {\n    return createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n  }\n  /**\n  * Enables a debug mode by namespaces. This can include modes\n  * separated by a colon and wildcards.\n  *\n  * @param {String} namespaces\n  * @api public\n  */\n\n\n  function enable(namespaces) {\n    createDebug.save(namespaces);\n    createDebug.names = [];\n    createDebug.skips = [];\n    var i;\n    var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n    var len = split.length;\n\n    for (i = 0; i < len; i++) {\n      if (!split[i]) {\n        // ignore empty strings\n        continue;\n      }\n\n      namespaces = split[i].replace(/\\*/g, '.*?');\n\n      if (namespaces[0] === '-') {\n        createDebug.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n      } else {\n        createDebug.names.push(new RegExp('^' + namespaces + '$'));\n      }\n    }\n\n    for (i = 0; i < createDebug.instances.length; i++) {\n      var instance = createDebug.instances[i];\n      instance.enabled = createDebug.enabled(instance.namespace);\n    }\n  }\n  /**\n  * Disable debug output.\n  *\n  * @api public\n  */\n\n\n  function disable() {\n    createDebug.enable('');\n  }\n  /**\n  * Returns true if the given mode name is enabled, false otherwise.\n  *\n  * @param {String} name\n  * @return {Boolean}\n  * @api public\n  */\n\n\n  function enabled(name) {\n    if (name[name.length - 1] === '*') {\n      return true;\n    }\n\n    var i;\n    var len;\n\n    for (i = 0, len = createDebug.skips.length; i < len; i++) {\n      if (createDebug.skips[i].test(name)) {\n        return false;\n      }\n    }\n\n    for (i = 0, len = createDebug.names.length; i < len; i++) {\n      if (createDebug.names[i].test(name)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n  /**\n  * Coerce `val`.\n  *\n  * @param {Mixed} val\n  * @return {Mixed}\n  * @api private\n  */\n\n\n  function coerce(val) {\n    if (val instanceof Error) {\n      return val.stack || val.message;\n    }\n\n    return val;\n  }\n\n  createDebug.enable(createDebug.load());\n  return createDebug;\n}\n\nmodule.exports = setup;","/**\n * Helpers.\n */\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function (val, options) {\n  options = options || {};\n  var type = typeof val;\n\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n\n  throw new Error('val is not a non-empty string or a valid number. val=' + JSON.stringify(val));\n};\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\n\nfunction parse(str) {\n  str = String(str);\n\n  if (str.length > 100) {\n    return;\n  }\n\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(str);\n\n  if (!match) {\n    return;\n  }\n\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n\n    default:\n      return undefined;\n  }\n}\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n\n  return ms + 'ms';\n}\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n\n  return ms + ' ms';\n}\n/**\n * Pluralization helper.\n */\n\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isSelectionInList = exports.isItem = exports.isList = exports.getPreviousItem = exports.getListForItem = exports.getItemsAtRange = exports.getItemDepth = exports.getDeepestItemDepth = exports.getCurrentList = exports.getCurrentItem = undefined;\n\nvar _getCurrentItem = require('./getCurrentItem');\n\nvar _getCurrentItem2 = _interopRequireDefault(_getCurrentItem);\n\nvar _getCurrentList = require('./getCurrentList');\n\nvar _getCurrentList2 = _interopRequireDefault(_getCurrentList);\n\nvar _getDeepestItemDepth = require('./getDeepestItemDepth');\n\nvar _getDeepestItemDepth2 = _interopRequireDefault(_getDeepestItemDepth);\n\nvar _getItemDepth = require('./getItemDepth');\n\nvar _getItemDepth2 = _interopRequireDefault(_getItemDepth);\n\nvar _getItemsAtRange = require('./getItemsAtRange');\n\nvar _getItemsAtRange2 = _interopRequireDefault(_getItemsAtRange);\n\nvar _getListForItem = require('./getListForItem');\n\nvar _getListForItem2 = _interopRequireDefault(_getListForItem);\n\nvar _getPreviousItem = require('./getPreviousItem');\n\nvar _getPreviousItem2 = _interopRequireDefault(_getPreviousItem);\n\nvar _isList = require('./isList');\n\nvar _isList2 = _interopRequireDefault(_isList);\n\nvar _isItem = require('./isItem');\n\nvar _isItem2 = _interopRequireDefault(_isItem);\n\nvar _isSelectionInList = require('./isSelectionInList');\n\nvar _isSelectionInList2 = _interopRequireDefault(_isSelectionInList);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nexports.getCurrentItem = _getCurrentItem2.default;\nexports.getCurrentList = _getCurrentList2.default;\nexports.getDeepestItemDepth = _getDeepestItemDepth2.default;\nexports.getItemDepth = _getItemDepth2.default;\nexports.getItemsAtRange = _getItemsAtRange2.default;\nexports.getListForItem = _getListForItem2.default;\nexports.getPreviousItem = _getPreviousItem2.default;\nexports.isList = _isList2.default;\nexports.isItem = _isItem2.default;\nexports.isSelectionInList = _isSelectionInList2.default;","\"use strict\";\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n  createDebug.debug = createDebug;\n  createDebug.default = createDebug;\n  createDebug.coerce = coerce;\n  createDebug.disable = disable;\n  createDebug.enable = enable;\n  createDebug.enabled = enabled;\n  createDebug.humanize = require('ms');\n  Object.keys(env).forEach(function (key) {\n    createDebug[key] = env[key];\n  });\n  /**\n  * Active `debug` instances.\n  */\n\n  createDebug.instances = [];\n  /**\n  * The currently active debug mode names, and names to skip.\n  */\n\n  createDebug.names = [];\n  createDebug.skips = [];\n  /**\n  * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n  *\n  * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n  */\n\n  createDebug.formatters = {};\n  /**\n  * Selects a color for a debug namespace\n  * @param {String} namespace The namespace string for the for the debug instance to be colored\n  * @return {Number|String} An ANSI color code for the given namespace\n  * @api private\n  */\n\n  function selectColor(namespace) {\n    var hash = 0;\n\n    for (var i = 0; i < namespace.length; i++) {\n      hash = (hash << 5) - hash + namespace.charCodeAt(i);\n      hash |= 0; // Convert to 32bit integer\n    }\n\n    return createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n  }\n\n  createDebug.selectColor = selectColor;\n  /**\n  * Create a debugger with the given `namespace`.\n  *\n  * @param {String} namespace\n  * @return {Function}\n  * @api public\n  */\n\n  function createDebug(namespace) {\n    var prevTime;\n\n    function debug() {\n      // Disabled?\n      if (!debug.enabled) {\n        return;\n      }\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      var self = debug; // Set `diff` timestamp\n\n      var curr = Number(new Date());\n      var ms = curr - (prevTime || curr);\n      self.diff = ms;\n      self.prev = prevTime;\n      self.curr = curr;\n      prevTime = curr;\n      args[0] = createDebug.coerce(args[0]);\n\n      if (typeof args[0] !== 'string') {\n        // Anything else let's inspect with %O\n        args.unshift('%O');\n      } // Apply any `formatters` transformations\n\n\n      var index = 0;\n      args[0] = args[0].replace(/%([a-zA-Z%])/g, function (match, format) {\n        // If we encounter an escaped % then don't increase the array index\n        if (match === '%%') {\n          return match;\n        }\n\n        index++;\n        var formatter = createDebug.formatters[format];\n\n        if (typeof formatter === 'function') {\n          var val = args[index];\n          match = formatter.call(self, val); // Now we need to remove `args[index]` since it's inlined in the `format`\n\n          args.splice(index, 1);\n          index--;\n        }\n\n        return match;\n      }); // Apply env-specific formatting (colors, etc.)\n\n      createDebug.formatArgs.call(self, args);\n      var logFn = self.log || createDebug.log;\n      logFn.apply(self, args);\n    }\n\n    debug.namespace = namespace;\n    debug.enabled = createDebug.enabled(namespace);\n    debug.useColors = createDebug.useColors();\n    debug.color = selectColor(namespace);\n    debug.destroy = destroy;\n    debug.extend = extend; // Debug.formatArgs = formatArgs;\n    // debug.rawLog = rawLog;\n    // env-specific initialization logic for debug instances\n\n    if (typeof createDebug.init === 'function') {\n      createDebug.init(debug);\n    }\n\n    createDebug.instances.push(debug);\n    return debug;\n  }\n\n  function destroy() {\n    var index = createDebug.instances.indexOf(this);\n\n    if (index !== -1) {\n      createDebug.instances.splice(index, 1);\n      return true;\n    }\n\n    return false;\n  }\n\n  function extend(namespace, delimiter) {\n    return createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n  }\n  /**\n  * Enables a debug mode by namespaces. This can include modes\n  * separated by a colon and wildcards.\n  *\n  * @param {String} namespaces\n  * @api public\n  */\n\n\n  function enable(namespaces) {\n    createDebug.save(namespaces);\n    createDebug.names = [];\n    createDebug.skips = [];\n    var i;\n    var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n    var len = split.length;\n\n    for (i = 0; i < len; i++) {\n      if (!split[i]) {\n        // ignore empty strings\n        continue;\n      }\n\n      namespaces = split[i].replace(/\\*/g, '.*?');\n\n      if (namespaces[0] === '-') {\n        createDebug.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n      } else {\n        createDebug.names.push(new RegExp('^' + namespaces + '$'));\n      }\n    }\n\n    for (i = 0; i < createDebug.instances.length; i++) {\n      var instance = createDebug.instances[i];\n      instance.enabled = createDebug.enabled(instance.namespace);\n    }\n  }\n  /**\n  * Disable debug output.\n  *\n  * @api public\n  */\n\n\n  function disable() {\n    createDebug.enable('');\n  }\n  /**\n  * Returns true if the given mode name is enabled, false otherwise.\n  *\n  * @param {String} name\n  * @return {Boolean}\n  * @api public\n  */\n\n\n  function enabled(name) {\n    if (name[name.length - 1] === '*') {\n      return true;\n    }\n\n    var i;\n    var len;\n\n    for (i = 0, len = createDebug.skips.length; i < len; i++) {\n      if (createDebug.skips[i].test(name)) {\n        return false;\n      }\n    }\n\n    for (i = 0, len = createDebug.names.length; i < len; i++) {\n      if (createDebug.names[i].test(name)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n  /**\n  * Coerce `val`.\n  *\n  * @param {Mixed} val\n  * @return {Mixed}\n  * @api private\n  */\n\n\n  function coerce(val) {\n    if (val instanceof Error) {\n      return val.stack || val.message;\n    }\n\n    return val;\n  }\n\n  createDebug.enable(createDebug.load());\n  return createDebug;\n}\n\nmodule.exports = setup;","/**\n * Helpers.\n */\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function (val, options) {\n  options = options || {};\n  var type = typeof val;\n\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n\n  throw new Error('val is not a non-empty string or a valid number. val=' + JSON.stringify(val));\n};\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\n\nfunction parse(str) {\n  str = String(str);\n\n  if (str.length > 100) {\n    return;\n  }\n\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(str);\n\n  if (!match) {\n    return;\n  }\n\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n\n    default:\n      return undefined;\n  }\n}\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n\n  return ms + 'ms';\n}\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n\n  return ms + ' ms';\n}\n/**\n * Pluralization helper.\n */\n\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _parser = require(\"./parser\");\n\nvar _parser2 = _interopRequireDefault(_parser);\n\nvar _slate = require(\"slate\");\n\nvar _immutable = require(\"immutable\");\n\nvar _urls = require(\"./urls\");\n\nvar _utils = require(\"./utils\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nvar String = new _immutable.Record({\n  object: \"string\",\n  text: \"\"\n});\n/**\n * Rules to (de)serialize nodes.\n *\n * @type {Object}\n */\n\nvar tableHeader = \"\";\nvar firstRow = true;\nvar RULES = [{\n  serialize: function serialize(obj, children) {\n    if (obj.object === \"string\") {\n      return children;\n    }\n  }\n}, {\n  serialize: function serialize(obj, children, document) {\n    if (obj.object !== \"block\") return;\n    var parent = document.getParent(obj.key);\n\n    switch (obj.type) {\n      case \"table\":\n        tableHeader = \"\";\n        firstRow = true; // trim removes trailing newline\n\n        return children.trim();\n\n      case \"table-cell\":\n        {\n          switch (obj.getIn([\"data\", \"align\"])) {\n            case \"left\":\n              tableHeader += \"|:--- \";\n              break;\n\n            case \"center\":\n              tableHeader += \"|:---:\";\n              break;\n\n            case \"right\":\n              tableHeader += \"| ---:\";\n              break;\n\n            default:\n              tableHeader += \"| --- \";\n          }\n\n          return \"| \" + children + \" \";\n        }\n\n      case \"table-row\":\n        var output = \"\";\n\n        if (firstRow) {\n          output = tableHeader + \"|\\n\";\n          tableHeader = \"\";\n          firstRow = false;\n        }\n\n        return children + \"|\\n\" + output;\n\n      case \"paragraph\":\n        return children;\n\n      case \"code\":\n        {\n          var language = obj.getIn([\"data\", \"language\"]) || \"\";\n          return \"```\" + language + \"\\n\" + children + \"\\n```\";\n        }\n\n      case \"code-line\":\n        return children + \"\\n\";\n\n      case \"block-quote\":\n        // Handle multi-line blockquotes\n        return children.split(\"\\n\").map(function (text) {\n          return \"> \" + text;\n        }).join(\"\\n\");\n\n      case \"todo-list\":\n      case \"bulleted-list\":\n      case \"ordered-list\":\n        {\n          // root list\n          if (parent === document) {\n            return children;\n          } // nested list\n\n\n          return \"\\n\" + children.replace(/\\n+$/gm, \"\").replace(/^/gm, \"   \");\n        }\n\n      case \"list-item\":\n        {\n          switch (parent.type) {\n            case \"ordered-list\":\n              return \"1. \" + children + \"\\n\";\n\n            case \"todo-list\":\n              var checked = obj.getIn([\"data\", \"checked\"]);\n              var box = checked ? \"[x]\" : \"[ ]\";\n              return box + \" \" + children + \"\\n\";\n\n            default:\n            case \"bulleted-list\":\n              return \"* \" + children + \"\\n\";\n          }\n        }\n\n      case \"heading1\":\n        return \"# \" + children + \"\\n\";\n\n      case \"heading2\":\n        return \"\\n## \" + children + \"\\n\";\n\n      case \"heading3\":\n        return \"\\n### \" + children + \"\\n\";\n\n      case \"heading4\":\n        return \"\\n#### \" + children + \"\\n\";\n\n      case \"heading5\":\n        return \"\\n##### \" + children + \"\\n\";\n\n      case \"heading6\":\n        return \"\\n###### \" + children + \"\\n\";\n\n      case \"horizontal-rule\":\n        return \"---\";\n\n      case \"image\":\n        var alt = obj.getIn([\"data\", \"alt\"]) || \"\";\n        var src = (0, _urls.encode)(obj.getIn([\"data\", \"src\"]) || \"\");\n        return \"![\" + alt + \"](\" + src + \")\";\n    }\n  }\n}, {\n  serialize: function serialize(obj, children) {\n    if (obj.type === \"hashtag\") return children;\n  }\n}, {\n  serialize: function serialize(obj, children) {\n    if (obj.type === \"link\") {\n      var href = (0, _urls.encode)(obj.getIn([\"data\", \"href\"]) || \"\");\n      var text = children.trim() || href;\n      return href ? \"[\" + text + \"](\" + href + \")\" : text;\n    }\n  }\n}, {\n  serialize: function serialize(obj, children) {\n    if (obj.object !== \"mark\") return;\n    if (!children) return;\n\n    switch (obj.type) {\n      case \"bold\":\n        return \"**\" + children + \"**\";\n\n      case \"italic\":\n        return \"_\" + children + \"_\";\n\n      case \"code\":\n        return \"`\" + children + \"`\";\n\n      case \"inserted\":\n        return \"++\" + children + \"++\";\n\n      case \"deleted\":\n        return \"~~\" + children + \"~~\";\n\n      case \"underlined\":\n        return \"__\" + children + \"__\";\n    }\n  }\n}];\n/**\n * Markdown serializer.\n *\n * @type {Markdown}\n */\n\nvar Markdown = function () {\n  /**\n   * Create a new serializer with `rules`.\n   *\n   * @param {Object} options\n   * @property {Array} rules\n   * @return {Markdown} serializer\n   */\n  function Markdown() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Markdown);\n\n    this.rules = [].concat(_toConsumableArray(options.rules || []), RULES);\n    this.serializeNode = this.serializeNode.bind(this);\n    this.serializeLeaves = this.serializeLeaves.bind(this);\n    this.serializeString = this.serializeString.bind(this);\n  }\n  /**\n   * Serialize a `state` object into an HTML string.\n   *\n   * @param {State} state\n   * @return {String} markdown\n   */\n\n\n  _createClass(Markdown, [{\n    key: \"serialize\",\n    value: function serialize(state) {\n      var _this = this;\n\n      var document = state.document;\n      var elements = document.nodes.map(function (node) {\n        return _this.serializeNode(node, document);\n      });\n      var output = elements.join(\"\\n\"); // trim beginning whitespace\n\n      return output.replace(/^\\s+/g, \"\");\n    }\n    /**\n     * Serialize a `node`.\n     *\n     * @param {Node} node\n     * @return {String}\n     */\n\n  }, {\n    key: \"serializeNode\",\n    value: function serializeNode(node, document) {\n      var _this2 = this;\n\n      if (node.object == \"text\") {\n        var leaves = node.getLeaves();\n        var inCodeBlock = !!document.getClosest(node.key, function (n) {\n          return n.type === \"code\";\n        });\n        return leaves.map(function (leave) {\n          var inCodeMark = !!leave.marks.filter(function (mark) {\n            return mark.type === \"code\";\n          }).size;\n          return _this2.serializeLeaves(leave, !inCodeBlock && !inCodeMark);\n        });\n      }\n\n      var children = node.nodes.map(function (childNode) {\n        var serialized = _this2.serializeNode(childNode, document);\n\n        return (serialized && serialized.join ? serialized.join(\"\") : serialized) || \"\";\n      }).join( // Special case for blockquotes, children in blockquotes are separated by new lines\n      node.type === \"block-quote\" ? \"\\n\" : \"\");\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.rules[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var rule = _step.value;\n          if (!rule.serialize) continue;\n          var ret = rule.serialize(node, children, document);\n          if (ret) return ret;\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    }\n    /**\n     * Serialize `leaves`.\n     *\n     * @param {Leave[]} leaves\n     * @return {String}\n     */\n\n  }, {\n    key: \"serializeLeaves\",\n    value: function serializeLeaves(leaves) {\n      var _this3 = this;\n\n      var escape = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      var leavesText = leaves.text;\n\n      if (escape) {\n        // escape markdown characters\n        leavesText = (0, _utils.escapeMarkdownChars)(leavesText);\n      }\n\n      var string = new String({\n        text: leavesText\n      });\n      var text = this.serializeString(string);\n      return leaves.marks.reduce(function (children, mark) {\n        var _iteratorNormalCompletion2 = true;\n        var _didIteratorError2 = false;\n        var _iteratorError2 = undefined;\n\n        try {\n          for (var _iterator2 = _this3.rules[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n            var rule = _step2.value;\n            if (!rule.serialize) continue;\n            var ret = rule.serialize(mark, children);\n            if (ret) return ret;\n          }\n        } catch (err) {\n          _didIteratorError2 = true;\n          _iteratorError2 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion2 && _iterator2.return) {\n              _iterator2.return();\n            }\n          } finally {\n            if (_didIteratorError2) {\n              throw _iteratorError2;\n            }\n          }\n        }\n      }, text);\n    }\n    /**\n     * Serialize a `string`.\n     *\n     * @param {String} string\n     * @return {String}\n     */\n\n  }, {\n    key: \"serializeString\",\n    value: function serializeString(string) {\n      var _iteratorNormalCompletion3 = true;\n      var _didIteratorError3 = false;\n      var _iteratorError3 = undefined;\n\n      try {\n        for (var _iterator3 = this.rules[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n          var rule = _step3.value;\n          if (!rule.serialize) continue;\n          var ret = rule.serialize(string, string.text);\n          if (ret) return ret;\n        }\n      } catch (err) {\n        _didIteratorError3 = true;\n        _iteratorError3 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion3 && _iterator3.return) {\n            _iterator3.return();\n          }\n        } finally {\n          if (_didIteratorError3) {\n            throw _iteratorError3;\n          }\n        }\n      }\n    }\n    /**\n     * Deserialize a markdown `string`.\n     *\n     * @param {String} markdown\n     * @return {State} state\n     */\n\n  }, {\n    key: \"deserialize\",\n    value: function deserialize(markdown) {\n      var document = _parser2.default.parse(markdown);\n\n      return _slate.Value.fromJSON({\n        document: document\n      });\n    }\n  }]);\n\n  return Markdown;\n}();\n\nexports.default = Markdown;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _urls = require(\"./urls\");\n\nvar _hashtagRegex = require(\"hashtag-regex\");\n\nvar _hashtagRegex2 = _interopRequireDefault(_hashtagRegex);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n/**\n * Ported from:\n *   https://github.com/chjj/marked/blob/49b7eaca/lib/marked.js\n * TODO:\n *   Use ES6 classes\n *   Add flow annotations\n */\n// we need to convert the regex supplied by the dependency to have the\n// entire hashtag contents within a capture group and begin with newline\n\n\nvar hashtag = new RegExp((0, _hashtagRegex2.default)().source.replace(/^/, \"^(\").replace(/$/, \")\"));\nvar EMPTY_PARAGRAPH_NODES = [{\n  object: \"text\",\n  leaves: [{\n    object: \"leaf\",\n    text: \"\",\n    marks: []\n  }]\n}];\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nvar assign = Object.assign || function (obj) {\n  var i = 1;\n\n  for (; i < arguments.length; i++) {\n    var target = arguments[i];\n\n    for (var key in target) {\n      if (hasOwnProperty.call(target, key)) {\n        obj[key] = target[key];\n      }\n    }\n  }\n\n  return obj;\n};\n\nvar flatten = function flatten(ary) {\n  return [].concat.apply([], ary);\n};\n\nvar noop = function noop() {};\n\nnoop.exec = noop;\nvar defaults = {\n  gfm: true,\n  tables: true,\n  breaks: false,\n  pedantic: false,\n  smartLists: true,\n  silent: false,\n  renderer: new Renderer()\n};\n/**\n * Block-Level Grammar\n */\n\nvar block = {\n  newline: /^\\n+/,\n  code: /^( {4}[^\\n]+\\n*)+/,\n  fences: noop,\n  hr: /^( *[-*_]){3,} *(?:\\n|$)/,\n  heading: /^ *(#{1,6}) *([^\\n]+?) *#* *(?:\\n|$)/,\n  nptable: noop,\n  blockquote: /^( *>[^\\n]+(\\n(?!def)[^\\n])*(?:\\n|$))+/,\n  list: /^( *)(bull) [\\s\\S]+?(?:hr|def|\\n(?! )(?!\\1bull )\\n|\\s*$)/,\n  def: /^ *\\[([^\\]]+)\\]: *<?([^\\s>]+)>?(?: +[\"(]([^\\n]+)[\")])? *(?:\\n|$)/,\n  paragraph: /^((?:[^\\n]+(?!hr|heading|blockquote|def))+)(?:\\n|$)/,\n  text: /^[^\\n]+/\n};\nblock.bullet = /(?:[*+-]|\\d+\\.|\\[[x\\s]\\])/;\nblock.item = /^( *)(bull) [^\\n]*(?:\\n(?!\\1bull )[^\\n]*)*/;\nblock.item = replace(block.item, \"gm\")(/bull/g, block.bullet)();\nblock.list = replace(block.list)(/bull/g, block.bullet)(\"hr\", \"\\\\n+(?=\\\\1?(?:[-*_] *){3,}(?:\\\\n+|$))\")(\"def\", \"\\\\n+(?=\" + block.def.source + \")\")();\nblock.blockquote = replace(block.blockquote)(\"def\", block.def)();\nblock.paragraph = replace(block.paragraph)(\"hr\", block.hr)(\"heading\", block.heading)(\"blockquote\", block.blockquote)(\"def\", block.def)();\n/**\n * Normal Block Grammar\n */\n\nblock.normal = assign({}, block);\n/**\n * GFM Block Grammar\n */\n\nblock.gfm = assign({}, block.normal, {\n  fences: /^ *(`{3,}|~{3,})[ \\.]*(\\S+)? *\\n([\\s\\S]+?)\\s*\\1 *(?:\\n|$)/,\n  paragraph: /^/,\n  heading: /^ *(#{1,6}) +([^\\n]+?) *#* *(?:\\n{1,2}|$)/\n});\nblock.gfm.paragraph = replace(block.paragraph)(\"(?!\", \"(?!\" + block.gfm.fences.source.replace(\"\\\\1\", \"\\\\2\") + \"|\" + block.list.source.replace(\"\\\\1\", \"\\\\3\") + \"|\")();\n/**\n * GFM + Tables Block Grammar\n */\n\nblock.tables = assign({}, block.gfm, {\n  nptable: /^ *(\\S.*\\|.*)\\n *([-:]+ *\\|[-| :]*)\\n((?:.*\\|.*(?:\\n|$))*)/,\n  table: /^ *\\|(.+)\\n *\\|( *[-:]+[-| :]*)\\n((?: *\\|.*(?:\\n|$))*)/\n});\n/**\n * Block Lexer\n */\n\nfunction Lexer(options) {\n  this.tokens = [];\n  this.tokens.links = {};\n  this.options = assign({}, options || defaults);\n  this.rules = block.normal;\n\n  if (this.options.gfm) {\n    if (this.options.tables) {\n      this.rules = block.tables;\n    } else {\n      this.rules = block.gfm;\n    }\n  }\n}\n/**\n * Expose Block Rules\n */\n\n\nLexer.rules = block;\n/**\n * Static Lex Method\n */\n\nLexer.parse = function (src, options) {\n  var lexer = new Lexer(options);\n  return lexer.parse(src);\n};\n/**\n * Preprocessing\n */\n\n\nLexer.prototype.parse = function (src) {\n  src = src.replace(/\\r\\n|\\r/g, \"\\n\").replace(/\\t/g, \"    \").replace(/\\u00a0/g, \" \").replace(/\\u2424/g, \"\\n\");\n  return this.token(src, true);\n};\n/**\n * Lexing\n */\n\n\nLexer.prototype.token = function (src, top, bq) {\n  var next;\n  var loose;\n  var cap;\n  var bull;\n  var b;\n  var item;\n  var space;\n  var i;\n  var l;\n  src = src.replace(/^ +$/gm, \"\");\n  src = src.replace(/^\\n/, \"\");\n\n  while (src) {\n    // newline\n    if (cap = this.rules.newline.exec(src)) {\n      src = src.substring(cap[0].length);\n      var newlines = cap[0].length;\n\n      if (top) {\n        for (var _i = 0; _i < newlines; _i++) {\n          this.tokens.push({\n            type: \"paragraph\",\n            text: \"\"\n          });\n        }\n      }\n    } // code\n\n\n    if (cap = this.rules.code.exec(src)) {\n      src = src.substring(cap[0].length);\n      cap = cap[0].replace(/^ {4}/gm, \"\");\n      this.tokens.push({\n        type: \"code\",\n        text: !this.options.pedantic ? cap.replace(/\\n+$/, \"\") : cap\n      });\n      continue;\n    } // fences (gfm)\n\n\n    if (cap = this.rules.fences.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: \"code\",\n        lang: cap[2],\n        text: cap[3]\n      });\n      continue;\n    } // heading\n\n\n    if (cap = this.rules.heading.exec(src)) {\n      src = src.substring(cap[0].length);\n      var last = this.tokens[this.tokens.length - 1];\n\n      if (last && last.type === \"paragraph\" && last.text === \"\") {\n        this.tokens.splice(-1, 1);\n      }\n\n      this.tokens.push({\n        type: \"heading\",\n        depth: cap[1].length,\n        text: cap[2]\n      });\n      continue;\n    } // table no leading pipe (gfm)\n\n\n    if (top && (cap = this.rules.nptable.exec(src))) {\n      src = src.substring(cap[0].length);\n      item = {\n        type: \"table\",\n        header: splitCells(cap[1].replace(/^ *| *\\| *$/g, \"\")),\n        align: cap[2].replace(/^ *|\\| *$/g, \"\").split(/ *\\| */),\n        cells: cap[3].replace(/\\n$/, \"\").split(\"\\n\")\n      };\n\n      for (i = 0; i < item.align.length; i++) {\n        if (/^ *-+: *$/.test(item.align[i])) {\n          item.align[i] = \"right\";\n        } else if (/^ *:-+: *$/.test(item.align[i])) {\n          item.align[i] = \"center\";\n        } else if (/^ *:-+ *$/.test(item.align[i])) {\n          item.align[i] = \"left\";\n        } else {\n          item.align[i] = null;\n        }\n      }\n\n      for (i = 0; i < item.cells.length; i++) {\n        item.cells[i] = splitCells(item.cells[i]);\n      }\n\n      this.tokens.push(item);\n      continue;\n    } // hr\n\n\n    if (cap = this.rules.hr.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: \"hr\"\n      });\n      continue;\n    } // blockquote\n\n\n    if (cap = this.rules.blockquote.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: \"blockquote_start\"\n      });\n      cap = cap[0].replace(/^ *> ?/gm, \"\"); // Pass `top` to keep the current\n      // \"toplevel\" state. This is exactly\n      // how markdown.pl works.\n\n      this.token(cap, top, true);\n      this.tokens.push({\n        type: \"blockquote_end\"\n      });\n      continue;\n    } // list\n\n\n    if (cap = this.rules.list.exec(src)) {\n      src = src.substring(cap[0].length);\n      bull = cap[2];\n      var ordered = bull.length > 1;\n      var todo = bull[0] === \"[\";\n      this.tokens.push({\n        type: \"list_start\",\n        style: todo ? \"todo\" : ordered ? \"ordered\" : \"bulleted\"\n      }); // Get each top-level item.\n\n      cap = cap[0].match(this.rules.item);\n      next = false;\n      l = cap.length;\n      i = 0;\n\n      for (; i < l; i++) {\n        item = cap[i]; // Remove the list item's bullet\n        // so it is seen as the next token.\n\n        var checked = todo ? !!item.match(/^ *(\\[x\\])/) : undefined;\n        space = item.length;\n        item = item.replace(/^ *([*+-]|\\d+\\.|\\[[x\\s]\\]) +/, \"\"); // Outdent whatever the\n        // list item contains. Hacky.\n\n        if (~item.indexOf(\"\\n \")) {\n          space -= item.length;\n          item = !this.options.pedantic ? item.replace(new RegExp(\"^ {1,\" + space + \"}\", \"gm\"), \"\") : item.replace(/^ {1,4}/gm, \"\");\n        } // Determine whether the next list item belongs here.\n        // Backpedal if it does not belong in this list.\n\n\n        if (this.options.smartLists && i !== l - 1) {\n          b = block.bullet.exec(cap[i + 1])[0];\n\n          if (bull !== b && !(bull.length > 1 && b.length > 1)) {\n            src = cap.slice(i + 1).join(\"\\n\") + src;\n            i = l - 1;\n          }\n        } // Determine whether item is loose or not.\n        // Use: /(^|\\n)(?! )[^\\n]+\\n\\n(?!\\s*$)/\n        // for discount behavior.\n\n\n        loose = next || /\\n\\n(?!\\s*$)/.test(item);\n\n        if (i !== l - 1) {\n          next = item.charAt(item.length - 1) === \"\\n\";\n\n          if (!loose) {\n            loose = next;\n          }\n        }\n\n        this.tokens.push({\n          checked: checked,\n          type: loose ? \"loose_item_start\" : \"list_item_start\"\n        }); // Recurse.\n\n        this.token(item, false, bq);\n        this.tokens.push({\n          type: \"list_item_end\"\n        });\n      }\n\n      this.tokens.push({\n        type: \"list_end\"\n      });\n      continue;\n    } // def\n\n\n    if (!bq && top && (cap = this.rules.def.exec(src))) {\n      src = src.substring(cap[0].length);\n      this.tokens.links[cap[1].toLowerCase()] = {\n        href: cap[2],\n        title: cap[3]\n      };\n      continue;\n    } // table (gfm)\n\n\n    if (top && (cap = this.rules.table.exec(src))) {\n      src = src.substring(cap[0].length);\n      item = {\n        type: \"table\",\n        header: splitCells(cap[1].replace(/^ *| *\\| *$/g, \"\")),\n        align: cap[2].replace(/^ *|\\| *$/g, \"\").split(/ *\\| */),\n        cells: cap[3].replace(/(?: *\\| *)?\\n$/, \"\").split(\"\\n\")\n      };\n\n      for (i = 0; i < item.align.length; i++) {\n        if (/^ *-+: *$/.test(item.align[i])) {\n          item.align[i] = \"right\";\n        } else if (/^ *:-+: *$/.test(item.align[i])) {\n          item.align[i] = \"center\";\n        } else if (/^ *:-+ *$/.test(item.align[i])) {\n          item.align[i] = \"left\";\n        } else {\n          item.align[i] = null;\n        }\n      }\n\n      for (i = 0; i < item.cells.length; i++) {\n        item.cells[i] = splitCells(item.cells[i].replace(/^ *\\| *| *\\| *$/g, \"\"));\n      }\n\n      this.tokens.push(item);\n      continue;\n    } // top-level paragraph\n\n\n    if (top && (cap = this.rules.paragraph.exec(src))) {\n      src = src.substring(cap[0].length);\n      var endsWithNewline = cap[1].charAt(cap[1].length - 1) === \"\\n\";\n      this.tokens.push({\n        type: \"paragraph\",\n        text: endsWithNewline ? cap[1].slice(0, -1) : cap[1]\n      });\n\n      if (endsWithNewline) {\n        this.tokens.push({\n          type: \"paragraph\",\n          text: \"\"\n        });\n      }\n\n      continue;\n    } // text\n\n\n    if (cap = this.rules.text.exec(src)) {\n      // Top-level should never reach here.\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: \"text\",\n        text: cap[0]\n      });\n      continue;\n    }\n\n    if (src) {\n      throw new Error(\"Infinite loop on byte: \" + src.charCodeAt(0));\n    }\n  }\n\n  return this.tokens;\n};\n/**\n * Inline-Level Grammar\n */\n\n\nvar inline = {\n  escape: /^\\\\([\\\\`*{}\\[\\]()#+\\-.!_>])/,\n  link: /^!?\\[(inside)\\]\\(href\\)/,\n  hashtag: hashtag,\n  reflink: /^!?\\[(inside)\\]\\s*\\[([^\\]]*)\\]/,\n  nolink: /^!?\\[((?:\\[[^\\]]*\\]|[^\\[\\]])*)\\]/,\n  strong: /^\\*\\*([\\s\\S]+?)\\*\\*(?!\\*)/,\n  underlined: /^__([\\s\\S]+?)__(?!_)/,\n  em: /^\\b_((?:__|[\\s\\S])+?)_\\b|^\\*((?:\\*\\*|[\\s\\S])+?)\\*(?!\\*)/,\n  code: /^(`+)\\s*([\\s\\S]*?[^`])\\s*\\1(?!`)/,\n  br: /^ {2,}\\n(?!\\s*$)/,\n  del: noop,\n  ins: noop,\n  text: /^[\\s\\S]+?(?=[\\\\<!\\[_*#`]| {2,}\\n|$)/\n};\ninline._inside = /(?:\\[[^\\]]*\\]|[^\\[\\]]|\\](?=[^\\[]*\\]))*/;\ninline._href = /\\s*<?([\\s\\S]*?)>?(?:\\s+['\"]([\\s\\S]*?)['\"])?\\s*/;\ninline.link = replace(inline.link)(\"inside\", inline._inside)(\"href\", inline._href)();\ninline.reflink = replace(inline.reflink)(\"inside\", inline._inside)();\n/**\n * Normal Inline Grammar\n */\n\ninline.normal = assign({}, inline);\n/**\n * Pedantic Inline Grammar\n */\n\ninline.pedantic = assign({}, inline.normal, {\n  strong: /^__(?=\\S)([\\s\\S]*?\\S)__(?!_)|^\\*\\*(?=\\S)([\\s\\S]*?\\S)\\*\\*(?!\\*)/,\n  em: /^_(?=\\S)([\\s\\S]*?\\S)_(?!_)|^\\*(?=\\S)([\\s\\S]*?\\S)\\*(?!\\*)/\n});\n/**\n * GFM Inline Grammar\n */\n\ninline.gfm = assign({}, inline.normal, {\n  escape: replace(inline.escape)(\"])\", \"~|])\")(),\n  del: /^~~(?=\\S)([\\s\\S]*?\\S)~~/,\n  ins: /^\\+\\+(?=\\S)([\\s\\S]*?\\S)\\+\\+/,\n  text: replace(inline.text)(\"]|\", \"~+]|\")()\n});\n/**\n * GFM + Line Breaks Inline Grammar\n */\n\ninline.breaks = assign({}, inline.gfm, {\n  br: replace(inline.br)(\"{2,}\", \"*\")(),\n  text: replace(inline.gfm.text)(\"{2,}\", \"*\")()\n});\n/**\n * Inline Lexer & Compiler\n */\n\nfunction InlineLexer(links, options) {\n  this.options = assign({}, options || defaults);\n  this.links = links;\n  this.rules = inline.normal;\n  this.renderer = this.options.renderer || new Renderer();\n  this.renderer.options = this.options;\n\n  if (!this.links) {\n    throw new Error(\"Tokens array requires a `links` property.\");\n  }\n\n  if (this.options.gfm) {\n    if (this.options.breaks) {\n      this.rules = inline.breaks;\n    } else {\n      this.rules = inline.gfm;\n    }\n  } else if (this.options.pedantic) {\n    this.rules = inline.pedantic;\n  }\n}\n/**\n * Expose Inline Rules\n */\n\n\nInlineLexer.rules = inline;\n/**\n * Static Lexing/Compiling Method\n */\n\nInlineLexer.parse = function (src, links, options) {\n  var inline = new InlineLexer(links, options);\n  return inline.parse(src);\n};\n/**\n * Lexing/Compiling\n */\n\n\nInlineLexer.prototype.parse = function (src) {\n  var out = [];\n  var link;\n  var cap;\n\n  while (src) {\n    // escape\n    if (cap = this.rules.escape.exec(src)) {\n      src = src.substring(cap[0].length);\n      out.push({\n        object: \"text\",\n        leaves: [{\n          text: cap[1]\n        }]\n      });\n      continue;\n    } // link\n\n\n    if (cap = this.rules.link.exec(src)) {\n      src = src.substring(cap[0].length);\n      out.push(this.outputLink(cap, {\n        href: cap[2],\n        title: cap[3]\n      }));\n      continue;\n    } // hashtag\n\n\n    if (cap = this.rules.hashtag.exec(src)) {\n      src = src.substring(cap[0].length);\n      out.push(this.renderer.hashtag(cap[1]));\n      continue;\n    } // reflink, nolink\n    // TODO\n\n\n    if ((cap = this.rules.reflink.exec(src)) || (cap = this.rules.nolink.exec(src))) {\n      src = src.substring(cap[0].length);\n      link = (cap[2] || cap[1]).replace(/\\s+/g, \" \");\n      link = this.links[link.toLowerCase()];\n\n      if (!link || !link.href) {\n        out.push({\n          object: \"text\",\n          leaves: [{\n            text: cap[0].charAt(0)\n          }]\n        });\n        src = cap[0].substring(1) + src;\n        continue;\n      }\n\n      out.push(this.outputLink(cap, link));\n      continue;\n    } // underlined\n\n\n    if (cap = this.rules.underlined.exec(src)) {\n      src = src.substring(cap[0].length);\n      out.push(this.renderer.underlined(this.parse(cap[2] || cap[1])));\n      continue;\n    } // strong\n\n\n    if (cap = this.rules.strong.exec(src)) {\n      src = src.substring(cap[0].length);\n      out.push(this.renderer.strong(this.parse(cap[2] || cap[1])));\n      continue;\n    } // em\n\n\n    if (cap = this.rules.em.exec(src)) {\n      src = src.substring(cap[0].length);\n      out.push(this.renderer.em(this.parse(cap[2] || cap[1])));\n      continue;\n    } // code\n\n\n    if (cap = this.rules.code.exec(src)) {\n      src = src.substring(cap[0].length);\n      out.push(this.renderer.codespan(cap[2]));\n      continue;\n    } // br\n\n\n    if (cap = this.rules.br.exec(src)) {\n      src = src.substring(cap[0].length);\n      out.push(this.renderer.br());\n      continue;\n    } // del (gfm)\n\n\n    if (cap = this.rules.del.exec(src)) {\n      src = src.substring(cap[0].length);\n      out.push(this.renderer.del(this.parse(cap[1])));\n      continue;\n    } // ins (gfm extended)\n\n\n    if (cap = this.rules.ins.exec(src)) {\n      src = src.substring(cap[0].length);\n      out.push(this.renderer.ins(this.parse(cap[1])));\n      continue;\n    } // text\n\n\n    if (cap = this.rules.text.exec(src)) {\n      src = src.substring(cap[0].length);\n      out.push(this.renderer.text(cap[0]));\n      continue;\n    }\n\n    if (src) {\n      throw new Error(\"Infinite loop on byte: \" + src.charCodeAt(0));\n    }\n  }\n\n  return out;\n};\n/**\n * Compile Link\n */\n\n\nInlineLexer.prototype.outputLink = function (cap, link) {\n  var href = link.href;\n  var title = link.title;\n  return cap[0].charAt(0) !== \"!\" ? this.renderer.link(href, title, this.parse(cap[1])) : this.renderer.image(href, title, cap[1]);\n};\n/**\n * Renderer\n */\n\n\nfunction Renderer(options) {\n  this.options = options || {};\n}\n\nRenderer.prototype.groupTextInLeaves = function (childNode) {\n  var _this = this;\n\n  var node = flatten(childNode);\n  var output = node.reduce(function (acc, current) {\n    var accLast = acc.length - 1;\n    var lastIsText = accLast >= 0 && acc[accLast] && acc[accLast][\"object\"] === \"text\";\n\n    if (current.text) {\n      if (lastIsText) {\n        // If the previous item was a text object, push the current text to it's range\n        acc[accLast].leaves.push(current);\n        return acc;\n      } else {\n        // Else, create a new text object\n        acc.push({\n          object: \"text\",\n          leaves: [current]\n        });\n        return acc;\n      }\n    } else if (current instanceof Array) {\n      return acc.concat(_this.groupTextInLeaves(current));\n    } else {\n      acc.push(current);\n      return acc;\n    }\n  }, []);\n  if (!output.length) return EMPTY_PARAGRAPH_NODES;\n  return output;\n};\n\nRenderer.prototype.code = function (childNode, language) {\n  var data = {};\n\n  if (language) {\n    data.language = language;\n  }\n\n  return {\n    object: \"block\",\n    type: \"code\",\n    data: data,\n    nodes: this.groupTextInLeaves(childNode)\n  };\n};\n\nRenderer.prototype.blockquote = function (childNode) {\n  return {\n    object: \"block\",\n    type: \"block-quote\",\n    nodes: this.groupTextInLeaves(childNode)\n  };\n};\n\nRenderer.prototype.heading = function (childNode, level) {\n  return {\n    object: \"block\",\n    type: \"heading\" + level,\n    nodes: this.groupTextInLeaves(childNode)\n  };\n};\n\nRenderer.prototype.hr = function () {\n  return {\n    object: \"block\",\n    type: \"horizontal-rule\",\n    isVoid: true,\n    nodes: EMPTY_PARAGRAPH_NODES\n  };\n};\n\nRenderer.prototype.list = function (childNode, style) {\n  return {\n    object: \"block\",\n    type: style + \"-list\",\n    nodes: childNode\n  };\n};\n\nRenderer.prototype.listitem = function (childNode) {\n  var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var data = void 0;\n\n  if (flags.checked !== undefined) {\n    data = {\n      checked: flags.checked\n    };\n  }\n\n  return {\n    object: \"block\",\n    type: \"list-item\",\n    data: data,\n    nodes: this.groupTextInLeaves(childNode)\n  };\n};\n\nRenderer.prototype.paragraph = function (childNode) {\n  return {\n    object: \"block\",\n    type: \"paragraph\",\n    nodes: this.groupTextInLeaves(childNode)\n  };\n};\n\nRenderer.prototype.table = function (childNode) {\n  return {\n    object: \"block\",\n    type: \"table\",\n    nodes: childNode\n  };\n};\n\nRenderer.prototype.tablerow = function (childNode) {\n  return {\n    object: \"block\",\n    type: \"table-row\",\n    nodes: childNode\n  };\n};\n\nRenderer.prototype.tablecell = function (childNode, flags) {\n  var align = flags.align;\n  return {\n    object: \"block\",\n    data: {\n      align: align\n    },\n    type: \"table-cell\",\n    nodes: this.groupTextInLeaves(childNode)\n  };\n}; // span level renderer\n\n\nRenderer.prototype.underlined = function (childNode) {\n  return childNode.map(function (node) {\n    if (node.marks) {\n      node.marks.push({\n        type: \"underlined\"\n      });\n    } else {\n      node.marks = [{\n        type: \"underlined\"\n      }];\n    }\n\n    return node;\n  });\n};\n\nRenderer.prototype.strong = function (childNode) {\n  return childNode.map(function (node) {\n    if (node.marks) {\n      node.marks.push({\n        type: \"bold\"\n      });\n    } else {\n      node.marks = [{\n        type: \"bold\"\n      }];\n    }\n\n    return node;\n  });\n};\n\nRenderer.prototype.em = function (childNode) {\n  return childNode.map(function (node) {\n    if (node.marks) {\n      node.marks.push({\n        type: \"italic\"\n      });\n    } else {\n      node.marks = [{\n        type: \"italic\"\n      }];\n    }\n\n    return node;\n  });\n};\n\nRenderer.prototype.codespan = function (text) {\n  return {\n    text: text,\n    marks: [{\n      type: \"code\"\n    }]\n  };\n};\n\nRenderer.prototype.br = function () {\n  return {\n    text: \" \"\n  };\n};\n\nRenderer.prototype.del = function (childNode) {\n  return childNode.map(function (node) {\n    if (node.marks) {\n      node.marks.push({\n        type: \"deleted\"\n      });\n    } else {\n      node.marks = [{\n        type: \"deleted\"\n      }];\n    }\n\n    return node;\n  });\n};\n\nRenderer.prototype.ins = function (childNode) {\n  return childNode.map(function (node) {\n    if (node.marks) {\n      node.marks.push({\n        type: \"inserted\"\n      });\n    } else {\n      node.marks = [{\n        type: \"inserted\"\n      }];\n    }\n\n    return node;\n  });\n};\n\nRenderer.prototype.hashtag = function (childNode) {\n  return {\n    object: \"inline\",\n    type: \"hashtag\",\n    nodes: [{\n      object: \"text\",\n      leaves: [{\n        text: childNode\n      }]\n    }]\n  };\n};\n\nRenderer.prototype.link = function (href, title, childNode) {\n  var data = {\n    href: (0, _urls.decode)(href)\n  };\n\n  if (title) {\n    data.title = title;\n  }\n\n  return {\n    object: \"inline\",\n    type: \"link\",\n    nodes: this.groupTextInLeaves(childNode),\n    data: data\n  };\n};\n\nRenderer.prototype.image = function (href, title, alt) {\n  var data = {\n    src: (0, _urls.decode)(href)\n  };\n\n  if (title) {\n    data.title = title;\n  }\n\n  if (alt) {\n    data.alt = alt;\n  }\n\n  return {\n    object: \"block\",\n    type: \"image\",\n    nodes: EMPTY_PARAGRAPH_NODES,\n    isVoid: true,\n    data: data\n  };\n};\n\nRenderer.prototype.text = function (childNode) {\n  return {\n    text: childNode\n  };\n};\n/**\n * Parsing & Compiling\n */\n\n\nfunction Parser(options) {\n  this.tokens = [];\n  this.token = null;\n  this.options = assign({}, options || defaults);\n  this.options.renderer = this.options.renderer || new Renderer();\n  this.renderer = this.options.renderer;\n  this.renderer.options = this.options;\n}\n/**\n * Static Parse Method\n */\n\n\nParser.parse = function (src, options, renderer) {\n  var parser = new Parser(options, renderer);\n  return parser.parse(src);\n};\n/**\n * Parse Loop\n */\n\n\nParser.prototype.parse = function (src) {\n  this.inline = new InlineLexer(src.links, this.options, this.renderer);\n  this.tokens = src.slice().reverse();\n  var out = [];\n\n  while (this.next()) {\n    out.push(this.tok());\n  }\n\n  return out;\n};\n/**\n * Next Token\n */\n\n\nParser.prototype.next = function () {\n  return this.token = this.tokens.pop();\n};\n/**\n * Preview Next Token\n */\n\n\nParser.prototype.peek = function () {\n  return this.tokens[this.tokens.length - 1] || 0;\n};\n/**\n * Parse Text Tokens\n */\n\n\nParser.prototype.parseText = function () {\n  var body = this.token.text;\n\n  while (this.peek().type === \"text\") {\n    body += \"\\n\" + this.next().text;\n  }\n\n  return this.inline.parse(body);\n};\n/**\n * Parse Current Token\n */\n\n\nParser.prototype.tok = function () {\n  switch (this.token.type) {\n    case \"space\":\n      {\n        return {\n          object: \"text\",\n          leaves: [{\n            text: \"\"\n          }]\n        };\n      }\n\n    case \"hr\":\n      {\n        return this.renderer.hr();\n      }\n\n    case \"heading\":\n      {\n        return this.renderer.heading(this.inline.parse(this.token.text), this.token.depth);\n      }\n\n    case \"code\":\n      {\n        // Text inside of code blocks should not be parsed for marks\n        return this.renderer.code([{\n          object: \"text\",\n          leaves: [{\n            text: this.token.text\n          }]\n        }], this.token.lang);\n      }\n\n    case \"table\":\n      {\n        var body = [];\n        var i = void 0,\n            row = void 0,\n            flags = void 0,\n            j = void 0; // header\n\n        var cells = [];\n\n        for (i = 0; i < this.token.header.length; i++) {\n          flags = {\n            header: true,\n            align: this.token.align[i]\n          };\n          cells.push(this.renderer.tablecell(this.inline.parse(this.token.header[i]), {\n            header: true,\n            align: this.token.align[i]\n          }));\n        }\n\n        body.push(this.renderer.tablerow(cells));\n\n        for (i = 0; i < this.token.cells.length; i++) {\n          row = this.token.cells[i];\n          var _cells = [];\n\n          for (j = 0; j < row.length; j++) {\n            _cells.push(this.renderer.tablecell(this.inline.parse(row[j]), {\n              header: false,\n              align: this.token.align[j]\n            }));\n          }\n\n          body.push(this.renderer.tablerow(_cells));\n        }\n\n        return this.renderer.table(body);\n      }\n\n    case \"blockquote_start\":\n      {\n        var _body = [];\n\n        while (this.next().type !== \"blockquote_end\") {\n          _body.push(this.token.type === \"text\" ? this.renderer.paragraph(this.inline.parse(this.token.text)) : this.tok());\n        }\n\n        return this.renderer.blockquote(_body);\n      }\n\n    case \"list_start\":\n      {\n        var _body2 = [];\n        var style = this.token.style;\n\n        while (this.next().type !== \"list_end\") {\n          _body2.push(this.tok());\n        }\n\n        return this.renderer.list(_body2, style);\n      }\n\n    case \"loose_item_start\":\n    case \"list_item_start\":\n      {\n        var _body3 = [];\n        var _flags = {\n          checked: this.token.checked\n        };\n\n        while (this.next().type !== \"list_item_end\") {\n          _body3.push(this.token.type === \"text\" ? this.renderer.paragraph(this.inline.parse(this.token.text)) : this.tok());\n        }\n\n        return this.renderer.listitem(_body3, _flags);\n      }\n\n    case \"paragraph\":\n      {\n        return this.renderer.paragraph(this.inline.parse(this.token.text));\n      }\n\n    case \"text\":\n      {\n        return this.renderer.text(this.parseText());\n      }\n  }\n};\n/**\n * Helpers\n */\n\n\nfunction replace(regex, options) {\n  regex = regex.source;\n  options = options || \"\";\n  return function self(name, val) {\n    if (!name) {\n      return new RegExp(regex, options);\n    }\n\n    val = val.source || val;\n    val = val.replace(/(^|[^\\[])\\^/g, \"$1\");\n    regex = regex.replace(name, val);\n    return self;\n  };\n}\n\nvar MarkdownParser = {\n  parse: function parse(src, options) {\n    options = assign({}, defaults, options);\n    var fragment = void 0;\n\n    try {\n      fragment = Parser.parse(Lexer.parse(src, options), options);\n\n      if (!fragment.length) {\n        fragment = [{\n          object: \"block\",\n          type: \"paragraph\",\n          isVoid: false,\n          data: {},\n          nodes: EMPTY_PARAGRAPH_NODES\n        }];\n      }\n    } catch (err) {\n      if (options.silent) {\n        fragment = [{\n          object: \"block\",\n          type: \"paragraph\",\n          isVoid: false,\n          data: {},\n          nodes: [{\n            object: \"text\",\n            leaves: [{\n              object: \"leaf\",\n              text: \"An error occured:\",\n              marks: []\n            }, {\n              object: \"leaf\",\n              text: e.message,\n              marks: []\n            }]\n          }]\n        }];\n      } else {\n        throw err;\n      }\n    }\n\n    return {\n      nodes: fragment\n    };\n  }\n};\n\nfunction splitCells(tableRow) {\n  // Empty rows require a special case – just check if the only characters\n  // we have are pipes and spaces. If so split and return.\n  var emptyRow = tableRow.match(/^[ \\|]+$/);\n\n  if (emptyRow) {\n    return tableRow.split(/\\| */);\n  } // Otherwise, we must account for escaped pipes within the cell content\n\n\n  var cells = tableRow.replace(/([^\\\\])\\|/g, \"$1 |\").split(/ +\\| */);\n\n  for (var i = 0; i < cells.length; i++) {\n    cells[i] = cells[i].replace(/\\\\\\|/g, \"|\");\n  }\n\n  return cells;\n}\n\nexports.default = MarkdownParser;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.escapeMarkdownChars = escapeMarkdownChars;\n\nfunction escapeMarkdownChars(text) {\n  var result = text; // First replace all backslashes because we are adding backslashes in this function\n\n  result = result.replace(/([\\\\])/gi, \"\\\\$1\"); // Periods only happen in ordered lists\n\n  result = result.replace(/^(\\s*\\w+)\\./gi, \"$1\\\\.\"); // Hashtags shouldn't be escaped, but elsewhere should\n\n  result = result.replace(/(#\\s)/gi, \"\\\\$1\"); // Catch all escaping for certain characters\n  // TODO: situationally escape these characters so we don't overescape\n\n  return result.replace(/([`*{}\\[\\]()+\\-!|_>])/gi, \"\\\\$1\");\n}","'use strict';\n\nvar Slate = require('slate');\n\nvar focusAtEnd = require('./focusAtEnd');\n/**\n * Slate plugin to ensure a trailing block.\n * @param {Object} [opts] Options for the plugin\n * @param {Function} [opts.match] Match last block\n * @param {String} [opts.type='paragraph'] The type of the trailing block to insert\n * @return {Object}\n */\n\n\nfunction TrailingBlock(opts) {\n  opts = opts || {};\n  opts.type = opts.type || 'paragraph';\n\n  opts.match = opts.match || function (node) {\n    return node.type === opts.type;\n  };\n\n  return {\n    onChange: function onChange(editor, next) {\n      var document = editor.value.document;\n      var lastNode = document.nodes.last();\n\n      if (lastNode && opts.match(lastNode)) {\n        return next();\n      }\n\n      var lastIndex = document.nodes.size;\n      var block = Slate.Block.create({\n        type: opts.type,\n        nodes: [Slate.Text.create()]\n      });\n      editor.insertNodeByKey(document.key, lastIndex, block);\n    },\n    changes: {\n      focusAtEnd: focusAtEnd\n    }\n  };\n}\n\nmodule.exports = TrailingBlock;","\"use strict\";\n/**\n * Focus at the end of the document\n * @param  {Slate.Editor} editor\n */\n\nfunction focusAtEnd(editor) {\n  var document = editor.value.document;\n  return editor.moveToEndOfNode(document);\n}\n\nmodule.exports = focusAtEnd;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _options = require('./options');\n\nvar _options2 = _interopRequireDefault(_options);\n\nvar _handlers = require('./handlers');\n\nvar _core = require('./core');\n\nvar _core2 = _interopRequireDefault(_core);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n/**\n * A Slate plugin to handle keyboard events in code blocks.\n */\n\n\nfunction EditCode() {\n  var optsParam = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var opts = new _options2.default(optsParam);\n  var corePlugin = (0, _core2.default)(opts);\n  return _extends({}, corePlugin, {\n    onKeyDown: _handlers.onKeyDown.bind(null, opts),\n    onPaste: _handlers.onPaste.bind(null, opts)\n  });\n}\n\nexports.default = EditCode;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.onKeyDown = exports.onPaste = exports.onSelectAll = exports.onBackspace = exports.onModEnter = exports.onEnter = exports.onShiftTab = exports.onTab = undefined;\n\nvar _onTab = require('./onTab');\n\nvar _onTab2 = _interopRequireDefault(_onTab);\n\nvar _onShiftTab = require('./onShiftTab');\n\nvar _onShiftTab2 = _interopRequireDefault(_onShiftTab);\n\nvar _onEnter = require('./onEnter');\n\nvar _onEnter2 = _interopRequireDefault(_onEnter);\n\nvar _onModEnter = require('./onModEnter');\n\nvar _onModEnter2 = _interopRequireDefault(_onModEnter);\n\nvar _onBackspace = require('./onBackspace');\n\nvar _onBackspace2 = _interopRequireDefault(_onBackspace);\n\nvar _onSelectAll = require('./onSelectAll');\n\nvar _onSelectAll2 = _interopRequireDefault(_onSelectAll);\n\nvar _onPaste = require('./onPaste');\n\nvar _onPaste2 = _interopRequireDefault(_onPaste);\n\nvar _onKeyDown = require('./onKeyDown');\n\nvar _onKeyDown2 = _interopRequireDefault(_onKeyDown);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nexports.onTab = _onTab2.default;\nexports.onShiftTab = _onShiftTab2.default;\nexports.onEnter = _onEnter2.default;\nexports.onModEnter = _onModEnter2.default;\nexports.onBackspace = _onBackspace2.default;\nexports.onSelectAll = _onSelectAll2.default;\nexports.onPaste = _onPaste2.default;\nexports.onKeyDown = _onKeyDown2.default;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slate = require('slate');\n\nvar _immutable = require('immutable');\n\nvar _detectNewline = require('detect-newline');\n\nvar _detectNewline2 = _interopRequireDefault(_detectNewline);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar DEFAULT_NEWLINE = '\\n';\n/**\n * Deserialize a text into a code block\n */\n\nfunction deserializeCode(opts, text) {\n  var sep = (0, _detectNewline2.default)(text) || DEFAULT_NEWLINE;\n  var lines = (0, _immutable.List)(text.split(sep)).map(function (line) {\n    return _slate.Block.create({\n      type: opts.lineType,\n      nodes: [_slate.Text.create(line)]\n    });\n  });\n\n  var code = _slate.Block.create({\n    type: opts.containerType,\n    nodes: lines\n  });\n\n  return code;\n}\n\nexports.default = deserializeCode;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nrequire('slate');\n\nvar _getIndent = require('./getIndent');\n\nvar _getIndent2 = _interopRequireDefault(_getIndent);\n\nvar _getCurrentCode = require('./getCurrentCode');\n\nvar _getCurrentCode2 = _interopRequireDefault(_getCurrentCode);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n/**\n * Detect indentation in the current code block\n */\n\n\nfunction getCurrentIndent(opts, value) {\n  if (opts.getIndent) {\n    return opts.getIndent(value);\n  }\n\n  var currentCode = (0, _getCurrentCode2.default)(opts, value);\n\n  if (!currentCode) {\n    return '';\n  }\n\n  var text = currentCode.getTexts().map(function (t) {\n    return t.text;\n  }).join('\\n');\n  return (0, _getIndent2.default)(text);\n}\n\nexports.default = getCurrentIndent;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nrequire('slate');\n/**\n * Test if current selection is in a code block.\n */\n\n\nfunction isInCodeBlock(opts, value) {\n  var document = value.document,\n      selection = value.selection;\n  var codeBlock = document.getClosest(selection.start.key, function (block) {\n    return block.type === opts.containerType;\n  });\n  return Boolean(codeBlock);\n}\n\nexports.default = isInCodeBlock;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nrequire('slate'); // Return the index of the first character that differs between both string, or\n// the smallest string length otherwise.\n\n\nfunction firstDifferentCharacter(a, b) {\n  if (a.length > b.length) {\n    return firstDifferentCharacter(b, a);\n  }\n\n  var indexes = Array(a.length).fill().map(function (v, i) {\n    return i;\n  });\n  var index = indexes.find(function (i) {\n    return a[i] !== b[i];\n  });\n  return index == null ? a.length : index;\n}\n/**\n * Dedent all lines in selection\n */\n\n\nfunction dedentLines(opts, editor, // Indent to remove\nindent) {\n  var value = editor.value;\n  var document = value.document,\n      selection = value.selection;\n  var lines = document.getLeafBlocksAtRange(selection).filter(function (node) {\n    return node.type === opts.lineType;\n  });\n  return lines.reduce(function (c, line) {\n    // Remove a level of indent from the start of line\n    var textNode = line.nodes.first();\n    var lengthToRemove = firstDifferentCharacter(textNode.text, indent);\n    return c.removeTextByKey(textNode.key, 0, lengthToRemove);\n  }, editor);\n}\n\nexports.default = dedentLines;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nrequire('slate');\n/**\n * Indent all lines in selection\n */\n\n\nfunction indentLines(opts, editor, // Indent to add\nindent) {\n  var value = editor.value;\n  var document = value.document,\n      selection = value.selection;\n  var lines = document.getLeafBlocksAtRange(selection).filter(function (node) {\n    return node.type === opts.lineType;\n  });\n  return lines.reduce(function (c, line) {\n    // Insert an indent at start of line\n    var text = line.nodes.first();\n    return c.insertTextByKey(text.key, 0, indent);\n  }, editor);\n}\n\nexports.default = indentLines;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nrequire('slate');\n\nvar _utils = require('../utils');\n\nvar _wrapCodeBlock = require('./wrapCodeBlock');\n\nvar _wrapCodeBlock2 = _interopRequireDefault(_wrapCodeBlock);\n\nvar _unwrapCodeBlock = require('./unwrapCodeBlock');\n\nvar _unwrapCodeBlock2 = _interopRequireDefault(_unwrapCodeBlock);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n/**\n * Toggle code block / paragraph.\n */\n\n\nfunction toggleCodeBlock(opts, editor, // When toggling a code block off, type to convert to\ntype) {\n  if ((0, _utils.isInCodeBlock)(opts, editor.value)) {\n    return (0, _unwrapCodeBlock2.default)(opts, editor, type);\n  }\n\n  return (0, _wrapCodeBlock2.default)(opts, editor);\n}\n\nexports.default = toggleCodeBlock;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slate = require('slate');\n\nvar _slateReact = require('slate-react');\n\nvar _utils = require('../utils');\n/**\n * User is pasting content, insert it as text\n */\n\n\nfunction onPaste(opts, event, editor, next) {\n  var value = editor.value;\n  var data = (0, _slateReact.getEventTransfer)(event);\n  var currentCode = (0, _utils.getCurrentCode)(opts, value); // Only handle paste when selection is completely a code block\n\n  var endBlock = value.endBlock;\n\n  if (!currentCode || !currentCode.hasDescendant(endBlock.key)) {\n    return next();\n  } // Convert to text if needed\n\n\n  var text = void 0;\n\n  if (data.type === 'fragment') {\n    text = data.fragment.getTexts().map(function (t) {\n      return t.text;\n    }).join('\\n');\n  } else {\n    text = data.text;\n  } // Convert the text to code lines\n\n\n  var lines = (0, _utils.deserializeCode)(opts, text).nodes;\n\n  var fragment = _slate.Document.create({\n    nodes: lines\n  });\n\n  return editor.insertFragment(fragment);\n}\n\nexports.default = onPaste;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _isHotkey = require('is-hotkey');\n\nrequire('slate');\n\nvar _utils = require('../utils');\n\nvar _onTab = require('./onTab');\n\nvar _onTab2 = _interopRequireDefault(_onTab);\n\nvar _onShiftTab = require('./onShiftTab');\n\nvar _onShiftTab2 = _interopRequireDefault(_onShiftTab);\n\nvar _onEnter = require('./onEnter');\n\nvar _onEnter2 = _interopRequireDefault(_onEnter);\n\nvar _onModEnter = require('./onModEnter');\n\nvar _onModEnter2 = _interopRequireDefault(_onModEnter);\n\nvar _onBackspace = require('./onBackspace');\n\nvar _onBackspace2 = _interopRequireDefault(_onBackspace);\n\nvar _onSelectAll = require('./onSelectAll');\n\nvar _onSelectAll2 = _interopRequireDefault(_onSelectAll);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar isModA = (0, _isHotkey.isKeyHotkey)('mod+a');\nvar isShiftTab = (0, _isHotkey.isKeyHotkey)('shift+tab');\nvar isTab = (0, _isHotkey.isKeyHotkey)('tab');\nvar isModEnter = (0, _isHotkey.isKeyHotkey)('mod+enter');\nvar isEnter = (0, _isHotkey.isKeyHotkey)('enter');\nvar isBackspace = (0, _isHotkey.isKeyHotkey)('backspace');\n/**\n * User is pressing a key in the editor\n */\n\nfunction onKeyDown(opts, event, editor, next) {\n  var value = editor.value;\n  var currentCode = (0, _utils.getCurrentCode)(opts, value); // Inside code ?\n\n  if (!currentCode) {\n    return next();\n  } // Add opts in the argument list\n\n\n  var args = [opts, event, editor, next]; // Select all the code in the block (Mod+a)\n\n  if (opts.selectAll && isModA(event)) {\n    return _onSelectAll2.default.apply(undefined, args);\n  } else if (isShiftTab(event)) {\n    // User is pressing Shift+Tab\n    return _onShiftTab2.default.apply(undefined, args);\n  } else if (isTab(event)) {\n    // User is pressing Tab\n    return _onTab2.default.apply(undefined, args);\n  } else if (opts.exitBlockType && isModEnter(event)) {\n    // User is pressing Mod+Enter\n    return _onModEnter2.default.apply(undefined, args);\n  } else if (isEnter(event)) {\n    // User is pressing Enter\n    return _onEnter2.default.apply(undefined, args);\n  } else if (isBackspace(event)) {\n    // User is pressing Backspace\n    return _onBackspace2.default.apply(undefined, args);\n  }\n\n  return next();\n}\n\nexports.default = onKeyDown;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _options = require('./options');\n\nvar _options2 = _interopRequireDefault(_options);\n\nvar _utils = require('./utils');\n\nvar _changes = require('./changes');\n\nvar _validation = require('./validation');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n/**\n * The core of the plugin, which does not relies on `slate-react`, and includes\n * everything but behavior and rendering logic.\n */\n\n\nfunction core(optsParam) {\n  var opts = new _options2.default(optsParam);\n  return {\n    schema: (0, _validation.schema)(opts),\n    changes: {\n      unwrapCodeBlockByKey: _changes.unwrapCodeBlockByKey.bind(null, opts),\n      wrapCodeBlockByKey: _changes.wrapCodeBlockByKey.bind(null, opts),\n      wrapCodeBlock: _changes.wrapCodeBlock.bind(null, opts),\n      unwrapCodeBlock: _changes.unwrapCodeBlock.bind(null, opts),\n      toggleCodeBlock: _changes.toggleCodeBlock.bind(null, opts)\n    },\n    utils: {\n      isInCodeBlock: _utils.isInCodeBlock.bind(null, opts),\n      deserializeCode: _utils.deserializeCode.bind(null, opts)\n    }\n  };\n}\n\nexports.default = core;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.schema = undefined;\n\nvar _schema = require('./schema');\n\nvar _schema2 = _interopRequireDefault(_schema);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nexports.schema = _schema2.default;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slate = require('slate');\n\nvar _slateSchemaViolations = require('slate-schema-violations');\n\nvar _immutable = require('immutable');\n\nvar _utils = require('../utils');\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n/**\n * Create a schema definition with rules to normalize code blocks\n */\n\n\nfunction schema(opts) {\n  var _blocks;\n\n  var baseSchema = {\n    blocks: (_blocks = {}, _defineProperty(_blocks, opts.containerType, {\n      nodes: [{\n        match: {\n          type: opts.lineType\n        }\n      }],\n      normalize: function normalize(editor, error) {\n        var code = error.code;\n\n        switch (code) {\n          case _slateSchemaViolations.CHILD_INVALID:\n          case _slateSchemaViolations.CHILD_TYPE_INVALID:\n            return onlyLine(opts, editor, error);\n\n          default:\n            return undefined;\n        }\n      }\n    }), _defineProperty(_blocks, opts.lineType, {\n      nodes: [{\n        match: {\n          object: 'text',\n          min: 1\n        }\n      }],\n      parent: {\n        type: opts.containerType\n      },\n      normalize: function normalize(editor, error) {\n        var code = error.code;\n\n        switch (code) {\n          // This constant does not exist yet in\n          // official Slate, but exists in GitBook's\n          // fork. Until the PR is merged, we accept both\n          // https://github.com/ianstormtaylor/slate/pull/1842\n          case _slateSchemaViolations.PARENT_INVALID:\n          case _slateSchemaViolations.PARENT_TYPE_INVALID:\n            return noOrphanLine(opts, editor, error);\n\n          case _slateSchemaViolations.CHILD_INVALID:\n          case _slateSchemaViolations.CHILD_OBJECT_INVALID:\n            return onlyTextInCode(opts, editor, error);\n\n          default:\n            return undefined;\n        }\n      }\n    }), _blocks)\n  };\n\n  if (!opts.allowMarks) {\n    baseSchema.blocks[opts.lineType].marks = [];\n  }\n\n  return baseSchema;\n}\n/**\n * Return a list of group of nodes matching the given filter.\n */\n\n\nfunction getSuccessiveNodes(nodes, match) {\n  var nonLines = nodes.takeUntil(match);\n  var afterNonLines = nodes.skip(nonLines.size);\n\n  if (afterNonLines.isEmpty()) {\n    return (0, _immutable.List)();\n  }\n\n  var firstGroup = afterNonLines.takeWhile(match);\n  var restOfNodes = afterNonLines.skip(firstGroup.size);\n  return (0, _immutable.List)([firstGroup]).concat(getSuccessiveNodes(restOfNodes, match));\n}\n/**\n * A rule that ensure code blocks only contain lines of code, and no marks\n */\n\n\nfunction onlyLine(opts, editor, error) {\n  var isNotLine = function isNotLine(n) {\n    return n.type !== opts.lineType;\n  };\n\n  var nonLineGroups = getSuccessiveNodes(error.node.nodes, isNotLine);\n  nonLineGroups.filter(function (group) {\n    return !group.isEmpty();\n  }).forEach(function (nonLineGroup) {\n    // Convert text to code lines\n    var text = nonLineGroup.map(function (n) {\n      return n.text;\n    }).join('');\n    var codeLines = (0, _utils.deserializeCode)(opts, text).nodes; // Insert them in place of the invalid node\n\n    var first = nonLineGroup.first();\n    var parent = editor.value.document.getParent(first.key);\n    var invalidNodeIndex = parent.nodes.indexOf(first);\n    editor.withoutNormalizing(function () {\n      codeLines.forEach(function (codeLine, index) {\n        editor.insertNodeByKey(parent.key, invalidNodeIndex + index, codeLine);\n      });\n    }); // Remove the block\n\n    editor.withoutNormalizing(function () {\n      nonLineGroup.forEach(function (n) {\n        return editor.removeNodeByKey(n.key);\n      });\n    });\n  });\n  return editor;\n}\n/**\n * A rule that ensure code lines only contain text\n */\n\n\nfunction onlyTextInCode(opts, editor, error) {\n  var node = error.node;\n\n  if (node.object === 'inline' || node.object === 'block') {\n    editor.withoutNormalizing(function () {\n      node.nodes.forEach(function (child) {\n        editor.unwrapNodeByKey(child.key);\n      });\n    });\n    return editor;\n  }\n\n  return undefined;\n}\n/**\n * A rule that ensure code lines are always children\n * of a code block.\n */\n\n\nfunction noOrphanLine(opts, editor, error) {\n  var parent = error.parent;\n\n  var isLine = function isLine(n) {\n    return n.type === opts.lineType;\n  };\n\n  var linesGroup = getSuccessiveNodes(parent.nodes, isLine);\n  linesGroup.forEach(function (group) {\n    var container = _slate.Block.create({\n      type: opts.containerType,\n      nodes: []\n    });\n\n    var firstLineIndex = parent.nodes.indexOf(group.first());\n    editor.withoutNormalizing(function () {\n      editor.insertNodeByKey(parent.key, firstLineIndex, container);\n      group.forEach(function (line, index) {\n        return editor.moveNodeByKey(line.key, container.key, index);\n      });\n    });\n  });\n}\n\nexports.default = schema;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _options = require('./options');\n\nvar _options2 = _interopRequireDefault(_options);\n\nvar _handlers = require('./handlers');\n\nvar _core = require('./core');\n\nvar _core2 = _interopRequireDefault(_core);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n/**\n * A Slate plugin to handle keyboard events in lists.\n */\n\n\nfunction EditBlockquote() {\n  var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  opts = new _options2.default(opts);\n  var corePlugin = (0, _core2.default)(opts);\n  return _extends({}, corePlugin, {\n    onKeyDown: _handlers.onKeyDown.bind(null, opts)\n  });\n}\n\nexports.default = EditBlockquote;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.onKeyDown = exports.onEnter = exports.onBackspace = undefined;\n\nvar _onBackspace = require('./onBackspace');\n\nvar _onBackspace2 = _interopRequireDefault(_onBackspace);\n\nvar _onEnter = require('./onEnter');\n\nvar _onEnter2 = _interopRequireDefault(_onEnter);\n\nvar _onKeyDown = require('./onKeyDown');\n\nvar _onKeyDown2 = _interopRequireDefault(_onKeyDown);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nexports.onBackspace = _onBackspace2.default;\nexports.onEnter = _onEnter2.default;\nexports.onKeyDown = _onKeyDown2.default;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nrequire('slate');\n\nvar _getCurrentBlockquote = require('./getCurrentBlockquote');\n\nvar _getCurrentBlockquote2 = _interopRequireDefault(_getCurrentBlockquote);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n/**\n * Is the selection in a blockquote\n */\n\n\nfunction isSelectionInBlockquote(opts, value) {\n  return Boolean((0, _getCurrentBlockquote2.default)(opts, value));\n}\n\nexports.default = isSelectionInBlockquote;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nrequire('slate');\n/**\n * Unwrap from blockquote.\n */\n\n\nfunction unwrapBlockquote(opts, editor) {\n  return editor.unwrapBlock(opts.type);\n}\n\nexports.default = unwrapBlockquote;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nrequire('slate');\n/**\n * Wrap the block in a new blockquote.\n */\n\n\nfunction wrapInBlockquote(opts, editor) {\n  return editor.wrapBlock(opts.type);\n}\n\nexports.default = wrapInBlockquote;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nrequire('slate');\n\nvar _onEnter = require('./onEnter');\n\nvar _onEnter2 = _interopRequireDefault(_onEnter);\n\nvar _onBackspace = require('./onBackspace');\n\nvar _onBackspace2 = _interopRequireDefault(_onBackspace);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar KEY_ENTER = 'Enter';\nvar KEY_BACKSPACE = 'Backspace';\n/**\n * User is pressing a key in the editor\n */\n\nfunction onKeyDown(opts, event, editor, next) {\n  // Build arguments list\n  var args = [opts, event, editor, next];\n\n  switch (event.key) {\n    case KEY_ENTER:\n      return _onEnter2.default.apply(undefined, args);\n\n    case KEY_BACKSPACE:\n      return _onBackspace2.default.apply(undefined, args);\n\n    default:\n      return next();\n  }\n}\n\nexports.default = onKeyDown;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _options = require('./options');\n\nvar _options2 = _interopRequireDefault(_options);\n\nvar _utils = require('./utils');\n\nvar _changes = require('./changes');\n\nvar _validation = require('./validation');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n/**\n * The core of the plugin, which does not relies on `slate-react`, and includes\n * everything but behavior and rendering logic.\n */\n\n\nfunction core(optsParam) {\n  var opts = new _options2.default(optsParam);\n  return {\n    schema: (0, _validation.schema)(opts),\n    utils: {\n      isSelectionInBlockquote: _utils.isSelectionInBlockquote.bind(null, opts)\n    },\n    changes: {\n      wrapInBlockquote: _changes.wrapInBlockquote.bind(null, opts),\n      unwrapBlockquote: bindAndScopeChange(opts, _changes.unwrapBlockquote)\n    }\n  };\n}\n/**\n * Bind a change to given options, and scope it to act only inside a blockquote\n */\n\n\nfunction bindAndScopeChange(opts, fn) {\n  return function (change) {\n    for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    var value = change.value;\n\n    if (!(0, _utils.isSelectionInBlockquote)(opts, value)) {\n      return change;\n    } // $FlowFixMe\n\n\n    return fn.apply(undefined, _toConsumableArray([opts, change].concat(args)));\n  };\n}\n\nexports.default = core;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.schema = undefined;\n\nvar _schema = require('./schema');\n\nvar _schema2 = _interopRequireDefault(_schema);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nexports.schema = _schema2.default;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slate = require('slate');\n\nvar _slateSchemaViolations = require('slate-schema-violations');\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n/**\n * Create a schema definition with rules to normalize blockquotes\n */\n\n\nfunction schema(opts) {\n  return {\n    blocks: _defineProperty({}, opts.type, {\n      nodes: [{\n        match: {\n          object: 'block'\n        }\n      }],\n      normalize: function normalize(editor, error) {\n        var code = error.code;\n\n        switch (code) {\n          case _slateSchemaViolations.CHILD_OBJECT_INVALID:\n            return containBlocks(opts, editor, error);\n\n          default:\n            return undefined;\n        }\n      }\n    })\n  };\n}\n/**\n *  Ensures that blockquotes always contain blocks.\n */\n\n\nfunction containBlocks(opts, editor, error) {\n  var toWrap = error.node.nodes.filter(function (n) {\n    return n.object !== 'block';\n  });\n\n  if (toWrap.isEmpty()) {\n    return undefined;\n  } // Wrap text/inline nodes in default block\n\n\n  var wrapper = _slate.Block.create({\n    type: opts.typeDefault,\n    nodes: []\n  }); // Be careful of Slate's core schema removing inlines or blocks when\n  // a block contains a mix of them.\n\n\n  editor.withoutNormalizing(function () {\n    editor.insertNodeByKey(error.node.key, 0, wrapper);\n  });\n  toWrap.forEach(function (child, index) {\n    var isLast = index === toWrap.size - 1;\n\n    if (isLast) {\n      editor.moveNodeByKey(child.key, wrapper.key, index);\n    } else {\n      editor.withoutNormalizing(function () {\n        editor.moveNodeByKey(child.key, wrapper.key, index);\n      });\n    }\n  });\n  return editor;\n}\n\nexports.default = schema;","import { Record, Range } from 'immutable';\nimport { Block, Text, Editor, Value } from 'slate';\nimport { cloneFragment } from 'slate-react';\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n/**\n * The plugin options\n */\n\n\nvar Options =\n/*#__PURE__*/\nfunction (_Record) {\n  _inherits(Options, _Record);\n\n  function Options() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Options);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Options)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.isCell = function (node) {\n      return node.object == 'block' && node.type == _this.typeCell;\n    };\n\n    return _this;\n  }\n\n  return Options;\n}(Record({\n  typeTable: 'table',\n  typeRow: 'table_row',\n  typeCell: 'table_cell',\n  typeContent: 'paragraph',\n  exitBlockType: 'paragraph',\n  insertRowOnEnter: true,\n  edgeRowExitOnDirection: false\n}));\n/**\n * Create a new cell\n */\n\n\nfunction createCell(opts, nodes) {\n  return Block.create({\n    type: opts.typeCell,\n    nodes: nodes || [createEmptyContent(opts)]\n  });\n}\n/**\n * Create a new default content block\n */\n\n\nfunction createEmptyContent(opts) {\n  return Block.create({\n    type: opts.typeContent,\n    nodes: [Text.create()]\n  });\n}\n/**\n * Create a new row block\n */\n\n\nfunction createRow(opts, columns, getCellContent) {\n  var cellNodes = Range(0, columns).map(function (i) {\n    return createCell(opts, getCellContent ? getCellContent(i) : undefined);\n  }).toJS();\n  return Block.create({\n    type: opts.typeRow,\n    nodes: Block.createList(cellNodes)\n  });\n}\n/**\n * Create a table\n */\n\n\nfunction createTable(opts, columns, rows, getCellContent) {\n  var rowNodes = Range(0, rows).map(function (i) {\n    return createRow(opts, columns, getCellContent ? getCellContent.bind(null, i) : undefined);\n  }).toJS();\n  return Block.create({\n    type: opts.typeTable,\n    nodes: Block.createList(rowNodes)\n  });\n}\n\nvar TablePosition =\n/*#__PURE__*/\nfunction (_Record) {\n  _inherits(TablePosition, _Record);\n\n  function TablePosition() {\n    _classCallCheck(this, TablePosition);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(TablePosition).apply(this, arguments));\n  }\n\n  _createClass(TablePosition, [{\n    key: \"isInCell\",\n\n    /**\n     * Check to see if this position is within a cell\n     */\n    value: function isInCell() {\n      return Boolean(this.cellBlock);\n    }\n    /**\n     * Check to see if this position is within a row\n     */\n\n  }, {\n    key: \"isInRow\",\n    value: function isInRow() {\n      return Boolean(this.rowBlock);\n    }\n    /**\n     * Check to see if this position is within a table\n     */\n\n  }, {\n    key: \"isInTable\",\n    value: function isInTable() {\n      return Boolean(this.tableBlock);\n    }\n    /**\n     * Check to see if this position is at the top of the cell.\n     */\n\n  }, {\n    key: \"isTopOfCell\",\n    value: function isTopOfCell() {\n      var cellBlock = this.cellBlock,\n          node = this.node;\n\n      if (!cellBlock || !node) {\n        return false;\n      }\n\n      return cellBlock.getPath(node.key).every(function (index) {\n        return index === 0;\n      });\n    }\n    /**\n     * Check to see if this position is at the bottom of the cell.\n     */\n\n  }, {\n    key: \"isBottomOfCell\",\n    value: function isBottomOfCell() {\n      var node = this.node,\n          cellBlock = this.cellBlock;\n\n      if (!node || !cellBlock) {\n        return false;\n      }\n\n      var ancestors = cellBlock.getAncestors(node.key);\n      return ancestors.every(function (node, index) {\n        var next = ancestors.get(index + 1);\n        if (!next) return true;\n        return node.nodes.indexOf(next) === node.nodes.size - 1;\n      });\n    }\n    /**\n     * Get count of columns\n     */\n\n  }, {\n    key: \"getWidth\",\n    value: function getWidth() {\n      var table = this.table;\n      var rows = table.nodes;\n      var cells = rows.first().nodes;\n      return cells.size;\n    }\n    /**\n     * Get count of rows\n     */\n\n  }, {\n    key: \"getHeight\",\n    value: function getHeight() {\n      var table = this.table;\n      var rows = table.nodes;\n      return rows.size;\n    }\n    /**\n     * Get index of current row in the table.\n     */\n\n  }, {\n    key: \"getRowIndex\",\n    value: function getRowIndex() {\n      var table = this.table,\n          row = this.row;\n      var rows = table.nodes;\n      return rows.findIndex(function (x) {\n        return x === row;\n      });\n    }\n    /**\n     * Get index of current column in the row.\n     */\n\n  }, {\n    key: \"getColumnIndex\",\n    value: function getColumnIndex() {\n      var row = this.row,\n          cell = this.cell;\n      var cells = row.nodes;\n      return cells.findIndex(function (x) {\n        return x === cell;\n      });\n    }\n    /**\n     * True if on first cell of the table\n     */\n\n  }, {\n    key: \"isFirstCell\",\n    value: function isFirstCell() {\n      return this.isFirstRow() && this.isFirstColumn();\n    }\n    /**\n     * True if on last cell of the table\n     */\n\n  }, {\n    key: \"isLastCell\",\n    value: function isLastCell() {\n      return this.isLastRow() && this.isLastColumn();\n    }\n    /**\n     * True if on first row\n     */\n\n  }, {\n    key: \"isFirstRow\",\n    value: function isFirstRow() {\n      return this.getRowIndex() === 0;\n    }\n    /**\n     * True if on last row\n     */\n\n  }, {\n    key: \"isLastRow\",\n    value: function isLastRow() {\n      return this.getRowIndex() === this.getHeight() - 1;\n    }\n    /**\n     * True if on first column\n     */\n\n  }, {\n    key: \"isFirstColumn\",\n    value: function isFirstColumn() {\n      return this.getColumnIndex() === 0;\n    }\n    /**\n     * True if on last column\n     */\n\n  }, {\n    key: \"isLastColumn\",\n    value: function isLastColumn() {\n      return this.getColumnIndex() === this.getWidth() - 1;\n    }\n  }, {\n    key: \"table\",\n    get: function get() {\n      if (!this.tableBlock) {\n        throw new Error('Not in a table');\n      }\n\n      return this.tableBlock;\n    }\n  }, {\n    key: \"row\",\n    get: function get() {\n      if (!this.rowBlock) {\n        throw new Error('Not in a row');\n      }\n\n      return this.rowBlock;\n    }\n  }, {\n    key: \"cell\",\n    get: function get() {\n      if (!this.cellBlock) {\n        throw new Error('Not in a cell');\n      }\n\n      return this.cellBlock;\n    }\n  }], [{\n    key: \"create\",\n    // Block container for the table\n\n    /*::tableBlock: ?Block;*/\n    // Block for current row\n\n    /*::rowBlock: ?Block;*/\n    // Block for current cell\n\n    /*::cellBlock: ?Block;*/\n    // Current content block in the cell\n\n    /*::contentBlock: ?Block;*/\n\n    /**\n     * Create a new instance of a TablePosition from a Slate document\n     * and a node key.\n     */\n    value: function create(opts, containerNode, key) {\n      var node = containerNode.getDescendant(key);\n      var ancestors = containerNode.getAncestors(key).push(node);\n      var tableBlock = ancestors.findLast(function (p) {\n        return p.type === opts.typeTable;\n      });\n      var rowBlock = ancestors.findLast(function (p) {\n        return p.type === opts.typeRow;\n      });\n      var cellBlock = ancestors.findLast(function (p) {\n        return p.type === opts.typeCell;\n      });\n      var contentBlock = ancestors.skipUntil(function (ancestor) {\n        return ancestor === cellBlock;\n      }).skip(1).first();\n      return new TablePosition({\n        tableBlock: tableBlock,\n        rowBlock: rowBlock,\n        cellBlock: cellBlock,\n        contentBlock: contentBlock,\n        node: node\n      });\n    }\n  }]);\n\n  return TablePosition;\n}(Record({\n  tableBlock: null,\n  rowBlock: null,\n  cellBlock: null,\n  contentBlock: null,\n  node: null\n}));\n/**\n * The position of the selection start block, in the current table\n */\n\n\nfunction getPosition(opts, editor) {\n  var value = editor.value;\n  if (!value.selection.start || !value.selection.start.key) return new TablePosition();\n  return TablePosition.create(opts, value.document, value.selection.start.key);\n}\n/*\n * The position of a particular node, in the current table\n */\n\n\nfunction getPositionByKey(opts, editor, containerNode, // Key of the node in desired position\nkey) {\n  return TablePosition.create(opts, containerNode, key);\n}\n/**\n * True if the given range is inside one table\n */\n\n\nfunction isRangeInTable(opts, node, range) {\n  var start = range.start,\n      end = range.end;\n  var startPosition = TablePosition.create(opts, node, start.key);\n  var endPosition = TablePosition.create(opts, node, end.key); // Only handle events in tables\n\n  if (!startPosition.isInTable() || !endPosition.isInTable()) {\n    return false;\n  } // Inside the same table\n\n\n  return startPosition.table === endPosition.table;\n}\n/**\n * Is the selection in a table\n */\n\n\nfunction isSelectionInTable(opts, editor) {\n  var value = editor.value;\n  var selection = value.selection;\n  if (!selection.start.key) return false;\n  return isRangeInTable(opts, value.document, value.selection);\n}\n/**\n * Are the selection start and end outside a table.\n */\n\n\nfunction isSelectionOutOfTable(opts, editor) {\n  var value = editor.value;\n  var selection = value.selection;\n  if (!selection.start.key) return false;\n  var startPosition = TablePosition.create(opts, value.document, selection.start.key);\n  var endPosition = TablePosition.create(opts, value.document, selection.end.key); // Only handle events in tables\n\n  return !startPosition.isInTable() && !endPosition.isInTable();\n}\n/**\n * Run the given function against each cells of the table\n */\n\n\nfunction forEachCells(opts, // The table\ntable, fn) {\n  return table.nodes.forEach(function (row, rowIndex) {\n    return row.nodes.forEach(function (cell, columnIndex) {\n      return fn(cell, rowIndex, columnIndex);\n    });\n  });\n}\n/**\n * Returns the list of cells at the given row index\n */\n\n\nfunction getCellsAtRow(opts, editor, table, rowIndex) {\n  return table.nodes.get(rowIndex).nodes;\n}\n/**\n * Returns the list of cells at the given column index\n */\n\n\nfunction getCellsAtColumn(opts, editor, table, columnIndex) {\n  return table.nodes.map(function (row) {\n    return row.nodes.get(columnIndex);\n  });\n}\n\nfunction getCopiedFragment(opts, value) {\n  var selection = value.selection,\n      document = value.document;\n  var startPosition = TablePosition.create(opts, document, selection.start.key);\n  var endPosition = TablePosition.create(opts, document, selection.end.key); // Fragment as it would be copied by Slate\n\n  var baseFragment = value.fragment;\n\n  if (endPosition.cell === startPosition.cell) {\n    // The selection is inside a single cell. Only copy the content of that cell\n    var copiedCell = baseFragment.getAncestors(baseFragment.getFirstText().key).findLast(function (n) {\n      return n.type === opts.typeCell;\n    });\n    return baseFragment.merge({\n      nodes: copiedCell.nodes\n    });\n  }\n}\n/**\n * Insert a new table\n */\n\n\nfunction insertTable(opts, change) {\n  var columns = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 2;\n  var rows = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 2;\n  var getCellContent = arguments.length > 4 ? arguments[4] : undefined;\n  var value = change.value;\n  if (!value.selection.start.key) return change; // Create the table node\n\n  var table = createTable(opts, columns, rows, getCellContent);\n  return change.insertBlock(table);\n}\n/**\n * Insert a new row in current table\n */\n\n\nfunction insertRow(opts, change, at, // row index\ngetRow) // Generate the row yourself\n{\n  var value = change.value;\n  var selection = value.selection;\n  var pos = TablePosition.create(opts, value.document, selection.start.key);\n  var table = pos.table; // Create a new row with the right count of cells\n\n  var columns = table.nodes.get(0).nodes.size;\n  var newRow = getRow ? getRow(columns) : createRow(opts, columns);\n\n  if (typeof at === 'undefined') {\n    at = pos.getRowIndex() + 1;\n  }\n\n  return change.insertNodeByKey(table.key, at, newRow).moveToEndOfNode(newRow.nodes.get(pos.getColumnIndex()));\n}\n/**\n * Move selection to {x,y}\n */\n\n\nfunction moveSelection(opts, change, x, y) {\n  var value = change.value;\n  var selection = value.selection;\n  var pos = TablePosition.create(opts, value.document, selection.start.key);\n\n  if (!pos.isInCell()) {\n    throw new Error('moveSelection can only be applied from within a cell');\n  }\n\n  var table = pos.table;\n  var row = table.nodes.get(y);\n  var cell = row.nodes.get(x);\n  return change.moveToStartOfNode(cell);\n}\n/**\n * Insert a new column in current table\n */\n\n\nfunction insertColumn(opts, change, at, // Column index\ngetCell) {\n  var value = change.value;\n  var selection = value.selection;\n  var pos = TablePosition.create(opts, value.document, selection.start.key);\n  var table = pos.table;\n  var columnIndex = typeof at === 'undefined' ? pos.getColumnIndex() + 1 : at; // Insert the new cell\n\n  change.withoutNormalizing(function () {\n    table.nodes.forEach(function (row, rowIndex) {\n      var newCell = getCell ? getCell(columnIndex, rowIndex) : createCell(opts);\n      change.insertNodeByKey(row.key, columnIndex, newCell);\n    });\n  }); // Update the selection (not doing can break the undo)\n\n  return moveSelection(opts, change, pos.getColumnIndex() + 1, pos.getRowIndex());\n}\n/**\n * Used when pasting a fragment of table into another one\n */\n\n\nfunction insertTableFragmentAtRange(opts, change, range, // This fragment should contain only one table,\nfragment) {\n  var insertedTable = fragment.nodes.first();\n\n  if (!(fragment.nodes.size === 1 && insertedTable && insertedTable.type === opts.typeTable)) {\n    throw new Error('Expected to insert a fragment containing one table');\n  }\n\n  var value = change.value;\n  var targetPosition = TablePosition.create(opts, value.document, value.selection.start.key);\n  var fragmentRows = insertedTable.nodes;\n  var fragmentHeight = fragmentRows.size;\n  var fragmentWidth = fragmentRows.first().nodes.size; // Insert columns and rows to accomodate the incoming pasted cells\n\n  var missingWidth = fragmentWidth + targetPosition.getColumnIndex() - targetPosition.getWidth();\n  var missingHeight = fragmentHeight + targetPosition.getRowIndex() - targetPosition.getHeight();\n\n  if (missingWidth > 0) {\n    // Add columns\n    Array(missingWidth).fill().forEach(function () {\n      insertColumn(opts, change, targetPosition.getWidth());\n    });\n  }\n\n  if (missingHeight > 0) {\n    // Add rows\n    Array(missingHeight).fill().forEach(function () {\n      insertRow(opts, change, targetPosition.getHeight());\n    });\n  } // Patch the inserted table over the target table, overwritting the cells\n\n\n  var existingTable = change.value.document.getDescendant(targetPosition.table.key);\n  change.withoutNormalizing(function () {\n    fragmentRows.forEach(function (fragmentRow, fragmentRowIndex) {\n      fragmentRow.nodes.forEach(function (newCell, fragmentColumnIndex) {\n        var existingCell = existingTable.nodes.get(targetPosition.getRowIndex() + fragmentRowIndex).nodes.get(targetPosition.getColumnIndex() + fragmentColumnIndex);\n        change.replaceNodeByKey(existingCell.key, newCell);\n      });\n    });\n  });\n  var lastPastedCell = fragmentRows.last().nodes.last();\n  return change.moveToEndOfNode(lastPastedCell);\n}\n/**\n * Clear the content of the given cell\n */\n\n\nfunction clearCell(opts, change, cell) {\n  var newBlock = Block.create({\n    type: opts.typeContent\n  });\n  var nodes = cell.nodes; // Insert a new empty node\n\n  change.withoutNormalizing(function () {\n    change.insertNodeByKey(cell.key, 0, newBlock);\n  }); // Remove all previous nodes\n\n  nodes.forEach(function (node) {\n    change.removeNodeByKey(node.key);\n  });\n  return change;\n}\n/**\n * Remove the row associated to a given key in a table.\n * Clear thw row if last remaining row\n */\n\n\nfunction removeRowByKey(opts, change, key) {\n  var value = change.value;\n  var pos = TablePosition.create(opts, value.document, key); // Update table by removing the row\n\n  if (pos.getHeight() > 1) {\n    change.removeNodeByKey(key);\n  } else {\n    // If last remaining row, clear it instead\n    pos.row.nodes.forEach(function (cell) {\n      cell.nodes.forEach(function () {\n        return clearCell(opts, change, cell);\n      });\n    });\n  } // this will also invalidate the selection - move it to the first cell\n  // change.moveToRangeOfNode(pos.row.nodes.first());\n\n\n  return change;\n}\n/**\n * Remove current row in a table. Clear it if last remaining row\n */\n\n\nfunction removeRow(opts, change, at) {\n  var value = change.value;\n  var selection = value.selection;\n  var pos = TablePosition.create(opts, value.document, selection.start.key);\n  var rowKey;\n\n  if (typeof at === 'undefined') {\n    rowKey = pos.row.key;\n  } else {\n    rowKey = pos.table.nodes.get(at).key;\n  }\n\n  return removeRowByKey(opts, change, rowKey);\n}\n/**\n * Delete the column associated with the given cell key in a table\n */\n\n\nfunction removeColumnByKey(opts, change, key) {\n  var value = change.value;\n  var pos = TablePosition.create(opts, value.document, key);\n  var table = pos.table;\n  var colIndex = pos.getColumnIndex();\n  var rows = table.nodes; // Remove the cell from every row\n\n  if (pos.getWidth() > 1) {\n    change.withoutNormalizing(function () {\n      rows.forEach(function (row) {\n        var cell = row.nodes.get(colIndex);\n        change.removeNodeByKey(cell.key);\n      });\n    });\n  } else {\n    // If last column, clear text in cells instead\n    rows.forEach(function (row) {\n      row.nodes.forEach(function (cell) {\n        cell.nodes.forEach(function () {\n          return clearCell(opts, change, cell);\n        });\n      });\n    });\n  } // this will also invalidate the selection - move it to the first cell\n  // change.moveToRangeOfNode(rows.first().nodes.first());\n  // Replace the table\n\n\n  return change;\n}\n/**\n * Delete current column in a table\n */\n\n\nfunction removeColumn(opts, change, at) {\n  var value = change.value;\n  var selection = value.selection;\n  var pos = TablePosition.create(opts, value.document, selection.start.key);\n  var columnKey;\n\n  if (typeof at === 'undefined') {\n    columnKey = pos.cell.key;\n  } else {\n    columnKey = pos.row.nodes.get(at).key;\n  }\n\n  return removeColumnByKey(opts, change, columnKey);\n}\n/**\n * Delete the whole table at the given node key\n */\n\n\nfunction removeTableByKey(opts, editor, key) {\n  var value = editor.value;\n  var pos = TablePosition.create(opts, value.document, key);\n  var table = pos.table;\n  var document = editor.value.document;\n  var nextFocusBlock = null;\n  var shouldCollapseToEnd = false;\n  var nextBlock = editor.value.document.getNextBlock(table.key);\n\n  if (nextBlock) {\n    nextFocusBlock = nextBlock;\n  } else {\n    var prevBlock = editor.value.document.getPreviousBlock(table.key);\n\n    if (prevBlock) {\n      nextFocusBlock = prevBlock;\n      shouldCollapseToEnd = true;\n    } else if (opts.exitBlockType) {\n      nextFocusBlock = Block.create({\n        type: opts.exitBlockType,\n        nodes: [Text.create('')]\n      });\n      var tableParent = document.getParent(table.key);\n      var insertionIndex = tableParent.nodes.indexOf(table) + 1;\n      editor.insertNodeByKey(tableParent.key, insertionIndex, nextFocusBlock);\n    }\n  }\n\n  editor.removeNodeByKey(table.key);\n\n  if (!nextFocusBlock) {\n    return editor;\n  }\n\n  if (shouldCollapseToEnd) {\n    editor.moveToEndOfNode(nextFocusBlock).focus();\n  } else {\n    editor.moveToStartOfNode(nextFocusBlock).focus();\n  }\n\n  return editor;\n}\n/**\n * Delete the whole table at position\n */\n\n\nfunction removeTable(opts, editor) {\n  var value = editor.value;\n  var selection = value.selection;\n  return removeTableByKey(opts, editor, selection.start.key);\n}\n/**\n * Move selection by a {x,y} relative movement\n */\n\n\nfunction moveSelectionBy(opts, change, x, //  Move horizontally by x\ny // Move vertically by y\n) {\n  var value = change.value;\n  var selection = value.selection;\n  var pos = TablePosition.create(opts, value.document, selection.start.key);\n\n  if (!pos.isInCell()) {\n    throw new Error('moveSelectionBy can only be applied in a cell');\n  }\n\n  var rowIndex = pos.getRowIndex();\n  var colIndex = pos.getColumnIndex();\n  var width = pos.getWidth();\n  var height = pos.getHeight();\n\n  var _normPos = normPos(x + colIndex, y + rowIndex, width, height),\n      _normPos2 = _slicedToArray(_normPos, 2),\n      absX = _normPos2[0],\n      absY = _normPos2[1];\n\n  var isGoingUp = y < 0;\n\n  if (absX === -1) {\n    // Out of table\n    return change;\n  }\n\n  var table = pos.table;\n  var row = table.nodes.get(absY);\n  var cell = row.nodes.get(absX);\n\n  if (isGoingUp) {\n    change.moveToEndOfNode(cell);\n  } else {\n    change.moveToStartOfNode(cell);\n  }\n\n  return change;\n}\n/**\n * Normalize position in a table. If x is out of the row, update y accordingly.\n * Returns [-1, -1] if the new selection is out of table\n */\n\n\nfunction normPos(x, y, width, height) {\n  if (x < 0) {\n    x = width - 1;\n    y -= 1;\n  }\n\n  if (y < 0) {\n    return [-1, -1];\n  }\n\n  if (x >= width) {\n    x = 0;\n    y += 1;\n  }\n\n  if (y >= height) {\n    return [-1, -1];\n  }\n\n  return [x, y];\n}\n/**\n * Move selection by a {x,y} relative movement\n */\n\n\nfunction moveSelectionOutOfTable(opts, editor) {\n  var direction = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n  var value = editor.value;\n  var selection = value.selection,\n      document = value.document;\n  var pos = TablePosition.create(opts, document, selection.start.key);\n\n  if (!pos.isInCell()) {\n    throw new Error('moveSelectionOutOfTable can only be applied in a cell');\n  }\n\n  var table = pos.table;\n  var isGoingUp = direction < 0;\n\n  if (isGoingUp) {\n    var previousNode = document.getPreviousBlock(table.key);\n    previousNode && editor.moveToEndOfNode(previousNode);\n  } else {\n    var nextNode = document.getNextBlock(table.key);\n    nextNode && editor.moveToStartOfNode(nextNode);\n  }\n\n  return editor;\n}\n\nvar CHILD_OBJECT_INVALID = 'child_object_invalid';\nvar CHILD_TYPE_INVALID = 'child_type_invalid';\nvar PARENT_TYPE_INVALID = 'parent_type_invalid';\n/*\n * Returns a schema definition for the plugin\n */\n\nfunction schema(opts) {\n  var _blocks;\n\n  return {\n    blocks: (_blocks = {}, _defineProperty(_blocks, opts.typeTable, {\n      nodes: [{\n        match: {\n          type: opts.typeRow\n        }\n      }],\n      parent: [{\n        object: 'document'\n      }],\n      normalize: function normalize(editor, _ref) {\n        var code = _ref.code,\n            node = _ref.node;\n\n        if (code === 'parent_object_invalid') {\n          editor.insertText(node.text);\n          editor.removeNodeByKey(node.key);\n        }\n      }\n    }), _defineProperty(_blocks, opts.typeRow, {\n      nodes: [{\n        match: {\n          type: opts.typeCell\n        }\n      }],\n      parent: {\n        type: opts.typeTable\n      },\n      normalize: function normalize(change, error) {\n        switch (error.code) {\n          case CHILD_TYPE_INVALID:\n            return onlyCellsInRow(opts, change, error);\n\n          case PARENT_TYPE_INVALID:\n            return rowOnlyInTable(opts, change, error);\n        }\n      }\n    }), _defineProperty(_blocks, opts.typeCell, {\n      nodes: [{\n        match: {\n          object: 'block'\n        }\n      }],\n      parent: {\n        type: opts.typeRow\n      },\n      normalize: function normalize(change, error) {\n        switch (error.code) {\n          case CHILD_OBJECT_INVALID:\n            return onlyBlocksInCell(opts, change, error.node);\n\n          case PARENT_TYPE_INVALID:\n            return cellOnlyInRow(opts, change, error);\n        }\n      }\n    }), _blocks)\n  };\n}\n/*\n * A row's children must be cells.\n * If they're not then we wrap them within a cell.\n */\n\n\nfunction onlyCellsInRow(opts, change, error) {\n  var cell = createCell(opts, []);\n  var index = error.node.nodes.findIndex(function (child) {\n    return child.key === error.child.key;\n  });\n  change.withoutNormalizing(function () {\n    change.insertNodeByKey(error.node.key, index, cell);\n    change.moveNodeByKey(error.child.key, cell.key, 0);\n  });\n}\n/*\n * Rows can't live outside a table, if one is found then we wrap it within a table.\n */\n\n\nfunction rowOnlyInTable(opts, change, error) {\n  return change.wrapBlockByKey(error.node.key, opts.typeTable);\n}\n/*\n * A cell's children must be \"block\"s.\n * If they're not then we wrap them within a block with a type of opts.typeContent\n */\n\n\nfunction onlyBlocksInCell(opts, change, node) {\n  change.wrapBlockByKey(node.nodes.first().key, opts.typeContent);\n  var wrapper = change.value.document.getDescendant(node.key).nodes.first(); // Add in the remaining items\n\n  node.nodes.rest().forEach(function (child, index) {\n    return change.moveNodeByKey(child.key, wrapper.key, index + 1);\n  });\n  return change;\n  /*     const block = Block.create({\n      type: opts.typeContent,\n  });\n  change.withoutNormalizing(() => {\n      change.insertNodeByKey(error.node.key, 0, block);\n      const inlines = error.node.nodes.filter(\n          node => node.object !== 'block',\n      );\n      inlines.forEach((inline, index) => {\n          change.moveNodeByKey(inline.key, block.key, index);\n      });\n  }); */\n}\n/*\n * Cells can't live outside a row, if one is found then we wrap it within a row.\n */\n\n\nfunction cellOnlyInRow(opts, change, error) {\n  return change.wrapBlockByKey(error.node.key, opts.typeRow);\n}\n/*\n * Ensure each row has the same number of columns.\n */\n\n\nfunction normalizeNode(opts) {\n  var isRow = function isRow(node) {\n    return node.type === opts.typeRow;\n  };\n\n  var countNodes = function countNodes(row) {\n    return row.nodes.size;\n  };\n\n  return function (node, editor, next) {\n    if (node.type !== opts.typeTable) {\n      return next();\n    }\n\n    var rows = node.nodes.filter(isRow);\n    var maxColumns = Math.max( // Minimum 1 column\n    1, rows.map(countNodes).max());\n    var rowsMissingColumns = rows.filter(function (row) {\n      return countNodes(row) < maxColumns;\n    });\n\n    if (rowsMissingColumns.isEmpty()) {\n      return next();\n    }\n\n    return function (change) {\n      change.withoutNormalizing(function () {\n        rowsMissingColumns.forEach(function (row) {\n          var numberOfCellsToAdd = maxColumns - row.nodes.size;\n          var cells = Array.from({\n            length: numberOfCellsToAdd\n          }).map(function () {\n            return createCell(opts);\n          });\n          cells.forEach(function (cell) {\n            return change.insertNodeByKey(row.key, row.nodes.size, cell);\n          });\n        });\n      });\n    };\n  };\n}\n/**\n * Returns the core of the plugin, limited to the validation and normalization\n * part of `slate-edit-table`, and utils.\n *\n * Import this directly: `import EditTable from 'slate-edit-table/lib/core'`\n * if you don't care about behavior/rendering and you\n * are only manipulating `Slate.Values` without rendering them.\n * That way you do not depend on `slate-react`.\n */\n\n\nfunction core(optionsParam) {\n  var opts = new Options(optionsParam);\n  return {\n    schema: schema(opts),\n    normalizeNode: normalizeNode(opts),\n    queries: {\n      isSelectionInTable: isSelectionInTable.bind(null, opts),\n      isSelectionOutOfTable: isSelectionOutOfTable.bind(null, opts),\n      getPosition: getPosition.bind(null, opts),\n      getPositionByKey: getPositionByKey.bind(null, opts),\n      createCell: createCell.bind(null, opts),\n      createRow: createRow.bind(null, opts),\n      createTable: createTable.bind(null, opts),\n      forEachCells: forEachCells.bind(null, opts),\n      getCellsAtRow: getCellsAtRow.bind(null, opts),\n      getCellsAtColumn: getCellsAtColumn.bind(null, opts),\n      getCopiedFragment: getCopiedFragment.bind(null, opts)\n    },\n    commands: {\n      insertTable: insertTable.bind(null, opts),\n      insertTableFragmentAtRange: insertTableFragmentAtRange.bind(null, opts),\n      clearCell: clearCell.bind(null, opts),\n      removeRowByKey: removeRowByKey.bind(null, opts),\n      removeColumnByKey: removeColumnByKey.bind(null, opts),\n      removeTableByKey: removeTableByKey.bind(null, opts),\n      insertRow: bindAndScopeChange(opts, insertRow),\n      removeRow: bindAndScopeChange(opts, removeRow),\n      insertColumn: bindAndScopeChange(opts, insertColumn),\n      removeColumn: bindAndScopeChange(opts, removeColumn),\n      removeTable: bindAndScopeChange(opts, removeTable),\n      moveSelection: bindAndScopeChange(opts, moveSelection),\n      moveSelectionBy: bindAndScopeChange(opts, moveSelectionBy),\n      moveSelectionOutOfTable: bindAndScopeChange(opts, moveSelectionOutOfTable)\n    }\n  };\n}\n/**\n * Bind a change to given options, and scope it to act only inside a table\n */\n\n\nfunction bindAndScopeChange(opts, fn) {\n  return function (editor) {\n    if (!editor.isSelectionInTable()) {\n      return editor;\n    } // $FlowFixMe\n\n\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    return fn.apply(void 0, _toConsumableArray([opts, editor].concat(args)));\n  };\n}\n/**\n * Insert a new row when pressing \"Enter\"\n */\n\n\nfunction onEnter(event, editor, opts, next) {\n  event.preventDefault();\n  var _editor$value = editor.value,\n      selection = _editor$value.selection,\n      document = _editor$value.document;\n  var pos = TablePosition.create(opts, document, selection.start.key);\n  var isAtEdgeOfCell = selection.focus.isAtStartOfNode(pos.cell) || selection.focus.isAtEndOfNode(pos.cell);\n\n  if (!opts.insertRowOnEnter || !isAtEdgeOfCell) {\n    return next();\n  }\n\n  if (event.shiftKey) {\n    return editor.splitBlock().setBlocks({\n      type: opts.typeContent,\n      data: {}\n    });\n  }\n\n  return insertRow(opts, editor);\n}\n/**\n * Exit the current table, by inserting a default block after the table.\n */\n\n\nfunction onModEnter(event, editor, opts, next) {\n  var value = editor.value;\n\n  if (!value.selection.isCollapsed) {\n    return next();\n  }\n\n  event.preventDefault();\n  var exitBlock = Block.create({\n    type: opts.exitBlockType,\n    nodes: [Text.create('')]\n  });\n  var table = TablePosition.create(opts, value.document, value.selection.start.key).table;\n  var tableParent = value.document.getParent(table.key);\n  var insertionIndex = tableParent.nodes.indexOf(table) + 1;\n  return editor.insertNodeByKey(tableParent.key, insertionIndex, exitBlock).moveToStartOfNode(exitBlock);\n}\n/**\n * Select all text of current block.\n */\n\n\nfunction selectAllText(editor) {\n  var value = editor.value;\n  var startBlock = value.startBlock;\n  return editor.moveTo(0).moveFocusForward(startBlock.text.length);\n}\n/**\n * Pressing \"Tab\" moves the cursor to the next cell\n * and select the whole text\n */\n\n\nfunction onTab(event, editor, opts) {\n  event.preventDefault();\n  var value = editor.value;\n  var direction = event.shiftKey ? -1 : +1; // Create new row if needed\n\n  var selection = value.selection;\n  var pos = TablePosition.create(opts, value.document, selection.start.key);\n\n  if (pos.isFirstCell() && direction === -1) {\n    insertRow(opts, editor, 0);\n  } else if (pos.isLastCell() && direction === 1) {\n    insertRow(opts, editor);\n  } // Move back to initial cell (insertRow moves selection automatically).\n\n\n  editor.select(selection); // Move\n\n  moveSelectionBy(opts, editor, direction, 0); // Select all cell.\n\n  return selectAllText(editor);\n}\n\nfunction onBackspace(event, editor, opts, next) {\n  var value = editor.value;\n  var startBlock = value.startBlock,\n      selection = value.selection,\n      endBlock = value.endBlock,\n      document = value.document;\n  var isCollapsed = selection.isCollapsed;\n  var startCell = document.getClosest(startBlock.key, opts.isCell);\n  var endCell = document.getClosest(endBlock.key, opts.isCell);\n  var startPath = startCell.getPath(selection.start.key); // If a cursor is collapsed at the start of the first block, do nothing\n\n  if (selection.start.offset === 0 && isCollapsed && startPath && startPath.every(function (index) {\n    return index === 0;\n  })) {\n    if (editor.isVoid(startBlock)) {\n      // Delete the block normally if it is a void block\n      return next();\n    }\n\n    event.preventDefault();\n    return editor;\n  } // If \"normal\" deletion, we continue\n\n\n  if (startCell === endCell) {\n    return next();\n  } // If cursor is between multiple blocks,\n  // we clear the content of the cells.\n\n\n  event.preventDefault();\n  var blocks = value.blocks; // Get all cells that contains the selection\n\n  var cells = blocks.map(function (node) {\n    return node.type === opts.typeCell ? node : document.getClosest(node.key, function (a) {\n      return a.type === opts.typeCell;\n    });\n  }).toSet(); // If the cursor is at the very end of the first cell, ignore it.\n  // If the cursor is at the very start of the last cell, ignore it.\n  // This behavior is to compensate hanging selection behaviors:\n  // https://github.com/ianstormtaylor/slate/pull/1605\n\n  var ignoreFirstCell = value.selection.moveToStart().anchor.isAtEndOfNode(cells.first());\n  var ignoreLastCell = value.selection.moveToEnd().anchor.isAtStartOfNode(cells.last());\n  var cellsToClear = cells;\n\n  if (ignoreFirstCell) {\n    cellsToClear = cellsToClear.rest();\n  }\n\n  if (ignoreLastCell) {\n    cellsToClear = cellsToClear.butLast();\n  } // Clear all the selection\n\n\n  cellsToClear.forEach(function (cell) {\n    return clearCell(opts, editor, cell);\n  }); // Update the selection properly, and avoid reset of selection\n\n  var updatedStartCell = editor.value.document.getDescendant(cellsToClear.first().key);\n  return editor.moveToStartOfNode(updatedStartCell);\n}\n\nfunction onUpDown(event, editor, opts, next) {\n  var value = editor.value;\n  var direction = event.key === 'ArrowUp' ? -1 : +1;\n  var pos = TablePosition.create(opts, value.document, value.selection.start.key);\n\n  if (pos.isFirstRow() && direction === -1 && pos.isTopOfCell() || pos.isLastRow() && direction === +1 && pos.isBottomOfCell()) {\n    if (opts.edgeRowExitOnDirection) {\n      event.preventDefault();\n      return moveSelectionOutOfTable(opts, editor, direction);\n    } else {\n      // Let the default behavior move out of the table\n      return next();\n    }\n  }\n\n  if (direction === -1 && !pos.isTopOfCell()) {\n    return next();\n  }\n\n  if (direction === +1 && !pos.isBottomOfCell()) {\n    return next();\n  }\n\n  event.preventDefault();\n  moveSelectionBy(opts, editor, 0, direction);\n  return editor;\n}\n\nfunction onUpDown$1(event, editor, opts) {\n  var direction = event.key === 'ArrowUp' ? -1 : +1;\n  event.preventDefault();\n  moveSelectionOutOfTable(opts, editor, direction);\n  return editor;\n}\n\nvar KEY_ENTER = 'Enter';\nvar KEY_TAB = 'Tab';\nvar KEY_BACKSPACE = 'Backspace';\nvar KEY_DOWN = 'ArrowDown';\nvar KEY_UP = 'ArrowUp';\n/**\n * User is pressing a key in the editor\n */\n\nfunction onKeyDown(opts, event, editor, next) {\n  // Only handle events in cells\n  if (!editor.isSelectionInTable()) {\n    return next();\n  } // Build arguments list\n\n\n  var args = [event, editor, opts, next];\n\n  switch (event.key) {\n    case KEY_ENTER:\n      if (event.metaKey && opts.exitBlockType) {\n        return onModEnter.apply(void 0, args);\n      }\n\n      return onEnter.apply(void 0, args);\n\n    case KEY_TAB:\n      return onTab.apply(void 0, args);\n\n    case KEY_BACKSPACE:\n      return onBackspace.apply(void 0, args);\n\n    case KEY_DOWN:\n    case KEY_UP:\n      if (event.metaKey) {\n        return onUpDown$1.apply(void 0, args);\n      }\n\n      return onUpDown.apply(void 0, args);\n\n    default:\n      return next();\n  }\n}\n\nfunction onCopy(opts, event, editor, next) {\n  if (!editor.isSelectionInTable()) {\n    return next();\n  }\n\n  var fragment = getCopiedFragment(opts, editor.value);\n  if (!fragment) return next();\n  var tempEditor = new Editor({\n    value: Value.fromJSON({\n      document: fragment\n    })\n  });\n  tempEditor.moveToRangeOfDocument();\n  cloneFragment(event, tempEditor);\n}\n/**\n *  Returns the full plugin object (behavior + rendering + schema)\n */\n\n\nfunction EditTable( // The plugin options\noptionsParam) {\n  var opts = new Options(optionsParam || {});\n  var corePlugin = core(opts);\n  return _objectSpread({}, corePlugin, {\n    onKeyDown: onKeyDown.bind(null, opts),\n    onCopy: onCopy.bind(null, opts)\n  });\n}\n\nexport default EditTable;","import isDataUri from 'is-data-uri';\nimport Promise from 'es6-promise';\nimport isImage from 'is-image';\nimport isUrl from 'is-url';\nimport logger from 'slate-dev-logger';\nimport { getEventTransfer, getEventRange } from 'slate-react';\n/**\n * Return a `Blob` for the given data `uri`.\n *\n * Copied from: https://github.com/component/data-uri-to-blob/blob/master/index.js\n *\n * @param {String} uri\n * @return {Blob}\n */\n\nfunction dataUriToBlob(uri) {\n  var data = uri.split(',')[1];\n  var bytes = atob(data);\n  var buffer = new window.ArrayBuffer(bytes.length);\n  var array = new window.Uint8Array(buffer);\n\n  for (var i = 0; i < bytes.length; i++) {\n    array[i] = bytes.charCodeAt(i);\n  }\n\n  if (!hasArrayBufferView()) {\n    array = buffer;\n  }\n\n  var blob = new Blob([array], {\n    type: mime(uri)\n  }); // COMPAT: ???\n\n  blob.slice = blob.slice || blob.webkitSlice;\n  return blob;\n}\n/**\n * Return the mime type of a data `uri`.\n *\n * @param {String} uri\n * @return {String}\n */\n\n\nfunction mime(uri) {\n  return uri.split('')[0].slice(5);\n}\n/**\n * Check if the environment suppoers `ArrayBufferView`.\n *\n * @return {Boolean}\n */\n\n\nfunction hasArrayBufferView() {\n  return new Blob([new window.Uint8Array(100)]).size == 100;\n}\n/**\n * Convert an <img> source `url` to a data URI and `callback(err, uri)`.\n *\n * @param {String} url\n * @param {Function} callback\n */\n\n\nfunction srcToDataUri(url, callback) {\n  var canvas = window.document.createElement('canvas');\n  var img = window.document.createElement('img');\n\n  if (!canvas.getContext) {\n    return setTimeout(callback, 0, new Error('Canvas is not supported.'));\n  }\n\n  img.onload = function () {\n    var ctx = canvas.getContext('2d');\n    canvas.width = img.width;\n    canvas.height = img.height;\n    ctx.drawImage(img, 0, 0);\n    var dataUri = canvas.toDataURL('image/png');\n    callback(null, dataUri);\n  };\n\n  img.ononerror = function () {\n    callback(new Error('Failed to load image.'));\n  };\n\n  img.setAttribute('crossOrigin', 'anonymous');\n  img.src = url;\n}\n/**\n * Load an image file from a src `url`.\n *\n * @param {String} url\n * @param {Function} callback\n */\n\n\nfunction loadImageFile(url, callback) {\n  if (isDataUri(url)) {\n    var file = dataUriToBlob(url);\n    setTimeout(function () {\n      callback(null, file);\n    });\n  } else {\n    srcToDataUri(url, function (err, uri) {\n      var file = dataUriToBlob(uri);\n      callback(err, file);\n    });\n  }\n} // Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\n// Split a filename into [root, dir, basename, ext], unix version\n// 'root' is just a slash, or nothing.\n\n\nvar splitPathRe = /^(\\/?|)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?|)(\\.[^.\\/]*|))(?:[\\/]*)$/;\n\nvar splitPath = function splitPath(filename) {\n  return splitPathRe.exec(filename).slice(1);\n}; // path.resolve([from ...], to)\n// posix version\n// path.normalize(path)\n// posix version\n// posix version\n// posix version\n// path.relative(from, to)\n// posix version\n\n\nfunction extname(path) {\n  return splitPath(path)[3];\n} // String.prototype.substr - negative index don't work in IE8\n\n\nvar substr = 'ab'.substr(-1) === 'b' ? function (str, start, len) {\n  return str.substr(start, len);\n} : function (str, start, len) {\n  if (start < 0) start = str.length + start;\n  return str.substr(start, len);\n};\n\nvar _slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n/**\n * Insert images on drop or paste.\n *\n * @param {Object} options\n *   @property {Function} insertImage\n *   @property {Array} extensions (optional)\n * @return {Object} plugin\n */\n\n\nfunction DropOrPasteImages() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var insertImage = options.insertImage,\n      extensions = options.extensions;\n\n  if (options.applyTransform) {\n    logger.deprecate('0.6.0', 'The `applyTransform` argument to `slate-drop-or-paste-images` has been renamed to `insertImage` instead.');\n    insertImage = options.applyTransform;\n  }\n\n  if (!insertImage) {\n    throw new Error('You must supply an `insertImage` function.');\n  }\n  /**\n   * Check file extension against user-defined options.\n   *\n   * @param {Type} string\n   * @return {Boolean}\n   */\n\n\n  function matchExt(type) {\n    var accepted = false;\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = extensions[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var ext = _step.value;\n        if (type.includes(ext)) accepted = true;\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator.return) {\n          _iterator.return();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n\n    return accepted;\n  }\n  /**\n   * Apply the change for a given file and update the editor with the result.\n   *\n   * @param {Change} change\n   * @param {Blob} file\n   * @return {Promise}\n   */\n\n\n  function asyncApplyChange(change, file) {\n    var editor = change.editor;\n    return Promise.resolve(insertImage(change, file)).then(function () {\n      editor.onChange(change);\n    });\n  }\n  /**\n   * On drop or paste.\n   *\n   * @param {Event} event\n   * @param {Change} change\n   * @param {Function} next\n   * @return {State}\n   */\n\n\n  function onInsert(event, change, next) {\n    var editor = change.editor;\n    var transfer = getEventTransfer(event);\n    var range = getEventRange(event, editor);\n\n    switch (transfer.type) {\n      case 'files':\n        return onInsertFiles(event, change, next, transfer, range);\n\n      case 'html':\n        return onInsertHtml(event, change, next, transfer, range);\n\n      case 'text':\n        return onInsertText(event, change, next, transfer, range);\n\n      default:\n        return next();\n    }\n  }\n  /**\n   * On drop or paste files.\n   *\n   * @param {Event} event\n   * @param {Change} change\n   * @param {Function} next\n   * @param {Object} transfer\n   * @param {Range} range\n   * @return {Boolean}\n   */\n\n\n  function onInsertFiles(event, change, next, transfer, range) {\n    var files = transfer.files;\n    var _iteratorNormalCompletion2 = true;\n    var _didIteratorError2 = false;\n    var _iteratorError2 = undefined;\n\n    try {\n      for (var _iterator2 = files[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n        var file = _step2.value;\n\n        if (extensions) {\n          var type = file.type;\n\n          var _type$split = type.split('/'),\n              _type$split2 = _slicedToArray(_type$split, 2),\n              ext = _type$split2[1];\n\n          if (!matchExt(ext)) continue;\n        }\n\n        if (range) {\n          change.select(range);\n        }\n\n        asyncApplyChange(change, file);\n      }\n    } catch (err) {\n      _didIteratorError2 = true;\n      _iteratorError2 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion2 && _iterator2.return) {\n          _iterator2.return();\n        }\n      } finally {\n        if (_didIteratorError2) {\n          throw _iteratorError2;\n        }\n      }\n    }\n  }\n  /**\n   * On drop or paste html.\n   *\n   * @param {Event} event\n   * @param {Change} change\n   * @param {Function} next\n   * @param {Object} transfer\n   * @param {Range} range\n   * @return {Boolean}\n   */\n\n\n  function onInsertHtml(event, change, next, transfer, range) {\n    var editor = change.editor;\n    var html = transfer.html;\n    var parser = new DOMParser();\n    var doc = parser.parseFromString(html, 'text/html');\n    var body = doc.body;\n    var firstChild = body.firstChild;\n    if (firstChild.nodeName.toLowerCase() != 'img') return next();\n    var src = firstChild.src;\n\n    if (extensions) {\n      var ext = extname(src).slice(1);\n      if (!matchExt(ext)) return next();\n    }\n\n    loadImageFile(src, function (err, file) {\n      if (err) return;\n      editor.change(function (c) {\n        if (range) {\n          c.select(range);\n        }\n\n        asyncApplyChange(c, file);\n      });\n    });\n  }\n  /**\n   * On drop or paste text.\n   *\n   * @param {Event} event\n   * @param {Change} change\n   * @param {Function} next\n   * @param {Object} transfer\n   * @param {Range} range\n   * @return {Boolean}\n   */\n\n\n  function onInsertText(event, change, next, transfer, range) {\n    var editor = change.editor;\n    var text = transfer.text;\n    if (!isUrl(text)) return next();\n    if (!isImage(text)) return next();\n    loadImageFile(text, function (err, file) {\n      if (err) return;\n      editor.change(function (c) {\n        if (range) {\n          c.select(range);\n        }\n\n        asyncApplyChange(c, editor, file);\n      });\n    });\n  }\n  /**\n   * Return the plugin.\n   *\n   * @type {Object}\n   */\n\n\n  return {\n    onDrop: onInsert,\n    onPaste: onInsert\n  };\n}\n\nexport default DropOrPasteImages;","import isUrl from 'is-url';\n\nfunction PasteLinkify() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var _options$isActiveQuer = options.isActiveQuery,\n      isActiveQuery = _options$isActiveQuer === undefined ? 'isLinkActive' : _options$isActiveQuer,\n      _options$wrapCommand = options.wrapCommand,\n      wrapCommand = _options$wrapCommand === undefined ? 'wrapLink' : _options$wrapCommand,\n      _options$unwrapComman = options.unwrapCommand,\n      unwrapCommand = _options$unwrapComman === undefined ? 'unwrapLink' : _options$unwrapComman;\n  return {\n    onCommand: function onCommand(command, change, next) {\n      var type = command.type,\n          args = command.args;\n      var value = change.value;\n      var selection = value.selection;\n      var isCollapsed = selection.isCollapsed,\n          start = selection.start;\n      var url = void 0;\n\n      if (type === 'insertText' && isUrl(url = args[0]) || type === 'insertFragment' && isUrl(url = args[0].text)) {\n        // If there is already a link active, unwrap it so that we don't end up\n        // with a confusing overlapping inline situation.\n        if (change.query(isActiveQuery, value)) {\n          change.command(unwrapCommand);\n        } // If the selection is collapsed, we need to allow the default inserting\n        // to occur instead of just wrapping the existing text in a link.\n\n\n        if (isCollapsed) {\n          next();\n          change.moveAnchorTo(start.offset).moveFocusTo(start.offset + url.length);\n        } // Wrap the selection in a link, and collapse to the end of it.\n\n\n        change.command(wrapCommand, url).moveToEnd();\n        return;\n      }\n\n      next();\n    }\n  };\n}\n\nexport default PasteLinkify;","import toPascal from 'to-pascal-case';\n/**\n * A Slate plugin to add soft breaks on return.\n *\n * @param {Object} options\n * @return {Object}\n */\n\nfunction CollapseOnEscape() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return {\n    onKeyDown: function onKeyDown(event, change, next) {\n      var value = change.value;\n      var selection = value.selection;\n      if (event.key != 'Escape') return next();\n      if (selection.isCollapsed) return next();\n      var edge = toPascal(options.toEdge || 'start');\n      change['moveTo' + edge]();\n    }\n  };\n}\n\nexport default CollapseOnEscape;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _prismjs = require('prismjs');\n\nvar _prismjs2 = _interopRequireDefault(_prismjs);\n\nrequire('slate');\n\nvar _options = require('./options');\n\nvar _options2 = _interopRequireDefault(_options);\n\nvar _TOKEN_MARK = require('./TOKEN_MARK');\n\nvar _TOKEN_MARK2 = _interopRequireDefault(_TOKEN_MARK);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n/**\n * A Slate plugin to highlight code syntax.\n */\n\n\nfunction PrismPlugin() {\n  var optsParam = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var opts = new _options2.default(optsParam);\n  return {\n    decorateNode: function decorateNode(node) {\n      if (!opts.onlyIn(node)) {\n        return undefined;\n      }\n\n      return _decorateNode(opts, node);\n    },\n    renderMark: opts.renderMark,\n    TOKEN_MARK: _TOKEN_MARK2.default\n  };\n}\n/**\n * Returns the decoration for a node\n */\n\n\nfunction _decorateNode(opts, block) {\n  var grammarName = opts.getSyntax(block);\n  var grammar = _prismjs2.default.languages[grammarName];\n\n  if (!grammar) {\n    // Grammar not loaded\n    return [];\n  } // Tokenize the whole block text\n\n\n  var texts = block.getTexts();\n  var blockText = texts.map(function (t) {\n    return t.text;\n  }).join('\\n');\n\n  var tokens = _prismjs2.default.tokenize(blockText, grammar); // The list of decorations to return\n\n\n  var decorations = [];\n  var textStart = 0;\n  var textEnd = 0;\n  texts.forEach(function (text) {\n    textEnd = textStart + text.text.length;\n    var offset = 0;\n\n    function processToken(token, accu) {\n      accu = accu || '';\n\n      if (typeof token === 'string') {\n        if (accu) {\n          var decoration = createDecoration({\n            text: text,\n            textStart: textStart,\n            textEnd: textEnd,\n            start: offset,\n            end: offset + token.length,\n            className: 'prism-token token ' + accu\n          });\n\n          if (decoration) {\n            decorations.push(decoration);\n          }\n        }\n\n        offset += token.length;\n      } else {\n        accu = accu + ' ' + token.type + ' ' + (token.alias || '');\n\n        if (typeof token.content === 'string') {\n          var _decoration = createDecoration({\n            text: text,\n            textStart: textStart,\n            textEnd: textEnd,\n            start: offset,\n            end: offset + token.content.length,\n            className: 'prism-token token ' + accu\n          });\n\n          if (_decoration) {\n            decorations.push(_decoration);\n          }\n\n          offset += token.content.length;\n        } else {\n          // When using token.content instead of token.matchedStr, token can be deep\n          for (var i = 0; i < token.content.length; i += 1) {\n            processToken(token.content[i], accu);\n          }\n        }\n      }\n    }\n\n    tokens.forEach(processToken);\n    textStart = textEnd + 1; // account for added `\\n`\n  });\n  return decorations;\n}\n/**\n * Return a decoration range for the given text.\n */\n\n\nfunction createDecoration(_ref) {\n  var text = _ref.text,\n      textStart = _ref.textStart,\n      textEnd = _ref.textEnd,\n      start = _ref.start,\n      end = _ref.end,\n      className = _ref.className;\n\n  if (start >= textEnd || end <= textStart) {\n    // Ignore, the token is not in the text\n    return null;\n  } // Shrink to this text boundaries\n\n\n  start = Math.max(start, textStart);\n  end = Math.min(end, textEnd); // Now shift offsets to be relative to this text\n\n  start -= textStart;\n  end -= textStart;\n  return {\n    anchor: {\n      key: text.key,\n      offset: start\n    },\n    focus: {\n      key: text.key,\n      offset: end\n    },\n    mark: {\n      type: 'prism-token',\n      data: {\n        className: className\n      }\n    }\n  };\n}\n\nexports.default = PrismPlugin;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = require('react');\n\nvar React = _interopRequireWildcard(_react);\n\nrequire('slate');\n\nvar _immutable = require('immutable');\n\nvar _TOKEN_MARK = require('./TOKEN_MARK');\n\nvar _TOKEN_MARK2 = _interopRequireDefault(_TOKEN_MARK);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n/**\n * Default filter for code blocks\n */\n\n\nfunction defaultOnlyIn(node) {\n  return node.object === 'block' && node.type === 'code_block';\n}\n/**\n * Default getter for syntax\n */\n\n\nfunction defaultGetSyntax(node) {\n  return 'javascript';\n}\n/**\n * Default rendering for marks\n */\n\n\nfunction defaultRenderMark(props, editor, next) {\n  var mark = props.mark;\n\n  if (mark.type !== _TOKEN_MARK2.default) {\n    return next();\n  }\n\n  var className = mark.data.get('className');\n  return React.createElement('span', {\n    className: className\n  }, props.children);\n}\n/**\n * The plugin options\n */\n\n\nvar Options = function (_Record) {\n  _inherits(Options, _Record);\n\n  function Options() {\n    _classCallCheck(this, Options);\n\n    return _possibleConstructorReturn(this, (Options.__proto__ || Object.getPrototypeOf(Options)).apply(this, arguments));\n  }\n\n  return Options;\n}((0, _immutable.Record)({\n  onlyIn: defaultOnlyIn,\n  getSyntax: defaultGetSyntax,\n  renderMark: defaultRenderMark\n}));\n\nexports.default = Options;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _options = require('./options');\n\nvar _options2 = _interopRequireDefault(_options);\n\nvar _handlers = require('./handlers');\n\nvar _core = require('./core');\n\nvar _core2 = _interopRequireDefault(_core);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar KEY_ENTER = 'Enter';\nvar KEY_TAB = 'Tab';\nvar KEY_BACKSPACE = 'Backspace';\n/**\n * A Slate plugin to handle keyboard events in lists.\n */\n\nfunction EditList() {\n  var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  opts = new _options2.default(opts);\n  var corePlugin = (0, _core2.default)(opts);\n  return _extends({}, corePlugin, {\n    onKeyDown: onKeyDown.bind(null, opts)\n  });\n}\n/**\n * User is pressing a key in the editor\n */\n\n\nfunction onKeyDown(opts, event, change, next) {\n  var args = [event, change, next, opts];\n\n  switch (event.key) {\n    case KEY_ENTER:\n      return _handlers.onEnter.apply(undefined, args);\n\n    case KEY_TAB:\n      return _handlers.onTab.apply(undefined, args);\n\n    case KEY_BACKSPACE:\n      return _handlers.onBackspace.apply(undefined, args);\n\n    default:\n      return next();\n  }\n}\n\nexports.default = EditList;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.onBackspace = exports.onTab = exports.onEnter = undefined;\n\nvar _onEnter = require('./onEnter');\n\nvar _onEnter2 = _interopRequireDefault(_onEnter);\n\nvar _onTab = require('./onTab');\n\nvar _onTab2 = _interopRequireDefault(_onTab);\n\nvar _onBackspace = require('./onBackspace');\n\nvar _onBackspace2 = _interopRequireDefault(_onBackspace);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nexports.onEnter = _onEnter2.default;\nexports.onTab = _onTab2.default;\nexports.onBackspace = _onBackspace2.default;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slate = require('slate');\n\nvar _changes = require('../changes');\n\nvar _utils = require('../utils');\n\nfunction isEmptyListItem(editor, listItem) {\n  if (editor.isVoid(listItem) || listItem.text !== '') {\n    return false;\n  }\n\n  try {\n    var nodes = listItem.nodes.get(0).nodes;\n    if (nodes.size !== 1) return false;\n    var child = nodes.get(0);\n\n    if (!_slate.Text.isText(child)) {\n      return false;\n    }\n\n    return child.text === '';\n  } catch (e) {\n    return true;\n  }\n}\n/**\n * User pressed Enter in an editor\n *\n * Enter in a list item should split the list item\n * Enter in an empty list item should remove it\n * Shift+Enter in a list item should make a new line\n */\n\n\nfunction onEnter(event, change, next, opts) {\n  // Pressing Shift+Enter\n  // should split block normally\n  if (event.shiftKey) {\n    return next();\n  }\n\n  var value = change.value;\n  var currentItem = (0, _utils.getCurrentItem)(opts, value); // Not in a list\n\n  if (!currentItem) {\n    return next();\n  }\n\n  event.preventDefault(); // If expanded, delete first.\n\n  if (value.selection.isExpanded) {\n    change.delete();\n  }\n\n  if (isEmptyListItem(change, currentItem)) {\n    // Block is empty, we exit the list\n    if ((0, _utils.getItemDepth)(opts, value) > 1) {\n      return (0, _changes.decreaseItemDepth)(opts, change);\n    } // Exit list\n\n\n    return (0, _changes.unwrapList)(opts, change);\n  } // Split list item\n\n\n  return (0, _changes.splitListItem)(opts, change);\n}\n\nexports.default = onEnter;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slate = require('slate');\n\nvar _immutable = require('immutable');\n\nvar _utils = require('../utils');\n/**\n * Wrap the blocks in the current selection in a new list. Selected\n * lists are merged together.\n */\n\n\nfunction wrapInList(opts, change, type, data, itemType) {\n  var selectedBlocks = getHighestSelectedBlocks(change.value);\n  type = type || opts.types[0];\n  change.withoutNormalizing(function () {\n    // Wrap in container\n    change.wrapBlock({\n      type: type,\n      data: _slate.Data.create(data)\n    }); // Wrap in list items\n\n    selectedBlocks.forEach(function (node) {\n      if ((0, _utils.isList)(opts, node)) {\n        // Merge its items with the created list\n        node.nodes.forEach(function (_ref) {\n          var key = _ref.key;\n          return change.unwrapNodeByKey(key);\n        });\n      } else {\n        change.wrapBlockByKey(node.key, itemType || opts.typeItem);\n      }\n    });\n  });\n  return change.normalize();\n}\n/**\n * Returns the highest list of blocks that cover the current selection\n */\n\n\nfunction getHighestSelectedBlocks(value) {\n  var range = value.selection;\n  var document = value.document;\n  var startBlock = document.getClosestBlock(range.start.key);\n  var endBlock = document.getClosestBlock(range.end.key);\n\n  if (startBlock === endBlock) {\n    return (0, _immutable.List)([startBlock]);\n  }\n\n  var ancestor = document.getCommonAncestor(startBlock.key, endBlock.key);\n  var startPath = ancestor.getPath(startBlock.key);\n  var endPath = ancestor.getPath(endBlock.key);\n  return ancestor.nodes.slice(startPath[0], endPath[0] + 1);\n}\n\nexports.default = wrapInList;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nrequire('slate');\n\nvar _getCurrentItem = require('./getCurrentItem');\n\nvar _getCurrentItem2 = _interopRequireDefault(_getCurrentItem);\n\nvar _getListForItem = require('./getListForItem');\n\nvar _getListForItem2 = _interopRequireDefault(_getListForItem);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n/**\n * Return the parent list block, from current selection or from a node (paragraph in a list item).\n */\n\n\nfunction getCurrentList(opts, value, block) {\n  var item = (0, _getCurrentItem2.default)(opts, value, block);\n\n  if (!item) {\n    return null;\n  }\n\n  return (0, _getListForItem2.default)(opts, value, item);\n}\n\nexports.default = getCurrentList;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slate = require('slate');\n/**\n * Find all `list_item` descendants of a node and retrieve the deepest depth.\n */\n\n\nfunction getDeepestItemDepth(node, document) {\n  return node.filterDescendants(function (descendant) {\n    return descendant.type === 'list_item';\n  }).reduce(function (maxLevel, descendant) {\n    return Math.max(maxLevel, document.getDepth(descendant.key));\n  }, 0);\n}\n\nexports.default = getDeepestItemDepth;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nrequire('slate');\n\nvar _getCurrentItem = require('./getCurrentItem');\n\nvar _getCurrentItem2 = _interopRequireDefault(_getCurrentItem);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n/**\n * Get depth of current block in a document list\n */\n\n\nfunction getItemDepth(opts, value, block) {\n  var document = value.document,\n      startBlock = value.startBlock;\n  block = block || startBlock;\n  var currentItem = (0, _getCurrentItem2.default)(opts, value, block);\n\n  if (!currentItem) {\n    return 0;\n  }\n\n  var list = document.getParent(currentItem.key);\n  return 1 + getItemDepth(opts, value, list);\n}\n\nexports.default = getItemDepth;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nrequire('slate');\n\nvar _getCurrentItem = require('./getCurrentItem');\n\nvar _getCurrentItem2 = _interopRequireDefault(_getCurrentItem);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n/**\n * Return the previous item, from current selection or from a node.\n */\n\n\nfunction getPreviousItem(opts, value, block) {\n  var document = value.document,\n      startBlock = value.startBlock;\n  block = block || startBlock;\n  var currentItem = (0, _getCurrentItem2.default)(opts, value, block);\n\n  if (!currentItem) {\n    return null;\n  }\n\n  var previousSibling = document.getPreviousSibling(currentItem.key);\n\n  if (!previousSibling) {\n    return null;\n  } else if (previousSibling.type === opts.typeItem) {\n    return previousSibling;\n  }\n\n  return null;\n}\n\nexports.default = getPreviousItem;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nrequire('slate');\n/**\n * True if the node is a list item\n */\n\n\nfunction isItem(opts, node) {\n  return opts.typeItem.includes(node.type);\n}\n\nexports.default = isItem;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nrequire('slate');\n\nvar _getItemsAtRange = require('./getItemsAtRange');\n\nvar _getItemsAtRange2 = _interopRequireDefault(_getItemsAtRange);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n/**\n * True if selection is inside a list (and can be unwrapped)\n */\n\n\nfunction isSelectionInList(opts, value) {\n  return !(0, _getItemsAtRange2.default)(opts, value).isEmpty();\n}\n\nexports.default = isSelectionInList;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nrequire('slate');\n\nvar _utils = require('../utils');\n/**\n * Unwrap items at range from their list.\n */\n\n\nfunction unwrapList(opts, change) {\n  var items = (0, _utils.getItemsAtRange)(opts, change.value);\n\n  if (items.isEmpty()) {\n    return change;\n  } // Unwrap the items from their list\n\n\n  change.withoutNormalizing(function () {\n    items.forEach(function (item) {\n      return change.unwrapNodeByKey(item.key);\n    }); // Parent of the list of the items\n\n    var firstItem = items.first();\n    var parent = change.value.document.getParent(firstItem.key);\n    var index = parent.nodes.findIndex(function (node) {\n      return node.key === firstItem.key;\n    }); // Unwrap the items' children\n\n    items.forEach(function (item) {\n      item.nodes.forEach(function (node) {\n        change.moveNodeByKey(node.key, parent.key, index);\n        index += 1;\n      });\n    }); // Finally, remove the now empty items\n\n    items.forEach(function (item) {\n      return change.removeNodeByKey(item.key);\n    });\n  });\n  return change;\n}\n\nexports.default = unwrapList;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nrequire('slate');\n\nvar _utils = require('../utils');\n/**\n * Split a list item at the start of the current range.\n */\n\n\nfunction splitListItem(opts, change) {\n  var value = change.value;\n  var currentItem = (0, _utils.getCurrentItem)(opts, value);\n\n  if (!currentItem) {\n    return change;\n  }\n\n  var start = value.selection.start;\n  var splitOffset = start.offset;\n  return change.splitDescendantsByKey(currentItem.key, start.key, splitOffset);\n}\n\nexports.default = splitListItem;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slate = require('slate');\n\nvar _utils = require('../utils');\n/**\n * Increase the depth of the current item by putting it in a sub-list\n * of previous item.\n * For first items in a list, does nothing.\n */\n\n\nfunction increaseItemDepth(opts, change) {\n  var previousItem = (0, _utils.getPreviousItem)(opts, change.value);\n  var currentItem = (0, _utils.getCurrentItem)(opts, change.value);\n  var maxDepth = opts.maxDepth * 2;\n\n  if (!previousItem) {\n    return change;\n  }\n\n  if (!currentItem) {\n    return change;\n  } // Get the depth of the focused list item.\n\n\n  var currentItemDepth = change.value.document.getDepth(currentItem.key); // Make sure the level of the focused item is below the defined maximum.\n\n  if (currentItemDepth >= maxDepth) {\n    return change;\n  } // Get the depth of the deepest `li` descendant of the focused item.\n\n\n  var deepestItemDepth = (0, _utils.getDeepestItemDepth)(currentItem, change.value.document); // This prevents from indenting parents of too deeply nested list items.\n\n  if (deepestItemDepth >= maxDepth) {\n    return change;\n  } // Move the item in the sublist of previous item\n\n\n  return moveAsSubItem(opts, change, currentItem, previousItem.key);\n}\n/**\n * Move the given item to the sublist at the end of destination item,\n * creating a sublist if needed.\n */\n\n\nfunction moveAsSubItem(opts, change, // The list item to add\nitem, // The key of the destination node\ndestKey) {\n  var destination = change.value.document.getDescendant(destKey);\n  var lastIndex = destination.nodes.size;\n  var lastChild = destination.nodes.last(); // The potential existing last child list\n\n  var existingList = (0, _utils.isList)(opts, lastChild) ? lastChild : null;\n\n  if (existingList) {\n    return change.moveNodeByKey(item.key, existingList.key, existingList.nodes.size // as last item\n    );\n  }\n\n  var currentList = (0, _utils.getListForItem)(opts, change.value, destination);\n\n  if (!currentList) {\n    throw new Error('Destination is not in a list');\n  } // Creating empty list creates also empty list item - placeholder item is meant to be easily deleted in the end\n\n\n  var tmpBlock = _slate.Block.create({\n    object: 'block',\n    type: opts.typeItem\n  }); // @TODO Why does empty list contain empty item?\n\n\n  var newSublist = _slate.Block.create({\n    object: 'block',\n    type: currentList.type,\n    data: currentList.data,\n    nodes: [tmpBlock]\n  });\n\n  change.withoutNormalizing(function () {\n    change.insertNodeByKey(destKey, lastIndex, newSublist);\n  });\n  change.moveNodeByKey(item.key, newSublist.key, 0);\n  change.removeNodeByKey(tmpBlock.key);\n  return change;\n}\n\nexports.default = increaseItemDepth;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slate = require('slate');\n\nvar _utils = require('../utils');\n/**\n * Decreases the depth of the current item. The following items will\n * be moved as sublist of the decreased item.\n *\n * No-op for root items.\n */\n\n\nfunction decreaseItemDepth(opts, change) {\n  var value = change.value;\n  var document = value.document; // Cannot decrease item depth of root items\n\n  var depth = (0, _utils.getItemDepth)(opts, value);\n\n  if (depth == 1) {\n    return change;\n  }\n\n  var currentItem = (0, _utils.getCurrentItem)(opts, value);\n\n  if (!currentItem) {\n    return change;\n  }\n\n  var currentList = document.getParent(currentItem.key);\n  var parentItem = document.getParent(currentList.key);\n  var parentList = document.getParent(parentItem.key); // The items following the item will be moved to a sublist of currentItem\n\n  var followingItems = currentList.nodes.skipUntil(function (i) {\n    return i === currentItem;\n  }).rest(); // True if the currentItem and the followingItems make the whole\n  // currentList, and hence the currentList will be emptied\n\n  var willEmptyCurrentList = currentList.nodes.size === followingItems.size + 1;\n\n  if (!followingItems.isEmpty()) {\n    change.withoutNormalizing(function () {\n      // Add them as sublist of currentItem\n      var sublist = _slate.Block.create({\n        object: 'block',\n        type: currentList.type,\n        data: currentList.data\n      }); // Add the sublist\n\n\n      change.insertNodeByKey(currentItem.key, currentItem.nodes.size, sublist);\n      change.moveNodeByKey(currentItem.key, parentList.key, parentList.nodes.indexOf(parentItem) + 1); // Move the followingItems to the sublist\n\n      followingItems.forEach(function (item, index) {\n        return change.moveNodeByKey(item.key, sublist.key, sublist.nodes.size + index);\n      });\n    });\n  } else {\n    change.moveNodeByKey(currentItem.key, parentList.key, parentList.nodes.indexOf(parentItem) + 1);\n  } // Remove the currentList completely if needed\n\n\n  if (willEmptyCurrentList) {\n    change.removeNodeByKey(currentList.key);\n  }\n\n  return change;\n}\n\nexports.default = decreaseItemDepth;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slate = require('slate');\n\nvar _options = require('../options');\n\nvar _options2 = _interopRequireDefault(_options);\n\nvar _ = require('.');\n\nvar _utils = require('../utils');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction isListOrItem(options, node) {\n  return (0, _utils.isList)(options, node) || (0, _utils.isItem)(options, node);\n}\n\nfunction mapListDescendants(document) {\n  return function (node) {\n    return {\n      depth: document.getDepth(node.key),\n      node: node\n    };\n  };\n}\n\nfunction sortListDescendants(options, a, b) {\n  if (a.depth !== b.depth) {\n    return b.depth - a.depth;\n  }\n\n  if (a.node.type === b.node.type) {\n    return 0;\n  }\n\n  if (a.node.type === options.typeItem) {\n    return -1;\n  }\n\n  return 1;\n}\n\nfunction unwrapMappedNodes(change, mappedNode) {\n  return change.withoutNormalizing(function () {\n    change.unwrapBlockByKey(mappedNode.node.key, mappedNode.node.type);\n  });\n}\n\nfunction findAncestorList(change, options, commonAncestor) {\n  var _change$value = change.value,\n      document = _change$value.document,\n      selection = _change$value.selection; // This flag should be true, when elements are in selection\n\n  var flag = false;\n  return commonAncestor.filterDescendants(function (node) {\n    return isListOrItem(options, node);\n  }).filter(function (node) {\n    var hasStart = node.hasNode(selection.start.key);\n    var hasEnd = node.hasNode(selection.end.key);\n    var isListItem = (0, _utils.isItem)(options, node);\n    if (hasStart && isListItem) flag = true;\n    if (hasEnd && isListItem) flag = false;\n    return flag || hasStart || hasEnd;\n  }).map(mapListDescendants(document)).sort(function () {\n    for (var _len = arguments.length, params = Array(_len), _key = 0; _key < _len; _key++) {\n      params[_key] = arguments[_key];\n    }\n\n    return sortListDescendants.apply(undefined, [options].concat(params));\n  });\n}\n\nfunction isSameLevel(sortedMappedNodes) {\n  if (!sortedMappedNodes.size) {\n    return true;\n  }\n\n  var max = sortedMappedNodes.first().depth;\n  var min = sortedMappedNodes.last().depth;\n  return max === min;\n}\n/**\n * Toggle list on the selected range.\n */\n\n\nfunction toggleList(options, change) {\n  var _change$value2 = change.value,\n      document = _change$value2.document,\n      selection = _change$value2.selection;\n  var startBlock = document.getClosestBlock(selection.start.key);\n  var endBlock = document.getClosestBlock(selection.end.key); // -------- SINGLE BLOCK ---------------------------------------------------\n  // The selection is in a single block.\n  // Let's unwrap just the block, not the whole list.\n\n  if (startBlock === endBlock) {\n    return (0, _utils.isSelectionInList)(options, change.value) ? (0, _.unwrapList)(options, change) : (0, _.wrapInList)(options, change);\n  } // -------- NOT A SINGLE BLOCK -------------------------------------------\n\n\n  var commonAncestor = document.getCommonAncestor(startBlock.key, endBlock.key);\n  var sortedMappedNodes = findAncestorList(change, options, commonAncestor); // There are no lists or items in selection => wrap them\n\n  if (!sortedMappedNodes.size) {\n    return (0, _.wrapInList)(options, change);\n  } // All items are the same level => unwrap them\n\n\n  if (isSameLevel(sortedMappedNodes)) {\n    return (0, _.unwrapList)(options, change);\n  } // Common Ancestor is not a list or item\n\n\n  if (!isListOrItem(options, commonAncestor)) {\n    var _newChange = sortedMappedNodes // @TODO last item is filtered, so it wouldn't break down flat whole list -> unwrapNodeByKey should be solution (problem with key)\n    .filter(function (item) {\n      return sortedMappedNodes.last().depth !== item.depth;\n    }).reduce(unwrapMappedNodes, change);\n\n    return _newChange;\n  } // Unwrap all nested nodes\n\n\n  var newChange = sortedMappedNodes.reduce(unwrapMappedNodes, change); // Unwrap common ancestor\n\n  return (0, _.unwrapList)(options, newChange);\n}\n\nexports.default = toggleList;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nrequire('slate');\n\nvar _changes = require('../changes');\n\nvar _utils = require('../utils');\n/**\n * User pressed Tab in an editor.\n * Tab       -> Increase item depth if inside a list item\n * Shift+Tab -> Decrease item depth if inside a list item\n */\n\n\nfunction onTab(event, change, next, opts) {\n  var value = change.value;\n  var isCollapsed = value.selection.isCollapsed;\n\n  if (!isCollapsed || !(0, _utils.getCurrentItem)(opts, value)) {\n    return next();\n  }\n\n  event.preventDefault(); // Shift+tab reduce depth\n\n  if (event.shiftKey) {\n    return (0, _changes.decreaseItemDepth)(opts, change);\n  } // Tab increases depth\n\n\n  return (0, _changes.increaseItemDepth)(opts, change);\n}\n\nexports.default = onTab;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nrequire('slate');\n\nvar _changes = require('../changes');\n\nvar _utils = require('../utils');\n/**\n * User pressed Delete in an editor\n */\n\n\nfunction onBackspace(event, change, next, opts) {\n  var value = change.value;\n  var selection = value.selection;\n  var start = selection.start,\n      isCollapsed = selection.isCollapsed,\n      isExpanded = selection.isExpanded; // Only unwrap...\n  // ... with a collapsed selection\n\n  if (isExpanded) {\n    return next();\n  } // ... when at the beginning of nodes\n\n\n  if (start.offset > 0) {\n    return next();\n  } // ... in a list\n\n\n  var currentItem = (0, _utils.getCurrentItem)(opts, value);\n\n  if (!currentItem) {\n    return next();\n  } // ... more precisely at the beginning of the current item\n\n\n  if (!isCollapsed || !start.isAtStartOfNode(currentItem)) {\n    return next();\n  }\n\n  event.preventDefault();\n  return (0, _changes.unwrapList)(opts, change);\n}\n\nexports.default = onBackspace;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _options = require('./options');\n\nvar _options2 = _interopRequireDefault(_options);\n\nvar _validation = require('./validation');\n\nvar _changes = require('./changes');\n\nvar _utils = require('./utils');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n/**\n * Returns the core of the plugin, limited to the validation and normalization\n * part of `slate-edit-list`, and utils.\n *\n * Import this directly: `import EditListCore from 'slate-edit-table/lib/core'`\n * if you don't care about behavior/rendering and you\n * are only manipulating `Slate.Values` without rendering them.\n * That way you do not depend on importing `slate-react`.\n */\n\n\nfunction core() {\n  var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  opts = new _options2.default(opts);\n  return {\n    schema: (0, _validation.schema)(opts),\n    normalizeNode: (0, _validation.normalizeNode)(opts),\n    utils: {\n      getCurrentItem: _utils.getCurrentItem.bind(null, opts),\n      getCurrentList: _utils.getCurrentList.bind(null, opts),\n      getItemDepth: _utils.getItemDepth.bind(null, opts),\n      getItemsAtRange: _utils.getItemsAtRange.bind(null, opts),\n      getPreviousItem: _utils.getPreviousItem.bind(null, opts),\n      isList: _utils.isList.bind(null, opts),\n      isSelectionInList: _utils.isSelectionInList.bind(null, opts)\n    },\n    changes: {\n      decreaseItemDepth: bindAndScopeChange(opts, _changes.decreaseItemDepth),\n      increaseItemDepth: bindAndScopeChange(opts, _changes.increaseItemDepth),\n      splitListItem: bindAndScopeChange(opts, _changes.splitListItem),\n      unwrapList: bindAndScopeChange(opts, _changes.unwrapList),\n      wrapInList: _changes.wrapInList.bind(null, opts),\n      toggleList: _changes.toggleList.bind(null, opts)\n    }\n  };\n}\n/**\n * Bind a change to given options, and scope it to act only inside a list\n */\n\n\nfunction bindAndScopeChange(opts, fn) {\n  return function (change) {\n    for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    var value = change.value;\n\n    if (!(0, _utils.isSelectionInList)(opts, value)) {\n      return change;\n    } // $FlowFixMe\n\n\n    return fn.apply(undefined, _toConsumableArray([opts, change].concat(args)));\n  };\n}\n\nexports.default = core;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.normalizeNode = exports.schema = undefined;\n\nvar _schema = require('./schema');\n\nvar _schema2 = _interopRequireDefault(_schema);\n\nvar _normalizeNode = require('./normalizeNode');\n\nvar _normalizeNode2 = _interopRequireDefault(_normalizeNode);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nexports.schema = _schema2.default;\nexports.normalizeNode = _normalizeNode2.default;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nrequire('slate');\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n/**\n * Create a schema definition with rules to normalize lists\n */\n\n\nfunction schema(opts) {\n  var constructedSchema = {\n    blocks: _defineProperty({}, opts.typeItem, {\n      parent: opts.types.map(function (t) {\n        return {\n          type: t\n        };\n      }),\n      nodes: [{\n        match: {\n          object: 'block'\n        }\n      }],\n      normalize: normalize({\n        parent_type_invalid: function parent_type_invalid(change, context) {\n          return change.unwrapBlockByKey(context.node.key, {\n            normalize: false\n          });\n        },\n        child_object_invalid: function child_object_invalid(change, context) {\n          return wrapChildrenInDefaultBlock(opts, change, context.node);\n        }\n      })\n    })\n  }; // validate all list types, ensure they only have list item children\n\n  opts.types.forEach(function (type) {\n    constructedSchema.blocks[type] = {\n      nodes: [{\n        match: {\n          type: opts.typeItem\n        }\n      }],\n      normalize: normalize({\n        child_type_invalid: function child_type_invalid(change, context) {\n          return change.wrapBlockByKey(context.child.key, opts.typeItem, {\n            normalize: false\n          });\n        }\n      })\n    };\n  });\n  return constructedSchema;\n}\n/*\n * Allows to define a normalize function through a keyed collection of functions\n */\n\n\nfunction normalize(reasons) {\n  return function (change, error) {\n    var reasonFn = reasons[error.code];\n\n    if (reasonFn) {\n      reasonFn(change, error);\n    }\n  };\n}\n/**\n * Wraps all child of a node in the default block type.\n * Returns a change, for chaining purposes\n */\n\n\nfunction wrapChildrenInDefaultBlock(opts, change, node) {\n  change.wrapBlockByKey(node.nodes.first().key, opts.typeDefault, {\n    normalize: false\n  });\n  var wrapper = change.value.document.getDescendant(node.key).nodes.first(); // Add in the remaining items\n\n  node.nodes.rest().forEach(function (child, index) {\n    return change.moveNodeByKey(child.key, wrapper.key, index + 1, {\n      normalize: false\n    });\n  });\n  return change;\n}\n\nexports.default = schema;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\nrequire('slate');\n\nvar _utils = require('../utils');\n/**\n * Create a schema definition with rules to normalize lists\n */\n\n\nfunction normalizeNode(opts) {\n  return function (node, editor, next) {\n    return joinAdjacentLists(opts, node, next);\n  };\n}\n/**\n * A rule that joins adjacent lists of the same type\n */\n\n\nfunction joinAdjacentLists(opts, node, next) {\n  if (node.object !== 'document' && node.object !== 'block') {\n    return next();\n  }\n\n  var invalids = node.nodes.map(function (child, i) {\n    if (!(0, _utils.isList)(opts, child)) return null;\n    var nextNode = node.nodes.get(i + 1);\n\n    if (!nextNode || !(0, _utils.isList)(opts, nextNode) || !opts.canMerge(child, nextNode)) {\n      return null;\n    }\n\n    return [child, nextNode];\n  }).filter(Boolean);\n\n  if (invalids.isEmpty()) {\n    return next();\n  }\n  /**\n   * Join the list pairs\n   */\n  // We join in reverse order, so that multiple lists folds onto the first one\n\n\n  return function (change) {\n    change.withoutNormalizing(function () {\n      invalids.reverse().forEach(function (pair) {\n        var _pair = _slicedToArray(pair, 2),\n            first = _pair[0],\n            second = _pair[1];\n\n        var updatedSecond = change.value.document.getDescendant(second.key);\n        updatedSecond.nodes.forEach(function (secondNode, index) {\n          change.moveNodeByKey(secondNode.key, first.key, first.nodes.size + index);\n        });\n        change.removeNodeByKey(second.key);\n      });\n    });\n  };\n}\n\nexports.default = normalizeNode;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = AlignCenterIcon;\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Icon = require(\"./Icon\");\n\nvar _Icon2 = _interopRequireDefault(_Icon);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction AlignCenterIcon(props) {\n  return _react2.default.createElement(_Icon2.default, props, _react2.default.createElement(\"path\", {\n    d: \"M5,6 L19,6 C19.5522847,6 20,6.44771525 20,7 C20,7.55228475 19.5522847,8 19,8 L5,8 C4.44771525,8 4,7.55228475 4,7 C4,6.44771525 4.44771525,6 5,6 Z M8,11 L16,11 C16.5522847,11 17,11.4477153 17,12 C17,12.5522847 16.5522847,13 16,13 L8,13 C7.44771525,13 7,12.5522847 7,12 C7,11.4477153 7.44771525,11 8,11 Z M5,16 L19,16 C19.5522847,16 20,16.4477153 20,17 C20,17.5522847 19.5522847,18 19,18 L5,18 C4.44771525,18 4,17.5522847 4,17 C4,16.4477153 4.44771525,16 5,16 Z\"\n  }));\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = AlignLeftIcon;\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Icon = require(\"./Icon\");\n\nvar _Icon2 = _interopRequireDefault(_Icon);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction AlignLeftIcon(props) {\n  return _react2.default.createElement(_Icon2.default, props, _react2.default.createElement(\"path\", {\n    d: \"M5,6 L19,6 C19.5522847,6 20,6.44771525 20,7 C20,7.55228475 19.5522847,8 19,8 L5,8 C4.44771525,8 4,7.55228475 4,7 C4,6.44771525 4.44771525,6 5,6 Z M5,11 L14,11 C14.5522847,11 15,11.4477153 15,12 C15,12.5522847 14.5522847,13 14,13 L5,13 C4.44771525,13 4,12.5522847 4,12 C4,11.4477153 4.44771525,11 5,11 Z M5,16 L19,16 C19.5522847,16 20,16.4477153 20,17 C20,17.5522847 19.5522847,18 19,18 L5,18 C4.44771525,18 4,17.5522847 4,17 C4,16.4477153 4.44771525,16 5,16 Z\"\n  }));\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = AlignRightIcon;\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Icon = require(\"./Icon\");\n\nvar _Icon2 = _interopRequireDefault(_Icon);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction AlignRightIcon(props) {\n  return _react2.default.createElement(_Icon2.default, props, _react2.default.createElement(\"path\", {\n    d: \"M5,6 L19,6 C19.5522847,6 20,6.44771525 20,7 C20,7.55228475 19.5522847,8 19,8 L5,8 C4.44771525,8 4,7.55228475 4,7 C4,6.44771525 4.44771525,6 5,6 Z M10,11 L19,11 C19.5522847,11 20,11.4477153 20,12 C20,12.5522847 19.5522847,13 19,13 L10,13 C9.44771525,13 9,12.5522847 9,12 C9,11.4477153 9.44771525,11 10,11 Z M5,16 L19,16 C19.5522847,16 20,16.4477153 20,17 C20,17.5522847 19.5522847,18 19,18 L5,18 C4.44771525,18 4,17.5522847 4,17 C4,16.4477153 4.44771525,16 5,16 Z\"\n  }));\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = ArchiveIcon;\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Icon = require(\"./Icon\");\n\nvar _Icon2 = _interopRequireDefault(_Icon);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction ArchiveIcon(props) {\n  return _react2.default.createElement(_Icon2.default, props, _react2.default.createElement(\"path\", {\n    d: \"M6,6 L18,6 C18.5522847,6 19,6.44771525 19,7 C19,7.55228475 18.5522847,8 18,8 L6,8 C5.44771525,8 5,7.55228475 5,7 C5,6.44771525 5.44771525,6 6,6 Z M6,9 L18,9 L18,17 C18,18.1045695 17.1045695,19 16,19 L8,19 C6.8954305,19 6,18.1045695 6,17 L6,9 Z M11,11 C10.4477153,11 10,11.4477153 10,12 C10,12.5522847 10.4477153,13 11,13 L13,13 C13.5522847,13 14,12.5522847 14,12 C14,11.4477153 13.5522847,11 13,11 L11,11 Z\"\n  }));\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = BackIcon;\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Icon = require(\"./Icon\");\n\nvar _Icon2 = _interopRequireDefault(_Icon);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction BackIcon(props) {\n  return _react2.default.createElement(_Icon2.default, props, _react2.default.createElement(\"path\", {\n    d: \"M14.7071068,7.70710678 L10.4142136,12 L14.7071068,16.2928932 C15.0976311,16.6834175 15.0976311,17.3165825 14.7071068,17.7071068 C14.3165825,18.0976311 13.6834175,18.0976311 13.2928932,17.7071068 L8.29289322,12.7071068 C7.90236893,12.3165825 7.90236893,11.6834175 8.29289322,11.2928932 L13.2928932,6.29289322 C13.6834175,5.90236893 14.3165825,5.90236893 14.7071068,6.29289322 C15.0976311,6.68341751 15.0976311,7.31658249 14.7071068,7.70710678 Z\"\n  }));\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = BillingIcon;\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Icon = require(\"./Icon\");\n\nvar _Icon2 = _interopRequireDefault(_Icon);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction BillingIcon(props) {\n  return _react2.default.createElement(_Icon2.default, props, _react2.default.createElement(\"path\", {\n    d: \"M20,9 L4,9 L4,8 C4,6.8954305 4.8954305,6 6,6 L18,6 C19.1045695,6 20,6.8954305 20,8 L20,9 Z M20,11 L20,16 C20,17.1045695 19.1045695,18 18,18 L6,18 C4.8954305,18 4,17.1045695 4,16 L4,11 L20,11 Z M7,13 C6.44771525,13 6,13.4477153 6,14 C6,14.5522847 6.44771525,15 7,15 L13,15 C13.5522847,15 14,14.5522847 14,14 C14,13.4477153 13.5522847,13 13,13 L7,13 Z\"\n  }));\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = BlockQuoteIcon;\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Icon = require(\"./Icon\");\n\nvar _Icon2 = _interopRequireDefault(_Icon);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction BlockQuoteIcon(props) {\n  return _react2.default.createElement(_Icon2.default, props, _react2.default.createElement(\"path\", {\n    d: \"M7,11 L9.00208688,11 C10.1055038,11 11,11.8982606 11,12.9979131 L11,15.0020869 C11,16.1055038 10.1017394,17 9.00208688,17 L6.99791312,17 C5.89449617,17 5,16.1017394 5,15.0020869 L5,12.9989566 L5,11 C5,8.790861 6.790861,7 9,7 L10,7 C10.5522847,7 11,7.44771525 11,8 C11,8.55228475 10.5522847,9 10,9 L9,9 C7.8954305,9 7,9.8954305 7,11 Z M15,11 L17.0020869,11 C18.1055038,11 19,11.8982606 19,12.9979131 L19,15.0020869 C19,16.1055038 18.1017394,17 17.0020869,17 L14.9979131,17 C13.8944962,17 13,16.1017394 13,15.0020869 L13,12.9989566 L13,11 C13,8.790861 14.790861,7 17,7 L18,7 C18.5522847,7 19,7.44771525 19,8 C19,8.55228475 18.5522847,9 18,9 L17,9 C15.8954305,9 15,9.8954305 15,11 Z\"\n  }));\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = BoldIcon;\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Icon = require(\"./Icon\");\n\nvar _Icon2 = _interopRequireDefault(_Icon);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction BoldIcon(props) {\n  return _react2.default.createElement(_Icon2.default, props, _react2.default.createElement(\"path\", {\n    d: \"M18,15 C18,17.209139 16.209139,19 14,19 L8,19 C7.44771525,19 7,18.5522847 7,18 L7,6 C7,5.44771525 7.44771525,5 8,5 L13,5 C15.209139,5 17,6.790861 17,9 C17,9.9796381 16.6478342,10.8770235 16.0631951,11.5724638 C17.2238614,12.2726251 18,13.5456741 18,15 Z M9,17 L14,17 C15.1045695,17 16,16.1045695 16,15 C16,13.8954305 15.1045695,13 14,13 L9,13 L9,17 Z M9,11 L13,11 C14.1045695,11 15,10.1045695 15,9 C15,7.8954305 14.1045695,7 13,7 L9,7 L9,11 Z\"\n  }));\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = BulletedListIcon;\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Icon = require(\"./Icon\");\n\nvar _Icon2 = _interopRequireDefault(_Icon);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction BulletedListIcon(props) {\n  return _react2.default.createElement(_Icon2.default, props, _react2.default.createElement(\"path\", {\n    d: \"M10,6 L19,6 C19.5522847,6 20,6.44771525 20,7 L20,7 C20,7.55228475 19.5522847,8 19,8 L10,8 C9.44771525,8 9,7.55228475 9,7 L9,7 L9,7 C9,6.44771525 9.44771525,6 10,6 Z M10,16 L19,16 C19.5522847,16 20,16.4477153 20,17 C20,17.5522847 19.5522847,18 19,18 L10,18 C9.44771525,18 9,17.5522847 9,17 C9,16.4477153 9.44771525,16 10,16 Z M10,11 L19,11 C19.5522847,11 20,11.4477153 20,12 C20,12.5522847 19.5522847,13 19,13 L10,13 C9.44771525,13 9,12.5522847 9,12 C9,11.4477153 9.44771525,11 10,11 Z M5,10.5 L5,10.5 C5.82842712,10.5 6.5,11.1715729 6.5,12 C6.5,12.8284271 5.82842712,13.5 5,13.5 C4.17157288,13.5 3.5,12.8284271 3.5,12 C3.5,11.1715729 4.17157288,10.5 5,10.5 L5,10.5 Z M5,5.5 L5,5.5 C5.82842712,5.5 6.5,6.17157288 6.5,7 L6.5,7 C6.5,7.82842712 5.82842712,8.5 5,8.5 C4.17157288,8.5 3.5,7.82842712 3.5,7 L3.5,7 L3.5,7 C3.5,6.17157288 4.17157288,5.5 5,5.5 L5,5.5 Z M5,15.5 L5,15.5 C5.82842712,15.5 6.5,16.1715729 6.5,17 C6.5,17.8284271 5.82842712,18.5 5,18.5 C4.17157288,18.5 3.5,17.8284271 3.5,17 C3.5,16.1715729 4.17157288,15.5 5,15.5 L5,15.5 Z\"\n  }));\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = CheckboxIcon;\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Icon = require(\"./Icon\");\n\nvar _Icon2 = _interopRequireDefault(_Icon);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nfunction CheckboxIcon(_ref) {\n  var checked = _ref.checked,\n      rest = _objectWithoutProperties(_ref, [\"checked\"]);\n\n  return _react2.default.createElement(_Icon2.default, rest, checked ? _react2.default.createElement(\"path\", {\n    d: \"M8,5 L16,5 L16,5 C17.6568542,5 19,6.34314575 19,8 L19,16 C19,17.6568542 17.6568542,19 16,19 L8,19 L8,19 C6.34314575,19 5,17.6568542 5,16 L5,8 L5,8 C5,6.34314575 6.34314575,5 8,5 L8,5 Z M10.958729,12.8883948 L9.26824635,10.8598156 C8.91468227,10.4355387 8.28411757,10.3782146 7.85984067,10.7317787 C7.43556378,11.0853428 7.37823971,11.7159075 7.73180379,12.1401844 L10.2318038,15.1401844 C10.6450125,15.6360348 11.4127535,15.616362 11.8000251,15.1 L16.3000251,9.1 C16.6313959,8.6581722 16.5418529,8.03137085 16.1000251,7.7 C15.6581973,7.36862915 15.0313959,7.4581722 14.7000251,7.9 L10.958729,12.8883948 Z\"\n  }) : _react2.default.createElement(\"path\", {\n    d: \"M8,5 L16,5 L16,5 C17.6568542,5 19,6.34314575 19,8 L19,16 C19,17.6568542 17.6568542,19 16,19 L8,19 L8,19 C6.34314575,19 5,17.6568542 5,16 L5,8 L5,8 C5,6.34314575 6.34314575,5 8,5 L8,5 Z M8,7 C7.44771525,7 7,7.44771525 7,8 L7,16 C7,16.5522847 7.44771525,17 8,17 L16,17 C16.5522847,17 17,16.5522847 17,16 L17,8 C17,7.44771525 16.5522847,7 16,7 L8,7 Z\"\n  }));\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = CheckmarkIcon;\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Icon = require(\"./Icon\");\n\nvar _Icon2 = _interopRequireDefault(_Icon);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction CheckmarkIcon(props) {\n  return _react2.default.createElement(_Icon2.default, props, _react2.default.createElement(\"path\", {\n    d: \"M10.3801949,14.0826173 L7.75057979,11.0397723 C7.20059635,10.4033619 6.21972707,10.3173765 5.55974694,10.8477185 C4.89976681,11.3780605 4.81059688,12.3239001 5.36058032,12.9603105 L9.24943294,17.4602754 C9.89219597,18.2040451 11.0864488,18.1745362 11.6888655,17.3999992 L18.6888002,8.40006953 C19.2042612,7.73733301 19.0649733,6.79713833 18.377692,6.30008593 C17.6904108,5.80303354 16.7153955,5.93734707 16.1999346,6.60008359 L10.3801949,14.0826173 Z\"\n  }));\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = CloseIcon;\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Icon = require(\"./Icon\");\n\nvar _Icon2 = _interopRequireDefault(_Icon);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction CloseIcon(props) {\n  return _react2.default.createElement(_Icon2.default, props, _react2.default.createElement(\"path\", {\n    d: \"M12,10.5857864 L8.70710678,7.29289322 C8.31658249,6.90236893 7.68341751,6.90236893 7.29289322,7.29289322 C6.90236893,7.68341751 6.90236893,8.31658249 7.29289322,8.70710678 L10.5857864,12 L7.29289322,15.2928932 C6.90236893,15.6834175 6.90236893,16.3165825 7.29289322,16.7071068 C7.68341751,17.0976311 8.31658249,17.0976311 8.70710678,16.7071068 L12,13.4142136 L15.2928932,16.7071068 C15.6834175,17.0976311 16.3165825,17.0976311 16.7071068,16.7071068 C17.0976311,16.3165825 17.0976311,15.6834175 16.7071068,15.2928932 L13.4142136,12 L16.7071068,8.70710678 C17.0976311,8.31658249 17.0976311,7.68341751 16.7071068,7.29289322 C16.3165825,6.90236893 15.6834175,6.90236893 15.2928932,7.29289322 L12,10.5857864 Z\"\n  }));\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = CodeIcon;\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Icon = require(\"./Icon\");\n\nvar _Icon2 = _interopRequireDefault(_Icon);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction CodeIcon(props) {\n  return _react2.default.createElement(_Icon2.default, props, _react2.default.createElement(\"path\", {\n    d: \"M11.9805807,17.1961161 C11.8722687,17.7376759 11.3454436,18.0888926 10.8038839,17.9805807 C10.2623241,17.8722687 9.91110737,17.3454436 10.0194193,16.8038839 L12.0194193,6.80388386 C12.1277313,6.26232411 12.6545564,5.91110737 13.1961161,6.01941932 C13.7376759,6.12773127 14.0888926,6.65455638 13.9805807,7.19611614 L11.9805807,17.1961161 Z M6.41421356,12 L8.70710678,14.2928932 C9.09763107,14.6834175 9.09763107,15.3165825 8.70710678,15.7071068 C8.31658249,16.0976311 7.68341751,16.0976311 7.29289322,15.7071068 L4.29289322,12.7071068 C3.90236893,12.3165825 3.90236893,11.6834175 4.29289322,11.2928932 L7.29289322,8.29289322 C7.68341751,7.90236893 8.31658249,7.90236893 8.70710678,8.29289322 C9.09763107,8.68341751 9.09763107,9.31658249 8.70710678,9.70710678 L6.41421356,12 Z M15.2928932,14.2928932 L17.5857864,12 L15.2928932,9.70710678 C14.9023689,9.31658249 14.9023689,8.68341751 15.2928932,8.29289322 C15.6834175,7.90236893 16.3165825,7.90236893 16.7071068,8.29289322 L19.7071068,11.2928932 C20.0976311,11.6834175 20.0976311,12.3165825 19.7071068,12.7071068 L16.7071068,15.7071068 C16.3165825,16.0976311 15.6834175,16.0976311 15.2928932,15.7071068 C14.9023689,15.3165825 14.9023689,14.6834175 15.2928932,14.2928932 Z\"\n  }));\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = CollapsedIcon;\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Icon = require(\"./Icon\");\n\nvar _Icon2 = _interopRequireDefault(_Icon);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction CollapsedIcon(props) {\n  return _react2.default.createElement(_Icon2.default, props, _react2.default.createElement(\"path\", {\n    d: \"M8.23823905,10.6097108 L11.207376,14.4695888 L11.207376,14.4695888 C11.54411,14.907343 12.1719566,14.989236 12.6097108,14.652502 C12.6783439,14.5997073 12.7398293,14.538222 12.792624,14.4695888 L15.761761,10.6097108 L15.761761,10.6097108 C16.0984949,10.1719566 16.0166019,9.54410997 15.5788477,9.20737601 C15.4040391,9.07290785 15.1896811,9 14.969137,9 L9.03086304,9 L9.03086304,9 C8.47857829,9 8.03086304,9.44771525 8.03086304,10 C8.03086304,10.2205442 8.10377089,10.4349022 8.23823905,10.6097108 Z\"\n  }));\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = CollectionIcon;\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Icon = require(\"./Icon\");\n\nvar _Icon2 = _interopRequireDefault(_Icon);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nfunction CollectionIcon(_ref) {\n  var expanded = _ref.expanded,\n      rest = _objectWithoutProperties(_ref, [\"expanded\"]);\n\n  return _react2.default.createElement(_Icon2.default, rest, expanded ? _react2.default.createElement(\"path\", {\n    d: \"M16.701875,4.16415178 L17,4.14285714 C18.1045695,4.06395932 19,5.02334914 19,6.28571429 L19,17.7142857 C19,18.9766509 18.1045695,19.9360407 17,19.8571429 L16.701875,19.8358482 C16.8928984,19.371917 17,18.8348314 17,18.25 L17,5.75 C17,5.16516859 16.8928984,4.62808299 16.701875,4.16415178 Z M14,3.36363636 C15.1045695,3.16280555 16,4.15126779 16,5.57142857 L16,18.4285714 C16,19.8487322 15.1045695,20.8371945 14,20.6363636 L7,19.3636364 C5.8954305,19.1628055 5,18.1045695 5,17 L5,7 C5,5.8954305 5.8954305,4.83719445 7,4.63636364 L14,3.36363636 Z M7.5,6.67532468 C7.22385763,6.71118732 7,6.97574633 7,7.26623377 L7,16.7337662 C7,17.0242537 7.22385763,17.2888127 7.5,17.3246753 L8.5,17.4545455 C8.77614237,17.4904081 9,17.272365 9,16.9675325 L9,7.03246753 C9,6.72763504 8.77614237,6.5095919 8.5,6.54545455 L7.5,6.67532468 Z\"\n  }) : _react2.default.createElement(\"path\", {\n    d: \"M7,4 L17,4 C18.1045695,4 19,4.8954305 19,6 L19,18 C19,19.1045695 18.1045695,20 17,20 L7,20 C5.8954305,20 5,19.1045695 5,18 L5,6 L5,6 C5,4.8954305 5.8954305,4 7,4 L7,4 Z M7.5,6 C7.22385763,6 7,6.22385763 7,6.5 L7,17.5 C7,17.7761424 7.22385763,18 7.5,18 L8.5,18 C8.77614237,18 9,17.7761424 9,17.5 L9,6.5 C9,6.22385763 8.77614237,6 8.5,6 L7.5,6 Z\"\n  }));\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = DocumentIcon;\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Icon = require(\"./Icon\");\n\nvar _Icon2 = _interopRequireDefault(_Icon);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction DocumentIcon(props) {\n  return _react2.default.createElement(_Icon2.default, props, _react2.default.createElement(\"path\", {\n    d: \"M12,4 L12,9 C12,10.1045695 12.8954305,11 14,11 L19,11 L19,18 C19,19.1045695 18.1045695,20 17,20 L7,20 C5.8954305,20 5,19.1045695 5,18 L5,6 C5,4.8954305 5.8954305,4 7,4 L12,4 Z M14,4 L19,9 L14,9 L14,4 Z\"\n  }));\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = EditIcon;\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Icon = require(\"./Icon\");\n\nvar _Icon2 = _interopRequireDefault(_Icon);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction EditIcon(props) {\n  return _react2.default.createElement(_Icon2.default, props, _react2.default.createElement(\"path\", {\n    d: \"M13.5,7.5 L16.5,10.5 L9.66719477,17.3328052 L9.66719477,17.3328052 C9.55724743,17.4427526 9.42317605,17.5255464 9.27563076,17.5746098 L6.42375483,18.5229479 L6.42375483,18.5229479 C6.03070288,18.65365 5.60611633,18.4409735 5.47541424,18.0479215 C5.42427386,17.8941303 5.42432697,17.727911 5.47556562,17.5741526 L5.47556562,17.5741526 L6.42535348,14.7240015 L6.42535348,14.7240015 C6.47444294,14.5766924 6.55716155,14.4428385 6.66695621,14.3330438 L13.5,7.5 Z M14.5,6.5 L15.7928932,5.20710678 L15.7928932,5.20710678 C16.1834175,4.81658249 16.8165825,4.81658249 17.2071068,5.20710678 L18.7928932,6.79289322 L18.7928932,6.79289322 C19.1834175,7.18341751 19.1834175,7.81658249 18.7928932,8.20710678 L17.5,9.5 L14.5,6.5 Z\"\n  }));\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = EmailIcon;\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Icon = require(\"./Icon\");\n\nvar _Icon2 = _interopRequireDefault(_Icon);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction EmailIcon(props) {\n  return _react2.default.createElement(_Icon2.default, props, _react2.default.createElement(\"path\", {\n    d: \"M16,12 C16,12.5522847 16.4477153,13 17,13 C17.5522847,13 18,12.5522847 18,12 C18,8.6862915 15.3137085,6 12,6 C8.6862915,6 6,8.6862915 6,12 C6,15.3137085 8.6862915,18 12,18 C12.5522847,18 13,18.4477153 13,19 C13,19.5522847 12.5522847,20 12,20 C7.581722,20 4,16.418278 4,12 C4,7.581722 7.581722,4 12,4 C16.418278,4 20,7.581722 20,12 C20,13.6568542 18.6568542,15 17,15 C16.3246732,15 15.7014641,14.7768574 15.2000818,14.4002811 C14.4703037,15.3716786 13.308528,16 12,16 C9.790861,16 8,14.209139 8,12 C8,9.790861 9.790861,8 12,8 C14.209139,8 16,9.790861 16,12 Z M12,14 C13.1045695,14 14,13.1045695 14,12 C14,10.8954305 13.1045695,10 12,10 C10.8954305,10 10,10.8954305 10,12 C10,13.1045695 10.8954305,14 12,14 Z\"\n  }));\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = ExpandedIcon;\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Icon = require(\"./Icon\");\n\nvar _Icon2 = _interopRequireDefault(_Icon);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction ExpandedIcon(props) {\n  return _react2.default.createElement(_Icon2.default, props, _react2.default.createElement(\"path\", {\n    d: \"M8.23823905,10.6097108 L11.207376,14.4695888 C11.54411,14.907343 12.1719566,14.989236 12.6097108,14.652502 C12.6783439,14.5997073 12.7398293,14.538222 12.792624,14.4695888 L15.761761,10.6097108 C16.0984949,10.1719566 16.0166019,9.54410997 15.5788477,9.20737601 C15.4040391,9.07290785 15.1896811,9 14.969137,9 L9.03086304,9 C8.47857829,9 8.03086304,9.44771525 8.03086304,10 C8.03086304,10.2205442 8.10377089,10.4349022 8.23823905,10.6097108 Z\"\n  }));\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = GoToIcon;\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Icon = require(\"./Icon\");\n\nvar _Icon2 = _interopRequireDefault(_Icon);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction GoToIcon(props) {\n  return _react2.default.createElement(_Icon2.default, props, _react2.default.createElement(\"path\", {\n    d: \"M14.080855,4.6060807 L8.08085497,18.6060807 C7.86329935,19.1137105 8.09845092,19.7015894 8.6060807,19.919145 C9.11371048,20.1367007 9.70158941,19.9015491 9.91914503,19.3939193 L15.919145,5.3939193 C16.1367007,4.88628952 15.9015491,4.29841059 15.3939193,4.08085497 C14.8862895,3.86329935 14.2984106,4.09845092 14.080855,4.6060807 Z\"\n  }));\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = HashtagIcon;\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Icon = require(\"./Icon\");\n\nvar _Icon2 = _interopRequireDefault(_Icon);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction HashtagIcon(props) {\n  return _react2.default.createElement(_Icon2.default, props, _react2.default.createElement(\"path\", {\n    d: \"M11.7353516,19.5009766 L12.5732422,15.34375 L9.52246094,15.34375 L8.67382812,19.5009766 L6.61132812,19.5009766 L7.44921875,15.34375 L5,15.34375 L5.38671875,13.2597656 L7.86816406,13.2597656 L8.51269531,10.0478516 L5.97753906,10.0478516 L6.375,7.98535156 L8.92089844,7.98535156 L9.74804688,4 L11.7998047,4 L11.0048828,7.98535156 L14.0449219,7.98535156 L14.8720703,4 L16.9453125,4 L16.1289062,7.98535156 L18.7177734,7.98535156 L18.3310547,10.0478516 L15.7207031,10.0478516 L15.0546875,13.2597656 L17.71875,13.2597656 L17.3320312,15.34375 L14.6464844,15.34375 L13.8085938,19.5009766 L11.7353516,19.5009766 Z M9.80175781,13.4101562 L13.0458984,13.4101562 L13.7763672,9.91894531 L10.5107422,9.91894531 L9.80175781,13.4101562 Z\"\n  }));\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = Heading1Icon;\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Icon = require(\"./Icon\");\n\nvar _Icon2 = _interopRequireDefault(_Icon);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction Heading1Icon(props) {\n  return _react2.default.createElement(_Icon2.default, props, _react2.default.createElement(\"path\", {\n    d: \"M18,15 L18,8 C18,7.86192881 17.9720178,7.73039322 17.921415,7.61075487 C17.8779612,7.50332041 17.8047379,7.39052429 17.7071068,7.29289322 C17.3165825,6.90236893 16.6834175,6.90236893 16.2928932,7.29289322 L14.2928932,9.29289322 C13.9023689,9.68341751 13.9023689,10.3165825 14.2928932,10.7071068 C14.6834175,11.0976311 15.3165825,11.0976311 15.7071068,10.7071068 L16,10.4142136 L16,15 L15,15 C14.4477153,15 14,15.4477153 14,16 C14,16.5522847 14.4477153,17 15,17 L19,17 C19.5522847,17 20,16.5522847 20,16 C20,15.4477153 19.5522847,15 19,15 L18,15 Z M10,13 L6,13 L6,16 C6,16.5522847 5.55228475,17 5,17 C4.44771525,17 4,16.5522847 4,16 L4,8 L4,8 C4,7.44771525 4.44771525,7 5,7 L5,7 L5,7 C5.55228475,7 6,7.44771525 6,8 L6,11 L10,11 L10,8 L10,8 C10,7.44771525 10.4477153,7 11,7 C11.5522847,7 12,7.44771525 12,8 L12,16 C12,16.5522847 11.5522847,17 11,17 C10.4477153,17 10,16.5522847 10,16 L10,13 Z\"\n  }));\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = Heading2Icon;\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Icon = require(\"./Icon\");\n\nvar _Icon2 = _interopRequireDefault(_Icon);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction Heading2Icon(props) {\n  return _react2.default.createElement(_Icon2.default, props, _react2.default.createElement(\"path\", {\n    d: \"M10,13 L6,13 L6,16 C6,16.5522847 5.55228475,17 5,17 C4.44771525,17 4,16.5522847 4,16 L4,8 L4,8 C4,7.44771525 4.44771525,7 5,7 L5,7 L5,7 C5.55228475,7 6,7.44771525 6,8 L6,11 L10,11 L10,8 L10,8 C10,7.44771525 10.4477153,7 11,7 C11.5522847,7 12,7.44771525 12,8 L12,16 C12,16.5522847 11.5522847,17 11,17 C10.4477153,17 10,16.5522847 10,16 L10,13 Z M19.8087361,11.0881717 L16.96377,15 L19,15 C19.5522847,15 20,15.4477153 20,16 C20,16.5522847 19.5522847,17 19,17 L15,17 C14.1827132,17 13.710559,16.0727976 14.1912639,15.4118283 L18,10.1748162 L18,9 L16,9 L16,10 C16,10.5522847 15.5522847,11 15,11 C14.4477153,11 14,10.5522847 14,10 L14,9 C14,7.8954305 14.8954305,7 16,7 L18,7 C19.1045695,7 20,7.8954305 20,9 L20,10.5 C20,10.7113425 19.9330418,10.9172514 19.8087361,11.0881717 Z\"\n  }));\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = HomeIcon;\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Icon = require(\"./Icon\");\n\nvar _Icon2 = _interopRequireDefault(_Icon);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction HomeIcon(props) {\n  return _react2.default.createElement(_Icon2.default, props, _react2.default.createElement(\"path\", {\n    d: \"M7,18 L9,18 L9,18 C9.55228475,18 10,17.5522847 10,17 L10,13.5 L10,13.5 C10,12.3954305 10.8954305,11.5 12,11.5 L12,11.5 L12,11.5 C13.1045695,11.5 14,12.3954305 14,13.5 L14,17 L14,17 C14,17.5522847 14.4477153,18 15,18 L17,18 L17,18 C17.5522847,18 18,17.5522847 18,17 L18,10.9367499 L18,10.9367499 C18,10.3431902 17.736354,9.78029498 17.2803688,9.40030733 L12.6401844,5.533487 L12.6401844,5.533487 C12.2693384,5.22444871 11.7306616,5.22444871 11.3598156,5.533487 L6.7196312,9.40030733 L6.7196312,9.40030733 C6.26364602,9.78029498 6,10.3431902 6,10.9367499 L6,17 L6,17 C6,17.5522847 6.44771525,18 7,18 Z\"\n  }));\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = HorizontalRuleIcon;\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Icon = require(\"./Icon\");\n\nvar _Icon2 = _interopRequireDefault(_Icon);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction HorizontalRuleIcon(props) {\n  return _react2.default.createElement(_Icon2.default, props, _react2.default.createElement(\"path\", {\n    d: \"M5,11 L19,11 C19.5522847,11 20,11.4477153 20,12 C20,12.5522847 19.5522847,13 19,13 L5,13 C4.44771525,13 4,12.5522847 4,12 C4,11.4477153 4.44771525,11 5,11 L5,11 Z M7,6 L17,6 C17.5522847,6 18,6.44771525 18,7 L18,8 C18,8.55228475 17.5522847,9 17,9 L7,9 C6.44771525,9 6,8.55228475 6,8 L6,7 L6,7 C6,6.44771525 6.44771525,6 7,6 Z M7,15 L17,15 C17.5522847,15 18,15.4477153 18,16 L18,17 C18,17.5522847 17.5522847,18 17,18 L7,18 C6.44771525,18 6,17.5522847 6,17 L6,16 C6,15.4477153 6.44771525,15 7,15 Z\"\n  }));\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = ImageIcon;\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Icon = require(\"./Icon\");\n\nvar _Icon2 = _interopRequireDefault(_Icon);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction ImageIcon(props) {\n  return _react2.default.createElement(_Icon2.default, props, _react2.default.createElement(\"path\", {\n    d: \"M19,14.5857864 L13.7071068,9.29289322 C13.3165825,8.90236893 12.6834175,8.90236893 12.2928932,9.29289322 L8,13.5857864 L5,10.5857864 L5,7 L5,7 C5,5.8954305 5.8954305,5 7,5 L7,5 L17,5 L17,5 C18.1045695,5 19,5.8954305 19,7 L19,14.5857864 Z M18.9642423,17.3784559 C18.7873485,18.3020643 17.9751801,19 17,19 L7,19 L7,19 C5.8954305,19 5,18.1045695 5,17 L5,13.4142136 L7.29289322,15.7071068 C7.68341751,16.0976311 8.31658249,16.0976311 8.70710678,15.7071068 L13,11.4142136 L18.9642423,17.3784559 Z M8.5,10 C9.32842712,10 10,9.32842712 10,8.5 C10,7.67157288 9.32842712,7 8.5,7 C7.67157288,7 7,7.67157288 7,8.5 C7,9.32842712 7.67157288,10 8.5,10 Z\"\n  }));\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = AlignAboveIcon;\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Icon = require(\"./Icon\");\n\nvar _Icon2 = _interopRequireDefault(_Icon);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction AlignAboveIcon(props) {\n  return _react2.default.createElement(_Icon2.default, props, _react2.default.createElement(\"path\", {\n    d: \"M13.125,16.75 L13.125,19.5 C13.125,20.0522847 12.6772847,20.5 12.125,20.5 L11.875,20.5 C11.3227153,20.5 10.875,20.0522847 10.875,19.5 L10.875,16.75 L8.5,16.75 C7.94771525,16.75 7.5,16.3022847 7.5,15.75 L7.5,15.25 C7.5,14.6977153 7.94771525,14.25 8.5,14.25 L10.875,14.25 L10.875,11.5 C10.875,10.9477153 11.3227153,10.5 11.875,10.5 L12.125,10.5 C12.6772847,10.5 13.125,10.9477153 13.125,11.5 L13.125,14.25 L15.5,14.25 C16.0522847,14.25 16.5,14.6977153 16.5,15.25 L16.5,15.75 C16.5,16.3022847 16.0522847,16.75 15.5,16.75 L13.125,16.75 Z M7.38994949,10.6094757 C6.84321549,11.1301748 5.95678451,11.1301748 5.41005051,10.6094757 C4.8633165,10.0887767 4.8633165,9.24455668 5.41005051,8.72385763 L11.0100505,3.39052429 C11.5567845,2.86982524 12.4432155,2.86982524 12.9899495,3.39052429 L18.5899495,8.72385763 C19.1366835,9.24455668 19.1366835,10.0887767 18.5899495,10.6094757 C18.0432155,11.1301748 17.1567845,11.1301748 16.6100505,10.6094757 L12,6.21895142 L7.38994949,10.6094757 Z\"\n  }));\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = AlignBelowIcon;\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Icon = require(\"./Icon\");\n\nvar _Icon2 = _interopRequireDefault(_Icon);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction AlignBelowIcon(props) {\n  return _react2.default.createElement(_Icon2.default, props, _react2.default.createElement(\"path\", {\n    d: \"M10.875,7.25 L10.875,4.5 C10.875,3.94771525 11.3227153,3.5 11.875,3.5 L12.125,3.5 C12.6772847,3.5 13.125,3.94771525 13.125,4.5 L13.125,7.25 L15.5,7.25 C16.0522847,7.25 16.5,7.69771525 16.5,8.25 L16.5,8.75 C16.5,9.30228475 16.0522847,9.75 15.5,9.75 L13.125,9.75 L13.125,12.5 C13.125,13.0522847 12.6772847,13.5 12.125,13.5 L11.875,13.5 C11.3227153,13.5 10.875,13.0522847 10.875,12.5 L10.875,9.75 L8.5,9.75 C7.94771525,9.75 7.5,9.30228475 7.5,8.75 L7.5,8.25 C7.5,7.69771525 7.94771525,7.25 8.5,7.25 L10.875,7.25 Z M16.2807612,13.8417088 C16.7884428,13.3860971 17.6115572,13.3860971 18.1192388,13.8417088 C18.6269204,14.2973204 18.6269204,15.0360129 18.1192388,15.4916246 L12.9192388,20.1582912 C12.4115572,20.6139029 11.5884428,20.6139029 11.0807612,20.1582912 L5.88076118,15.4916246 C5.37307961,15.0360129 5.37307961,14.2973204 5.88076118,13.8417088 C6.38844276,13.3860971 7.21155724,13.3860971 7.71923882,13.8417088 L12,17.6834175 L16.2807612,13.8417088 Z\"\n  }));\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = AlignLeftIcon;\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Icon = require(\"./Icon\");\n\nvar _Icon2 = _interopRequireDefault(_Icon);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction AlignLeftIcon(props) {\n  return _react2.default.createElement(_Icon2.default, props, _react2.default.createElement(\"path\", {\n    d: \"M16.625,10.75 L19,10.75 C19.5522847,10.75 20,11.1977153 20,11.75 L20,12.25 C20,12.8022847 19.5522847,13.25 19,13.25 L16.625,13.25 L16.625,16 C16.625,16.5522847 16.1772847,17 15.625,17 L15.375,17 C14.8227153,17 14.375,16.5522847 14.375,16 L14.375,13.25 L12,13.25 C11.4477153,13.25 11,12.8022847 11,12.25 L11,11.75 C11,11.1977153 11.4477153,10.75 12,10.75 L14.375,10.75 L14.375,8 C14.375,7.44771525 14.8227153,7 15.375,7 L15.625,7 C16.1772847,7 16.625,7.44771525 16.625,8 L16.625,10.75 Z M10.6582912,15.9514719 C11.1139029,16.420101 11.1139029,17.179899 10.6582912,17.6485281 C10.2026796,18.1171573 9.4639871,18.1171573 9.00837542,17.6485281 L4.34170876,12.8485281 C3.88609708,12.379899 3.88609708,11.620101 4.34170876,11.1514719 L9.00837542,6.35147186 C9.4639871,5.88284271 10.2026796,5.88284271 10.6582912,6.35147186 C11.1139029,6.82010101 11.1139029,7.57989899 10.6582912,8.04852814 L6.81658249,12 L10.6582912,15.9514719 Z\"\n  }));\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = AlignRightIcon;\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Icon = require(\"./Icon\");\n\nvar _Icon2 = _interopRequireDefault(_Icon);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction AlignRightIcon(props) {\n  return _react2.default.createElement(_Icon2.default, props, _react2.default.createElement(\"path\", {\n    d: \"M7.375,13.25 L5,13.25 C4.44771525,13.25 4,12.8022847 4,12.25 L4,11.75 C4,11.1977153 4.44771525,10.75 5,10.75 L7.375,10.75 L7.375,8 C7.375,7.44771525 7.82271525,7 8.375,7 L8.625,7 C9.17728475,7 9.625,7.44771525 9.625,8 L9.625,10.75 L12,10.75 C12.5522847,10.75 13,11.1977153 13,11.75 L13,12.25 C13,12.8022847 12.5522847,13.25 12,13.25 L9.625,13.25 L9.625,16 C9.625,16.5522847 9.17728475,17 8.625,17 L8.375,17 C7.82271525,17 7.375,16.5522847 7.375,16 L7.375,13.25 Z M13.3417088,8.04852814 C12.8860971,7.57989899 12.8860971,6.82010101 13.3417088,6.35147186 C13.7973204,5.88284271 14.5360129,5.88284271 14.9916246,6.35147186 L19.6582912,11.1514719 C20.1139029,11.620101 20.1139029,12.379899 19.6582912,12.8485281 L14.9916246,17.6485281 C14.5360129,18.1171573 13.7973204,18.1171573 13.3417088,17.6485281 C12.8860971,17.179899 12.8860971,16.420101 13.3417088,15.9514719 L17.1834175,12 L13.3417088,8.04852814 Z\"\n  }));\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = ItalicIcon;\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Icon = require(\"./Icon\");\n\nvar _Icon2 = _interopRequireDefault(_Icon);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction ItalicIcon(props) {\n  return _react2.default.createElement(_Icon2.default, props, _react2.default.createElement(\"path\", {\n    d: \"M12.5,6 C11.6715729,6 11,5.32842712 11,4.5 C11,3.67157288 11.6715729,3 12.5,3 C13.3284271,3 14,3.67157288 14,4.5 C14,5.32842712 13.3284271,6 12.5,6 Z M10.7801961,10 L10,10 C9.44771525,10 9,9.55228475 9,9 C9,8.44771525 9.44771525,8 10,8 L12,8 C12.6310464,8 13.1043391,8.57732421 12.9805807,9.19611614 L11.4590271,16.8038839 C11.3507152,17.3454436 11.7019319,17.8722687 12.2434917,17.9805807 C12.3080649,17.9934953 12.3737558,18 12.4396078,18 L13,18 C13.5522847,18 14,18.4477153 14,19 C14,19.5522847 13.5522847,20 13,20 L12.4396078,20 C12.2420518,20 12.044979,19.9804859 11.8512594,19.941742 C10.2265801,19.6168062 9.17292993,18.0363309 9.49786578,16.4116516 L10.7801961,10 Z\"\n  }));\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = KeyboardIcon;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Icon = require('./Icon');\n\nvar _Icon2 = _interopRequireDefault(_Icon);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction KeyboardIcon(props) {\n  return _react2.default.createElement(_Icon2.default, props, _react2.default.createElement('path', {\n    d: 'M6,6 L19,6 C20.1045695,6 21,6.8954305 21,8 L21,16 C21,17.1045695 20.1045695,18 19,18 L6,18 C4.8954305,18 4,17.1045695 4,16 L4,8 L4,8 C4,6.8954305 4.8954305,6 6,6 L6,6 Z M6,14 L6,16 L19,16 L19,14 L6,14 Z M16,8 L16,10 L19,10 L19,8 L16,8 Z M6,8 L6,10 L9,10 L9,8 L6,8 Z M13,8 L13,10 L15,10 L15,8 L13,8 Z M10,8 L10,10 L12,10 L12,8 L10,8 Z M7,11 L7,13 L9,13 L9,11 L7,11 Z M10,11 L10,13 L12,13 L12,11 L10,11 Z M13,11 L13,13 L15,13 L15,11 L13,11 Z M16,11 L16,13 L18,13 L18,11 L16,11 Z'\n  }));\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = LinkIcon;\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Icon = require(\"./Icon\");\n\nvar _Icon2 = _interopRequireDefault(_Icon);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction LinkIcon(props) {\n  return _react2.default.createElement(_Icon2.default, props, _react2.default.createElement(\"path\", {\n    d: \"M11.0745387,14.3927712 C10.6944229,13.9921087 10.7110794,13.3591628 11.1117419,12.9790471 C11.5124045,12.5989313 12.1453503,12.6155878 12.5254661,13.0162503 C12.9108834,13.422501 13.5526571,13.4393898 13.9780169,13.0353595 L17.3813571,9.63201937 C18.2122318,8.80114469 18.2122318,7.45403068 17.3813571,6.62315601 C16.5504824,5.79228133 15.2033684,5.79228133 14.3724938,6.62315601 L13.5071091,7.48854062 C13.1165848,7.87906491 12.4834199,7.87906491 12.0928956,7.48854062 C11.7023713,7.09801633 11.7023713,6.46485135 12.0928956,6.07432706 L12.9582802,5.20894244 C14.5702035,3.59701919 17.1836474,3.59701919 18.7955707,5.20894244 C20.4074939,6.8208657 20.4074939,9.43430967 18.7955707,11.0462329 L15.3922305,14.4495731 C15.3640722,14.4774856 15.3640722,14.4774856 15.3354286,14.5048999 C14.1278529,15.6505487 12.2201874,15.6003469 11.0745387,14.3927712 Z M12.9299745,9.60955606 C13.3100902,10.0102186 13.2934337,10.6431644 12.8927712,11.0232802 C12.4921087,11.4033959 11.8591628,11.3867395 11.4790471,10.9860769 C11.0936298,10.5798262 10.4518561,10.5629375 10.0264962,10.9669677 L6.62315601,14.3703079 C5.79228133,15.2011826 5.79228133,16.5482966 6.62315601,17.3791712 C7.45403068,18.2100459 8.80114469,18.2100459 9.63201937,17.3791712 L10.497404,16.5137866 C10.8879283,16.1232623 11.5210933,16.1232623 11.9116175,16.5137866 C12.3021418,16.9043109 12.3021418,17.5374759 11.9116175,17.9280002 L11.0462329,18.7933848 C9.43430967,20.4053081 6.8208657,20.4053081 5.20894244,18.7933848 C3.59701919,17.1814616 3.59701919,14.5680176 5.20894244,12.9560943 L8.61228261,9.55275416 C8.64044095,9.52484169 8.64044095,9.52484169 8.66908451,9.49742738 C9.87666026,8.35177859 11.7843257,8.40198031 12.9299745,9.60955606 Z\"\n  }));\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = MenuIcon;\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Icon = require(\"./Icon\");\n\nvar _Icon2 = _interopRequireDefault(_Icon);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction MenuIcon(props) {\n  return _react2.default.createElement(_Icon2.default, props, _react2.default.createElement(\"path\", {\n    d: \"M4.99992841,5.99992841 L19.0000716,5.99992841 C19.5523168,5.99992841 20,6.4476116 20,6.99985681 C20,7.55210202 19.5523168,7.99978522 19.0000716,7.99978522 L4.99992841,7.99978522 C4.4476832,7.99978522 4,7.55210202 4,6.99985681 C4,6.4476116 4.4476832,5.99992841 4.99992841,5.99992841 Z M4.99992841,15.9992125 L19.0000716,15.9992125 C19.5523168,15.9992125 20,16.4468957 20,16.9991409 C20,17.5513861 19.5523168,17.9990693 19.0000716,17.9990693 L4.99992841,17.9990693 C4.4476832,17.9990693 4,17.5513861 4,16.9991409 C4,16.4468957 4.4476832,15.9992125 4.99992841,15.9992125 Z M4.99992841,10.9995704 L19.0000716,10.9995704 C19.5523168,10.9995704 20,11.4472536 20,11.9994988 C20,12.5517441 19.5523168,12.9994273 19.0000716,12.9994273 L4.99992841,12.9994273 C4.4476832,12.9994273 4,12.5517441 4,11.9994988 C4,11.4472536 4.4476832,10.9995704 4.99992841,10.9995704 Z\"\n  }));\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = MoonIcon;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Icon = require('./Icon');\n\nvar _Icon2 = _interopRequireDefault(_Icon);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction MoonIcon(props) {\n  return _react2.default.createElement(_Icon2.default, props, _react2.default.createElement('path', {\n    d: 'M18.9210795,16.0557083 C18.806544,15.8557291 18.5888638,15.7466581 18.3681042,15.778451 C15.7143549,16.1614343 13.1464699,14.8027828 11.8279514,12.4996619 C10.4714937,10.1303294 10.5992437,7.15643277 12.1533805,4.92327491 C12.2845089,4.73479995 12.2953316,4.48267679 12.180826,4.2827289 C12.0663204,4.082781 11.8486103,3.97361621 11.6278806,4.00547157 C10.6028014,4.15336924 9.62953379,4.51221881 8.7351046,5.07207916 C5.10013507,7.34753369 3.91319343,12.2909608 6.08927802,16.0918777 C8.27199974,19.9044239 12.9936064,21.1335595 16.6280677,18.8585113 C17.5224371,18.2986822 18.2846616,17.571167 18.8935743,16.6962543 C19.0247325,16.5078419 19.0355552,16.2557187 18.9210795,16.0557083 Z'\n  }));\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = MoreIcon;\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Icon = require(\"./Icon\");\n\nvar _Icon2 = _interopRequireDefault(_Icon);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction MoreIcon(props) {\n  return _react2.default.createElement(_Icon2.default, props, _react2.default.createElement(\"path\", {\n    d: \"M12,14 C10.8954305,14 10,13.1045695 10,12 C10,10.8954305 10.8954305,10 12,10 C13.1045695,10 14,10.8954305 14,12 C14,13.1045695 13.1045695,14 12,14 Z M18,14 C16.8954305,14 16,13.1045695 16,12 C16,10.8954305 16.8954305,10 18,10 C19.1045695,10 20,10.8954305 20,12 C20,13.1045695 19.1045695,14 18,14 Z M6,14 C4.8954305,14 4,13.1045695 4,12 C4,10.8954305 4.8954305,10 6,10 C7.1045695,10 8,10.8954305 8,12 C8,13.1045695 7.1045695,14 6,14 Z\"\n  }));\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = NewDocumentIcon;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Icon = require('./Icon');\n\nvar _Icon2 = _interopRequireDefault(_Icon);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction NewDocumentIcon(props) {\n  return _react2.default.createElement(_Icon2.default, props, _react2.default.createElement('path', {\n    d: 'M19,18 L20,18 C20.5522847,18 21,18.4477153 21,19 C21,19.5522847 20.5522847,20 20,20 L19,20 L19,21 C19,21.5522847 18.5522847,22 18,22 C17.4477153,22 17,21.5522847 17,21 L17,20 L16,20 C15.4477153,20 15,19.5522847 15,19 C15,18.4477153 15.4477153,18 16,18 L17,18 L17,17 C17,16.4477153 17.4477153,16 18,16 C18.5522847,16 19,16.4477153 19,17 L19,18 Z M13.1000181,20 L7,20 C5.8954305,20 5,19.1045695 5,18 L5,6 L5,6 C5,4.8954305 5.8954305,4 7,4 L7,4 L14.5,4 L12,4 L12,9 C12,10.1045695 12.8954305,11 14,11 L19,11 L19,8.5 L19,14.1000181 C18.6768901,14.0344303 18.3424658,14 18,14 C15.2385763,14 13,16.2385763 13,19 C13,19.3424658 13.0344303,19.6768901 13.1000181,20 Z M14,4 L19,9 L14,9 L14,4 Z'\n  }));\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = NextIcon;\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Icon = require(\"./Icon\");\n\nvar _Icon2 = _interopRequireDefault(_Icon);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction NextIcon(props) {\n  return _react2.default.createElement(_Icon2.default, props, _react2.default.createElement(\"path\", {\n    d: \"M9.29289322,16.2928932 C8.90236893,16.6834175 8.90236893,17.3165825 9.29289322,17.7071068 C9.68341751,18.0976311 10.3165825,18.0976311 10.7071068,17.7071068 L15.7071068,12.7071068 C16.0976311,12.3165825 16.0976311,11.6834175 15.7071068,11.2928932 L10.7071068,6.29289322 C10.3165825,5.90236893 9.68341751,5.90236893 9.29289322,6.29289322 C8.90236893,6.68341751 8.90236893,7.31658249 9.29289322,7.70710678 L13.5857864,12 L9.29289322,16.2928932 Z\"\n  }));\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = OpenIcon;\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Icon = require(\"./Icon\");\n\nvar _Icon2 = _interopRequireDefault(_Icon);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction OpenIcon(props) {\n  return _react2.default.createElement(_Icon2.default, props, _react2.default.createElement(\"path\", {\n    d: \"M18,7.41421356 L11.7071068,13.7071068 C11.3165825,14.0976311 10.6834175,14.0976311 10.2928932,13.7071068 C9.90236893,13.3165825 9.90236893,12.6834175 10.2928932,12.2928932 L16.5857864,6 L14,6 C13.4477153,6 13,5.55228475 13,5 C13,4.44771525 13.4477153,4 14,4 L19,4 C19.5522847,4 20,4.44771525 20,5 L20,10 C20,10.5522847 19.5522847,11 19,11 C18.4477153,11 18,10.5522847 18,10 L18,7.41421356 Z M9,6 C9.55228475,6 10,6.44771525 10,7 C10,7.55228475 9.55228475,8 9,8 L6,8 L6,18 L16,18 L16,15 C16,14.4477153 16.4477153,14 17,14 C17.5522847,14 18,14.4477153 18,15 L18,18 C18,19.1045695 17.1045695,20 16,20 L6,20 C4.8954305,20 4,19.1045695 4,18 L4,8 C4,6.8954305 4.8954305,6 6,6 L9,6 Z\"\n  }));\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = OrderedListIcon;\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Icon = require(\"./Icon\");\n\nvar _Icon2 = _interopRequireDefault(_Icon);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction OrderedListIcon(props) {\n  return _react2.default.createElement(_Icon2.default, props, _react2.default.createElement(\"path\", {\n    d: \"M5,7.99978522 L5,6.70798687 L4.85355339,6.85442299 C4.65829124,7.04967116 4.34170876,7.04967116 4.14644661,6.85442299 C3.95118446,6.65917483 3.95118446,6.342615 4.14644661,6.14736684 L5.14644661,5.14743843 C5.46142904,4.83247855 6,5.05554597 6,5.50096651 L6,7.99978522 L6.5000358,7.99978522 L6.5000358,7.99978522 C6.7761584,7.99978522 7,8.22362682 7,8.49974942 C7,8.77587203 6.7761584,8.99971363 6.5000358,8.99971363 L5.53191883,8.99971363 C5.52136474,9.00037848 5.51072178,9.00071593 5.5,9.00071593 C5.48927822,9.00071593 5.47863526,9.00037848 5.46808117,8.99971363 L4.4999642,8.99971363 L4.4999642,8.99971363 C4.2238416,8.99971363 4,8.77587203 4,8.49974942 C4,8.22362682 4.2238416,7.99978522 4.4999642,7.99978522 L4.4999642,7.99978522 L5,7.99978522 Z M9.99992841,5.99992841 L19.0000716,5.99992841 L19.0000716,5.99992841 C19.5523168,5.99992841 20,6.4476116 20,6.99985681 L20,6.99985681 L20,6.99985681 C20,7.55210202 19.5523168,7.99978522 19.0000716,7.99978522 L9.99992841,7.99978522 L9.99992841,7.99978522 C9.4476832,7.99978522 9,7.55210202 9,6.99985681 L9,6.99985681 L9,6.99985681 C9,6.4476116 9.4476832,5.99992841 9.99992841,5.99992841 Z M9.99992841,15.9992125 L19.0000716,15.9992125 L19.0000716,15.9992125 C19.5523168,15.9992125 20,16.4468957 20,16.9991409 L20,16.9991409 L20,16.9991409 C20,17.5513861 19.5523168,17.9990693 19.0000716,17.9990693 L9.99992841,17.9990693 C9.4476832,17.9990693 9,17.5513861 9,16.9991409 C9,16.4468957 9.4476832,15.9992125 9.99992841,15.9992125 Z M9.99992841,10.9995704 L19.0000716,10.9995704 L19.0000716,10.9995704 C19.5523168,10.9995704 20,11.4472536 20,11.9994988 L20,11.9994988 C20,12.5517441 19.5523168,12.9994273 19.0000716,12.9994273 L9.99992841,12.9994273 L9.99992841,12.9994273 C9.4476832,12.9994273 9,12.5517441 9,11.9994988 C9,11.4472536 9.4476832,10.9995704 9.99992841,10.9995704 Z M4.64644661,16.6466151 L5.29289322,16.0002148 L4.5,16.0002148 C4.22385763,16.0002148 4,15.7763732 4,15.5002506 C4,15.224128 4.22385763,15.0002864 4.5,15.0002864 L6.5,15.0002864 C6.94545243,15.0002864 7.16853582,15.5388188 6.85355339,15.8537787 L6.14380887,16.5634724 C6.64120863,16.728439 7,17.1973672 7,17.7500895 C7,18.440396 6.44035594,19 5.75,19 L4.5,19 C4.22385763,19 4,18.7761584 4,18.5000358 C4,18.2239132 4.22385763,18.0000716 4.5,18.0000716 L5.75,18.0000716 C5.88807119,18.0000716 6,17.8881508 6,17.7500895 C6,17.6120282 5.88807119,17.5001074 5.75,17.5001074 L5,17.5001074 C4.55454757,17.5001074 4.33146418,16.961575 4.64644661,16.6466151 Z M6.40096969,12.700451 L6.00096969,13.0004296 L6.50096969,13.0004296 C6.77711207,13.0004296 7.00096969,13.2242712 7.00096969,13.5003938 C7.00096969,13.7765164 6.77711207,14.000358 6.50096969,14.000358 L4.50096969,14.000358 C4.02046355,14.000358 3.81656478,13.3887054 4.20096969,13.1004224 L5.80096969,11.9005083 C5.92687261,11.8060879 6.00096969,11.6579043 6.00096969,11.5005369 L6.00096969,11.2505548 C6.00096969,11.1124935 5.88904088,11.0005727 5.75096969,11.0005727 L5.50096969,11.0005727 C5.22482732,11.0005727 5.00096969,11.2244143 5.00096969,11.5005369 C5.00096969,11.7766596 4.77711207,12.0005012 4.50096969,12.0005012 C4.22482732,12.0005012 4.00096969,11.7766596 4.00096969,11.5005369 C4.00096969,10.6721691 4.67254257,10.0006443 5.50096969,10.0006443 L5.75096969,10.0006443 C6.44132563,10.0006443 7.00096969,10.5602483 7.00096969,11.2505548 L7.00096969,11.5005369 C7.00096969,11.9726391 6.77867846,12.4171897 6.40096969,12.700451 Z\"\n  }));\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = PadlockIcon;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Icon = require('./Icon');\n\nvar _Icon2 = _interopRequireDefault(_Icon);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction PadlockIcon(props) {\n  return _react2.default.createElement(_Icon2.default, props, _react2.default.createElement('path', {\n    d: 'M13,14.7324356 C13.5978014,14.3866262 14,13.7402824 14,13 C14,11.8954305 13.1045695,11 12,11 C10.8954305,11 10,11.8954305 10,13 C10,13.7402824 10.4021986,14.3866262 11,14.7324356 L11,16.5 C11,17.0522847 11.4477153,17.5 12,17.5 C12.5522847,17.5 13,17.0522847 13,16.5 L13,14.7324356 Z M7,9 C7,6.23857625 9.23857625,4 12,4 C14.7614237,4 17,6.23857625 17,9 C18.1045695,9 19,9.8954305 19,11 L19,17 C19,18.1045695 18.1045695,19 17,19 L7,19 C5.8954305,19 5,18.1045695 5,17 L5,11 C5,9.8954305 5.8954305,9 7,9 Z M9,9 L15,9 C15,7.34314575 13.6568542,6 12,6 C10.3431458,6 9,7.34314575 9,9 Z'\n  }));\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = PinIcon;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Icon = require('./Icon');\n\nvar _Icon2 = _interopRequireDefault(_Icon);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction PinIcon(props) {\n  return _react2.default.createElement(_Icon2.default, props, _react2.default.createElement('path', {\n    d: 'M5.8355996,10.9120278 C5.68780303,10.7642312 5.59344653,10.5714155 5.56742853,10.3640252 C5.50276659,9.84860302 5.86817998,9.37835193 6.38360216,9.31369 C7.5908221,9.16222691 8.66384332,9.11386012 9.60266432,9.16857768 L13.3590257,6.76661181 C13.3232787,6.36756241 13.3081075,5.93429416 13.3135122,5.46680705 C13.3163525,5.22112701 13.4152107,4.98631045 13.5889444,4.81257683 C13.9562711,4.4452501 14.5518254,4.4452501 14.9191521,4.81257683 L19.1874471,9.08089577 C19.3611825,9.25463123 19.4600417,9.48945036 19.4628817,9.735133 C19.4688865,10.2545814 19.0526582,10.6805453 18.5332098,10.6865501 C18.0657301,10.6919287 17.6324685,10.6767575 17.2334248,10.641011 L14.831459,14.3973723 C14.8861764,15.3361909 14.83781,16.4092091 14.6863598,17.6164268 C14.6603417,17.823818 14.5659848,18.0166347 14.4181875,18.164432 C14.0508706,18.5317489 13.4553322,18.5317489 13.0880152,18.164432 L10.1268984,15.2033198 L6.41184151,18.9183767 C6.04452202,19.2856962 5.44897945,19.2856962 5.08165995,18.9183767 C4.71434046,18.5510572 4.71434046,17.9555146 5.08165995,17.5881951 L8.7967158,13.8731393 L5.8355996,10.9120278 Z'\n  }));\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = PlusIcon;\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Icon = require(\"./Icon\");\n\nvar _Icon2 = _interopRequireDefault(_Icon);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction PlusIcon(props) {\n  return _react2.default.createElement(_Icon2.default, props, _react2.default.createElement(\"path\", {\n    d: \"M13,11 L13,6 C13,5.44771525 12.5522847,5 12,5 C11.4477153,5 11,5.44771525 11,6 L11,6 L11,11 L6,11 C5.44771525,11 5,11.4477153 5,12 C5,12.5522847 5.44771525,13 6,13 L11,13 L11,18 C11,18.5522847 11.4477153,19 12,19 C12.5522847,19 13,18.5522847 13,18 L13,13 L18,13 C18.5522847,13 19,12.5522847 19,12 C19,11.4477153 18.5522847,11 18,11 L13,11 Z\"\n  }));\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = PrivateCollectionIcon;\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Icon = require(\"./Icon\");\n\nvar _Icon2 = _interopRequireDefault(_Icon);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nfunction PrivateCollectionIcon(_ref) {\n  var expanded = _ref.expanded,\n      rest = _objectWithoutProperties(_ref, [\"expanded\"]);\n\n  return _react2.default.createElement(_Icon2.default, rest, expanded ? _react2.default.createElement(\"path\", {\n    d: \"M19,14.1000181 C18.6768901,14.0344303 18.3424658,14 18,14 C17.6575342,14 17.3231099,14.0344303 17,14.1000181 L17,5.75 C17,5.16516859 16.8928984,4.62808299 16.701875,4.16415178 L17,4.14285714 C18.1045695,4.06395932 19,5.02334914 19,6.28571429 L19,14.1000181 Z M16,14.4160437 C14.2340952,15.1876003 13,16.949681 13,19 C13,19.5211065 13.0797184,20.0235938 13.2276253,20.4959319 L7,19.3636364 C5.8954305,19.1628055 5,18.1045695 5,17 L5,7 C5,5.8954305 5.8954305,4.83719445 7,4.63636364 L14,3.36363636 C15.1045695,3.16280555 16,4.15126779 16,5.57142857 L16,14.4160437 Z M7.5,6.67532468 C7.22385763,6.71118732 7,6.97574633 7,7.26623377 L7,16.7337662 C7,17.0242537 7.22385763,17.2888127 7.5,17.3246753 L8.5,17.4545455 C8.77614237,17.4904081 9,17.272365 9,16.9675325 L9,7.03246753 C9,6.72763504 8.77614237,6.5095919 8.5,6.54545455 L7.5,6.67532468 Z M16,18 C16,16.8954305 16.8954305,16 18,16 C19.1045695,16 20,16.8954305 20,18 C20.5522847,18 21,18.4477153 21,19 L21,21 C21,21.5522847 20.5522847,22 20,22 L16,22 C15.4477153,22 15,21.5522847 15,21 L15,19 C15,18.4477153 15.4477153,18 16,18 Z M17,18 L19,18 C19,17.4477153 18.5522847,17 18,17 C17.4477153,17 17,17.4477153 17,18 Z\"\n  }) : _react2.default.createElement(\"path\", {\n    d: \"M19,14.1000181 C18.6768901,14.0344303 18.3424658,14 18,14 C15.2385763,14 13,16.2385763 13,19 C13,19.3424658 13.0344303,19.6768901 13.1000181,20 L7,20 C5.8954305,20 5,19.1045695 5,18 L5,6 C5,4.8954305 5.8954305,4 7,4 L17,4 C18.1045695,4 19,4.8954305 19,6 L19,14.1000181 Z M7.5,6 C7.22385763,6 7,6.22385763 7,6.5 L7,17.5 C7,17.7761424 7.22385763,18 7.5,18 L8.5,18 C8.77614237,18 9,17.7761424 9,17.5 L9,6.5 C9,6.22385763 8.77614237,6 8.5,6 L7.5,6 Z M16,18 C16,16.8954305 16.8954305,16 18,16 C19.1045695,16 20,16.8954305 20,18 C20.5522847,18 21,18.4477153 21,19 L21,21 C21,21.5522847 20.5522847,22 20,22 L16,22 C15.4477153,22 15,21.5522847 15,21 L15,19 C15,18.4477153 15.4477153,18 16,18 Z M17,18 L19,18 C19,17.4477153 18.5522847,17 18,17 C17.4477153,17 17,17.4477153 17,18 Z\"\n  }));\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = ProfileIcon;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Icon = require('./Icon');\n\nvar _Icon2 = _interopRequireDefault(_Icon);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction ProfileIcon(props) {\n  return _react2.default.createElement(_Icon2.default, props, _react2.default.createElement('path', {\n    d: 'M6,6 L19,6 C20.1045695,6 21,6.8954305 21,8 L21,16 C21,17.1045695 20.1045695,18 19,18 L6,18 C4.8954305,18 4,17.1045695 4,16 L4,8 L4,8 C4,6.8954305 4.8954305,6 6,6 L6,6 Z M13,14 L13,16 L19,16 L19,14 L13,14 Z M13,11 L13,13 L17,13 L17,11 L13,11 Z M6,8 L6,16 L11,16 L11,8 L6,8 Z M13,8 L13,10 L19,10 L19,8 L13,8 Z'\n  }));\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = SearchIcon;\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Icon = require(\"./Icon\");\n\nvar _Icon2 = _interopRequireDefault(_Icon);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction SearchIcon(props) {\n  return _react2.default.createElement(_Icon2.default, props, _react2.default.createElement(\"path\", {\n    d: \"M16.1692714,14.047951 L19.0606602,16.9393398 C19.6464466,17.5251263 19.6464466,18.4748737 19.0606602,19.0606602 C18.4748737,19.6464466 17.5251263,19.6464466 16.9393398,19.0606602 L14.047951,16.1692714 C13.1546811,16.6971059 12.1127129,17 11,17 C7.6862915,17 5,14.3137085 5,11 C5,7.6862915 7.6862915,5 11,5 C14.3137085,5 17,7.6862915 17,11 C17,12.1127129 16.6971059,13.1546811 16.1692714,14.047951 Z M11,8 C9.34314575,8 8,9.34314575 8,11 C8,12.6568542 9.34314575,14 11,14 C12.6568542,14 14,12.6568542 14,11 C14,9.34314575 12.6568542,8 11,8 Z\"\n  }));\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = SettingsIcon;\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Icon = require(\"./Icon\");\n\nvar _Icon2 = _interopRequireDefault(_Icon);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction SettingsIcon(props) {\n  return _react2.default.createElement(_Icon2.default, props, _react2.default.createElement(\"path\", {\n    d: \"M9.5005126,5.99794961 L9.81063391,4.75746437 L9.81063391,4.75746437 C9.92192566,4.31229737 10.3219088,4 10.7807764,4 L10.7807764,4 L13.2192236,4 L13.2192236,4 C13.6780912,4 14.0780743,4.31229737 14.1893661,4.75746437 L14.4994874,5.99794961 C15.0194857,6.21474677 15.5052885,6.49715027 15.9465564,6.83482093 L17.1775368,6.48268553 L17.1775368,6.48268553 C17.6187086,6.35648351 18.0891576,6.54673036 18.3185914,6.9441214 L18.3185914,6.9441214 L19.537815,9.0558786 C19.7672488,9.45326964 19.6967829,9.95581386 19.3669029,10.2747788 L18.4467943,11.1644429 C18.4819001,11.4380051 18.5,11.7168888 18.5,12 C18.5,12.2831112 18.4819001,12.5619949 18.4467943,12.8355571 L19.3669029,13.7252212 C19.6967829,14.0441861 19.7672488,14.5467304 19.537815,14.9441214 L18.3185914,17.0558786 C18.0891576,17.4532696 17.6187086,17.6435165 17.1775368,17.5173145 L15.9465564,17.1651791 C15.5052885,17.5028497 15.0194857,17.7852532 14.4994874,18.0020504 L14.1893661,19.2425356 C14.0780743,19.6877026 13.6780912,20 13.2192236,20 L10.7807764,20 C10.3219088,20 9.92192566,19.6877026 9.81063391,19.2425356 L9.5005126,18.0020504 C8.98051425,17.7852532 8.49471153,17.5028497 8.0534436,17.1651791 L6.82246321,17.5173145 C6.3812914,17.6435165 5.91084239,17.4532696 5.68140857,17.0558786 L4.46218497,14.9441214 C4.23275115,14.5467304 4.30321706,14.0441861 4.63309711,13.7252212 L5.5532057,12.8355571 C5.51809991,12.5619949 5.5,12.2831112 5.5,12 C5.5,11.7168888 5.51809991,11.4380051 5.5532057,11.1644429 L4.63309711,10.2747788 L4.63309711,10.2747788 C4.30321706,9.95581386 4.23275115,9.45326964 4.46218497,9.0558786 L4.46218497,9.0558786 L5.68140857,6.9441214 L5.68140857,6.9441214 C5.91084239,6.54673036 6.3812914,6.35648351 6.82246321,6.48268553 L8.0534436,6.83482093 C8.49471153,6.49715027 8.98051425,6.21474677 9.5005126,5.99794961 Z M12,15 C13.6568542,15 15,13.6568542 15,12 C15,10.3431458 13.6568542,9 12,9 C10.3431458,9 9,10.3431458 9,12 C9,13.6568542 10.3431458,15 12,15 Z\"\n  }));\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = StarredIcon;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Icon = require('./Icon');\n\nvar _Icon2 = _interopRequireDefault(_Icon);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction StarredIcon(props) {\n  return _react2.default.createElement(_Icon2.default, props, _react2.default.createElement('path', {\n    d: 'M12,16.1500001 L8.79729751,17.8337604 L8.79729751,17.8337604 C8.30845292,18.0907612 7.70382577,17.9028147 7.44682496,17.4139701 C7.34448589,17.2193097 7.30917121,16.9963416 7.34634806,16.779584 L7.95800981,13.2133223 L5.36696906,10.6876818 L5.36696906,10.6876818 C4.97148548,10.3021806 4.96339318,9.66906733 5.34889439,9.27358375 C5.50240299,9.11610012 5.70354541,9.01361294 5.92118244,8.98198843 L9.50191268,8.46167787 L11.1032639,5.21698585 L11.1032639,5.21698585 C11.3476862,4.72173219 11.9473121,4.51839319 12.4425657,4.76281548 C12.6397783,4.86014572 12.7994058,5.01977324 12.8967361,5.21698585 L14.4980873,8.46167787 L18.0788176,8.98198843 L18.0788176,8.98198843 C18.6253624,9.06140605 19.0040439,9.5688489 18.9246263,10.1153938 C18.8930018,10.3330308 18.7905146,10.5341732 18.6330309,10.6876818 L16.0419902,13.2133223 L16.6536519,16.779584 L16.6536519,16.779584 C16.747013,17.3239204 16.3814251,17.8408763 15.8370887,17.9342373 C15.620331,17.9714142 15.397363,17.9360995 15.2027025,17.8337604 L12,16.1500001 Z'\n  }));\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = StrikethroughIcon;\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Icon = require(\"./Icon\");\n\nvar _Icon2 = _interopRequireDefault(_Icon);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction StrikethroughIcon(props) {\n  return _react2.default.createElement(_Icon2.default, props, _react2.default.createElement(\"path\", {\n    d: \"M9.26756439,10 C9.09739429,9.70582663 9,9.36428714 9,9 C9,7.8954305 9.8954305,7 11,7 L16,7 C16.5522847,7 17,6.55228475 17,6 C17,5.44771525 16.5522847,5 16,5 L11,5 C8.790861,5 7,6.790861 7,9 C7,9.34529957 7.043753,9.68038008 7.12601749,10 L9.26756439,10 Z M16.8739825,14 C16.956247,14.3196199 17,14.6547004 17,15 C17,17.209139 15.209139,19 13,19 L8,19 C7.44771525,19 7,18.5522847 7,18 C7,17.4477153 7.44771525,17 8,17 L13,17 C14.1045695,17 15,16.1045695 15,15 C15,14.6357129 14.9026057,14.2941734 14.7324356,14 L16.8739825,14 Z M5.5,11.5 L18.5,11.5 C18.7761424,11.5 19,11.7238576 19,12 C19,12.2761424 18.7761424,12.5 18.5,12.5 L5.5,12.5 C5.22385763,12.5 5,12.2761424 5,12 C5,11.7238576 5.22385763,11.5 5.5,11.5 L5.5,11.5 Z\"\n  }));\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = TableIcon;\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Icon = require(\"./Icon\");\n\nvar _Icon2 = _interopRequireDefault(_Icon);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction TableIcon(props) {\n  return _react2.default.createElement(_Icon2.default, props, _react2.default.createElement(\"path\", {\n    d: \"M6,5 L18,5 C19.1045695,5 20,5.8954305 20,7 L20,17 C20,18.1045695 19.1045695,19 18,19 L6,19 C4.8954305,19 4,18.1045695 4,17 L4,7 C4,5.8954305 4.8954305,5 6,5 Z M6,7 L6,9 L11,9 L11,7 L6,7 Z M13,7 L13,9 L18,9 L18,7 L13,7 Z M6,11 L6,13 L11,13 L11,11 L6,11 Z M13,11 L13,13 L18,13 L18,11 L13,11 Z M6,15 L6,17 L11,17 L11,15 L6,15 Z M13,15 L13,17 L18,17 L18,15 L13,15 Z\"\n  }));\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = TeamIcon;\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Icon = require(\"./Icon\");\n\nvar _Icon2 = _interopRequireDefault(_Icon);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction TeamIcon(props) {\n  return _react2.default.createElement(_Icon2.default, props, _react2.default.createElement(\"path\", {\n    d: \"M14,20 L14,15 L10,15 L10,20 L7,20 C6.44771525,20 6,19.5522847 6,19 L6,5 C6,4.44771525 6.44771525,4 7,4 L17,4 C17.5522847,4 18,4.44771525 18,5 L18,19 C18,19.5522847 17.5522847,20 17,20 L14,20 Z M9,7 L9,9 L11,9 L11,7 L9,7 Z M13,7 L13,9 L15,9 L15,7 L13,7 Z M9,11 L9,13 L11,13 L11,11 L9,11 Z M13,11 L13,13 L15,13 L15,11 L13,11 Z\"\n  }));\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = TodoListIcon;\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Icon = require(\"./Icon\");\n\nvar _Icon2 = _interopRequireDefault(_Icon);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction TodoListIcon(props) {\n  return _react2.default.createElement(_Icon2.default, props, _react2.default.createElement(\"path\", {\n    d: \"M9.99992841,5.99992841 L19.0000716,5.99992841 L19.0000716,5.99992841 C19.5523168,5.99992841 20,6.4476116 20,6.99985681 L20,6.99985681 C20,7.55210202 19.5523168,7.99978522 19.0000716,7.99978522 L9.99992841,7.99978522 L9.99992841,7.99978522 C9.4476832,7.99978522 9,7.55210202 9,6.99985681 C9,6.4476116 9.4476832,5.99992841 9.99992841,5.99992841 L9.99992841,5.99992841 Z M9.99992841,15.9992125 L19.0000716,15.9992125 L19.0000716,15.9992125 C19.5523168,15.9992125 20,16.4468957 20,16.9991409 L20,16.9991409 L20,16.9991409 C20,17.5513861 19.5523168,17.9990693 19.0000716,17.9990693 L9.99992841,17.9990693 C9.4476832,17.9990693 9,17.5513861 9,16.9991409 C9,16.4468957 9.4476832,15.9992125 9.99992841,15.9992125 Z M9.99992841,10.9995704 L19.0000716,10.9995704 L19.0000716,10.9995704 C19.5523168,10.9995704 20,11.4472536 20,11.9994988 L20,11.9994988 C20,12.5517441 19.5523168,12.9994273 19.0000716,12.9994273 L9.99992841,12.9994273 C9.4476832,12.9994273 9,12.5517441 9,11.9994988 C9,11.4472536 9.4476832,10.9995704 9.99992841,10.9995704 Z M5.22935099,7.69420576 L7.09998441,5.20002786 C7.26566855,4.97911569 7.57906677,4.93434451 7.79997895,5.10002864 C8.02089112,5.26571278 8.0656623,5.579111 7.89997817,5.80002318 L5.64999574,8.79999974 C5.45636149,9.05817875 5.07249394,9.06801504 4.86589123,8.82009178 L3.61590099,7.3201035 C3.43912033,7.10796671 3.46778214,6.79268682 3.67991893,6.61590616 C3.89205572,6.4391255 4.20733561,6.46778731 4.38411627,6.6799241 L5.22935099,7.69420576 Z M5.22935099,12.6942058 L7.09998441,10.2000279 C7.26566855,9.97911569 7.57906677,9.93434451 7.79997895,10.1000286 C8.02089112,10.2657128 8.0656623,10.579111 7.89997817,10.8000232 L5.64999574,13.7999997 C5.45636149,14.0581787 5.07249394,14.068015 4.86589123,13.8200918 L3.61590099,12.3201035 C3.43912033,12.1079667 3.46778214,11.7926868 3.67991893,11.6159062 C3.89205572,11.4391255 4.20733561,11.4677873 4.38411627,11.6799241 L5.22935099,12.6942058 Z M5.22935099,17.6942058 L7.09998441,15.2000279 C7.26566855,14.9791157 7.57906677,14.9343445 7.79997895,15.1000286 C8.02089112,15.2657128 8.0656623,15.579111 7.89997817,15.8000232 L5.64999574,18.7999997 C5.45636149,19.0581787 5.07249394,19.068015 4.86589123,18.8200918 L3.61590099,17.3201035 C3.43912033,17.1079667 3.46778214,16.7926868 3.67991893,16.6159062 C3.89205572,16.4391255 4.20733561,16.4677873 4.38411627,16.6799241 L5.22935099,17.6942058 Z\"\n  }));\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = TrashIcon;\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Icon = require(\"./Icon\");\n\nvar _Icon2 = _interopRequireDefault(_Icon);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction TrashIcon(props) {\n  return _react2.default.createElement(_Icon2.default, props, _react2.default.createElement(\"path\", {\n    d: \"M10,6 L10,5 L10,5 C10,4.44771525 10.4477153,4 11,4 L13,4 C13.5522847,4 14,4.44771525 14,5 L14,6 L18,6 C18.5522847,6 19,6.44771525 19,7 C19,7.55228475 18.5522847,8 18,8 L17.8571429,8 L17.132679,18.1424941 C17.0579211,19.1891049 16.1870389,20 15.1377616,20 L8.86223841,20 C7.81296107,20 6.94207892,19.1891049 6.86732101,18.1424941 L6.14285714,8 L6,8 C5.44771525,8 5,7.55228475 5,7 C5,6.44771525 5.44771525,6 6,6 L6,6 L10,6 Z M8.86223841,18 L15.1377616,18 L15.8520473,8 L8.14795269,8 L8.86223841,18 Z\"\n  }));\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = UserIcon;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Icon = require('./Icon');\n\nvar _Icon2 = _interopRequireDefault(_Icon);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction UserIcon(props) {\n  return _react2.default.createElement(_Icon2.default, props, _react2.default.createElement('path', {\n    d: 'M12,11 C10,11 9,9.43299662 9,7.5 C9,5.56700338 9.5,4 12,4 C14.5,4 15,5.56700338 15,7.5 C15,9.43299662 14,11 12,11 Z M8.0085302,19 C6.8992496,19 6,18.1052949 6,17 C6,15 7,12 12,12 C17,12 18,15 18,17 C18,18.1045695 17.0980496,19 15.9914698,19 L8.0085302,19 Z'\n  }));\n}","\"use strict\";\n\nvar _AlignCenterIcon = require(\"./components/AlignCenterIcon\");\n\nvar _AlignCenterIcon2 = _interopRequireDefault(_AlignCenterIcon);\n\nvar _AlignLeftIcon = require(\"./components/AlignLeftIcon\");\n\nvar _AlignLeftIcon2 = _interopRequireDefault(_AlignLeftIcon);\n\nvar _AlignRightIcon = require(\"./components/AlignRightIcon\");\n\nvar _AlignRightIcon2 = _interopRequireDefault(_AlignRightIcon);\n\nvar _ArchiveIcon = require(\"./components/ArchiveIcon\");\n\nvar _ArchiveIcon2 = _interopRequireDefault(_ArchiveIcon);\n\nvar _BackIcon = require(\"./components/BackIcon\");\n\nvar _BackIcon2 = _interopRequireDefault(_BackIcon);\n\nvar _BillingIcon = require(\"./components/BillingIcon\");\n\nvar _BillingIcon2 = _interopRequireDefault(_BillingIcon);\n\nvar _BlockQuoteIcon = require(\"./components/BlockQuoteIcon\");\n\nvar _BlockQuoteIcon2 = _interopRequireDefault(_BlockQuoteIcon);\n\nvar _BoldIcon = require(\"./components/BoldIcon\");\n\nvar _BoldIcon2 = _interopRequireDefault(_BoldIcon);\n\nvar _BulletedListIcon = require(\"./components/BulletedListIcon\");\n\nvar _BulletedListIcon2 = _interopRequireDefault(_BulletedListIcon);\n\nvar _CheckboxIcon = require(\"./components/CheckboxIcon\");\n\nvar _CheckboxIcon2 = _interopRequireDefault(_CheckboxIcon);\n\nvar _CheckmarkIcon = require(\"./components/CheckmarkIcon\");\n\nvar _CheckmarkIcon2 = _interopRequireDefault(_CheckmarkIcon);\n\nvar _CloseIcon = require(\"./components/CloseIcon\");\n\nvar _CloseIcon2 = _interopRequireDefault(_CloseIcon);\n\nvar _CodeIcon = require(\"./components/CodeIcon\");\n\nvar _CodeIcon2 = _interopRequireDefault(_CodeIcon);\n\nvar _CollapsedIcon = require(\"./components/CollapsedIcon\");\n\nvar _CollapsedIcon2 = _interopRequireDefault(_CollapsedIcon);\n\nvar _CollectionIcon = require(\"./components/CollectionIcon\");\n\nvar _CollectionIcon2 = _interopRequireDefault(_CollectionIcon);\n\nvar _DocumentIcon = require(\"./components/DocumentIcon\");\n\nvar _DocumentIcon2 = _interopRequireDefault(_DocumentIcon);\n\nvar _EditIcon = require(\"./components/EditIcon\");\n\nvar _EditIcon2 = _interopRequireDefault(_EditIcon);\n\nvar _EmailIcon = require(\"./components/EmailIcon\");\n\nvar _EmailIcon2 = _interopRequireDefault(_EmailIcon);\n\nvar _ExpandedIcon = require(\"./components/ExpandedIcon\");\n\nvar _ExpandedIcon2 = _interopRequireDefault(_ExpandedIcon);\n\nvar _GoToIcon = require(\"./components/GoToIcon\");\n\nvar _GoToIcon2 = _interopRequireDefault(_GoToIcon);\n\nvar _HashtagIcon = require(\"./components/HashtagIcon\");\n\nvar _HashtagIcon2 = _interopRequireDefault(_HashtagIcon);\n\nvar _Heading1Icon = require(\"./components/Heading1Icon\");\n\nvar _Heading1Icon2 = _interopRequireDefault(_Heading1Icon);\n\nvar _Heading2Icon = require(\"./components/Heading2Icon\");\n\nvar _Heading2Icon2 = _interopRequireDefault(_Heading2Icon);\n\nvar _HomeIcon = require(\"./components/HomeIcon\");\n\nvar _HomeIcon2 = _interopRequireDefault(_HomeIcon);\n\nvar _HorizontalRuleIcon = require(\"./components/HorizontalRuleIcon\");\n\nvar _HorizontalRuleIcon2 = _interopRequireDefault(_HorizontalRuleIcon);\n\nvar _Icon = require(\"./components/Icon\");\n\nvar _Icon2 = _interopRequireDefault(_Icon);\n\nvar _ImageIcon = require(\"./components/ImageIcon\");\n\nvar _ImageIcon2 = _interopRequireDefault(_ImageIcon);\n\nvar _InsertAboveIcon = require(\"./components/InsertAboveIcon\");\n\nvar _InsertAboveIcon2 = _interopRequireDefault(_InsertAboveIcon);\n\nvar _InsertBelowIcon = require(\"./components/InsertBelowIcon\");\n\nvar _InsertBelowIcon2 = _interopRequireDefault(_InsertBelowIcon);\n\nvar _InsertLeftIcon = require(\"./components/InsertLeftIcon\");\n\nvar _InsertLeftIcon2 = _interopRequireDefault(_InsertLeftIcon);\n\nvar _InsertRightIcon = require(\"./components/InsertRightIcon\");\n\nvar _InsertRightIcon2 = _interopRequireDefault(_InsertRightIcon);\n\nvar _ItalicIcon = require(\"./components/ItalicIcon\");\n\nvar _ItalicIcon2 = _interopRequireDefault(_ItalicIcon);\n\nvar _KeyboardIcon = require(\"./components/KeyboardIcon\");\n\nvar _KeyboardIcon2 = _interopRequireDefault(_KeyboardIcon);\n\nvar _LinkIcon = require(\"./components/LinkIcon\");\n\nvar _LinkIcon2 = _interopRequireDefault(_LinkIcon);\n\nvar _MenuIcon = require(\"./components/MenuIcon\");\n\nvar _MenuIcon2 = _interopRequireDefault(_MenuIcon);\n\nvar _MoonIcon = require(\"./components/MoonIcon\");\n\nvar _MoonIcon2 = _interopRequireDefault(_MoonIcon);\n\nvar _MoreIcon = require(\"./components/MoreIcon\");\n\nvar _MoreIcon2 = _interopRequireDefault(_MoreIcon);\n\nvar _NewDocumentIcon = require(\"./components/NewDocumentIcon\");\n\nvar _NewDocumentIcon2 = _interopRequireDefault(_NewDocumentIcon);\n\nvar _NextIcon = require(\"./components/NextIcon\");\n\nvar _NextIcon2 = _interopRequireDefault(_NextIcon);\n\nvar _OpenIcon = require(\"./components/OpenIcon\");\n\nvar _OpenIcon2 = _interopRequireDefault(_OpenIcon);\n\nvar _OrderedListIcon = require(\"./components/OrderedListIcon\");\n\nvar _OrderedListIcon2 = _interopRequireDefault(_OrderedListIcon);\n\nvar _PadlockIcon = require(\"./components/PadlockIcon\");\n\nvar _PadlockIcon2 = _interopRequireDefault(_PadlockIcon);\n\nvar _PinIcon = require(\"./components/PinIcon\");\n\nvar _PinIcon2 = _interopRequireDefault(_PinIcon);\n\nvar _PlusIcon = require(\"./components/PlusIcon\");\n\nvar _PlusIcon2 = _interopRequireDefault(_PlusIcon);\n\nvar _PrivateCollectionIcon = require(\"./components/PrivateCollectionIcon\");\n\nvar _PrivateCollectionIcon2 = _interopRequireDefault(_PrivateCollectionIcon);\n\nvar _ProfileIcon = require(\"./components/ProfileIcon\");\n\nvar _ProfileIcon2 = _interopRequireDefault(_ProfileIcon);\n\nvar _SearchIcon = require(\"./components/SearchIcon\");\n\nvar _SearchIcon2 = _interopRequireDefault(_SearchIcon);\n\nvar _SettingsIcon = require(\"./components/SettingsIcon\");\n\nvar _SettingsIcon2 = _interopRequireDefault(_SettingsIcon);\n\nvar _StarredIcon = require(\"./components/StarredIcon\");\n\nvar _StarredIcon2 = _interopRequireDefault(_StarredIcon);\n\nvar _StrikethroughIcon = require(\"./components/StrikethroughIcon\");\n\nvar _StrikethroughIcon2 = _interopRequireDefault(_StrikethroughIcon);\n\nvar _TableIcon = require(\"./components/TableIcon\");\n\nvar _TableIcon2 = _interopRequireDefault(_TableIcon);\n\nvar _TeamIcon = require(\"./components/TeamIcon\");\n\nvar _TeamIcon2 = _interopRequireDefault(_TeamIcon);\n\nvar _TodoListIcon = require(\"./components/TodoListIcon\");\n\nvar _TodoListIcon2 = _interopRequireDefault(_TodoListIcon);\n\nvar _TrashIcon = require(\"./components/TrashIcon\");\n\nvar _TrashIcon2 = _interopRequireDefault(_TrashIcon);\n\nvar _UserIcon = require(\"./components/UserIcon\");\n\nvar _UserIcon2 = _interopRequireDefault(_UserIcon);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nmodule.exports = {\n  AlignCenterIcon: _AlignCenterIcon2.default,\n  AlignLeftIcon: _AlignLeftIcon2.default,\n  AlignRightIcon: _AlignRightIcon2.default,\n  ArchiveIcon: _ArchiveIcon2.default,\n  BackIcon: _BackIcon2.default,\n  BillingIcon: _BillingIcon2.default,\n  BlockQuoteIcon: _BlockQuoteIcon2.default,\n  BoldIcon: _BoldIcon2.default,\n  BulletedListIcon: _BulletedListIcon2.default,\n  CheckboxIcon: _CheckboxIcon2.default,\n  CheckmarkIcon: _CheckmarkIcon2.default,\n  CloseIcon: _CloseIcon2.default,\n  CodeIcon: _CodeIcon2.default,\n  CollapsedIcon: _CollapsedIcon2.default,\n  CollectionIcon: _CollectionIcon2.default,\n  DocumentIcon: _DocumentIcon2.default,\n  EditIcon: _EditIcon2.default,\n  EmailIcon: _EmailIcon2.default,\n  ExpandedIcon: _ExpandedIcon2.default,\n  GoToIcon: _GoToIcon2.default,\n  HashtagIcon: _HashtagIcon2.default,\n  Heading1Icon: _Heading1Icon2.default,\n  Heading2Icon: _Heading2Icon2.default,\n  HomeIcon: _HomeIcon2.default,\n  HorizontalRuleIcon: _HorizontalRuleIcon2.default,\n  Icon: _Icon2.default,\n  ImageIcon: _ImageIcon2.default,\n  InsertAboveIcon: _InsertAboveIcon2.default,\n  InsertBelowIcon: _InsertBelowIcon2.default,\n  InsertLeftIcon: _InsertLeftIcon2.default,\n  InsertRightIcon: _InsertRightIcon2.default,\n  ItalicIcon: _ItalicIcon2.default,\n  KeyboardIcon: _KeyboardIcon2.default,\n  LinkIcon: _LinkIcon2.default,\n  MenuIcon: _MenuIcon2.default,\n  MoonIcon: _MoonIcon2.default,\n  MoreIcon: _MoreIcon2.default,\n  NewDocumentIcon: _NewDocumentIcon2.default,\n  NextIcon: _NextIcon2.default,\n  OpenIcon: _OpenIcon2.default,\n  OrderedListIcon: _OrderedListIcon2.default,\n  PadlockIcon: _PadlockIcon2.default,\n  PinIcon: _PinIcon2.default,\n  PlusIcon: _PlusIcon2.default,\n  PrivateCollectionIcon: _PrivateCollectionIcon2.default,\n  ProfileIcon: _ProfileIcon2.default,\n  SearchIcon: _SearchIcon2.default,\n  SettingsIcon: _SettingsIcon2.default,\n  StarredIcon: _StarredIcon2.default,\n  StrikethroughIcon: _StrikethroughIcon2.default,\n  TableIcon: _TableIcon2.default,\n  TeamIcon: _TeamIcon2.default,\n  TodoListIcon: _TodoListIcon2.default,\n  TrashIcon: _TrashIcon2.default,\n  UserIcon: _UserIcon2.default\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _urls = require(\"./urls\");\n\nvar _hashtagRegex = require(\"hashtag-regex\");\n\nvar _hashtagRegex2 = _interopRequireDefault(_hashtagRegex);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n/**\n * Ported from:\n *   https://github.com/chjj/marked/blob/49b7eaca/lib/marked.js\n * TODO:\n *   Use ES6 classes\n *   Add flow annotations\n */\n// we need to convert the regex supplied by the dependency to have the\n// entire hashtag contents within a capture group and begin with newline\n\n\nvar hashtag = new RegExp((0, _hashtagRegex2.default)().source.replace(/^/, \"^(\").replace(/$/, \")\"));\nvar EMPTY_PARAGRAPH_NODES = [{\n  object: \"text\",\n  leaves: [{\n    object: \"leaf\",\n    text: \"\",\n    marks: []\n  }]\n}];\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nvar assign = Object.assign || function (obj) {\n  var i = 1;\n\n  for (; i < arguments.length; i++) {\n    var target = arguments[i];\n\n    for (var key in target) {\n      if (hasOwnProperty.call(target, key)) {\n        obj[key] = target[key];\n      }\n    }\n  }\n\n  return obj;\n};\n\nvar flatten = function flatten(ary) {\n  return [].concat.apply([], ary);\n};\n\nvar noop = function noop() {};\n\nnoop.exec = noop;\nvar defaults = {\n  gfm: true,\n  tables: true,\n  breaks: false,\n  pedantic: false,\n  smartLists: true,\n  silent: false,\n  renderer: new Renderer()\n};\n/**\n * Block-Level Grammar\n */\n\nvar block = {\n  newline: /^\\n+/,\n  code: /^( {4}[^\\n]+\\n*)+/,\n  fences: noop,\n  hr: /^( *[-*_]){3,} *(?:\\n|$)/,\n  heading: /^ *(#{1,6}) *([^\\n]+?)? *#* *(?:\\n|$)/,\n  nptable: noop,\n  blockquote: /^( *>[^\\n]+(\\n(?!def)[^\\n])*(?:\\n|$))+/,\n  list: /^( *)(bull) [\\s\\S]+?(?:hr|def|\\n(?! )(?!\\1bull )\\n|\\s*$)/,\n  def: /^ *\\[([^\\]]+)\\]: *<?([^\\s>]+)>?(?: +[\"(]([^\\n]+)[\")])? *(?:\\n|$)/,\n  paragraph: /^((?:[^\\n]+(?!hr|heading|blockquote|def))+)(?:\\n|$)/,\n  text: /^[^\\n]+/\n};\nblock.bullet = /(?:[*+-]|\\d+\\.|\\[[x\\s]\\])/;\nblock.item = /^( *)(bull) [^\\n]*(?:\\n(?!\\1bull )[^\\n]*)*/;\nblock.item = replace(block.item, \"gm\")(/bull/g, block.bullet)();\nblock.list = replace(block.list)(/bull/g, block.bullet)(\"hr\", \"\\\\n+(?=\\\\1?(?:[-*_] *){3,}(?:\\\\n+|$))\")(\"def\", \"\\\\n+(?=\" + block.def.source + \")\")();\nblock.blockquote = replace(block.blockquote)(\"def\", block.def)();\nblock.paragraph = replace(block.paragraph)(\"hr\", block.hr)(\"heading\", block.heading)(\"blockquote\", block.blockquote)(\"def\", block.def)();\n/**\n * Normal Block Grammar\n */\n\nblock.normal = assign({}, block);\n/**\n * GFM Block Grammar\n */\n\nblock.gfm = assign({}, block.normal, {\n  fences: /^ *(`{3,}|~{3,})[ \\.]*(\\S+)? *\\n([\\s\\S]+?)\\s*\\1 *(?:\\n|$)/,\n  paragraph: /^/,\n  heading: /^ *(#{1,6}) +([^\\n]+?)? *#* *(?:\\n{1,2}|$)/\n});\nblock.gfm.paragraph = replace(block.paragraph)(\"(?!\", \"(?!\" + block.gfm.fences.source.replace(\"\\\\1\", \"\\\\2\") + \"|\" + block.list.source.replace(\"\\\\1\", \"\\\\3\") + \"|\")();\n/**\n * GFM + Tables Block Grammar\n */\n\nblock.tables = assign({}, block.gfm, {\n  nptable: /^ *(\\S.*\\|.*)\\n *([-:]+ *\\|[-| :]*)\\n((?:.*\\|.*(?:\\n|$))*)/,\n  table: /^ *\\|(.+)\\n *\\|( *[-:]+[-| :]*)\\n((?: *\\|.*(?:\\n|$))*)/\n});\n/**\n * Block Lexer\n */\n\nfunction Lexer(options) {\n  this.tokens = [];\n  this.tokens.links = {};\n  this.options = assign({}, options || defaults);\n  this.rules = block.normal;\n\n  if (this.options.gfm) {\n    if (this.options.tables) {\n      this.rules = block.tables;\n    } else {\n      this.rules = block.gfm;\n    }\n  }\n}\n/**\n * Expose Block Rules\n */\n\n\nLexer.rules = block;\n/**\n * Static Lex Method\n */\n\nLexer.parse = function (src, options) {\n  var lexer = new Lexer(options);\n  return lexer.parse(src);\n};\n/**\n * Preprocessing\n */\n\n\nLexer.prototype.parse = function (src) {\n  src = src.replace(/\\r\\n|\\r/g, \"\\n\").replace(/\\t/g, \"    \").replace(/\\u00a0/g, \" \").replace(/\\u2424/g, \"\\n\");\n  return this.token(src, true);\n};\n/**\n * Lexing\n */\n\n\nLexer.prototype.token = function (src, top, bq) {\n  var next;\n  var loose;\n  var cap;\n  var bull;\n  var b;\n  var item;\n  var space;\n  var i;\n  var l;\n  src = src.replace(/^ +$/gm, \"\");\n  src = src.replace(/^\\n/, \"\");\n\n  while (src) {\n    // newline\n    if (cap = this.rules.newline.exec(src)) {\n      src = src.substring(cap[0].length);\n      var newlines = cap[0].length;\n\n      if (top) {\n        for (var _i = 0; _i < newlines; _i++) {\n          this.tokens.push({\n            type: \"paragraph\",\n            text: \"\"\n          });\n        }\n      }\n    } // code\n\n\n    if (cap = this.rules.code.exec(src)) {\n      src = src.substring(cap[0].length);\n      cap = cap[0].replace(/^ {4}/gm, \"\");\n      this.tokens.push({\n        type: \"code\",\n        text: !this.options.pedantic ? cap.replace(/\\n+$/, \"\") : cap\n      });\n      continue;\n    } // fences (gfm)\n\n\n    if (cap = this.rules.fences.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: \"code\",\n        lang: cap[2],\n        text: cap[3]\n      });\n      continue;\n    } // heading\n\n\n    if (cap = this.rules.heading.exec(src)) {\n      src = src.substring(cap[0].length);\n      var last = this.tokens[this.tokens.length - 1];\n\n      if (last && last.type === \"paragraph\" && last.text === \"\") {\n        this.tokens.splice(-1, 1);\n      }\n\n      this.tokens.push({\n        type: \"heading\",\n        depth: cap[1].length,\n        text: cap[2]\n      });\n      continue;\n    } // table no leading pipe (gfm)\n\n\n    if (top && (cap = this.rules.nptable.exec(src))) {\n      src = src.substring(cap[0].length);\n      item = {\n        type: \"table\",\n        header: splitCells(cap[1].replace(/^ *| *\\| *$/g, \"\")),\n        align: cap[2].replace(/^ *|\\| *$/g, \"\").split(/ *\\| */),\n        cells: cap[3].replace(/\\n$/, \"\").split(\"\\n\")\n      };\n\n      for (i = 0; i < item.align.length; i++) {\n        if (/^ *-+: *$/.test(item.align[i])) {\n          item.align[i] = \"right\";\n        } else if (/^ *:-+: *$/.test(item.align[i])) {\n          item.align[i] = \"center\";\n        } else if (/^ *:-+ *$/.test(item.align[i])) {\n          item.align[i] = \"left\";\n        } else {\n          item.align[i] = null;\n        }\n      }\n\n      for (i = 0; i < item.cells.length; i++) {\n        item.cells[i] = splitCells(item.cells[i]);\n      }\n\n      this.tokens.push(item);\n      continue;\n    } // hr\n\n\n    if (cap = this.rules.hr.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: \"hr\"\n      });\n      continue;\n    } // blockquote\n\n\n    if (cap = this.rules.blockquote.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: \"blockquote_start\"\n      });\n      cap = cap[0].replace(/^ *> ?/gm, \"\"); // Pass `top` to keep the current\n      // \"toplevel\" state. This is exactly\n      // how markdown.pl works.\n\n      this.token(cap, top, true);\n      this.tokens.push({\n        type: \"blockquote_end\"\n      });\n      continue;\n    } // list\n\n\n    if (cap = this.rules.list.exec(src)) {\n      src = src.substring(cap[0].length);\n      bull = cap[2];\n      var ordered = bull.length > 1;\n      var todo = bull[0] === \"[\";\n      this.tokens.push({\n        type: \"list_start\",\n        style: todo ? \"todo\" : ordered ? \"ordered\" : \"bulleted\"\n      }); // Get each top-level item.\n\n      cap = cap[0].match(this.rules.item);\n      next = false;\n      l = cap.length;\n      i = 0;\n\n      for (; i < l; i++) {\n        item = cap[i]; // Remove the list item's bullet\n        // so it is seen as the next token.\n\n        var checked = todo ? !!item.match(/^ *(\\[x\\])/) : undefined;\n        space = item.length;\n        item = item.replace(/^ *([*+-]|\\d+\\.|\\[[x\\s]\\]) +/, \"\"); // Outdent whatever the\n        // list item contains. Hacky.\n\n        if (~item.indexOf(\"\\n \")) {\n          space -= item.length;\n          item = !this.options.pedantic ? item.replace(new RegExp(\"^ {1,\" + space + \"}\", \"gm\"), \"\") : item.replace(/^ {1,4}/gm, \"\");\n        } // Determine whether the next list item belongs here.\n        // Backpedal if it does not belong in this list.\n\n\n        if (this.options.smartLists && i !== l - 1) {\n          b = block.bullet.exec(cap[i + 1])[0];\n\n          if (bull !== b && !(bull.length > 1 && b.length > 1)) {\n            src = cap.slice(i + 1).join(\"\\n\") + src;\n            i = l - 1;\n          }\n        } // Determine whether item is loose or not.\n        // Use: /(^|\\n)(?! )[^\\n]+\\n\\n(?!\\s*$)/\n        // for discount behavior.\n\n\n        loose = next || /\\n\\n(?!\\s*$)/.test(item);\n\n        if (i !== l - 1) {\n          next = item.charAt(item.length - 1) === \"\\n\";\n\n          if (!loose) {\n            loose = next;\n          }\n        }\n\n        this.tokens.push({\n          checked: checked,\n          type: loose ? \"loose_item_start\" : \"list_item_start\"\n        }); // Recurse.\n\n        this.token(item, false, bq);\n        this.tokens.push({\n          type: \"list_item_end\"\n        });\n      }\n\n      this.tokens.push({\n        type: \"list_end\"\n      });\n      continue;\n    } // def\n\n\n    if (!bq && top && (cap = this.rules.def.exec(src))) {\n      src = src.substring(cap[0].length);\n      this.tokens.links[cap[1].toLowerCase()] = {\n        href: cap[2],\n        title: cap[3]\n      };\n      continue;\n    } // table (gfm)\n\n\n    if (top && (cap = this.rules.table.exec(src))) {\n      src = src.substring(cap[0].length);\n      item = {\n        type: \"table\",\n        header: splitCells(cap[1].replace(/^ *| *\\| *$/g, \"\")),\n        align: cap[2].replace(/^ *|\\| *$/g, \"\").split(/ *\\| */),\n        cells: cap[3].replace(/(?: *\\| *)?\\n$/, \"\").split(\"\\n\")\n      };\n\n      for (i = 0; i < item.align.length; i++) {\n        if (/^ *-+: *$/.test(item.align[i])) {\n          item.align[i] = \"right\";\n        } else if (/^ *:-+: *$/.test(item.align[i])) {\n          item.align[i] = \"center\";\n        } else if (/^ *:-+ *$/.test(item.align[i])) {\n          item.align[i] = \"left\";\n        } else {\n          item.align[i] = null;\n        }\n      }\n\n      for (i = 0; i < item.cells.length; i++) {\n        item.cells[i] = splitCells(item.cells[i].replace(/^ *\\| *| *\\| *$/g, \"\"));\n      }\n\n      this.tokens.push(item);\n      continue;\n    } // top-level paragraph\n\n\n    if (top && (cap = this.rules.paragraph.exec(src))) {\n      src = src.substring(cap[0].length);\n      var endsWithNewline = cap[1].charAt(cap[1].length - 1) === \"\\n\";\n      this.tokens.push({\n        type: \"paragraph\",\n        text: endsWithNewline ? cap[1].slice(0, -1) : cap[1]\n      });\n\n      if (endsWithNewline) {\n        this.tokens.push({\n          type: \"paragraph\",\n          text: \"\"\n        });\n      }\n\n      continue;\n    } // text\n\n\n    if (cap = this.rules.text.exec(src)) {\n      // Top-level should never reach here.\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: \"text\",\n        text: cap[0]\n      });\n      continue;\n    }\n\n    if (src) {\n      throw new Error(\"Infinite loop on byte: \" + src.charCodeAt(0));\n    }\n  }\n\n  return this.tokens;\n};\n/**\n * Inline-Level Grammar\n */\n\n\nvar inline = {\n  escape: /^\\\\([\\\\`*{}\\[\\]()#+\\-.!_>])/,\n  link: /^!?\\[(inside)\\]\\(href\\)/,\n  hashtag: hashtag,\n  reflink: /^!?\\[(inside)\\]\\s*\\[([^\\]]*)\\]/,\n  nolink: /^!?\\[((?:\\[[^\\]]*\\]|[^\\[\\]])*)\\]/,\n  strong: /^\\*\\*([\\s\\S]+?)\\*\\*(?!\\*)/,\n  underlined: /^__([\\s\\S]+?)__(?!_)/,\n  em: /^\\b_((?:__|[\\s\\S])+?)_\\b|^\\*((?:\\*\\*|[\\s\\S])+?)\\*(?!\\*)/,\n  code: /^(`+)\\s*([\\s\\S]*?[^`])\\s*\\1(?!`)/,\n  br: /^ {2,}\\n(?!\\s*$)/,\n  del: noop,\n  ins: noop,\n  text: /^[\\s\\S]+?(?=[\\\\<!\\[_*#`]| {2,}\\n|$)/\n};\ninline._inside = /(?:\\[[^\\]]*\\]|[^\\[\\]]|\\](?=[^\\[]*\\]))*/;\ninline._href = /\\s*<?([\\s\\S]*?)>?(?:\\s+['\"]([\\s\\S]*?)['\"])?\\s*/;\ninline.link = replace(inline.link)(\"inside\", inline._inside)(\"href\", inline._href)();\ninline.reflink = replace(inline.reflink)(\"inside\", inline._inside)();\n/**\n * Normal Inline Grammar\n */\n\ninline.normal = assign({}, inline);\n/**\n * Pedantic Inline Grammar\n */\n\ninline.pedantic = assign({}, inline.normal, {\n  strong: /^__(?=\\S)([\\s\\S]*?\\S)__(?!_)|^\\*\\*(?=\\S)([\\s\\S]*?\\S)\\*\\*(?!\\*)/,\n  em: /^_(?=\\S)([\\s\\S]*?\\S)_(?!_)|^\\*(?=\\S)([\\s\\S]*?\\S)\\*(?!\\*)/\n});\n/**\n * GFM Inline Grammar\n */\n\ninline.gfm = assign({}, inline.normal, {\n  escape: replace(inline.escape)(\"])\", \"~|])\")(),\n  del: /^~~(?=\\S)([\\s\\S]*?\\S)~~/,\n  ins: /^\\+\\+(?=\\S)([\\s\\S]*?\\S)\\+\\+/,\n  text: replace(inline.text)(\"]|\", \"~+]|\")()\n});\n/**\n * GFM + Line Breaks Inline Grammar\n */\n\ninline.breaks = assign({}, inline.gfm, {\n  br: replace(inline.br)(\"{2,}\", \"*\")(),\n  text: replace(inline.gfm.text)(\"{2,}\", \"*\")()\n});\n/**\n * Inline Lexer & Compiler\n */\n\nfunction InlineLexer(links, options) {\n  this.options = assign({}, options || defaults);\n  this.links = links;\n  this.rules = inline.normal;\n  this.renderer = this.options.renderer || new Renderer();\n  this.renderer.options = this.options;\n\n  if (!this.links) {\n    throw new Error(\"Tokens array requires a `links` property.\");\n  }\n\n  if (this.options.gfm) {\n    if (this.options.breaks) {\n      this.rules = inline.breaks;\n    } else {\n      this.rules = inline.gfm;\n    }\n  } else if (this.options.pedantic) {\n    this.rules = inline.pedantic;\n  }\n}\n/**\n * Expose Inline Rules\n */\n\n\nInlineLexer.rules = inline;\n/**\n * Static Lexing/Compiling Method\n */\n\nInlineLexer.parse = function (src, links, options) {\n  var inline = new InlineLexer(links, options);\n  return inline.parse(src);\n};\n/**\n * Lexing/Compiling\n */\n\n\nInlineLexer.prototype.parse = function (src) {\n  var out = [];\n  var link;\n  var cap;\n\n  while (src) {\n    // escape\n    if (cap = this.rules.escape.exec(src)) {\n      src = src.substring(cap[0].length);\n      out.push({\n        object: \"text\",\n        leaves: [{\n          text: cap[1]\n        }]\n      });\n      continue;\n    } // link\n\n\n    if (cap = this.rules.link.exec(src)) {\n      src = src.substring(cap[0].length);\n      out.push(this.outputLink(cap, {\n        href: cap[2],\n        title: cap[3]\n      }));\n      continue;\n    } // hashtag\n\n\n    if (cap = this.rules.hashtag.exec(src)) {\n      src = src.substring(cap[0].length);\n      out.push(this.renderer.hashtag(this.parse(\"\\\\\" + cap[1])));\n      continue;\n    } // reflink, nolink\n    // TODO\n\n\n    if ((cap = this.rules.reflink.exec(src)) || (cap = this.rules.nolink.exec(src))) {\n      src = src.substring(cap[0].length);\n      link = (cap[2] || cap[1]).replace(/\\s+/g, \" \");\n      link = this.links[link.toLowerCase()];\n\n      if (!link || !link.href) {\n        out.push({\n          object: \"text\",\n          leaves: [{\n            text: cap[0].charAt(0)\n          }]\n        });\n        src = cap[0].substring(1) + src;\n        continue;\n      }\n\n      out.push(this.outputLink(cap, link));\n      continue;\n    } // underlined\n\n\n    if (cap = this.rules.underlined.exec(src)) {\n      src = src.substring(cap[0].length);\n      out.push(this.renderer.underlined(this.parse(cap[2] || cap[1])));\n      continue;\n    } // strong\n\n\n    if (cap = this.rules.strong.exec(src)) {\n      src = src.substring(cap[0].length);\n      out.push(this.renderer.strong(this.parse(cap[2] || cap[1])));\n      continue;\n    } // em\n\n\n    if (cap = this.rules.em.exec(src)) {\n      src = src.substring(cap[0].length);\n      out.push(this.renderer.em(this.parse(cap[2] || cap[1])));\n      continue;\n    } // code\n\n\n    if (cap = this.rules.code.exec(src)) {\n      src = src.substring(cap[0].length);\n      out.push(this.renderer.codespan(cap[2]));\n      continue;\n    } // br\n\n\n    if (cap = this.rules.br.exec(src)) {\n      src = src.substring(cap[0].length);\n      out.push(this.renderer.br());\n      continue;\n    } // del (gfm)\n\n\n    if (cap = this.rules.del.exec(src)) {\n      src = src.substring(cap[0].length);\n      out.push(this.renderer.del(this.parse(cap[1])));\n      continue;\n    } // ins (gfm extended)\n\n\n    if (cap = this.rules.ins.exec(src)) {\n      src = src.substring(cap[0].length);\n      out.push(this.renderer.ins(this.parse(cap[1])));\n      continue;\n    } // text\n\n\n    if (cap = this.rules.text.exec(src)) {\n      src = src.substring(cap[0].length);\n      out.push(this.renderer.text(cap[0]));\n      continue;\n    }\n\n    if (src) {\n      throw new Error(\"Infinite loop on byte: \" + src.charCodeAt(0));\n    }\n  }\n\n  return out;\n};\n/**\n * Compile Link\n */\n\n\nInlineLexer.prototype.outputLink = function (cap, link) {\n  var href = link.href;\n  var title = link.title;\n  return cap[0].charAt(0) !== \"!\" ? this.renderer.link(href, title, this.parse(cap[1])) : this.renderer.image(href, title, cap[1]);\n};\n/**\n * Renderer\n */\n\n\nfunction Renderer(options) {\n  this.options = options || {};\n}\n\nRenderer.prototype.groupTextInLeaves = function (childNode) {\n  var _this = this;\n\n  var node = flatten(childNode);\n  var output = node.reduce(function (acc, current) {\n    var accLast = acc.length - 1;\n    var lastIsText = accLast >= 0 && acc[accLast] && acc[accLast][\"object\"] === \"text\";\n\n    if (current.text) {\n      if (lastIsText) {\n        // If the previous item was a text object, push the current text to it's range\n        acc[accLast].leaves.push(current);\n        return acc;\n      } else {\n        // Else, create a new text object\n        acc.push({\n          object: \"text\",\n          leaves: [current]\n        });\n        return acc;\n      }\n    } else if (current instanceof Array) {\n      return acc.concat(_this.groupTextInLeaves(current));\n    } else {\n      acc.push(current);\n      return acc;\n    }\n  }, []);\n  if (!output.length) return EMPTY_PARAGRAPH_NODES;\n  return output;\n};\n\nRenderer.prototype.code = function (childNode, language) {\n  var data = {};\n\n  if (language) {\n    data.language = language;\n  }\n\n  return {\n    object: \"block\",\n    type: \"code\",\n    data: data,\n    nodes: this.groupTextInLeaves(childNode)\n  };\n};\n\nRenderer.prototype.blockquote = function (childNode) {\n  return {\n    object: \"block\",\n    type: \"block-quote\",\n    nodes: this.groupTextInLeaves(childNode)\n  };\n};\n\nRenderer.prototype.heading = function (childNode, level) {\n  return {\n    object: \"block\",\n    type: \"heading\" + level,\n    nodes: this.groupTextInLeaves(childNode)\n  };\n};\n\nRenderer.prototype.hr = function () {\n  return {\n    object: \"block\",\n    type: \"horizontal-rule\",\n    isVoid: true,\n    nodes: EMPTY_PARAGRAPH_NODES\n  };\n};\n\nRenderer.prototype.list = function (childNode, style) {\n  return {\n    object: \"block\",\n    type: style + \"-list\",\n    nodes: childNode\n  };\n};\n\nRenderer.prototype.listitem = function (childNode) {\n  var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var data = void 0;\n\n  if (flags.checked !== undefined) {\n    data = {\n      checked: flags.checked\n    };\n  }\n\n  return {\n    object: \"block\",\n    type: \"list-item\",\n    data: data,\n    nodes: this.groupTextInLeaves(childNode)\n  };\n};\n\nRenderer.prototype.paragraph = function (childNode) {\n  return {\n    object: \"block\",\n    type: \"paragraph\",\n    nodes: this.groupTextInLeaves(childNode)\n  };\n};\n\nRenderer.prototype.table = function (childNode) {\n  return {\n    object: \"block\",\n    type: \"table\",\n    nodes: childNode\n  };\n};\n\nRenderer.prototype.tablerow = function (childNode) {\n  return {\n    object: \"block\",\n    type: \"table-row\",\n    nodes: childNode\n  };\n};\n\nRenderer.prototype.tablecell = function (childNode, flags) {\n  var align = flags.align;\n  return {\n    object: \"block\",\n    data: {\n      align: align\n    },\n    type: \"table-cell\",\n    nodes: [this.paragraph(childNode)]\n  };\n};\n\nfunction applyMark(childNode, type) {\n  return childNode.map(function (node) {\n    if (node.object === \"inline\") {\n      node.nodes = applyMark(node.nodes, type);\n    } else if (node.object === \"text\") {\n      node.leaves = applyMark(node.leaves, type);\n    } else if (node.marks) {\n      node.marks.push({\n        type: type\n      });\n    } else {\n      node.marks = [{\n        type: type\n      }];\n    }\n\n    return node;\n  });\n} // span level renderer\n\n\nRenderer.prototype.underlined = function (childNode) {\n  return applyMark(childNode, \"underlined\");\n};\n\nRenderer.prototype.strong = function (childNode) {\n  return applyMark(childNode, \"bold\");\n};\n\nRenderer.prototype.em = function (childNode) {\n  return applyMark(childNode, \"italic\");\n};\n\nRenderer.prototype.codespan = function (text) {\n  return {\n    text: text,\n    marks: [{\n      type: \"code\"\n    }]\n  };\n};\n\nRenderer.prototype.br = function () {\n  return {\n    text: \" \"\n  };\n};\n\nRenderer.prototype.del = function (childNode) {\n  return applyMark(childNode, \"deleted\");\n};\n\nRenderer.prototype.ins = function (childNode) {\n  return applyMark(childNode, \"inserted\");\n};\n\nRenderer.prototype.hashtag = function (childNode) {\n  return {\n    object: \"inline\",\n    type: \"hashtag\",\n    nodes: this.groupTextInLeaves(childNode)\n  };\n};\n\nRenderer.prototype.link = function (href, title, childNode) {\n  var data = {\n    href: (0, _urls.decode)(href)\n  };\n\n  if (title) {\n    data.title = title;\n  }\n\n  return {\n    object: \"inline\",\n    type: \"link\",\n    nodes: this.groupTextInLeaves(childNode),\n    data: data\n  };\n};\n\nRenderer.prototype.image = function (href, title, alt) {\n  var data = {\n    src: (0, _urls.decode)(href)\n  };\n\n  if (title) {\n    data.title = title;\n  }\n\n  if (alt) {\n    data.alt = alt;\n  }\n\n  return {\n    object: \"block\",\n    type: \"image\",\n    nodes: EMPTY_PARAGRAPH_NODES,\n    isVoid: true,\n    data: data\n  };\n};\n\nRenderer.prototype.text = function (childNode) {\n  return {\n    text: childNode\n  };\n};\n/**\n * Parsing & Compiling\n */\n\n\nfunction Parser(options) {\n  this.tokens = [];\n  this.token = null;\n  this.options = assign({}, options || defaults);\n  this.options.renderer = this.options.renderer || new Renderer();\n  this.renderer = this.options.renderer;\n  this.renderer.options = this.options;\n}\n/**\n * Static Parse Method\n */\n\n\nParser.parse = function (src, options, renderer) {\n  var parser = new Parser(options, renderer);\n  return parser.parse(src);\n};\n/**\n * Parse Loop\n */\n\n\nParser.prototype.parse = function (src) {\n  this.inline = new InlineLexer(src.links, this.options, this.renderer);\n  this.tokens = src.slice().reverse();\n  var out = [];\n\n  while (this.next()) {\n    out.push(this.tok());\n  }\n\n  return out;\n};\n/**\n * Next Token\n */\n\n\nParser.prototype.next = function () {\n  return this.token = this.tokens.pop();\n};\n/**\n * Preview Next Token\n */\n\n\nParser.prototype.peek = function () {\n  return this.tokens[this.tokens.length - 1] || 0;\n};\n/**\n * Parse Text Tokens\n */\n\n\nParser.prototype.parseText = function () {\n  var body = this.token.text;\n\n  while (this.peek().type === \"text\") {\n    body += \"\\n\" + this.next().text;\n  }\n\n  return this.inline.parse(body);\n};\n/**\n * Parse Current Token\n */\n\n\nParser.prototype.tok = function () {\n  switch (this.token.type) {\n    case \"space\":\n      {\n        return {\n          object: \"text\",\n          leaves: [{\n            text: \"\"\n          }]\n        };\n      }\n\n    case \"hr\":\n      {\n        return this.renderer.hr();\n      }\n\n    case \"heading\":\n      {\n        return this.renderer.heading(this.inline.parse(this.token.text), this.token.depth);\n      }\n\n    case \"code\":\n      {\n        // Text inside of code blocks should not be parsed for marks\n        return this.renderer.code([{\n          object: \"text\",\n          leaves: [{\n            text: this.token.text\n          }]\n        }], this.token.lang);\n      }\n\n    case \"table\":\n      {\n        var body = [];\n        var i = void 0,\n            row = void 0,\n            flags = void 0,\n            j = void 0; // header\n\n        var cells = [];\n\n        for (i = 0; i < this.token.header.length; i++) {\n          flags = {\n            header: true,\n            align: this.token.align[i]\n          };\n          cells.push(this.renderer.tablecell(this.inline.parse(this.token.header[i]), {\n            header: true,\n            align: this.token.align[i]\n          }));\n        }\n\n        body.push(this.renderer.tablerow(cells));\n\n        for (i = 0; i < this.token.cells.length; i++) {\n          row = this.token.cells[i];\n          var _cells = [];\n\n          for (j = 0; j < row.length; j++) {\n            _cells.push(this.renderer.tablecell(this.inline.parse(row[j]), {\n              header: false,\n              align: this.token.align[j]\n            }));\n          }\n\n          body.push(this.renderer.tablerow(_cells));\n        }\n\n        return this.renderer.table(body);\n      }\n\n    case \"blockquote_start\":\n      {\n        var _body = [];\n\n        while (this.next().type !== \"blockquote_end\") {\n          _body.push(this.token.type === \"text\" ? this.renderer.paragraph(this.inline.parse(this.token.text)) : this.tok());\n        }\n\n        return this.renderer.blockquote(_body);\n      }\n\n    case \"list_start\":\n      {\n        var _body2 = [];\n        var style = this.token.style;\n\n        while (this.next().type !== \"list_end\") {\n          _body2.push(this.tok());\n        }\n\n        return this.renderer.list(_body2, style);\n      }\n\n    case \"loose_item_start\":\n    case \"list_item_start\":\n      {\n        var _body3 = [];\n        var _flags = {\n          checked: this.token.checked\n        };\n\n        while (this.next().type !== \"list_item_end\") {\n          _body3.push(this.token.type === \"text\" ? this.renderer.paragraph(this.inline.parse(this.token.text)) : this.tok());\n        }\n\n        return this.renderer.listitem(_body3, _flags);\n      }\n\n    case \"paragraph\":\n      {\n        return this.renderer.paragraph(this.inline.parse(this.token.text));\n      }\n\n    case \"text\":\n      {\n        return this.renderer.text(this.parseText());\n      }\n  }\n};\n/**\n * Helpers\n */\n\n\nfunction replace(regex, options) {\n  regex = regex.source;\n  options = options || \"\";\n  return function self(name, val) {\n    if (!name) {\n      return new RegExp(regex, options);\n    }\n\n    val = val.source || val;\n    val = val.replace(/(^|[^\\[])\\^/g, \"$1\");\n    regex = regex.replace(name, val);\n    return self;\n  };\n}\n\nvar MarkdownParser = {\n  parse: function parse(src, options) {\n    options = assign({}, defaults, options);\n    var fragment = void 0;\n\n    try {\n      fragment = Parser.parse(Lexer.parse(src, options), options);\n\n      if (!fragment.length) {\n        fragment = [{\n          object: \"block\",\n          type: \"paragraph\",\n          isVoid: false,\n          data: {},\n          nodes: EMPTY_PARAGRAPH_NODES\n        }];\n      }\n    } catch (err) {\n      if (options.silent) {\n        fragment = [{\n          object: \"block\",\n          type: \"paragraph\",\n          isVoid: false,\n          data: {},\n          nodes: [{\n            object: \"text\",\n            leaves: [{\n              object: \"leaf\",\n              text: \"An error occured:\",\n              marks: []\n            }, {\n              object: \"leaf\",\n              text: err.message,\n              marks: []\n            }]\n          }]\n        }];\n      } else {\n        throw err;\n      }\n    }\n\n    return {\n      nodes: fragment\n    };\n  }\n};\n\nfunction splitCells(tableRow) {\n  // We must account for escaped pipes within the cell content\n  var cells = tableRow.split(/[^\\\\]\\| *?|^\\|/);\n\n  for (var i = 0; i < cells.length; i++) {\n    cells[i] = cells[i].replace(/\\\\\\|/g, \"|\").trim();\n  }\n\n  return cells;\n}\n\nexports.default = MarkdownParser;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.escapeMarkdownChars = escapeMarkdownChars;\n\nfunction escapeMarkdownChars(text) {\n  var result = text; // First replace all backslashes because we are adding backslashes in this function\n\n  result = result.replace(/([\\\\])/gi, \"\\\\$1\"); // Periods only happen in ordered lists\n\n  result = result.replace(/^(\\s*\\w+)\\./gi, \"$1\\\\.\"); // Hashtags shouldn't be escaped, but elsewhere should\n\n  result = result.replace(/(#\\s)/gi, \"\\\\$1\"); // Catch all escaping for certain characters\n  // TODO: situationally escape these characters so we don't overescape\n\n  return result.replace(/([`*{}\\[\\]()+\\-!|_>])/gi, \"\\\\$1\");\n}"],"sourceRoot":""}