(window["webpackJsonpreact-mindmap"]=window["webpackJsonpreact-mindmap"]||[]).push([[0],{12:function(e,t,n){window,e.exports=function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=18)}([function(e,t){e.exports=n(0)},function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t}(n(0).Component);t.BaseWidget=i},function(e,t){e.exports=n(215)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n(8),i=n(13),a=n(32),c=n(9),s=n(33),l=n(34);!function(e){e[e.UNDO=1]="UNDO",e[e.REDO=2]="REDO",e[e.TOGGLE_COLLAPSE=3]="TOGGLE_COLLAPSE",e[e.SET_ITEM_CONTENT=4]="SET_ITEM_CONTENT",e[e.FOCUS_ITEM=5]="FOCUS_ITEM",e[e.SET_EDIT_ITEM_KEY=6]="SET_EDIT_ITEM_KEY",e[e.SET_FOCUS_ITEM_MODE=7]="SET_FOCUS_ITEM_MODE",e[e.SET_POPUP_MENU_ITEM_KEY=8]="SET_POPUP_MENU_ITEM_KEY",e[e.ADD_CHILD=9]="ADD_CHILD",e[e.ADD_SIBLING=10]="ADD_SIBLING",e[e.DELETE_NODE=11]="DELETE_NODE",e[e.DRAG_AND_DROP=12]="DRAG_AND_DROP"}(o=t.OpType||(t.OpType={}));var u=function(){function e(){}return e.op=function(t,n,r,i){if(n===o.DELETE_NODE&&console.log(n),e.opMap.has(n)){var a=e.opMap.get(n)(t,r,i);return n!==o.UNDO&&n!==o.REDO&&n!==o.FOCUS_ITEM&&n!==o.SET_ITEM_CONTENT&&(e.undoStack=e.undoStack.push(a)),a}return t},e.undo=function(t){return e.undoStack.size>1&&(t=e.popUndoStack(),e.pushRedoStack(t),t=e.undoStack.peek()),t},e.redo=function(t){return e.redoStack.size>0&&(t=e.popRedoStack(),e.pushUndoStack(t)),t},e.pushUndoStack=function(t){e.undoStack=e.undoStack.push(t)},e.popUndoStack=function(){var t=e.undoStack.peek();return e.undoStack=e.undoStack.pop(),t},e.pushRedoStack=function(t){e.redoStack=e.redoStack.push(t)},e.popRedoStack=function(){var t=e.redoStack.peek();return e.redoStack=e.redoStack.pop(),t},e.toggleCollapse=function(t,n){var o=t.getItem(n);return 0!==o.getSubItemKeys().size&&(o=o.merge({collapse:!o.getCollapse()}),t=e.setItem(t,o)),t},e.setItem=function(e,t){return e.update("itemMap",function(e){return e.set(t.getKey(),t)})},e.focusItem=function(e,t){return t!==e.getFocusItemKey()&&(e=e.set("focusItemKey",t)),null===t&&(e=e.set("focusItemMode",i.FocusItemMode.Normal)),e},e.setFocusItemMode=function(e,t,n){return n!==e.getFocusItemMode()&&(e=e.set("focusItemMode",n)),e},e.setEditingItemKey=function(e,t){return console.log("set editing item key "+t),t!==e.getEditingItemKey()&&(t!==e.getFocusItemKey()&&(e=e.set("focusItemKey",t)),e.get("focusItemMode")!==i.FocusItemMode.Editing&&(e=e.set("focusItemMode",i.FocusItemMode.Editing))),e},e.setPopupMenuItemKey=function(e,t){return console.log("set popup menu item key "+t),t!==e.getPopupMenuItemKey()&&(t!==e.getFocusItemKey()&&(e=e.set("focusItemKey",t)),e.get("focusItemMode")!==i.FocusItemMode.PopupMenu&&(e=e.set("focusItemMode",i.FocusItemMode.PopupMenu))),e},e.setItemContent=function(t,n,o){var r=t.getItem(n),i=!1;return r&&(0===e.undoStack.size&&e.pushUndoStack(t),r.getContent()instanceof s.Value&&(i=r.getContent().document!==o.document),r=r.merge({content:o}),t=e.setItem(t,r)),t=t.set("focusItemKey",n),i&&e.pushUndoStack(t),t},e.addChild=function(t,n){var o=t.getItem(n);if(o){var i=r.MindNodeModel.create(a.uuidv4());i=i.set("parentKey",o.getKey()),o=o.set("collapse",!1).update("subItemKeys",function(e){return e.push(i.getKey())}),t=t.update("itemMap",function(e){return e.set(o.getKey(),o).set(i.getKey(),i)}),t=e.setEditingItemKey(t,i.getKey())}return t},e.addSibling=function(t,n){var o=t.getItem(n);if(n===t.getRootItemKey())return t;if(o){var i=r.MindNodeModel.create(a.uuidv4());i=i.set("parentKey",o.getParentKey());var c=t.getParentItem(n);c=c.update("subItemKeys",function(e){return e.insert(e.indexOf(n)+1,i.getKey())}),t=t.update("itemMap",function(e){return e.set(c.getKey(),c).set(i.getKey(),i)}),t=e.setEditingItemKey(t,i.getKey())}return t},e.deleteNode=function(t,n){if(console.log("deleteItem "+n),n===t.getRootItemKey())return t;var o=t.getItem(n),r=t.getItem(o.getParentKey()),i=r.getSubItemKeys().indexOf(n);return r=r.update("subItemKeys",function(e){return e.delete(i)}),t=t.set("focusItemKey",o.getParentKey()).update("itemMap",function(o){var i=e.getAllSubItemKeys(t,n);return(o=o.set(r.key,r)).withMutations(function(e){e=e.delete(n);for(var t=0,o=i;t<o.length;t++){var r=o[t];e=e.delete(r)}return e})})},e.getAllSubItemKeys=function(t,n){var o=t.getItem(n),r=[];if(o.getSubItemKeys().size>0){var i=o.getSubItemKeys().toArray();r.push(i);for(var a=0,c=i;a<c.length;a++){var s=c[a];r.push(e.getAllSubItemKeys(t,s))}}return r},e.getRelation=function(e,t,n){var o=e.getItem(t),r=e.getItem(n);if(o&&r){if(o.getParentKey()==r.getParentKey())return l.NodeRelationship.Sibling;for(var i=o;i.getParentKey();){if(i.getParentKey()===r.getKey())return l.NodeRelationship.Descendant;i=e.getParentItem(i.getKey())}for(i=r;i.getParentKey();){if(i.getParentKey()===o.getKey())return l.NodeRelationship.Ancestor;i=e.getParentItem(i.getKey())}}return l.NodeRelationship.None},e.dragAndDrop=function(t,n,o){if(n===t.getEditorRootItemKey()||n===o||e.getRelation(t,n,o)===l.NodeRelationship.Ancestor)return t;var r=t.getItem(n),i=t.getItem(o);if(r.getParentKey()===o)return t;var a=r.getParentKey(),c=t.getItem(a).getSubItemKeys(),s=c.indexOf(n);c=c.delete(s);var u=i.getSubItemKeys();return u=u.push(n),t.withMutations(function(e){e.setIn(["itemMap",a,"subItemKeys"],c).setIn(["itemMap",n,"parentKey"],o).setIn(["itemMap",o,"subItemKeys"],u).setIn(["itemMap",o,"collapse"],!1)})},e.undoStack=c.Stack(),e.redoStack=c.Stack(),e.opMap=new Map([[o.UNDO,e.undo],[o.REDO,e.redo],[o.TOGGLE_COLLAPSE,e.toggleCollapse],[o.SET_ITEM_CONTENT,e.setItemContent],[o.FOCUS_ITEM,e.focusItem],[o.SET_FOCUS_ITEM_MODE,e.setFocusItemMode],[o.SET_EDIT_ITEM_KEY,e.setEditingItemKey],[o.SET_POPUP_MENU_ITEM_KEY,e.setPopupMenuItemKey],[o.ADD_CHILD,e.addChild],[o.ADD_SIBLING,e.addSibling],[o.DELETE_NODE,e.deleteNode],[o.DRAG_AND_DROP,e.dragAndDrop]]),e}();t.MindMapModelModifier=u},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n,o=e[1]||"",r=e[3];if(!r)return o;if(t&&"function"==typeof btoa){var i=(n=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),a=r.sources.map(function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"});return[o].concat(a).concat([i]).join("\n")}return[o].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var o={},r=0;r<this.length;r++){var i=this[r][0];"number"==typeof i&&(o[i]=!0)}for(r=0;r<e.length;r++){var a=e[r];"number"==typeof a[0]&&o[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(e,t,n){var o,r,i={},a=(o=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===r&&(r=o.apply(this,arguments)),r}),c=function(e){var t={};return function(e){if("function"==typeof e)return e();if(void 0===t[e]){var n=function(e){return document.querySelector(e)}.call(this,e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}}(),s=null,l=0,u=[],p=n(25);function d(e,t){for(var n=0;n<e.length;n++){var o=e[n],r=i[o.id];if(r){r.refs++;for(var a=0;a<r.parts.length;a++)r.parts[a](o.parts[a]);for(;a<o.parts.length;a++)r.parts.push(v(o.parts[a],t))}else{var c=[];for(a=0;a<o.parts.length;a++)c.push(v(o.parts[a],t));i[o.id]={id:o.id,refs:1,parts:c}}}}function f(e,t){for(var n=[],o={},r=0;r<e.length;r++){var i=e[r],a=t.base?i[0]+t.base:i[0],c={css:i[1],media:i[2],sourceMap:i[3]};o[a]?o[a].parts.push(c):n.push(o[a]={id:a,parts:[c]})}return n}function g(e,t){var n=c(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var o=u[u.length-1];if("top"===e.insertAt)o?o.nextSibling?n.insertBefore(t,o.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),u.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var r=c(e.insertInto+" "+e.insertAt.before);n.insertBefore(t,r)}}function m(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=u.indexOf(e);t>=0&&u.splice(t,1)}function h(e){var t=document.createElement("style");return void 0===e.attrs.type&&(e.attrs.type="text/css"),y(t,e.attrs),g(e,t),t}function y(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function v(e,t){var n,o,r,i;if(t.transform&&e.css){if(!(i=t.transform(e.css)))return function(){};e.css=i}if(t.singleton){var a=l++;n=s||(s=h(t)),o=M.bind(null,n,a,!1),r=M.bind(null,n,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",y(t,e.attrs),g(e,t),t}(t),o=function(e,t,n){var o=n.css,r=n.sourceMap,i=void 0===t.convertToAbsoluteUrls&&r;(t.convertToAbsoluteUrls||i)&&(o=p(o)),r&&(o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var a=new Blob([o],{type:"text/css"}),c=e.href;e.href=URL.createObjectURL(a),c&&URL.revokeObjectURL(c)}.bind(null,n,t),r=function(){m(n),n.href&&URL.revokeObjectURL(n.href)}):(n=h(t),o=function(e,t){var n=t.css,o=t.media;if(o&&e.setAttribute("media",o),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),r=function(){m(n)});return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else r()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=a()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=f(e,t);return d(n,t),function(e){for(var o=[],r=0;r<n.length;r++){var a=n[r];(c=i[a.id]).refs--,o.push(c)}for(e&&d(f(e,t),t),r=0;r<o.length;r++){var c;if(0===(c=o[r]).refs){for(var s=0;s<c.parts.length;s++)c.parts[s]();delete i[c.id]}}}};var _,b=(_=[],function(e,t){return _[e]=t,_.filter(Boolean).join("\n")});function M(e,t,n,o){var r=n?"":o.css;if(e.styleSheet)e.styleSheet.cssText=b(t,r);else{var i=document.createTextNode(r),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n(0),i=n(29),a=n(38),c=n(10);!function(e){e[e.LEFT_TO_RIGHT=0]="LEFT_TO_RIGHT",e[e.RIGHT_TO_LEFT=1]="RIGHT_TO_LEFT",e[e.LEFT_AND_RIGHT=2]="LEFT_AND_RIGHT"}(o=t.DiagramLayoutDirection||(t.DiagramLayoutDirection={})),t.defaultDiagramConfig={direction:o.LEFT_AND_RIGHT,nodeStyle:c.NodeStyle.ALL_HAS_BORDER,hMargin:10,vMargin:10,focusBorderPadding:4,theme:"theme-orange",rootItemStyle:{fontSize:"24px",borderRadius:"10px",padding:"10px 25px"},primaryItemStyle:{fontSize:"16px",borderRadius:"6px",padding:"0"},normalItemStyle:{fontSize:"16px",borderRadius:"6px",padding:"0"},editorRendererFn:function(e,t,n,o){return r.createElement(i.DefaultNodeContentEditor,{diagramState:e,op:t,nodeKey:n,saveRef:o})},focusItemsBorderRenderFn:function(e,t,n){return r.createElement(a.DefaultFocusItemBorderSvg,{diagramState:e,saveRef:t,getRef:n,ref:t("focusItemBorderSvg")})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT",e[e.ROOT=2]="ROOT"}(t.NodeWidgetDirection||(t.NodeWidgetDirection={}))},function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(9),a=n(12),c={key:null,parentKey:null,content:null,subItemKeys:i.List(),collapse:!1},s=function(e){function t(){return e.call(this)||this}return r(t,e),t.prototype.getKey=function(){return this.get("key")},t.prototype.getParentKey=function(){return this.get("parentKey")},t.prototype.getContent=function(){return this.get("content")},t.prototype.getSubItemKeys=function(){return this.get("subItemKeys")},t.prototype.getCollapse=function(){return this.get("collapse")},t.prototype.contentToString=function(){var e=this.getContent();return"string"==typeof e?e:a.default.serialize(e)},t.prototype.toString=function(){return this.toJSON().toString()},t.prototype.toJSON=function(){return{key:this.getKey(),parentKey:this.getParentKey(),subItemKeys:this.getSubItemKeys(),collapse:this.getCollapse(),content:this.contentToString()}},t.create=function(e,n,o,r,a){return void 0===n&&(n=null),void 0===o&&(o="new node"),void 0===r&&(r=i.List([])),void 0===a&&(a=!1),t.createWith({key:e,parentKey:n,content:o,subItemKeys:r,collapse:a})},t.createWith=function(e){return(new t).merge({key:e.key,parentKey:e.parentKey,content:e.content,subItemKeys:i.List(e.subItemKeys),collapse:e.collapse})},t}(i.Record(c));t.MindNodeModel=s},function(e,t){e.exports=n(1)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.PRIMARY_HAS_BORDER_NORMAL_NO_BORDER=0]="PRIMARY_HAS_BORDER_NORMAL_NO_BORDER",e[e.ALL_HAS_BORDER=1]="ALL_HAS_BORDER"}(t.NodeStyle||(t.NodeStyle={}))},function(e,t,n){var o=n(28);"string"==typeof o&&(o=[[e.i,o,""]]),n(5)(o,{hmr:!0,transform:void 0,insertInto:void 0}),o.locals&&(e.exports=o.locals)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(31);t.default=new o.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Normal=0]="Normal",e[e.PopupMenu=1]="PopupMenu",e[e.Editing=2]="Editing"}(t.FocusItemMode||(t.FocusItemMode={}))},function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),c=n(1),s=n(7),l=n(10),u=function(e){function t(t){var n=e.call(this,t)||this;return n.generatePathString=function(){return n.props.isRoot?n.generatePathStringRoot():n.props.diagramState.config.nodeStyle===l.NodeStyle.PRIMARY_HAS_BORDER_NORMAL_NO_BORDER?n.generatePathStringNormal():n.generatePathStringForBorderNode()},n.generatePathStringForBorderNode=function(){var e=n.props,t=e.fromNodeKey,o=e.toNodeKey,r=e.getRef,i=e.dir,a=e.diagramState,c=(a.mindMapModel,a.mindMapModel.getItem(t).getSubItemKeys().size),l=r("topic-"+t),u=r("topic-"+o);if(!l||!u)return"";var p,d,f,g,m=r("children-"+t).getBoundingClientRect(),h=u.getBoundingClientRect(),y=l.getBoundingClientRect();if(i===s.NodeWidgetDirection.RIGHT?(p=c>1?1:0,d=Math.round(y.top+y.height/2-m.top),f=h.left-y.right,g=Math.round(h.top+h.height/2-m.top)):(p=y.left-m.left-(c>1?1:0),d=Math.round(y.top+y.height/2-m.top),f=Math.round(h.right-m.left),g=Math.round(h.top+h.height/2-m.top)),d===g)return"M"+p+","+d+"L"+f+","+g;var v=(p+f)/2,_=(d+g)/2;return i===s.NodeWidgetDirection.RIGHT?"M"+p+","+d+"C"+p+","+_+","+v+","+g+","+f+","+g:"M"+f+","+g+"C"+v+","+g+","+p+","+_+","+p+","+d},n.generatePathStringNormal=function(){var e=n.props,t=e.fromNodeKey,o=e.toNodeKey,r=e.getRef,i=e.dir,a=e.diagramState.mindMapModel,c=r("topic-"+t),l=r("topic-"+o);if(!c||!l)return"";var u=r("line-"+t),p=r("children-"+t),d=l.getBoundingClientRect(),f=u.getBoundingClientRect(),g=p.getBoundingClientRect(),m=a.getItem(t);if(i===s.NodeWidgetDirection.RIGHT){var h=0,y=Math.round(f.top-g.top+1),v=Math.round(d.left-g.left-10),_=Math.round(d.bottom-g.top),b=Math.round(d.right-g.left-12);return 1===m.getSubItemKeys().size&&a.getItemVisualLevel(t)>1?"M"+h+","+_+"H"+(d.right-g.left):y>_?"M"+h+","+y+" H"+v+" V"+(_+10)+" Q"+v+","+_+" "+(v+10)+","+_+" H"+b:"M"+h+","+y+" H"+v+" V"+(_-10)+" Q"+v+","+_+" "+(v+10)+","+_+" H"+b}return h=Math.round(f.left-g.left),y=Math.round(f.top-g.top+1),v=Math.round(d.right-g.left+10),_=Math.round(d.bottom-g.top),b=Math.round(d.left-g.left+12),1===m.getSubItemKeys().size&&a.getItemVisualLevel(t)>1?"M"+h+","+_+"H"+(f.left-d.right):y>_?"M"+h+","+y+" H"+v+" V"+(_+10)+" Q"+v+","+_+" "+(v-10)+","+_+" H"+b:"M"+h+","+y+" H"+v+" V"+(_-10)+" Q"+v+","+_+" "+(v-10)+","+_+" H"+b},n.generatePathStringRoot=function(){var e=n.props,t=e.fromNodeKey,o=e.toNodeKey,r=e.getRef,i=e.dir,a=r("topic-"+t),c=r("topic-"+o);if(!a||!c)return"";var l,u,p,d,f=c.getBoundingClientRect(),g=a.getBoundingClientRect();if(i===s.NodeWidgetDirection.RIGHT){var m=r("bm-node-layer-right").getBoundingClientRect();l=0,u=Math.round(g.top-m.top+g.height/2),p=f.left-g.right,d=Math.round(f.top-m.top+f.height/2)}else l=(m=r("bm-node-layer-left").getBoundingClientRect()).right-m.left,u=Math.round(g.top-m.top+g.height/2),p=Math.round(f.right-m.left),d=Math.round(f.top-m.top+f.height/2);if(u===d)return"M"+l+","+u+"L"+p+","+d;var h=(l+p)/2,y=(u+d)/2;return i===s.NodeWidgetDirection.RIGHT?"M"+l+","+u+"C"+l+","+y+","+h+","+d+","+p+","+d:"M"+p+","+d+"C"+h+","+d+","+l+","+y+","+l+","+u},n}return r(t,e),t.prototype.layout=function(){this.props.isRoot?this.layoutRoot():this.layoutNormal()},t.prototype.layoutRoot=function(){var e=this.props,t=e.dir,n=(0,e.getRef)("bm-node-layer-"+(t===s.NodeWidgetDirection.LEFT?"left":"right"));if(n){var o=n.getBoundingClientRect();this.setState({width:o.width,height:o.height})}},t.prototype.layoutNormal=function(){var e=(0,this.props.getRef)("children-"+this.props.fromNodeKey);if(e){var t=e.getBoundingClientRect();this.setState({width:t.width,height:t.height})}},t.prototype.render=function(){return this.state&&this.state.width?a.createElement("div",{className:"bm-link"},a.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",version:"1.1",strokeWidth:"2px",stroke:"orange",fill:"none"},this.state),a.createElement("g",null,a.createElement("path",{d:this.generatePathString()})))):null},t.defaultProps={isRoot:!1},t}(c.BaseWidget);t.LinkWidget=u},function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(2),c=n(1),s=n(3),l=n(7),u=n(40),p=null,d=function(e){function t(t){var n=e.call(this,t)||this;return n.onDragStart=function(e){console.log("onDragStart"),p=n.props.nodeKey,e.stopPropagation()},n.onDragOver=function(e){e.preventDefault()},n.onDragEnter=function(){n.setState({dragEnter:!0})},n.onDragLeave=function(e){var t=n.props,o=t.getRef,r=t.nodeKey,i=e.nativeEvent.relatedTarget,a=o("content-"+r);a==i||a.contains(i)||n.setState({dragEnter:!1})},n.onDrop=function(){console.log("onDrop");var e=n.props,t=e.nodeKey;(0,e.op)(s.OpType.DRAG_AND_DROP,p,t),n.setState({dragEnter:!1})},n.onClick=function(){n.isDoubleClick=!1,setTimeout(function(){if(!n.isDoubleClick){var e=n.props,t=e.diagramState,o=e.op,r=e.nodeKey;if(t.mindMapModel.getEditingItemKey()===r)return;o(s.OpType.SET_POPUP_MENU_ITEM_KEY,r),n.setState({showPopMenu:!0})}},200)},n.onDoubleClick=function(){n.isDoubleClick=!0;var e=n.props,t=e.diagramState,o=e.op,r=e.nodeKey;t.mindMapModel.getEditingItemKey()!==r&&o(s.OpType.SET_EDIT_ITEM_KEY,r)},n.handlePopMenuVisibleChange=function(e){n.setState({showPopMenu:e})},n._handleClick=function(e){console.log("_handleClick "+n.props.nodeKey);var t=n.props;(0,t.getRef)("content-"+t.nodeKey).contains(e.target)},n.state={dragEnter:!1,showPopMenu:!1},n}return r(t,e),t.prototype.componentDidUpdate=function(e,t,n){var o=this.props,r=o.diagramState,i=o.nodeKey;r.mindMapModel.getEditingItemKey()===i?document.addEventListener("click",this._handleClick):document.removeEventListener("click",this._handleClick)},t.prototype.render=function(){var e,t,n=this.props,o=n.diagramState,r=n.op,c=n.nodeKey,s=n.dir,p=n.draggable,d=n.saveRef,f=n.getRef,g=o.mindMapModel,m=o.config,h=g.getItemVisualLevel(c);switch(h){case 0:t=m.rootItemStyle;break;case 1:t=m.primaryItemStyle;break;default:t=m.normalItemStyle}var y=this.state.showPopMenu;return i.createElement("div",{draggable:p,className:a("content",(e={},e["content-dir-"+s]=s!==l.NodeWidgetDirection.ROOT,e["root-topic"]=0===h,e["primary-topic"]=1===h,e["normal-topic"]=h>1,e["content-drag-enter"]=this.state.dragEnter,e)),style:t,ref:d("content-"+c),onDragStart:this.onDragStart,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDragOver:this.onDragOver,onDrop:this.onDrop,onClick:this.onClick,onDoubleClick:this.onDoubleClick},m.editorRendererFn(o,r,c,d),y?i.createElement(u.NodePopupMenu,{diagramState:o,op:r,nodeKey:c,visible:!0,handleVisibleChange:this.handlePopMenuVisibleChange,getRef:f}):null)},t}(c.BaseWidget);t.TopicContentWidget=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),r=n(3),i=function(){function e(e,t){this.mindMapModel=e,this.config=t}return e.setMindMapModel=function(t,n){return new e(n,t.config)},e.op=function(t,n,o,i){console.error("op:"+r.OpType[n]),o||n===r.OpType.FOCUS_ITEM||(o=t.mindMapModel.getFocusItemKey()),console.log(t.mindMapModel);var a=r.MindMapModelModifier.op(t.mindMapModel,n,o,i);return console.log(a),new e(a,t.config)},e.createWith=function(t,n){return new e(t,n=Object.assign(o.defaultDiagramConfig,n))},e}();t.DiagramState=i},function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(13),a=n(9),c=n(8),s={rootItemKey:null,editorRootItemKey:null,itemMap:a.Map(),focusItemKey:null,focusItemMode:i.FocusItemMode.Normal},l=function(e){function t(){return e.call(this)||this}return r(t,e),t.prototype.getRootItemKey=function(){return this.get("rootItemKey")},t.prototype.getRootItem=function(){return this.getItem(this.getRootItemKey())},t.prototype.getEditorRootItemKey=function(){return this.get("editorRootItemKey")},t.prototype.getEditorRootItem=function(){return this.getItemMap().get(this.getEditorRootItemKey())},t.prototype.getItemMap=function(){return this.get("itemMap")},t.prototype.getFocusItemKey=function(){return this.get("focusItemKey")},t.prototype.getFocusItemMode=function(){return this.get("focusItemMode")},t.prototype.getEditingItemKey=function(){return this.get("focusItemMode")!==i.FocusItemMode.Editing?null:this.getFocusItemKey()},t.prototype.getPopupMenuItemKey=function(){return this.get("focusItemMode")!==i.FocusItemMode.PopupMenu?null:this.getFocusItemKey()},t.prototype.getItem=function(e){return this.getItemMap().get(e)},t.prototype.getParentItem=function(e){var t=this.getItem(e);return t.getParentKey()?this.getItem(t.getParentKey()):null},t.prototype.getItemVisualLevel=function(e){for(var t=this.getItem(e),n=0;t&&t.getKey()!==this.getEditorRootItemKey();)n++,t=this.getParentItem(t.getKey());return n},t.createWith=function(e){var n=new t;return(n=n.merge({rootItemKey:e.rootItemKey,editorRootItemKey:e.editorRootItemKey})).withMutations(function(t){e.items.forEach(function(e){t.update("itemMap",function(t){return t.set(e.key,c.MindNodeModel.createWith(e))})})})},t}(a.Record(s));t.MindMapModel=l},function(e,t,n){"use strict";function o(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),o(n(19)),o(n(17)),o(n(16)),o(n(45)),o(n(6)),o(n(46)),o(n(3))},function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(2),c=n(20),s=n(1);n(42);var l=n(44),u=n(16),p=function(e){function t(t){var n=e.call(this,t)||this;return n.op=function(e,t,o){var r=n.props,i=r.diagramState;(0,r.onChange)(u.DiagramState.op(i,e,t,o))},n}return r(t,e),t.prototype.render=function(){var e=this;return i.createElement(l.default,null,function(t,n){var o;return i.createElement("div",{className:a("bm-diagram",(o={},o[""+e.props.diagramState.config.theme]=!0,o))},i.createElement(c.MindDragScrollWidget,{diagramState:e.props.diagramState,op:e.op,saveRef:t,getRef:n}))})},t}(s.BaseWidget);t.DiagramWidget=p},function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),c=n(1),s=n(21),l=n(26),u=function(e){function t(t){var n=e.call(this,t)||this;return n.canDragFunc=function(){var e=document.getSelection();return null===e.anchorNode||e.anchorNode.nodeType!==Node.TEXT_NODE},n}return r(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.getRef,n=t("topic-"+e.diagramState.mindMapModel.getEditorRootItemKey()),o=t("node-layer"),r=n.getBoundingClientRect(),i=o.getBoundingClientRect();this.dragScrollWidget.setViewBoxScrollDelta(0,r.top-i.top-this.dragScrollWidget.viewBox.getBoundingClientRect().height/2+r.height)},Object.defineProperty(t.prototype,"dragScrollWidget",{get:function(){return this.props.getRef("DragScrollWidget")},enumerable:!0,configurable:!0}),t.prototype.render=function(){var e=this,t=this.props.saveRef;return console.log("MindDragScrollWidget render"),a.createElement(s.DragScrollWidget,i({},this.state,{ref:t("DragScrollWidget")}),function(n,o){return a.createElement(l.NodeLayerWidget,i({},e.props,{setViewBoxScroll:n,setViewBoxScrollDelta:o,ref:t("MindNodeLayerWidget")}))})},t}(c.BaseWidget);t.MindDragScrollWidget=u},function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(1),c=n(22);n(23);var s=function(e){function t(t){var n=e.call(this,t)||this;return n.contentResizeCallback=function(e,t){if(n.oldContentRect){var o={width:n.content.clientWidth+2*n.viewBox.clientWidth,height:n.content.clientHeight+2*n.viewBox.clientHeight};n.bigView.style.width=o.width+"px",n.bigView.style.height=o.height+"px"}n.oldContentRect=e[0].contentRect},n.contentResizeObserver=new c.default(n.contentResizeCallback),n.contentRef=function(e){e&&(n.content=e,n.contentResizeObserver.observe(n.content))},n.viewBoxRef=function(e){e&&(n.viewBox=e,n.setViewBoxScroll(n.viewBox.clientWidth,n.viewBox.clientHeight))},n.bigViewRef=function(e){e&&(n.bigView=e)},n.setWidgetStyle=function(){n.content&&n.viewBox&&n.bigView&&(n.bigView.style.width=2*(n.content.clientWidth+n.viewBox.clientWidth)+"px",n.bigView.style.height=2*(n.content.clientHeight+n.viewBox.clientHeight)+"px",n.content.style.left=n.viewBox.clientWidth+"px",n.content.style.top=n.viewBox.clientHeight+"px")},n.setViewBoxScroll=function(e,t){n.viewBox&&(n.viewBox.scrollLeft=e,n.viewBox.scrollTop=t)},n.setViewBoxScrollDelta=function(e,t){n.viewBox&&(n.viewBox.scrollLeft+=e,n.viewBox.scrollTop+=t)},n.onMouseDown=function(e){var t=n.props,o=t.mouseKey,r=t.needKeyPressed,i=t.canDragFunc;if((!i||i())&&(0===e.button&&"left"===o||2===e.button&&"right"===o)){if(r&&!e.ctrlKey)return;n._lastCoordX=n.viewBox.scrollLeft+e.nativeEvent.clientX,n._lastCoordY=n.viewBox.scrollTop+e.nativeEvent.clientY,window.addEventListener("mousemove",n.onMouseMove),window.addEventListener("mouseup",n.onMouseUp)}},n.onMouseUp=function(e){window.removeEventListener("mousemove",n.onMouseMove),window.removeEventListener("mouseup",n.onMouseUp)},n.onMouseMove=function(e){n.viewBox.scrollLeft=n._lastCoordX-e.clientX,n.viewBox.scrollTop=n._lastCoordY-e.clientY},n.handleContextMenu=function(e){e.preventDefault()},n.state={widgetStyle:{width:"10000px",height:"10000px"}},n}return r(t,e),t.prototype.componentDidMount=function(){this.setWidgetStyle(),document.addEventListener("contextmenu",this.handleContextMenu)},t.prototype.componentWillUnmount=function(){document.removeEventListener("contextmenu",this.handleContextMenu)},t.prototype.render=function(){return i.createElement("div",{ref:this.viewBoxRef,onMouseDown:this.onMouseDown,className:"drag-scroll-view"},i.createElement("div",{style:this.state.widgetStyle,ref:this.bigViewRef},i.createElement("div",{className:"drag-scroll-content",ref:this.contentRef,style:this.state.contentStyle},this.props.children(this.setViewBoxScroll,this.setViewBoxScrollDelta))))},t.defaultProps={mouseKey:"left",needKeyPressed:!1},t}(a.BaseWidget);t.DragScrollWidget=s},function(e,t){e.exports=n(216)},function(e,t,n){var o=n(24);"string"==typeof o&&(o=[[e.i,o,""]]),n(5)(o,{hmr:!0,transform:void 0,insertInto:void 0}),o.locals&&(e.exports=o.locals)},function(e,t,n){(e.exports=n(4)(!1)).push([e.i,".drag-scroll-view {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  overflow: scroll; }\n\n.drag-scroll-content {\n  position: relative;\n  width: max-content; }\n",""])},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,o=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var r,i=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?e:(r=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:o+i.replace(/^\.\//,""),"url("+JSON.stringify(r)+")")})}},function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(1),c=n(27),s=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.prototype.render=function(){var e=this.props,t=e.setViewBoxScroll,n=e.setViewBoxScrollDelta,o=e.saveRef;return i.createElement("div",{className:"bm-node-layer",ref:o("node-layer")},this.renderItems(t,n))},t.prototype.renderItems=function(e,t){var n=this.props,o=n.diagramState,r=n.op,a=n.getRef,s=n.saveRef,l=o.mindMapModel.getEditorRootItemKey();return i.createElement(c.RootNodeWidget,{diagramState:o,op:r,nodeKey:l,saveRef:s,getRef:a,setViewBoxScroll:e,setViewBoxScrollDelta:t})},t}(a.BaseWidget);t.NodeLayerWidget=s},function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(1);n(11);var c=n(2),s=n(6),l=n(39),u=n(14),p=n(15),d=n(7),f=function(e){function t(t){var n=e.call(this,t)||this;return n.needRelocation=!1,n.layoutSubLinks=function(){var e=n.props,t=e.diagramState,o=e.nodeKey,r=e.getRef,i=t.mindMapModel.getItem(o);i.getSubItemKeys().size>0&&!i.getCollapse()&&i.getSubItemKeys().forEach(function(e){r("link-"+o+"-"+e).layout()})},n}return r(t,e),t.prototype.getNodeModel=function(){var e=this.props,t=e.diagramState,n=e.nodeKey;return t.mindMapModel.getItem(n)},t.prototype.getPartItems=function(e){var t=this.getNodeModel(),n=t.getSubItemKeys().size,o=t.getSubItemKeys().toArray();switch(e){case s.DiagramLayoutDirection.LEFT_TO_RIGHT:return[[],o];case s.DiagramLayoutDirection.RIGHT_TO_LEFT:return[o,[]];case s.DiagramLayoutDirection.LEFT_AND_RIGHT:return[o.slice(Math.ceil(n/2),n),o.slice(0,Math.ceil(n/2))]}},t.prototype.componentDidUpdate=function(e,t,n){if(this.needRelocation){var o=this.collapseIcon.getBoundingClientRect();this.props.setViewBoxScrollDelta(o.left-this.oldCollapseIconRect.left,o.top-this.oldCollapseIconRect.top),this.needRelocation=!1}this.layoutSubLinks()},t.prototype.componentDidMount=function(){this.layoutSubLinks()},t.prototype.renderPartItems=function(e,t){var n=this,o=this.props,r=o.diagramState,a=o.op,c=o.setViewBoxScroll,s=o.setViewBoxScrollDelta,p=o.saveRef,f=o.getRef;if(0===e.length)return null;var g=[],m=[];e.forEach(function(e){var o="link-"+n.props.nodeKey+"-"+e;g.push(i.createElement(l.NodeWidget,{key:e,nodeKey:e,dir:t,diagramState:r,op:a,setViewBoxScroll:c,setViewBoxScrollDelta:s,saveRef:p,getRef:f})),m.push(i.createElement(u.LinkWidget,{diagramState:r,key:o,ref:p(o),fromNodeKey:n.props.nodeKey,toNodeKey:e,dir:t,saveRef:p,getRef:f,isRoot:!0}))});var h="bm-node-layer-"+(t===d.NodeWidgetDirection.LEFT?"left":"right");return i.createElement("div",{className:h,ref:p(h)},g,m)},t.prototype.render=function(){var e=this.props,t=e.diagramState,n=e.op,o=e.nodeKey,r=e.saveRef,a=e.getRef,s=t.mindMapModel,l=t.config,u=this.getPartItems(l.direction),f=u[0],g=u[1];return i.createElement(i.Fragment,null,this.renderPartItems(f,d.NodeWidgetDirection.LEFT),i.createElement("div",{className:c("topic"),ref:o===s.getEditorRootItemKey()?r("topic-"+o):null},i.createElement(p.TopicContentWidget,{diagramState:t,op:n,nodeKey:o,dir:d.NodeWidgetDirection.ROOT,draggable:!1,saveRef:r,getRef:a})),this.renderPartItems(g,d.NodeWidgetDirection.RIGHT))},t}(a.BaseWidget);t.RootNodeWidget=f},function(e,t,n){(e.exports=n(4)(!1)).push([e.i,"",""])},function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(2),c=n(30),s=n(3),l=n(35);n(36);var u=function(e){function t(t){var n=e.call(this,t)||this;return n.onChange=function(e){var t=n.props,o=t.op,r=t.nodeKey;o(s.OpType.SET_ITEM_CONTENT,r,e)},n.onMouseDown=function(e){e.stopPropagation()},n.onMouseMove=function(e){e.stopPropagation()},n}return r(t,e),t.prototype.shouldComponentUpdate=function(e,t,n){var o=e.nodeKey,r=e.diagramState,i=this.props,a=i.nodeKey,c=i.diagramState;if(o!==a)return console.log("nextNodeKey !== nodeKey"),!0;var s=c.mindMapModel.getEditingItemKey(),l=r.mindMapModel.getEditingItemKey();return s!==l&&(s===a||l===a)||c.mindMapModel.getItem(a)!==r.mindMapModel.getItem(o)&&(console.log("ds.mindMapModel.getItem(nodeKey) !== nextDS.mindMapModel.getItem(nextNodeKey)"),!0)},t.prototype.render=function(){var e=this.props,t=e.nodeKey,n=e.diagramState,o=e.saveRef,r=n.mindMapModel,s=r.getItem(t).getContent();console.log("DefaultNodeContentEditor render"),console.log("getEditingItemKey "+r.getEditingItemKey());var u=!(t===r.getEditingItemKey());return i.createElement("div",{className:a("bm-node-content",{"content-editing":!u,"bm-node-content-cursor":!u}),ref:o("editor-"+t),onMouseDown:this.onMouseDown,onMouseMove:this.onMouseMove},i.createElement(c.default,{editorValue:s,onChange:l.debounce(this.onChange),readOnly:u}))},t}(i.Component);t.DefaultNodeContentEditor=u},function(e,t){e.exports=n(217)},function(e,t){e.exports=n(145)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uuidv4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}},function(e,t){e.exports=n(2)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Ancestor=0]="Ancestor",e[e.Descendant=1]="Descendant",e[e.Sibling=2]="Sibling",e[e.None=3]="None"}(t.NodeRelationship||(t.NodeRelationship={}))},function(e,t){e.exports=n(667)},function(e,t,n){var o=n(37);"string"==typeof o&&(o=[[e.i,o,""]]),n(5)(o,{hmr:!0,transform:void 0,insertInto:void 0}),o.locals&&(e.exports=o.locals)},function(e,t,n){(e.exports=n(4)(!1)).push([e.i,".bm-node-content {\n  padding: 6px 6px; }\n\n.bm-node-content-cursor {\n  cursor: text; }\n",""])},function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return console.log("DefaultFocusItemBorderSvg render"),this.renderFocusItemBorder()},t.prototype.reLayout=function(){this.forceUpdate()},t.prototype.renderFocusItemBorder=function(){var e=this.props,t=e.getRef,n=e.diagramState,o=n.mindMapModel,r=n.config.focusBorderPadding,a=o.getFocusItemKey();if(a){var c=t("content-"+a),s=t("node-layer");if(c&&s){var l=c.getBoundingClientRect(),u=s.getBoundingClientRect();return i.createElement("div",{className:"bm-focus-svg"},i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",strokeWidth:"2px",stroke:"red",fill:"none",width:"3000px",height:"3000px"},i.createElement("rect",{x:""+(l.left-u.left-r),y:""+(l.top-u.top-r),rx:"10",ry:"10",width:""+(l.width+2*r),height:""+(l.height+2*r)})))}}return null},t}(i.Component);t.DefaultFocusItemBorderSvg=a},function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(1),c=n(14),s=n(15);n(11);var l=n(3),u=n(2),p=n(7),d=n(10),f=function(e){function t(n){var o=e.call(this,n)||this;return o.onClickCollapse=function(e){console.log("onClickCollapse"),e.stopPropagation(),o.needRelocation=!0,o.oldCollapseIconRect=o.collapseIcon.getBoundingClientRect(),o.props.op(l.OpType.TOGGLE_COLLAPSE,o.props.nodeKey)},o.onDragStart=function(e){console.log("onDragStart"),t.dragSrcItemKey=o.props.nodeKey,e.stopPropagation()},o.onDragEnd=function(){},o.onDragEnter=function(){console.log("onDragEnter"),o.setState({dragEnter:!0})},o.onDragLeave=function(e){var t=o.props,n=t.getRef,r=t.nodeKey,i=e.nativeEvent.relatedTarget,a=n("content-"+r);a==i||a.contains(i)||o.setState({dragEnter:!1})},o.onDrop=function(e){console.log("onDrop");var n=o.props,r=n.op,i=n.nodeKey;r(l.OpType.DRAG_AND_DROP,t.dragSrcItemKey,i),o.setState({dragEnter:!1})},o.needRelocation=!1,o.layoutSubLinks=function(){var e=o.props,t=e.diagramState,n=e.nodeKey,r=e.getRef,i=t.mindMapModel.getItem(n);i.getSubItemKeys().size>0&&!i.getCollapse()&&i.getSubItemKeys().forEach(function(e){r("link-"+n+"-"+e).layout()})},o.collapseIconRef=function(e){e&&(o.collapseIcon=e)},o.state={dragEnter:!1},o}return r(t,e),t.prototype.componentDidUpdate=function(e,t,n){if(this.needRelocation){var o=this.collapseIcon.getBoundingClientRect();this.props.setViewBoxScrollDelta(o.left-this.oldCollapseIconRect.left,o.top-this.oldCollapseIconRect.top),this.needRelocation=!1}this.layoutSubLinks()},t.prototype.componentDidMount=function(){this.layoutSubLinks()},t.prototype.shouldComponentUpdate=function(e,t,n){return!0},t.prototype.renderSubItems=function(){var e=this.props,n=e.diagramState,o=e.op,r=e.nodeKey,a=e.dir,s=e.setViewBoxScroll,l=e.setViewBoxScrollDelta,d=e.saveRef,f=e.getRef,g=n.mindMapModel.getItem(r);if(0===g.getSubItemKeys().size||g.getCollapse())return null;var m=[],h=[];g.getSubItemKeys().forEach(function(e){m.push(i.createElement(t,{key:e,nodeKey:e,dir:a,diagramState:n,op:o,setViewBoxScroll:s,setViewBoxScrollDelta:l,saveRef:d,getRef:f}));var u="link-"+r+"-"+e;h.push(i.createElement(c.LinkWidget,{diagramState:n,key:u,fromNodeKey:r,toNodeKey:e,dir:a,getRef:f,ref:d(u)}))});var y=n.config,v=a===p.NodeWidgetDirection.LEFT?{paddingTop:y.vMargin,paddingBottom:y.vMargin,paddingRight:y.hMargin}:{paddingTop:y.vMargin,paddingBottom:y.vMargin,paddingLeft:y.hMargin};return i.createElement("div",{className:u("bm-children"),style:v,ref:d("children-"+r)},m,h)},t.prototype.render=function(){var e,t,n=this.props,o=n.diagramState,r=n.op,a=n.nodeKey,c=n.dir,l=n.saveRef,p=n.getRef,f=o.mindMapModel,g=f.getItem(a),m=f.getItemVisualLevel(a);return i.createElement("div",{className:u("bm-node","bm-dir-"+c)},i.createElement("div",{className:u("topic","bm-dir-"+c),ref:l("topic-"+a)},i.createElement(s.TopicContentWidget,{diagramState:o,op:r,nodeKey:a,dir:c,draggable:!0,saveRef:l,getRef:p}),g.getSubItemKeys().size>0?i.createElement("div",{className:u("collapse-line",(e={"collapse-line-hide":g.getCollapse()},e["normal-collapse-line-"+c]=o.config.nodeStyle===d.NodeStyle.PRIMARY_HAS_BORDER_NORMAL_NO_BORDER&&m>1,e)),ref:l("line-"+a)},i.createElement("div",{ref:this.collapseIconRef,className:u("collapse-icon",(t={iconfont:g.getSubItemKeys().size>0},t["bm-"+(g.getCollapse()?"plus":"minus")]=g.getSubItemKeys().size>0,t)),onClick:this.onClickCollapse})):null),this.renderSubItems())},t}(a.BaseWidget);t.NodeWidget=f},function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(41),c=n(3),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._handleClick=function(e){console.log("_handleClick");var n=t.props.visible,o=!(e.target.contains===t.root);console.log("wasOutside "+o),o&&n&&t.props.handleVisibleChange&&t.props.handleVisibleChange(!1)},t.rootRef=function(e){t.root=e},t}return r(t,e),t.prototype.componentDidMount=function(){document.addEventListener("click",this._handleClick)},t.prototype.componentWillUnmount=function(){document.removeEventListener("click",this._handleClick)},t.prototype.render=function(){console.log("NodePopupMenu render:"+this.props.visible);var e=this.props,t=e.visible,n=e.nodeKey,o=e.items,r=e.diagramState,c=e.op,s=r.mindMapModel.getEditorRootItemKey(),l=o.map(function(e){return n!==s||e.rootCanUse?i.createElement(a.NodePopupMenuItem,{config:e,key:n+"-"+e.label,nodeKey:n,diagramState:r,op:c}):null});return t&&i.createElement("div",{className:"bm-node-popup-menu",ref:this.rootRef},l)},t.defaultProps={items:[{icon:"edit",label:"edit",rootCanUse:!0,opType:c.OpType.SET_EDIT_ITEM_KEY},{icon:"add-sibling",label:"add sibling",opType:c.OpType.ADD_SIBLING},{icon:"add-child",label:"add child",rootCanUse:!0,opType:c.OpType.ADD_CHILD},{icon:"delete-node",label:"delete node",opType:c.OpType.DELETE_NODE}]},t}(i.Component);t.NodePopupMenu=s},function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(2),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClick=function(e){e.stopPropagation();var n=t.props,o=n.nodeKey,r=n.config;(0,n.op)(r.opType,o)},t}return r(t,e),t.prototype.render=function(){var e=this.props.config;return i.createElement("div",{className:"popup-menu-item",onClick:this.onClick},i.createElement("div",{className:a("icon","iconfont","bm-"+e.icon),onClick:this.onClick}),i.createElement("div",{className:"label"},e.label))},t}(i.Component);t.NodePopupMenuItem=c},function(e,t,n){var o=n(43);"string"==typeof o&&(o=[[e.i,o,""]]),n(5)(o,{hmr:!0,transform:void 0,insertInto:void 0}),o.locals&&(e.exports=o.locals)},function(e,t,n){(t=e.exports=n(4)(!1)).push([e.i,"@import url(//at.alicdn.com/t/font_1280682_13b9x7m6y9i.css);",""]),t.push([e.i,".theme-orange .root-topic {\n  background: orange; }\n\n.theme-orange .primary-topic {\n  border: 2px solid orange; }\n\n.theme-orange .normal-topic {\n  border: 2px solid orange; }\n\n.bm-diagram {\n  width: 100%;\n  height: 100%; }\n\n.iconfont {\n  vertical-align: middle; }\n\n.none-pointer-events {\n  pointer-events: none; }\n\n.bm-node-layer {\n  position: relative;\n  display: flex;\n  align-items: center; }\n  .bm-node-layer .bm-node {\n    display: flex;\n    align-items: center;\n    padding: 10px; }\n    .bm-node-layer .bm-node div {\n      flex-shrink: 0; }\n    .bm-node-layer .bm-node .bm-children {\n      position: relative; }\n  .bm-node-layer .topic {\n    display: flex;\n    position: relative;\n    align-items: center; }\n    .bm-node-layer .topic .content-editing {\n      background-color: #e0e0e0; }\n    .bm-node-layer .topic .content {\n      word-wrap: break-word;\n      white-space: pre-line;\n      cursor: pointer; }\n    .bm-node-layer .topic .content-drag-enter {\n      background-color: brown; }\n    .bm-node-layer .topic .content-dir-0 {\n      padding: 6px 0 6px 20px; }\n    .bm-node-layer .topic .content-dir-1 {\n      padding: 6px 20px 6px 0; }\n    .bm-node-layer .topic .collapse-line {\n      height: 2px;\n      width: 30px;\n      background: orange; }\n    .bm-node-layer .topic .collapse-line-hide {\n      background: transparent; }\n    .bm-node-layer .topic .normal-collapse-line-1 {\n      position: absolute;\n      bottom: -1px;\n      right: 0; }\n    .bm-node-layer .topic .normal-collapse-line-0 {\n      position: absolute;\n      bottom: -1px;\n      left: 0; }\n    .bm-node-layer .topic .collapse-icon {\n      position: relative;\n      top: -8px;\n      left: 5px;\n      border-radius: 50%;\n      width: 20px;\n      height: 20px;\n      text-align: center;\n      background-color: orange;\n      cursor: pointer;\n      padding: 0;\n      font-size: 14px;\n      line-height: 20px;\n      border: 0; }\n\n.bm-node-layer-left {\n  display: flex;\n  position: relative;\n  align-items: flex-end;\n  flex-direction: column;\n  padding-right: 60px; }\n\n.bm-node-layer-right {\n  display: flex;\n  position: relative;\n  flex-direction: column;\n  padding-left: 60px; }\n\n.bm-dir-0 {\n  flex-direction: row-reverse; }\n\n.bm-dir-1 {\n  flex-direction: row; }\n\n.bm-link {\n  z-index: -1;\n  position: absolute;\n  left: 0;\n  top: 0; }\n\n.bm-focus-svg {\n  z-index: -1;\n  position: absolute;\n  left: 0;\n  top: 0; }\n\n.bm-node-popup-menu {\n  position: absolute;\n  bottom: calc(100% + 5px);\n  left: 0;\n  padding: 0 8px;\n  border-radius: 10px;\n  background-color: white;\n  box-shadow: #aaaaaa 5px 5px 10px;\n  cursor: pointer;\n  z-index: 1;\n  width: max-content;\n  height: 50px; }\n  .bm-node-popup-menu .popup-menu-item {\n    display: inline-block;\n    margin: 10px; }\n    .bm-node-popup-menu .popup-menu-item:hover {\n      color: orange; }\n    .bm-node-popup-menu .popup-menu-item .icon {\n      text-align: center; }\n    .bm-node-popup-menu .popup-menu-item .label {\n      font-size: 20%; }\n\n.fXedfB {\n  background: inherit; }\n",""])},function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getRef=function(e){return t[e]},t.saveRef=function(e){return function(n){n&&(t[e]=n,t.fireListener(e,n))}},t.observers=new Map,t.fireListener=function(e,n){if(t.observers.has(e))for(var o=0,r=t.observers.get(e);o<r.length;o++)(0,r[o])(e,n)},t.registerRefListener=function(e,n){t.observers.has(e)?t.observers.get(e).push(n):t.observers.set(e,[n])},t}return r(t,e),t.prototype.render=function(){return this.props.children(this.saveRef,this.getRef,this.registerRefListener.bind(this))},t}(n(0).Component);t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(6);t.MindDiagramModel=function(e,t){void 0===t&&(t={}),this.mindMapModel=e,this.config=Object.assign(o.defaultDiagramConfig,t),this.zoom=1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(17),r=n(12),i=n(8);t.convertMindMapModelToRaw=function(e){var t={};t.rootItemKey=e.getRootItemKey(),t.items=e.getItemMap();var n=e.getRootItem().getContent();return t.title="string"==typeof n?n:r.default.serialize(n),t},t.convertRawToMindMapModel=function(e){var t=new o.MindMapModel;return t=t.merge({rootItemKey:e.rootItemKey,editorRootItemKey:e.rootItemKey}),console.log("convertRawToMindMapModel"),t.withMutations(function(t){Object.keys(e.items).forEach(function(n){var o=e.items[n];t.update("itemMap",function(e){return e.set(o.key,i.MindNodeModel.createWith(o))})})})}}])},208:function(e,t,n){e.exports=n(682)},213:function(e,t,n){},668:function(e,t,n){},669:function(e,t,n){},680:function(e,t,n){},681:function(e,t,n){},682:function(e,t,n){"use strict";n.r(t);var o=n(5),r=n.n(o),i=n(72),a=n.n(i),c=(n(213),n(33)),s=n(34),l=n(36),u=n(35),p=n(37),d=n(12),f=n(205),g=n.n(f),m=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).onClick=function(){console.log("toolbar item click");var e=n.props,t=e.config,o=e.diagramState,r=e.onChange;t.opType?n.props.op(t.opType,null):t.clickHandler&&t.clickHandler(o,r)},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.config;return r.a.createElement("span",{className:g()("bm-toolbar-item","iconfont","bm-".concat(e.icon)),onClick:this.onClick})}}]),t}(r.a.Component),h=(n(668),n(669),function(e,t){var n=document.createElement("a");n.href=e,n.download=t,n.click()}),y=n(20),v=n.n(y);function _(e){return r.a.createElement("div",{className:"popup-content"},r.a.createElement("ul",{className:"popup-content-list"},r.a.createElement("li",{className:"popup-content-list-item",onClick:function(){var t=e.diagramState.mindMapModel,n=Object(d.convertMindMapModelToRaw)(t),o=JSON.stringify(n),r="data:text/plain,".concat(encodeURIComponent(o));h(r,"".concat(n.title,".json")),v.a.close()}},"JSON (.json)")))}function b(e){var t=e.diagramState,n=e.onChange;return r.a.createElement("div",{className:"popup-content"},r.a.createElement("div",null,"\u652f\u6301\u6253\u5f00\u4ee5\u4e0b\u683c\u5f0f\u7684\u6587\u4ef6"),r.a.createElement("ul",{className:"popup-content-list"},r.a.createElement("li",{className:"popup-content-list-item"},"JSON (.json)")),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){var e=document.createElement("input");e.type="file",e.accept=".json",e.addEventListener("change",function(e){var o=e.target.files[0],r=new FileReader;r.onload=function(e){var o=e.target.result,r=JSON.parse(o);console.log(r);var i=Object(d.convertRawToMindMapModel)(r),a=d.DiagramState.setMindMapModel(t,i);n(a)},r.readAsText(o)}),e.click(),v.a.close()}},"\u6253\u5f00\u6587\u4ef6"),r.a.createElement("button",null,"\u53d6\u6d88")))}var M=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).showPopupExport=function(e){console.log("showPopupExport"),v.a.registerPlugin("popupExport",function(){this.create({title:"\u8bf7\u9009\u62e9\u5bfc\u51fa\u683c\u5f0f",content:r.a.createElement(_,{diagramState:e})})}),v.a.plugins().popupExport()},n.showPopupOpenFile=function(e,t){v.a.registerPlugin("popupOpenFile",function(){this.create({title:"\u6253\u5f00\u6587\u4ef6",content:r.a.createElement(b,{diagramState:e,onChange:t})})}),v.a.plugins().popupOpenFile()},n.items=[{icon:"newfile",label:"new file"},{icon:"openfile",label:"open file",clickHandler:n.showPopupOpenFile},{icon:"export",label:"export file",clickHandler:n.showPopupExport},{icon:"undo",label:"undo",opType:d.OpType.UNDO},{icon:"redo",label:"redo",opType:d.OpType.REDO},{icon:"add-sibling",label:"add sibling",opType:d.OpType.ADD_SIBLING},{icon:"add-child",label:"add child",opType:d.OpType.ADD_CHILD},{icon:"delete-node",label:"delete node",opType:d.OpType.DELETE_NODE}],n.op=function(e,t,o){var r=n.props,i=r.diagramState;(0,r.onChange)(d.DiagramState.op(i,e,t,o))},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.diagramState,o=t.onChange,i=this.items.map(function(t){return r.a.createElement(m,{config:t,key:t.label,diagramState:n,onChange:o,op:e.op})});return r.a.createElement("div",null,r.a.createElement("div",{className:"bm-toolbar"},i))}}]),t}(r.a.Component),I=function(e){function t(e){var n;Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).onChange=function(e){console.log("onChange"),console.log(e.mindMapModel),n.setState({diagramState:e})};var o=d.MindMapModel.createWith({rootItemKey:"root",editorRootItemKey:"root",items:[{key:"root",content:"MainTopic",subItemKeys:["sub1","sub2"]},{key:"sub1",parentKey:"root",content:"SubTopic",subItemKeys:[],collapse:!0},{key:"sub2",parentKey:"root",content:"SubTopic",subItemKeys:[]}]}),r=d.DiagramState.createWith(o,{hMargin:10});return n.state={diagramState:r},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"mindmap"},r.a.createElement(M,{diagramState:this.state.diagramState,onChange:this.onChange}),r.a.createElement(d.DiagramWidget,{diagramState:this.state.diagramState,onChange:this.onChange}))}}]),t}(r.a.Component);n(680),n(681);var E=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(I,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(r.a.createElement(E,null),document.getElementById("root")),a.a.render(r.a.createElement(v.a,null),document.getElementById("popup")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[208,1,2]]]);
//# sourceMappingURL=main.f13e403b.chunk.js.map